function AudioPlayer(){let e=this;e.audioPlayer=null,e.playerSetPlaybackRate=function(a,n,r){e.audioPlayer.playbackRate=a.rate},e.playerPlay=function(){if(e.playPromise)return r().then((()=>{e.playPromise=e.audioPlayer.play()})).catch((e=>{}));e.playPromise=e.audioPlayer.play()},e.playerPause=function(){e.playPromise&&e.playPromise.then((()=>{e.audioPlayer.pause()})).catch((e=>{}))},e.playerSetSrc=function(a,n,r){return fetch(a.src).then((e=>{if(e.ok)return e.blob()})).then((a=>{if(!e.playPromise)return e.audioPlayer.src=window.URL.createObjectURL(a),r();e.playPromise.then((()=>(e.audioPlayer.src=window.URL.createObjectURL(a),r()))).catch((e=>{}))})).catch((e=>{}))},e.playerSetVolume=function(a,n,r){e.audioPlayer.volume=a.volume},e.playerLoad=function(a,n,r){e.playPromise?e.playPromise.then((()=>{e.audioPlayer.load(),r()})):(e.audioPlayer.load(),r())},e.playerClearPlay=r,e.playerAddEventListenerToPlayer=function(a,n,r){e.audioPlayer.onended=()=>{chrome.tabs.sendMessage(n.tab.id,{fn:"playerOnended"})},e.audioPlayer.onplay=()=>{chrome.tabs.sendMessage(n.tab.id,{fn:"playerOnplay"})},e.audioPlayer.onerror=()=>{chrome.tabs.sendMessage(n.tab.id,{fn:"playerOnerror",err:a.err})},e.audioPlayer.oncanplay=()=>{chrome.tabs.sendMessage(n.tab.id,{fn:"playerOncanplay"})}},e.hasAudioPlayer=function(e,a,n){n(!0)},e.removeAudioPlayer=function(e,a,n){window.close(),n(!0)},e.playPromise=null,e.isAsyncFunction=function(a){return e.asyncFunctions.includes(a)},e.asyncFunctions=["playerSetSrc","playerLoad","hasAudioPlayer","removeAudioPlayer"];let a=!1,n=new Audio("../assets/media/silence.mp3");new Promise((e=>n.oncanplay=e)).then((()=>{a=!0}));function r(){e.playPromise&&e.playPromise.then((()=>(e.audioPlayer.pause(),e.playPromise=null,Promise.resolve()))).catch((e=>{}))}e.audioPlayer=new Audio,chrome.runtime.onMessage.addListener((function(a,n,r){if(e[a.fn]&&(e[a.fn](a,n,r),e.isAsyncFunction(a.fn)))return!0})),window.addEventListener("DOMContentLoaded",(e=>{document.getElementById("nr-ext-go-back-btn").onclick=()=>{chrome.runtime.sendMessage({fn:"goToTabBeingRead"})}}))}const audioPlayer=new AudioPlayer;