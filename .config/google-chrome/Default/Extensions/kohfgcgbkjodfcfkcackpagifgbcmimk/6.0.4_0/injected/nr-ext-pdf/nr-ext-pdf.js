function NRExtPdf(){let e=this;if(e.frame=null,e.capsule=null,e.barDocument=null,e.hasPdfBar=!1,e.isAsyncFunction=function(t){return e.asyncFunctions.includes(t)},e.asyncFunctions=["getHasPdfBar"],e.getHasPdfBar=function(t,n,a){a(e.hasPdfBar)},e.injectPdfBar=function(n,a,r){if(!e.hasPdfBar)try{return new Promise((n=>{let a=document.createElement("iframe");e.frame=a,e.frame.id="nr-ext-pdf-bar-frame",e.frame.style.background="none",e.frame.style.backgroundColor="transparent",e.frame.style.overflow="hidden",e.frame.style.position="absolute",e.frame.style.margin=0,e.frame.style.width="100%",e.frame.style.height="100%",e.frame.style.background="transparent",e.frame.style.top=0,e.frame.style.right=0,e.frame.style.borderStyle="none",e.capsule=document.createElement("DIV"),e.capsule.style.display="none",e.capsule.style.zIndex="999999999",e.capsule.id="nr-ext-pdf-bar-capsule",e.capsule.style.width="50px",e.capsule.style.height="182px",e.capsule.style.top="70px",e.capsule.style.right="34px",e.capsule.style.position="fixed",e.capsule.appendChild(e.frame);const r=document.createElement("DIV");r.style.cursor="grab",r.style.margin=0,r.style.bottom="0px",r.style.left="0px",r.style.zIndex="2000",r.style.width="50px",r.style.height="48px",r.style.padding="6px 0 0 13px";r.innerHTML+='<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" id="ext-icon-drag"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>',r.style.background="transparent",r.style.position="absolute",r.style.display="none",e.dragHandle=r,e.capsule.appendChild(e.dragHandle),document.body.appendChild(e.capsule),e.frame.onload=async()=>{await async function(){await(n=null,a=chrome.runtime.getURL("injected/nr-ext-reading-bar/nr-ext-reading-bar.css"),new Promise(((t,r)=>{let s;if(!n){let e=a.match(/\.([^.]+)$/);e&&(n=e[1])}n||(n="js"),"css"===n?(s=document.createElement("link"),s.type="text/css",s.rel="stylesheet",s.href=a,e.barDocument.head.appendChild(s)):"js"===n&&(s=document.createElement("script"),s.type="text/javascript",s.src=a,e.barDocument.body.appendChild(s)),s&&(s.onload=()=>{t(a)},s.onerror=()=>{r(a)})})).catch((e=>{}))),chrome.runtime.sendMessage({fn:"getReadingBarSettings"},(function(e){let t=e.theme;"system"===t&&(t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$("#nr-ext-quick-start").attr("ext-theme",t)})),e.barDocument.getElementById("nr-ext-quick-start").style.display="flex";var n,a;const r=e.barDocument.getElementById("nr-ext-quick-bar");e.barDocument.getElementById("nr-ext-quick-play").onclick=()=>fetch(window.location.href).then((e=>{if(e.ok)return e.blob()})).then((e=>{if(e){const t=window.URL.createObjectURL(e),n=t.split("/");let a=n[n.length-1];"pdf"!==a.split(".").pop()&&(a+=".pdf"),chrome.runtime.sendMessage({fn:"setFile",url:t,fileName:a},(()=>{chrome.runtime.lastError}))}})).catch((e=>{}));e.barDocument.getElementById("nr-ext-quick-exit").onclick=()=>{r.style.display="none",e.capsule.style.width="100%",e.capsule.style.height="100%",e.capsule.style.top=0,e.capsule.style.right=0,s.style.display="flex"};const s=e.barDocument.getElementById("nr-ext-qcuik-start-exit-options");e.barDocument.getElementById("nr-ext-quick-exit-cancel").onclick=()=>{r.style.display="flex",e.capsule.style.width="70px",e.capsule.style.height="186px",e.capsule.style.top="70px",e.capsule.style.right="34px",s.style.display="none"};e.barDocument.getElementById("nr-ext-quick-start-exit-confirm").onclick=()=>{const n=$('input[name="quick-start-exit-options"]:checked',e.barDocument).val();"exit-once"===n?t():"exit-pdf"===n&&(t(),chrome.runtime.sendMessage({fn:"setReadingBarSetting",key:"isQuickStartPdf",value:!1},(()=>{chrome.runtime.lastError})))},e.hasPdfBar=!0,$("#nr-ext-quick-start").show(),$("#nr-ext-quick-backdrop",e.barDocument).css("top",7)}(),e.hasPdfBar=!0,e.capsule.style.display="block",e.dragHandle.style.display="none"},fetch(chrome.runtime.getURL("injected/nr-ext-pdf/nr-ext-pdf.html")).then((e=>e.text())).then((t=>{try{e.frame.contentDocument.write(t),e.barDocument=e.frame.contentDocument,e.frame.contentDocument.close()}catch(t){e.frame.contentDocument.close()}})).catch((e=>{})),n()}))}catch(e){}},"complete"===document.readyState){if("undefined"!=typeof readingBar)return void(nrExtPdfBar=null);e.injectPdfBar()}else document.onreadystatechange=function(){if("complete"===document.readyState){if("undefined"!=typeof readingBar)return void(nrExtPdfBar=null);e.injectPdfBar()}};function t(){document.getElementById("nr-ext-pdf-bar-capsule").remove()}chrome.runtime.onMessage.addListener((function(t,n,a){if(e[t.fn]&&(e[t.fn](t,n,a),e.isAsyncFunction(t.fn)))return!0}))}var nrExtPdfBar=nrExtPdfBar||new NRExtPdf;