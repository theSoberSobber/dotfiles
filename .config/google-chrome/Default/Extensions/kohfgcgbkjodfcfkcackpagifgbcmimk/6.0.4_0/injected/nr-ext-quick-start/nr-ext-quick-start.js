function NRQuickStart(){let e=this;if(e.capsule=null,e.frame=null,e.quickStartDocument=null,e.isInit=!1,e.docType=docType,e.injectQuickStart=function(){if(!e.isInit)try{return new Promise((r=>{let c=document.createElement("iframe");e.frame=c,e.frame.id="nr-ext-quick-start-frame",e.frame.style.background="none",e.frame.style.backgroundColor="transparent",e.frame.style.overflow="hidden",e.frame.style.position="absolute",e.frame.style.margin=0,e.frame.style.width="100%",e.frame.style.height="100%",e.frame.style.background="transparent",e.frame.style.top=0,e.frame.style.right=0,e.frame.style.borderStyle="none",e.capsule=document.createElement("DIV"),e.capsule.style.display="none",e.capsule.style.zIndex="999999999",e.capsule.id="nr-ext-quick-start-capsule",e.capsule.style.width="50px",e.capsule.style.height="182px",e.capsule.style.top="70px",e.capsule.style.right="34px",e.capsule.style.position="fixed",e.capsule.appendChild(e.frame);const i=document.createElement("DIV");i.style.cursor="grab",i.style.margin=0,i.style.bottom="0px",i.style.left="0px",i.style.zIndex="2000",i.style.width="50px",i.style.height="48px",i.style.padding="6px 0 0 13px";i.innerHTML+='<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" id="ext-icon-drag"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>',i.style.background="transparent",i.style.position="absolute",i.style.display="none",e.dragHandle=i,e.capsule.appendChild(e.dragHandle),document.body.appendChild(e.capsule),e.frame.onload=async()=>{await async function(){try{await(r=null,c=chrome.runtime.getURL("injected/nr-ext-reading-bar/nr-ext-reading-bar.css"),new Promise(((t,n)=>{let a;if(!r){let e=c.match(/\.([^.]+)$/);e&&(r=e[1])}r||(r="js"),"css"===r?(a=document.createElement("link"),a.type="text/css",a.rel="stylesheet",a.href=c,e.quickStartDocument.head.appendChild(a)):"js"===r&&(a=document.createElement("script"),a.type="text/javascript",a.src=c,e.quickStartDocument.body.appendChild(a)),a&&(a.onload=()=>{t(c)},a.onerror=()=>{n(c)})})).catch((e=>{}))),chrome.runtime.sendMessage({fn:"getReadingBarSettings"},(function(t){let n=t.theme;"system"===n&&(n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),"light"==n?(e.dragHandle.querySelector("#ext-icon-drag").style.fill="#67686b",e.dragHandle.querySelector("#ext-icon-drag").style.color="#67686b"):(e.dragHandle.querySelector("#ext-icon-drag").style.fill="#e0e6ef",e.dragHandle.querySelector("#ext-icon-drag").style.color="#e0e6ef"),e.quickStartDocument.getElementById("nr-ext-quick-start").setAttribute("ext-theme",n),e.quickStartDocument.body.style.margin="0px"}));const i={constrain:!1,handle:e.dragHandle,onMouseDown:t,onMouseUp:n,customMove:a};displace(e.capsule,i);const l=e.quickStartDocument.getElementById("nr-ext-quick-backdrop"),o=e.quickStartDocument.getElementById("nr-ext-quick-max"),d=e.quickStartDocument.getElementById("nr-ext-quick-exit"),u=e.quickStartDocument.getElementById("nr-ext-quick-play"),m=e.quickStartDocument.getElementById("nr-ext-quick-bar");m.onmouseenter=()=>{clearTimeout(e.hideTimer),e.showTimer=setTimeout((()=>{e.dragHandle.style.display="block"}),245)},m.onmouseleave=()=>{e.dragHandle.matches(":hover")||(clearTimeout(e.showTimer),e.dragHandle.style.display="none",l.classList.remove("stay-max"),o.parentElement.classList.remove("stay-max"),d.parentElement.classList.remove("stay-max"))},e.dragHandle.onmouseenter=e=>{l.classList.add("stay-max"),o.parentElement.classList.add("stay-max"),d.parentElement.classList.add("stay-max")},e.dragHandle.onmouseleave=()=>{e.hideTimer=setTimeout((()=>{m.matches(":hover")||(e.dragHandle.style.display="none",l.classList.remove("stay-max"),o.parentElement.classList.remove("stay-max"),d.parentElement.classList.remove("stay-max"))}),245)},u.onclick=()=>{chrome.runtime.sendMessage({message:"injectReadingBarAndRead"})},o.onclick=()=>{chrome.runtime.sendMessage({message:"injectReadingBar",docType:utils.docType})};const y=e.quickStartDocument.getElementById("nr-ext-qcuik-start-exit-options");d.onclick=()=>{m.style.display="none",e.capsule.style.width="100%",e.capsule.style.height="100%",e.capsule.style.top=0,e.capsule.style.right=0,y.style.display="flex"};e.quickStartDocument.getElementById("nr-ext-quick-exit-cancel").onclick=()=>{m.style.display="flex",e.capsule.style.width="70px",e.capsule.style.height="186px",e.capsule.style.top="70px",e.capsule.style.right="34px",y.style.display="none"};e.quickStartDocument.getElementById("nr-ext-quick-start-exit-confirm").onclick=()=>{const t=$('input[name="quick-start-exit-options"]:checked',e.quickStartDocument).val();"exit-once"===t?s():"exit-page"===t?(s(),chrome.runtime.sendMessage({fn:"addQuickStartBlackList"},(()=>{chrome.runtime.lastError}))):"exit-forever"===t&&(s(),chrome.runtime.sendMessage({fn:"setReadingBarSetting",key:"isQuickStartWebpage",value:!1},(()=>{chrome.runtime.lastError})),chrome.runtime.sendMessage({fn:"setReadingBarSetting",key:"isQuickStartGoogleDocs",value:!1},(()=>{chrome.runtime.lastError})))}}catch(e){}var r,c}(),e.isInit=!0,e.capsule.style.display="block",e.dragHandle.style.display="none"},fetch(chrome.runtime.getURL("injected/nr-ext-quick-start/nr-ext-quick-start.html")).then((e=>e.text())).then((t=>{try{e.frame.contentDocument.write(t),e.quickStartDocument=e.frame.contentDocument,e.frame.contentDocument.close()}catch(t){e.frame.contentDocument.close()}})).catch((e=>{})),r()}))}catch(e){}},displace=window.displacejs,e.getHasQuickStart=function(t,n,a){a(e.isInit)},e.asyncFunctions=["getHasQuickStart"],e.showTimer=null,e.hideTimer=null,"complete"===document.readyState){if("undefined"!=typeof readingBar)return void(nrQuickStart=null);e.injectQuickStart()}else document.onreadystatechange=function(){if("complete"===document.readyState){if("undefined"!=typeof readingBar)return void(nrQuickStart=null);e.injectQuickStart()}};function t(){document.body.style.pointerEvents="none"}function n(){document.body.style.pointerEvents="unset"}function a(t,n,a){const s=window.innerHeight,r=window.innerWidth,c=e.quickStartDocument.getElementById("nr-ext-quick-backdrop"),i=e.quickStartDocument.getElementById("nr-ext-quick-max"),l=e.quickStartDocument.getElementById("nr-ext-quick-exit");c.classList.add("stay-max"),i.parentElement.classList.add("stay-max"),l.parentElement.classList.add("stay-max"),e.dragHandle.style.display="block";let o=$(e.capsule).width();t.style.right=n>=0&&n+o<=r?r-(n+o)+"px":n<0?r-o+"px":"0px",a>=0&&a+100<=s?t.style.top=a+"px":a<0?t.style.top="0px":t.style.bottom=s+"px"}function s(){document.getElementById("nr-ext-quick-start-capsule").remove()}}var nrQuickStart=nrQuickStart||new NRQuickStart;