function NRExtSlider(){const e=document.getElementById("nr-ext-progress"),n=document.getElementById("nr-ext-progress-value-sender"),t=document.getElementById("nr-ext-progress-max-sender");document.getElementById("nr-ext-progress-text");let a={displayTexts:[],marks:[],readOption:"all",type:"sentence",max:0,min:0,curSenIdx:0,curPageIdx:-1},o=10;$(e).ionRangeSlider({skin:"round",type:"single",min:0,max:0,from:0,step:1,hide_min_max:!0,onFinish:function(e){r(e.from)}});const i=$(e).data("ionRangeSlider");function r(e){var t={sentenceIndex:0,pageIndex:-1,percentage:0,lastModified:"sentence",tag:"range-slider-init",value:e};if("sentence"===a.type)t.sentenceIndex=function(e){for(var n=0;n<a.marks.length;n++)if(e>=a.marks[n]){if(!(n+1<a.marks.length))return n;if(e<a.marks[n+1])return n}return 0}(e);else{var i=e/o,r=Math.floor(i),s=i-r;r==a.curPageIdx?(t.sentenceIndex=Math.floor(a.displayTexts.length*s),t.pageIndex=r,t.percentage=0,t.lastModified="sentence"):(t.pageIndex=r,t.percentage=s,t.lastModified="page")}$(n).val(JSON.stringify(t));const d=new Event("change");n.dispatchEvent(d)}$(n).on("change",(function(e){let t=0,o=JSON.parse(e.target.value);a.curSenIdx=o.sentenceIndex,a.curPageIdx=o.pageIndex,"range-slider-init"!==o.tag&&("sentence"===a.type?(t=a.curSenIdx,t=t<a.marks.length?a.marks[t]:a.marks[a.marks.length-1]):t=10*a.curPageIdx+Math.floor(a.curSenIdx/a.displayTexts.length*10),t>i.options.max?t=i.options.max:t<i.options.min&&(t=i.options.min),i.update({from:t}),o.value=t,$(n).val(JSON.stringify(o)))})),$(t).on("change",(function(e){if(e.target.value){var n=JSON.parse(e.target.value);a.displayTexts=n.texts,a.readOption=n.readOption,n.pageCount>1&&"selection"!=n.readOption?a.type="page":a.type="sentence","sentence"===a.type?a.max=function(e){var n=0;a.marks=[];for(var t=0;t<e.length;t++){a.marks.push(n),n+=e[t].processed.split(" ").length}return n}(n.texts)-1:a.max=function(e){a.marks=[];for(var n=e*o,t=0;t<e;t++)a.marks.push(t*o);return n}(n.pageCount)-1,i.update({max:a.max}),n.max=a.max,$(t).val(JSON.stringify(n))}}));const s=document.getElementById("nr-ext-speed"),d=document.getElementById("nr-ext-speed-slider-value-sender"),m=document.getElementById("nr-ext-speed-text"),l=document.getElementById("nr-ext-settings-speed"),g=document.getElementById("nr-ext-settings-speed-slider-value-sender"),c=document.getElementById("nr-ext-settings-speed-text"),u=document.getElementById("nr-ext-settings-speed-multiplication-factor"),p=document.getElementById("nr-ext-onboard-speed"),x=document.getElementById("nr-ext-onboard-speed-slider-value-sender"),f=document.getElementById("nr-ext-onboard-speed-text"),v=document.getElementById("nr-ext-volume"),h=document.getElementById("nr-ext-volume-slider-value-sender"),y=document.getElementById("nr-ext-volume-text");$(s).ionRangeSlider({skin:"round",type:"single",min:50,max:540,from:180,step:5,hide_min_max:!0,onChange:function(e){N(e.from)},onFinish:function(e){$(d).val(e.from);const n=new Event("change");d.dispatchEvent(n)}});const E=$(s).data("ionRangeSlider");$(l).ionRangeSlider({skin:"round",type:"single",min:50,max:540,from:180,step:5,hide_min_max:!0,onChange:function(e){console.log("settingsSpeedSlider onchange",e.from),N(e.from)},onFinish:function(e){$(g).val(e.from);const n=new Event("change");g.dispatchEvent(n)}});const I=$(l).data("ionRangeSlider");$(p).ionRangeSlider({skin:"round",type:"single",min:50,max:540,from:180,step:5,hide_min_max:!0,onChange:function(e){N(e.from)},onFinish:function(e){$(x).val(e.from);const n=new Event("change");x.dispatchEvent(n)}});const S=$(p).data("ionRangeSlider");$(v).ionRangeSlider({skin:"round",type:"single",min:.2,max:1,from:.75,step:.01,hide_min_max:!0,onChange:function(e){k(e.from)},onFinish:function(e){$(h).val(e.from);const n=new Event("change");h.dispatchEvent(n)}});const B=$(v).data("ionRangeSlider");function k(e){const n=Math.round(100*e)+"%";$(y).text(n)}function N(e){$(m).text(e),$(c).text(e),f&&$(f).text(e);const n=function(e){let n=Math.round(e/180*100)/100;"00"==n.toString().split(".")[1]&&(n=Math.round(n));return n}(e);$(u).text(n)}$(d).on("change",(function(e){let n=0;isNaN(e.target.value)||(n=e.target.value),n>E.options.max?n=E.options.max:n<E.options.min&&(n=E.options.min),E.update({from:n}),N(n)})),$(g).on("change",(function(e){let n=0;isNaN(e.target.value)||(n=e.target.value),n>I.options.max?n=I.options.max:n<I.options.min&&(n=I.options.min),I.update({from:n}),N(n)})),$(x).on("change",(function(e){let n=0;isNaN(e.target.value)||(n=e.target.value),n>S.options.max?n=S.options.max:n<S.options.min&&(n=S.options.min),S.update({from:n}),N(n)})),$(h).on("change",(function(e){let n=0;isNaN(e.target.value)||(n=e.target.value),n>B.options.max?n=B.options.max:n<B.options.min&&(n=B.options.min),B.update({from:n}),k(n)}));const R=document.getElementById("nr-ext-immersive-textsize"),_=document.getElementById("nr-ext-immersive-textsize-value-sender"),O=document.getElementById("nr-ext-immersive-text");$(R).ionRangeSlider({skin:"round",type:"single",min:.75,max:2,from:1,step:.25,hide_min_max:!0,onChange:function(e){const n=e.from+"";var t;n!=$(O).attr("text-scale")&&(t=n,$(O).attr("text-scale",t))},onFinish:function(e){$(_).val(JSON.stringify(e.from));const n=new Event("change");_.dispatchEvent(n)}}),$(_).on("change",(function(e){let n=1;isNaN(e.target.value)||(n=e.target.value),$(R).data("ionRangeSlider").update({from:n})})),window.onmessage=function(e){if("update"==e.fn){let n=null;"settingsSpeedRange"===e.target?n=I:"speedRange"===e.target&&(n=E),null!=n&&n.update({from:e.value})}}}var nrExtSlider=nrExtSlider||new NRExtSlider;