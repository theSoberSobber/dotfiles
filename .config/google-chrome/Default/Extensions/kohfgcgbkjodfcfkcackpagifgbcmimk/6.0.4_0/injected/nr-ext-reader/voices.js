function Voices(){let e=this;function a(e,a){return e+" "+a}function n(e){switch(e.language){case"en-US":return"Gale";case"en-GB":if("Google UK English Male"===e.name)return"Gabriel";if("Google UK English Female"===e.name)return"Grace";case"es-ES":return"Anna";case"es-US":return"Mariana";case"it-IT":return"Sofia";case"nl-NL":return"Margreet";case"fr-FR":return"Sophia";case"pt-BR":return"Carolina";case"de-DE":return"Mia";default:return e.name}}function s(e,a){return"acapela"===a&&(e=e.split(" ")[0]),"Aaron"==(e="native"==e?"Native":(e=e.split("-")[0]).replace("Microsoft",""))&&(e="Mia"),"Marie"==e&&(e="Louis"),e}function i(e,a){return"native"==a||"Android"==a||e.indexOf("en-US")>=0||e.indexOf("en_US")>=0?"en-US":e.indexOf("en-UK")>=0||e.indexOf("en_UK")>=0?"en-UK":e.indexOf("en-GB")>=0||e.indexOf("en_GB")>=0?"en-GB":e.indexOf("de-DE")>=0||e.indexOf("de_DE")>=0?"de-DE":e.indexOf("fr-FR")>=0||e.indexOf("fr_FR")>=0?"fr-FR":e.indexOf("it-IT")>=0||e.indexOf("it_IT")>=0?"it-IT":e.indexOf("sv-SE")>=0||e.indexOf("sv_SE")>=0?"sv-SE":e.indexOf("fr-CA")>=0||e.indexOf("fr_CA")>=0?"fr-CA":e.indexOf("es-ES")>=0||e.indexOf("es_ES")>=0?"es-ES":e.indexOf("es-MX")>=0||e.indexOf("es-MX")>=0?"es-MX":e.indexOf("es-CA")>=0||e.indexOf("es-CA")>=0?"es-CA":e.indexOf("pt-PT")>=0||e.indexOf("pt_PT")>=0?"pt-PT":e.indexOf("fr-CA")>=0||e.indexOf("fr_CA")>=0?"fr-CA":e.indexOf("es-US")>=0||e.indexOf("es_US")>=0?"es-US":e.indexOf("pt-BR")>=0||e.indexOf("pt_BR")>=0?"pt-BR":e.indexOf("nl-NL")>=0||e.indexOf("nl_NL")>=0?"nl-NL":""}function r(a){return(a.name||a.voiceName).toLowerCase().indexOf("google")>=0?"google":(a.name||a.voiceName).toLowerCase().indexOf("acapela")>=0?"acapela":(a.name||a.voiceName).toLowerCase().indexOf("att")>=0?"att":(a.name||a.voiceName).toLowerCase().indexOf("natural")>=0?"natural":a.voiceURI&&a.voiceURI.toLowerCase().indexOf("com.apple")>=0?(a.name||a.voiceName).toLowerCase().indexOf("samantha")>=0||(a.name||a.voiceName).toLowerCase().indexOf("daniel")>=0||(a.name||a.voiceName).toLowerCase().indexOf("monica")>=0||(a.name||a.voiceName).toLowerCase().indexOf("joana")>=0||(a.name||a.voiceName).toLowerCase().indexOf("luciana")>=0||(a.name||a.voiceName).toLowerCase().indexOf("alva")>=0||e.appleLangs.includes(a.lang)?"apple":(e.appleLangs.push(a.lang),"free"):"free"}function t(n,s,i,r,t){if(e.supportedLang.prem.add(s),"google"===i){let o=e.voices.free[a(n,s)];o&&"google"===o.source&&(e.voices.prem[a(n,s)]={key:a(n,s),name:n,language:s,source:i,id:r,ready:t,type:"prem"})}else e.voices.prem[a(n,s)]={key:a(n,s),name:n,language:s,source:i,id:r,ready:t,type:"prem"}}function o(n,s,i,r,t,o=!1,c=!1){e.supportedLang.plus.add(s),e.voices.plus[a(n,s)]={key:a(n,s),name:n,language:s,source:i,id:r,ready:t,type:"plus",isLegacy:o,noAuth:c}}function c(a,n){let s=f(n),i={};return a.forEach((function(a){if(a.language){let r=f(a.language);r.lang==s.lang&&(e.preferredVoicesByLang[a.type][n]===a.key&&(i.first=i.first||a),r.rest==s.rest?("en"!=s.lang||s.rest)&&("female"==a.gender?i.first=i.first||a:i.second=i.second||a):r.rest||"en"==s.lang?i.fourth=i.fourth||a:i.third=i.third||a)}})),i.first||i.second||i.third||i.fourth}function l(){return Object.values(e.voices.free).forEach((e=>{let a=f(e.language);if("en"==a.lang&&"us"==a.rest&&!e.isPrem)return e})),null}function f(e){let a=e.toLowerCase().replace(/_/g,"-").split(/-/,2);return{lang:a[0],rest:a[1]}}e.voices={free:{},prem:{},plus:{},all:{}},e.supportedLang={free:new Set,prem:new Set,plus:new Set},e.preferredVoicesByLang={free:{},prem:{},plus:{}},e.defaultFreeVoice="",e.defaultPremVoice="",e.defaultPlusVoice="",e.isSettingVoices=!0,e.getIsSettingVoices=function(a,n,s){s(e.isSettingVoices)},e.getDefaultVoice=function(a){let n="";switch(a){case"free":n=e.defaultFreeVoice;break;case"prem":n=e.defaultPremVoice;break;case"plus":n=e.defaultPlusVoice}return n},e.getVoices=function(a){return e.voices[a]},e.getVoice=function(a,n){return e.voices[a][n]},e.autoSelectVoice=function(a="en",n=""){readingBar.settings.prevVoiceTypeBeforeAutoSelectsFree&&(readingBar.setReadingBarSetting("voiceType",readingBar.settings.prevVoiceTypeBeforeAutoSelectsFree),readingBar.updateVoice(),readingBar.setReadingBarSetting("prevVoiceTypeBeforeAutoSelectsFree",""));let s=f(a),i=f(n?e.voices[n][readingBar.settings[n+"Voice"]].language:e.voices[readingBar.settings.voiceType][readingBar.settings[readingBar.settings.voiceType+"Voice"]].language);if(s.lang==i.lang&&(s.rest===i.rest||"en"==s.lang&&(!s.rest||e.supportedLang[readingBar.settings.voiceType].has(a))&&"en"==i.lang&&"us"==i.rest))return;if(a){n||(n=function(a){const n=f(a).lang,s=e.preferredVoicesByLang.free[n],i=e.preferredVoicesByLang.prem[n];return e.preferredVoicesByLang.plus[n]?"plus":i?"prem":s?"free":null}(a)),n||(n=readingBar.settings.voiceType);let s=c(Object.values(e.voices[n]),a);if(s||"free"!==readingBar.settings.voiceType||(s=l()),s)n!=readingBar.settings.voice&&readingBar.setReadingBarSetting("voiceType",n),readingBar.setReadingBarSetting(n+"Voice",s.key,{isAutoSelected:!0}),readingBar.updateVoice();else{readingBar.setReadingBarSetting("prevVoiceTypeBeforeAutoSelectsFree",readingBar.settings.voiceType);let n=c(Object.values(e.voices.free),a);n||(n=l()),n&&(readingBar.setReadingBarSetting("freeVoice",n.key,{isAutoSelected:!0}),readingBar.setReadingBarSetting("voiceType","free"),readingBar.updateVoice())}}},e.rememberPreferredVoiceByLang=function(a,n){try{let s=f(n.split(" ")[1]);e.preferredVoicesByLang[a][s.lang]=n;const i={free:"free",prem:"prem",plus:"plus"};delete i[a],Object.keys(i).forEach((a=>{delete e.preferredVoicesByLang[a][s.lang]})),readingBar.setReadingBarSetting("preferredVoicesByLang",e.preferredVoicesByLang)}catch(e){}},e.isAsyncFunction=function(a){return e.asyncFunctions.includes(a)},e.asyncFunctions=["getDefaultVoice","getVoices","getIsSettingVoices","getVoice","autoSelectVoice"],chrome.runtime.onMessage.addListener((function(e,a,n){if(e.fn in voices&&(voices[e.fn](e,a,n),voices.isAsyncFunction(e.fn)))return!0})),new Promise((function(e){let a,n=window.speechSynthesis;a=setInterval((()=>{let s=n.getVoices();0!==s.length&&(e(s),clearInterval(a))}),100),setTimeout((()=>{clearInterval(a),e([])}),1e4)})).then((function(e){return e})).catch((e=>{})).then((n=>new Promise(((t,o)=>{n||o(new Error("ERR_NO_FREE_VOICES"));let c=[];for(let t=0;t<n.length;t++)try{let o=n[t],l=r(o),f=s(o.name||o.voiceName,l),g=o.lang,d=!1;try{g=i(g,f)}catch(e){g=""}if(""===g)g=o.lang,d=!0;else if("google"===l){let e={key:a(f,g),name:f,language:g,source:l,voice:o,isOther:d,isPrem:!0,type:"free"};c.push(e)}let u={key:a(f,g),name:f,language:g,source:l,voice:o,isOther:d,type:"free"};0===t&&(e.defaultFreeVoice=f),c.push(u)}catch(e){}t(c)})))).then((e=>function(e){return new Promise(((a,n)=>{e.sort(((e,a)=>{function n(e){return(e=(e+="").toLowerCase()).toLowerCase().includes("google")?1:"alex"==e?2:"samantha"==e?3:"tom"==e?4:"daniel"==e?5:"serena"==e?6:999}function s(e){return"en-US"==e?1:"en-UK"==e?2:"en-GB"==e?3:"es-ES"==e?4:"es-MX"==e?5:"es-CA"==e?6:"es-US"==e?7:"fr-FR"==e?8:"fr-CA"==e?9:"de-DE"==e?10:"it-IT"==e?11:"pt-PT"==e?12:"pt-BR"==e?13:"sv-SE"==e?14:"nl-NL"==e?15:999}var i=s(e.language),r=s(a.language);let t=e.isOther?999:0,o=a.isOther?999:0;return t<o?-1:t>o?1:i<r?-1:i>r?1:n(e.name)<n(a.name)?-1:n(e.name)>n(a.name)?1:0})),a(e)})).catch((function(e){}))}(e))).then((s=>{for(let i=0;i<s.length;i++){let r="google"===s[i].source&&s[i].isPrem?n(s[i]):s[i].name;e.voices.free[a(r,s[i].language)]=s[i],e.supportedLang.free.add(s[i].language)}})).catch((function(e){chrome.runtime.sendMessage({fn:"displayAlertMessage",message:"ERR_NO_FREE_VOICES"})})).then((()=>new Promise((a=>{o("Davis","en-US","ms","65","1"),o("Jane","en-US","ms","66","1"),o("Tony","en-US","ms","73","1"),o("Sara","en-US","ms","63","1"),o("Eric","en-US","ms","62","1"),o("Nancy","en-US","ms","67","1"),o("Steffan","en-US","ms","74","1"),o("Jason","en-US","ms","72","1"),o("Ana (Child)","en-US","ms","8","1"),o("Brandon","en-US","ms","64","1"),o("Elizabeth","en-US","ms","4","1"),o("Guy","en-US","ms","5","1"),o("Michelle","en-US","ms","6","1"),o("Liam","en-US","ms","7","1"),o("Salli","en-US","aws","3","1"),o("Sonia","en-GB","ms","9","1"),o("Ryan","en-GB","ms","12","1"),o("Libby","en-GB","ms","13","1"),o("Bella","en-GB","ms","68","1"),o("Oliver","en-GB","ms","69","1"),o("Maisie (Child)","en-GB","ms","75","1"),o("Brian","en-GB","aws","6","1"),o("Emma","en-GB","aws","7","1"),o("William","en-AU","ms","16","1"),o("Natasha","en-AU","ms","17","1"),o("Russell","en-AU","aws","9","1"),o("Nicole","en-AU","aws","10","1"),o("Neerja","en-IN","ms","14","1"),o("Prabhat","en-IN","ms","15","1"),o("Raveena","en-IN","aws","12","1"),o("Aditi","en-IN","aws","13","1"),o("Geraint","en-CY","aws","11","1"),o("Alvaro","es-ES","ms","49","1"),o("Elvira","es-ES","ms","50","1"),o("Enrique","es-CA","aws","42","1"),o("Conchita","es-CA","aws","43","1"),o("Alonso","es-US","ms","51","1"),o("Paloma","es-US","ms","52","1"),o("Miguel","es-US","aws","41","1"),o("Penélope","es-US","aws","40","1"),o("Henri","fr-FR","ms","26","1"),o("Denise","fr-FR","ms","27","1"),o("Mathieu","fr-FR","aws","37","1"),o("Céline","fr-FR","aws","38","1"),o("Eloise (Child)","fr-FR","ms","70","1"),o("Brigitte","fr-FR","ms","71","1"),o("Antoine","fr-CA","ms","23","1"),o("Sylvie","fr-CA","ms","24","1"),o("Jean","fr-CA","ms","25","1"),o("Chantal","fr-CA","aws","39","1"),o("Duarte","pt-PT","ms","36","1"),o("Fernanda","pt-PT","ms","37","1"),o("Raquel","pt-PT","ms","38","1"),o("Cristiano","pt-PT","aws","20","1"),o("Inês","pt-PT","aws","19","1"),o("Antonio","pt-BR","ms","39","1"),o("Francisca","pt-BR","ms","40","1"),o("Ricardo","pt-BR","aws","22","1"),o("Vitória","pt-BR","aws","21","1"),o("Conrad","de-DE","ms","28","1"),o("Katja","de-DE","ms","29","1"),o("Hans","de-DE","aws","46","1"),o("Vicki","de-DE","aws","44","1"),o("Diego","it-IT","ms","30","1"),o("Isabella","it-IT","ms","31","1"),o("Elsa","it-IT","ms","32","1"),o("Giorgio","it-IT","aws","33","1"),o("Carla","it-IT","aws","34","1"),o("Colette","nl-NL","ms","20","1"),o("Maarten","nl-NL","ms","21","1"),o("Fenna","nl-NL","ms","22","1"),o("Ruben","nl-NL","aws","27","1"),o("Lotte","nl-NL","aws","28","1"),o("Mattias","sv-SE","ms","53","1"),o("Sofie","sv-SE","ms","54","1"),o("Hillevi","sv-SE","ms","55","1"),o("Astrid","sv-SE","aws","15","1"),o("Christel","da-DK","ms","18","1"),o("Jeppe","da-DK","ms","19","1"),o("Naja","da-DK","aws","47","1"),o("Mads","da-DK","aws","48","1"),o("Karl","is-IS","aws","35","1"),o("Dóra","is-IS","aws","36","1"),o("Finn","nb-NO","ms","41","1"),o("Pernille","nb-NO","ms","42","1"),o("Iselin","nb-NO","ms","43","1"),o("Liv","no-NO","aws","29","1"),o("Marek","pl-PL","ms","33","1"),o("Agnieszka","pl-PL","ms","34","1"),o("Zofia","pl-PL","ms","35","1"),o("Maja","pl-PL","aws","23","1"),o("Jan","pl-PL","aws","24","1"),o("Emil","ro-RO","ms","44","1"),o("Alina","ro-RO","ms","45","1"),o("Carmen","ro-RO","aws","18","1"),o("Ahmet","tr-TR","ms","56","1"),o("Emel","tr-TR","ms","57","1"),o("Filiz","tr-TR","aws","14","1"),o("Aled","cy-GB","ms","58","1"),o("Nia","cy-GB","ms","59","1"),o("Gwyneth","cy-GB","aws","49","1"),o("Matthew","en-US","aws","0","1",!0),o("Joanna","en-US","aws","1","1",!0),o("Jessa","en-US","ms","1","1",!0),o("Joey","en-US","aws","2","1",!0),o("Kimberly","en-US","aws","4","1",!0),o("Kendra","en-US","aws","5","1",!0),o("Amy","en-GB","aws","8","1",!0),o("Marlene","de-DE","aws","45","1",!0),o("Jacek","pl-PL","aws","25","1",!0),o("Ewa","pl-PL","aws","26","1",!0),o("Maxim","ru-RU","aws","17","1",!0),o("Tatyana","ru-RU","aws","16","1",!0),new Promise((e=>{t("Sharon","en-US","aca","21","1"),t("Ryan","en-US","aca","12","1"),t("Heather","en-US","aca","5","1"),t("Will","en-US","aca","26","1"),t("Gale","en-US","google","-1","1"),t("Rod","en-US","aca","20","1"),t("Karen","en-US","aca","27","1"),t("Tracy","en-US","aca","16","1"),t("Mike","en-US","att","1","1"),t("Laura","en-US","aca","8","1"),t("Rachel","en-GB","aca","11","1"),t("Peter","en-GB","aca","10","1"),t("Lucy","en-GB","aca","9","1"),t("Gabriel","en-GB","google","-1","1"),t("Grace","en-GB","google","-1","1"),t("Charles","en-GB","att","2","1"),t("Audrey","en-GB","att","3","1"),t("Graham","en-GB","aca","4","1"),t("Tyler","en-AU","aca","28","1"),t("Lisa","en-AU","aca","29","1"),t("Anna","es-ES","google","-1","1"),t("Rosa","es-ES","att","20","1"),t("Alberto","es-ES","att","19","1"),t("Ines","es-ES","aca","30","1"),t("Maria","es-ES","aca","31","1"),t("Rodrigo","es-US","aca","32","1"),t("Lucia","es-US","aca","33","1"),t("Mariana","es-US","google","-1","1"),t("Sophia","fr-FR","google","-1","1"),t("Alain","fr-FR","att","7","1"),t("Juliette","fr-FR","att","8","1"),t("Bruno","fr-FR","aca","1","1"),t("Alice","fr-FR","aca","0","1"),t("Louise","fr-CA","aca","22","1"),t("Celia","pt-PT","aca","23","1"),t("Carolina","pt-BR","google","-1","1"),t("Marcia","pt-BR","aca","34","1"),t("Mia","de-DE","google","-1","1"),t("Reiner","de-DE","att","5","1"),t("Klara","de-DE","att","6","1"),t("Klaus","de-DE","aca","7","1"),t("Sarah","de-DE","aca","14","1"),t("Claudia","de-DE","aca","35","1"),t("Andreas","de-DE","aca","36","1"),t("Sofia","it-IT","google","-1","1"),t("Vittorio","it-IT","aca","15","1"),t("Chiara","it-IT","aca","2","1"),t("Fabiana","it-IT","aca","37","1"),t("Margreet","nl-NL","google","-1","1"),t("Jasmijn","nl-NL","aca","38","1"),t("Daan","nl-NL","aca","39","1"),t("Emma","sv-SE","aca","24","1"),t("Erik","sv-SE","aca","25","1"),t("Elin","sv-SE","aca","40","1"),t("Emil","sv-SE","aca","41","1"),e()})).catch((e=>{}));let n=Object.assign({},e.voices.free);for(let e of Object.keys(n))n[e].isPrem&&delete n[e];e.voices.all=Object.assign({},e.voices.prem,e.voices.plus,n),a()})))).then((()=>new Promise((a=>{Object.values(e.voices.free).length>0&&(e.defaultFreeVoice=Object.values(e.voices.free)[0].key),e.defaultPremVoice=Object.keys(e.voices.prem)[0],e.defaultPlusVoice=Object.keys(e.voices.plus)[0],a()})))).then((()=>{e.isSettingVoices=!1,"undefined"!=typeof readingBar&&readingBar.voicesOnLoad()})).catch((e=>{}))}var voices=voices||new Voices;