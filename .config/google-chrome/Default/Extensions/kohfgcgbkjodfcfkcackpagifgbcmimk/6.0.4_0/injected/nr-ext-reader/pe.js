function Pe(){let e=this;function t(t,s,a){if(e.peList=t.peList?t.peList:[],e.peMap=t.peList?t.peList.reduce(((e,t)=>(e.set(t.source,t.replace),e)),new Map):new Map,e.lastUpdated=t.lastUpdated,ttsText.textsForTts)for(let e=0;e<ttsText.textsForTts.length;e++)ttsText.textsForTts[e].processed=ttsText.processText(ttsText.textsForTts[e].original);"undefined"!=typeof reader&&reader.tts&&reader.tts.clearPreloads&&reader.tts.clearPreloads()}e.setPeAndTts=t,e.peList=[],e.peMap=new Map,e.lastUpdated=null,e.asyncFunctions=[],browser.runtime.onMessage.addListener((function(s,a,n){if(e[s.fn]){if(e[s.fn](s,a,n),r=s.fn,e.asyncFunctions.includes(r))return!0}else"tabOnActivated"!==s.message&&"injectReadingBar"!==s.message||chrome.runtime.sendMessage({fn:"getPeLastUpdated"},(function(s){chrome.runtime.lastError,s!==e.lastUpdated&&chrome.runtime.sendMessage({fn:"getLastestPe"},(function(e){t({peList:e.peList,lastUpdated:e.lastUpdated})}))}));var r}))}var pe=pe||new Pe;