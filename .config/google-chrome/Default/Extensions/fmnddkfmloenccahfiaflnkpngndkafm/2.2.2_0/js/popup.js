(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _lodash=_interopRequireDefault(require("lodash")),_es6Promise=require("es6-promise"),_deepDiff=require("deep-diff"),_Axios=_interopRequireDefault(require("./Axios")),_Config=_interopRequireDefault(require("./Config"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var APIStorage={_storageToken:null,_storageTokenQueryString:"",_defaultAPIStorageDone:function(e){return function(t){e(t.data,t)}},_defaultAPIStorageFail:function(e){return function(t){console.error(t.stack);var a=_lodash.default.get(t,"response.data");e(a,{success:!1,messages:["An unexpected error occurred. Check your internet connection"],response:a})}},_defaultAPIStorageThen:function(e){if(e&&e.success)return e.data;throw new Error(e.messages?e.messages.join("; "):"An unexpected error occurred. Check your internet connection")},_defaultAPIStorageThenWithData:function(e){return e},_defaultPromiseOrCallback:function(e,t,a){return t?(e.then(APIStorage._defaultAPIStorageDone(t)).catch(APIStorage._defaultAPIStorageFail(t)),null):e.then(a?APIStorage._defaultAPIStorageThenWithData:APIStorage._defaultAPIStorageThen)},_prepareAPIElement:function(e){var t=_lodash.default.cloneDeep(e);return t.graph&&_lodash.default.forEach(t.graph.vertices,function(e){e.data=e.data?_lodash.default.pick(e.data,["username","repository","name","version"]):null}),t},useToken:function(e){APIStorage._storageToken=e,APIStorage._storageTokenQueryString="token=".concat(e)},set:function(e,t){var a=e.username,o=e.repository,n=e.name,r=e.version||"0.0.0";return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/").concat(a,"/").concat(o,"/").concat(n,"/").concat(r,"?").concat(APIStorage._storageTokenQueryString),method:"post",data:{apiElement:APIStorage._prepareAPIElement(e),orig:t&&_lodash.default.pick(t,["username","repository","name"])},withCredentials:!0})},setWithDiff:function(e,t){if(!e||e.username!==t.username||e.repository!==t.repository||e.name!==t.name||e.version!==t.version)return APIStorage.set(t,e);var a=t.username,o=t.repository,n=t.name,r=t.version||"0.0.0",i=(0,_deepDiff.diff)(e,t);return _lodash.default.isEmpty(i)&&(i=[]),(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/").concat(a,"/").concat(o,"/").concat(n,"/").concat(r,"?").concat(APIStorage._storageTokenQueryString),method:"POST",data:{diff:i},withCredentials:!0})},alias:function(e,t){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/alias/").concat([e.username,e.repository,e.name,t.repository,t.name].join("/"),"?").concat(APIStorage._storageTokenQueryString),method:"post",withCredentials:!0})},rename:function(e,t,a){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/").concat(e,"/").concat(t,"/rename?").concat(APIStorage._storageTokenQueryString),method:"post",data:{apiElement:APIStorage._prepareAPIElement(a)},contentType:"application/json; charset=utf-8",withCredentials:!0})},apiElementCache:{},getCached:function(e,t,a,o){var n=JSON.stringify([e,t,a,o]),r=this.apiElementCache;return r[n]?_es6Promise.Promise.resolve(this.apiElementCache[n]):this.get(e,t,a,o).then(function(e){return r[n]=e,e})},get:function(e,t,a,o,n,r){o=o||"0.0.0";var i=(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/").concat(e,"/").concat(t,"/").concat(a,"/").concat(o,"?").concat(APIStorage._storageTokenQueryString).concat(n?"&includeVersions=true":""),method:"get",withCredentials:!0});return APIStorage._defaultPromiseOrCallback(i,r,!0)},getById:function(e,t){var a=(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/id/").concat(e).concat(APIStorage._storageTokenQueryString),method:"get",withCredentials:!0});return APIStorage._defaultPromiseOrCallback(a,t)},getAll:function(e){var t=(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api?").concat(APIStorage._storageTokenQueryString),method:"get",withCredentials:!0});return APIStorage._defaultPromiseOrCallback(t,e)},getVersions:function(e,t,a,o){var n=(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/").concat(e,"/").concat(t,"/").concat(a,"/versions"),method:"get",withCredentials:!0});return o?(n.then(function(e){o(e.versions,e)}).catch(function(e){o(null,e)}),null):n.then(APIStorage._defaultAPIStorageThen)},remove:function(e,t,a,o){var n=(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/").concat(e,"/").concat(t,"/").concat(a,"?").concat(APIStorage._storageTokenQueryString),method:"DELETE",withCredentials:!0});return o&&n.then(o),n},getType:function(e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/type"),params:{username:e.username,repository:e.repository,name:e.name}})},addCapture:function(e,t,a,o){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/").concat(e,"/").concat(t,"/").concat(a,"/addCapture?").concat(APIStorage._storageTokenQueryString),method:"post",data:{capture:o}})},getResponseTestCases:function(e){var t=e.username,a=e.repository,o=e.name;return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/testCase/").concat(t,"/").concat(a,"/").concat(o,"?").concat(APIStorage._storageTokenQueryString),method:"post",data:{output:e.output}})},getResponseTestCase:function(e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/testCase/").concat(e,"?").concat(APIStorage._storageTokenQueryString),method:"get"})},deleteResponseTestCases:function(e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/testCase/delete?").concat(APIStorage._storageTokenQueryString),method:"post",data:{ids:e}})}},_default=APIStorage;exports.default=_default;
},{"./Axios":3,"./Config":6,"deep-diff":"deep-diff","es6-promise":"es6-promise","lodash":"lodash"}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setTutorialCompleted=setTutorialCompleted,exports.getInvites=getInvites,exports.invite=invite,exports.deleteInvite=deleteInvite,exports.getOrganizationUsers=getOrganizationUsers,exports.removeUserFromOrganization=removeUserFromOrganization,exports.getPaymentMethod=getPaymentMethod,exports.setPaymentMethod=setPaymentMethod,exports.default=exports.UserRoles=exports.changePassword=exports.resetPassword=exports.isValidPasswordResetToken=exports.activate=exports.startResetPassword=exports.setTutorialStep=exports.register=exports.logout=exports.isLoggedIn=exports.login=void 0;var _Axios=_interopRequireDefault(require("./Axios")),_Config=_interopRequireDefault(require("./Config")),_Utility=_interopRequireDefault(require("./Utility")),_Token=_interopRequireDefault(require("./Token"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function ownKeys(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)}return o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach(function(e){_defineProperty(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function _defineProperty(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var login=function(t,e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/login"),method:"post",data:{email:t,password:e},withCredentials:!0}).catch(function(t){throw _Utility.default.getDefaultError(t)})};exports.login=login;var isLoggedIn=function(t){var e=t?"?token=".concat(t):"";return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/isLoggedin").concat(e)}).catch(function(t){throw _Utility.default.getDefaultError(t)})};exports.isLoggedIn=isLoggedIn;var logout=function(t){var e=t?"?token=".concat(t):"";return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/logout").concat(e),method:"post"}).catch(function(t){throw _Utility.default.getDefaultError(t)})};exports.logout=logout;var register=function(t,e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/register"),data:_objectSpread({},t,{inviteKey:e}),method:"post"}).catch(function(t){throw _Utility.default.getDefaultError(t)})};exports.register=register;var setTutorialStep=function(t,e){(e?Promise.resolve(e):_Token.default.get()).then(function(e){var o=e?"?token=".concat(e):"";return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/tutorialStep").concat(o),data:{step:t},method:"post"})}).catch(function(t){throw _Utility.default.getDefaultError(t)})};function setTutorialCompleted(t,e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/tutorialCompleted"),data:{tutorial:t,completed:e},method:"post"})}exports.setTutorialStep=setTutorialStep;var startResetPassword=function(t,e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/startResetPassword"),data:{username:t,email:e},method:"post"}).catch(function(t){throw _Utility.default.getDefaultError(t)})};exports.startResetPassword=startResetPassword;var activate=function(t,e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/activate/").concat(t,"/").concat(e),method:"post"})};exports.activate=activate;var isValidPasswordResetToken=function(t){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/isValidPasswordResetToken"),method:"get",params:{token:t}})};exports.isValidPasswordResetToken=isValidPasswordResetToken;var resetPassword=function(t,e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/resetPassword"),method:"post",data:{token:t,password:e}})};exports.resetPassword=resetPassword;var changePassword=function(t,e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/changePassword"),method:"post",data:{curPassword:t,password:e}})};function getInvites(){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/invites"),method:"get"})}function invite(t){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/invites"),method:"post",data:t})}function deleteInvite(t){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/invites/").concat(t),method:"delete"})}exports.changePassword=changePassword;var UserRoles={Normal:"Normal user","Org administrator":"Org administrator"};function getOrganizationUsers(){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/organization"),method:"get"})}function removeUserFromOrganization(t){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/organization/").concat(encodeURIComponent(t)),method:"delete"})}function getPaymentMethod(){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/payment")})}function setPaymentMethod(t){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/payment"),method:"POST",data:{token:t}})}exports.UserRoles=UserRoles;var _default={login:login,isLoggedIn:isLoggedIn,logout:logout,register:register,activate:activate,setTutorialStep:setTutorialStep,setTutorialCompleted:setTutorialCompleted,startResetPassword:startResetPassword,isValidPasswordResetToken:isValidPasswordResetToken,resetPassword:resetPassword,changePassword:changePassword,getInvites:getInvites,invite:invite,deleteInvite:deleteInvite,UserRoles:UserRoles,getOrganizationUsers:getOrganizationUsers,removeUserFromOrganization:removeUserFromOrganization,getPaymentMethod:getPaymentMethod,setPaymentMethod:setPaymentMethod};exports.default=_default;
},{"./Axios":3,"./Config":6,"./Token":12,"./Utility":14}],3:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _axios=_interopRequireDefault(require("axios"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default=function(e){return(0,_axios.default)(e).then(function(e){return e.data})};exports.default=_default;
},{"axios":"axios"}],4:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOS=getOS,exports.checkConnectivity=checkConnectivity,exports.default=void 0;var _Axios=_interopRequireDefault(require("./Axios"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getOS(){return"undefined"==typeof navigator?null:-1!==navigator.appVersion.indexOf("Win")?"Windows":-1!==navigator.appVersion.indexOf("Mac")?"Mac":-1!==navigator.appVersion.indexOf("X11")?"Unix":-1!==navigator.appVersion.indexOf("Linux")?"Linux":null}function checkConnectivity(){return(0,_Axios.default)({url:"https://httpbin.org/get"})}var _default={getOS:getOS};exports.default=_default;
},{"./Axios":3}],5:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isChrome=isChrome,exports.getExtensionVersion=getExtensionVersion,exports.isExtensionInstalled=isExtensionInstalled,exports.isChromeExtension=isChromeExtension,exports.openLink=openLink,exports.installExtension=installExtension,exports.default=void 0;var _Config=_interopRequireDefault(require("./Config"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function isChrome(){return"undefined"==typeof window?null:"undefined"!=typeof chrome}function getExtensionVersion(){var e="undefined"!=typeof document&&document.getElementById("wrapapi-extension-is-installed");return e?e.getAttribute("data-version"):null}function isExtensionInstalled(){return!!getExtensionVersion()}function isChromeExtension(){try{return chrome.runtime.sendMessage({type:"dummy"}),!0}catch(e){return!1}}function openLink(e){if(isChromeExtension()){e.preventDefault();var n=e.target.href;return new Promise(function(e){chrome.runtime.sendMessage({type:"chrome.tabs.create",args:{url:n}},e)})}return Promise.resolve()}function installExtension(e){e&&e.preventDefault&&e.preventDefault(),chrome.webstore.install(_Config.default.pluginUrl,function(){console.log("Successful install")},function(e){console.error("Failed to install Chrome extension"),console.error(e)})}var _default={isChrome:isChrome,getExtensionVersion:getExtensionVersion,isExtensionInstalled:isExtensionInstalled,isChromeExtension:isChromeExtension,openLink:openLink,installExtension:installExtension};exports.default=_default;
},{"./Config":6}],6:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.debug=debug,exports.default=exports.stripeKey=exports.proxyAlivePingInterval=exports.pluginURL=exports.wsHost=exports.host=exports.environment=void 0;var shouldInferHost="undefined"!=typeof window&&"chrome-extension:"!==window.location.protocol,environment="production";exports.environment=environment;var host=shouldInferHost?"".concat(window.location.protocol,"//").concat(window.location.host):"https://wrapapi.com";exports.host=host;var wsHost="wss://wrapapi.com";exports.wsHost=wsHost;var pluginURL="https://chrome.google.com/webstore/detail/fmnddkfmloenccahfiaflnkpngndkafm";exports.pluginURL=pluginURL;var proxyAlivePingInterval=1e4;function debug(){}exports.proxyAlivePingInterval=proxyAlivePingInterval;var stripeKey="pk_live_XmH8nkLHqi5AHRCZIUiqqQba";exports.stripeKey=stripeKey;var _default={environment:environment,host:host,wsHost:wsHost,pluginURL:pluginURL,proxyAlivePingInterval:proxyAlivePingInterval,debug:debug,stripeKey:stripeKey};exports.default=_default;
},{}],7:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isProxyEnabled=isProxyEnabled,exports.enableProxy=enableProxy,exports.disableProxy=disableProxy,exports.getCurrentTabData=getCurrentTabData,exports.sendToExtractor=sendToExtractor,exports.default=void 0;var _chromePromise=_interopRequireDefault(require("chrome-promise")),_lodash=_interopRequireDefault(require("lodash")),_Config=_interopRequireDefault(require("./Config"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var chromep=new _chromePromise.default;function getProxyServer(e){return{scheme:"http",host:e.ProxyServer.hostname,port:e.port}}function isProxyEnabled(e){return chromep.proxy?chromep.proxy.settings.get({}).then(function(r){var t=r.value;return"fixed_servers"===t.mode&&(!e||_lodash.default.isEqual(_lodash.default.get(t.rules,"singleProxy"),getProxyServer(e)))}):Promise.resolve(!1)}function enableProxy(e){return chromep.proxy.settings.get({}).then(function(r){return Promise.all([chromep.proxy.settings.set({value:{mode:"fixed_servers",rules:{singleProxy:getProxyServer(e),bypassList:[_Config.default.host]}}}),chromep.storage.local.set({previousProxySettings:JSON.stringify(r.value)})])})}function disableProxy(){return chromep.storage.local.get("previousProxySettings").then(function(e){var r;if(e&&e.previousProxySettings)try{r=JSON.parse(e.previousProxySettings)}catch(e){_Config.default.debug(e)}return chromep.proxy.settings.set({value:r||{mode:"system"}})})}function getCurrentTabData(){var e=null,r=function(r){"wrapapi.activeTabHTML"===r.type&&e&&(e(r.data),e=null)};chrome.runtime.onMessage.addListener(r);var t=new Promise(function(r){e=r}),o=null;return chromep.tabs.query({active:!0}).then(function(e){return console.log(e),o=e[0].url,chromep.tabs.executeScript({file:"/sendPageHTML.js"})}).then(function(){return t}).then(function(e){return chrome.runtime.onMessage.removeListener(r),{url:o,html:e}})}function sendToExtractor(e){var r=e.html,t=e.url;chrome.runtime.sendMessage({type:"wrapapi.sendToExtractor",data:{body:r,url:t}})}var _default={isProxyEnabled:isProxyEnabled,enableProxy:enableProxy,disableProxy:disableProxy,getCurrentTabData:getCurrentTabData,sendToExtractor:sendToExtractor};exports.default=_default;
},{"./Config":6,"chrome-promise":"chrome-promise","lodash":"lodash"}],8:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _immutable=_interopRequireDefault(require("immutable")),_lodash=_interopRequireDefault(require("lodash"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function dotFunc(e){return function(){for(var t=arguments.length,l=new Array(t),a=0;a<t;a++)l[a]=arguments[a];return l[0]=l[0].split("."),this[e].apply(this,l)}}function autoFunc(e,t){return function(l){for(var a=arguments.length,u=new Array(a>1?a-1:0),r=1;r<a;r++)u[r-1]=arguments[r];return"string"==typeof l?this[t].apply(this,[l].concat(u)):this[e].apply(this,[l].concat(u))}}function splitMutableImmutable(e,t){"string"==typeof t?t=t.split("."):"number"==typeof t&&(t=[t]);for(var l=e,a=[],u=[],r=0;r!==t.length;r++){if(_immutable.default.Iterable.isIterable(l)){a=t.slice(r);break}var i=t[r];u.push(i),l=e[i]}return{mutable:u,immutable:a}}function setMixed(e,t,l,a){var u=splitMutableImmutable(e,t),r=!!u.mutable.length,i=!!u.immutable.length,n=r?_lodash.default.get(e,u.mutable):e;if((i?n.getIn(u.immutable):n)===l)return e;var m=i?n.setIn(u.immutable,l):l;if(r){var o=[];e=_lodash.default.clone(e);for(var d=0;d!==u.mutable.length-1;d++){var s=u.mutable[d];o.push(s),_lodash.default.set(e,o,_lodash.default.clone(_lodash.default.get(e,o)))}return a?_lodash.default.setWith(e,u.mutable,m,a):_lodash.default.set(e,u.mutable,m),e}return m}function getMixed(e,t){var l=splitMutableImmutable(e,t),a=!!l.mutable.length,u=!!l.immutable.length,r=a?_lodash.default.get(e,l.mutable):e;return u?r.getIn(l.immutable):r}function deleteMixed(e,t){var l=splitMutableImmutable(e,t),a=!!l.mutable.length,u=!!l.immutable.length,r=a?_lodash.default.get(e,l.mutable):e,i=u?r.deleteIn(l.immutable):r;if(a){var n=[];e=_lodash.default.clone(e);for(var m=0;m!==l.mutable.length-1;m++){var o=l.mutable[m];n.push(o),_lodash.default.set(e,n,_lodash.default.clone(_lodash.default.get(e,n)))}if(u)_lodash.default.set(e,l.mutable,i);else{var d=l.mutable.slice(0,-1),s=0!==d.length?_lodash.default.get(e,d):e,b=l.mutable[l.mutable.length-1];s instanceof Array?s.splice(b,1):delete s[b]}return e}return i}_immutable.default.Iterable.prototype.getDot=dotFunc("getIn"),_immutable.default.Iterable.prototype.setDot=dotFunc("setIn"),_immutable.default.Iterable.prototype.getAuto=autoFunc("getIn","getDot"),_immutable.default.Iterable.prototype.setAuto=autoFunc("setIn","setDot"),_immutable.default.isImmutable=_immutable.default.Iterable.isIterable,_immutable.default.toJS=function(e){return _immutable.default.isImmutable(e)?e.toJS():e},_immutable.default.setMixed=setMixed,_immutable.default.getMixed=getMixed,_immutable.default.deleteMixed=deleteMixed;var _default=_immutable.default;exports.default=_default;
},{"immutable":"immutable","lodash":"lodash"}],9:[function(require,module,exports){
"use strict";var _react=_interopRequireDefault(require("react")),_reactDom=_interopRequireDefault(require("react-dom")),_PopupMainPage=_interopRequireDefault(require("../templates/PopupMainPage"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}require("es6-promise").polyfill(),require("es6-object-assign").polyfill(),document.addEventListener("DOMContentLoaded",function(){document.getElementById("popup-main")&&_reactDom.default.render(_react.default.createElement(_PopupMainPage.default),document.getElementById("popup-main"))});
},{"../templates/PopupMainPage":30,"es6-object-assign":"es6-object-assign","es6-promise":"es6-promise","react":"react","react-dom":"react-dom"}],10:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.connect=connect,exports.allocate=allocate,exports.updateLastProxyInteraction=updateLastProxyInteraction,exports.default=void 0;var _Config=_interopRequireDefault(require("./Config")),_Axios=_interopRequireDefault(require("./Axios"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function connect(e,t,o,a){var r=new WebSocket("".concat(_Config.default.wsHost,"/requests/").concat(e));return new Promise(function(e,n){r.onmessage=function(a){try{var r=a.data,c=JSON.parse(r);if("capture"===c.type){var u=c.data;t(u)}else if("stop"===c.type)o();else{if("status"!==c.type)throw new Error("We received an unrecognized response type from the WebSocket server");e(c.data)}}catch(e){e.response=a,n(e)}},r.onclose=a,r.onerror=a})}function allocate(){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/proxyAllocation"),method:"POST"})}function updateLastProxyInteraction(){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/proxyAllocation/updateLastProxyInteraction"),method:"POST"})}var _default={connect:connect,allocate:allocate,updateLastProxyInteraction:updateLastProxyInteraction};exports.default=_default;
},{"./Axios":3,"./Config":6}],11:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _Request=_interopRequireDefault(require("../../common/Request")),_sandbox=_interopRequireDefault(require("./sandbox"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default=(0,_Request.default)(_sandbox.default);exports.default=_default;
},{"../../common/Request":36,"./sandbox":20}],12:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.set=set,exports.get=get,exports.default=void 0;var _Chrome=_interopRequireDefault(require("./Chrome"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function set(e){return new Promise(function(t){_Chrome.default.isChromeExtension()?chrome.runtime.sendMessage({type:"chrome.storage.local.set",args:{token:e}},t):t(null)})}function get(){return new Promise(function(e){_Chrome.default.isChromeExtension()?chrome.runtime.sendMessage({type:"chrome.storage.local.get",args:"token"},function(t){t&&t.token?e(t.token):e(null)}):e(null)})}var _default={set:set,get:get};exports.default=_default;
},{"./Chrome":5}],13:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.nextStep=exports.steps=void 0;var steps=["pressToRecord","chooseCapture","saveCapture","goToInputsTab","editQueryAndPost","editSaveInput","waitingForSaveInput","goToOutputsTab","addTestCase","editTestCaseInputs","editTestCaseStateToken","runTest","saveTestCase","selectTestCase","addOutputScenario","nameOutputScenario","createOutput","saveOutputScenario","goToViewTab","done"];exports.steps=steps;var nextStep={};exports.nextStep=nextStep;for(var i=0;i!==steps.length-1;i++)nextStep[steps[i]]=steps[i+1];var _default={steps:steps,nextStep:nextStep};exports.default=_default;
},{}],14:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sortAPIElements=sortAPIElements,exports.arrayBufferToBase64=arrayBufferToBase64,exports.getDefaultBaseAPIElement=getDefaultBaseAPIElement,exports.getDefaultAPIElement=getDefaultAPIElement,exports.getInitialAPIElement=getInitialAPIElement,exports.getDefaultExtractor=getDefaultExtractor,exports.getDefaultFileInputValue=getDefaultFileInputValue,exports.getDefaultInputSpec=getDefaultInputSpec,exports.getDefaultPostData=getDefaultPostData,exports.getDefaultNewParam=getDefaultNewParam,exports.sortVersions=sortVersions,exports.getDefaultOutputScenario=getDefaultOutputScenario,exports.getDefaultTestCase=getDefaultTestCase,exports.getDefaultExtractorTestCase=getDefaultExtractorTestCase,exports.getDefaultCleanup=getDefaultCleanup,exports.getDefaultPostProcess=getDefaultPostProcess,exports.getDefaultExtractorPostProcess=getDefaultExtractorPostProcess,exports.upgradeAPIElement=upgradeAPIElement,exports.getDefaultEdgeInput=getDefaultEdgeInput,exports.getDefaultEdgeSerializedForm=getDefaultEdgeSerializedForm,exports.findUnusedName=findUnusedName,exports.normalizeOptions=normalizeOptions,exports.default=exports.getDefaultError=exports.getDefaultCompositeAPIElement=exports.CompositeGraph=exports.getDefaultCompositeGraph=exports.CompositeInput=exports.getDefaultCompositeInput=exports.CompositeEdge=exports.getDefaultCompositeEdge=exports.EdgeInput=exports.CompositeVertex=exports.getDefaultCompositeVertex=exports.getDefaultVertexPostProcess=exports.getDefaultBranchingFunction=exports.defaultExtractorPostProcessScript=exports.defaultPostProcessScript=exports.getDefaultInputHelperScriptCode=exports.InputHelperScript=exports.getDefaultInputHelperScript=exports.Input=exports.getDefaultInput=exports.PostData=exports.InputSpec=exports.FileInputValue=exports.getFullNameWithUsername=exports.getFullName=exports.doNothing=exports.apiInputTypes=exports.sizeToText=void 0;var _lodash=_interopRequireDefault(require("lodash")),_urijs=_interopRequireDefault(require("urijs")),_Immutable=_interopRequireDefault(require("./Immutable")),_Request=_interopRequireDefault(require("./Request"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var sizeToText=function(e){var t,a="";return e>1e6?(t=Math.round(e/1e6*10)/10,a=" M"):e>1e3?(t=Math.round(e/1e3*10)/10,a=" K"):(t=e,a=" B"),t.toString()+a};exports.sizeToText=sizeToText;var apiInputTypes={constant:"Constant",variable:"Text API input",file:"File API input"};exports.apiInputTypes=apiInputTypes;var doNothing=function(e){e.preventDefault()};exports.doNothing=doNothing;var getFullName=function(e){return"".concat(e.repository,"/").concat(e.name)};exports.getFullName=getFullName;var getFullNameWithUsername=function(e){return"".concat(e.username,"/").concat(e.repository,"/").concat(e.name)};function compareAPIElements(e,t){return e.repository===t.repository?e.name<t.name?-1:1:e.repository<t.repository?-1:1}function sortAPIElements(e){return e.sort(compareAPIElements)}function arrayBufferToBase64(e){for(var t="",a=new Uint8Array(e),r=a.byteLength,o=0;o<r;o++)t+=String.fromCharCode(a[o]);return btoa(t)}function getDefaultBaseAPIElement(){return{username:"",repository:"",name:"",description:"",readme:"",version:"0.0.0",majorVersion:0,minorVersion:0,dotVersion:0,published:!1,main:!0,isOwn:!0,updatedAt:null,storedResponseCount:0}}function getDefaultAPIElement(){return _lodash.default.assign(getDefaultBaseAPIElement(),{type:"normal",input:getDefaultInputSpec(),output:{scenarios:[]},testCases:[],postProcess:getDefaultPostProcess()})}exports.getFullNameWithUsername=getFullNameWithUsername;var DEFAULT_USER_AGENT="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36";function getInitialAPIElement(){var e=getDefaultAPIElement();e.input.url="https://news.ycombinator.com/",e.input.headers.push(getDefaultNewParam("User-Agent","undefined"!=typeof navigator?navigator.userAgent:DEFAULT_USER_AGENT));var t=getDefaultOutputScenario();return t.name="Default",e.output.scenarios=[t],e}var initialTestCaseResponse='<!DOCTYPE html>\n<html>\n  <head>\n    <title>Welcome to the WrapAPI extractor</title>\n    <meta charset="UTF-8">\n\n    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto">\n    <style>\n      h1 { font-family: Roboto,"Gill Sans","Gill Sans MT",Calibri,sans-serif; }\n      body { padding-left: 10px; padding-right: 10px; font-family: Roboto,Helvetica,sans-serif; }\n    </style>\n  </head>\n  <body>\n    <h1>Welcome to the WrapAPI Extractor!</h1>\n    <p>To start using the WrapAPI Extractor:</p>\n    <ol>\n      <li>Switch over to "Code view", and paste the HTML of a page you\'d like to extract data from.</li>\n      <li>Edit the URL bar to be the page where you got the HTML from (so that we give you the full pretty page by loading its stylesheets).</li>\n      <li>Add "Outputs" by clicking on the parts of the page you\'d like to extract.</li>\n    </ol>\n    <p>You can paste in multiple such "test cases" to make sure that the extraction rules you defined work for all the different pages you might see.</p>\n  </body>\n</html>\n';function getDefaultExtractor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _lodash.default.assign(getDefaultBaseAPIElement(),{type:"extractor",output:{scenarios:[getDefaultOutputScenario({name:"Default"})]},testCases:[getDefaultExtractorTestCase({name:"New test case",body:e.body||initialTestCaseResponse,url:e.url})],postProcess:getDefaultExtractorPostProcess()})}function getDefaultFileInputValue(){return{content:null,mimeType:null,fileName:""}}var FileInputValue=_Immutable.default.Record(getDefaultFileInputValue());function getDefaultAuthorization(){return{mode:null,basic:{username:"",password:""},ntlm:{username:"",password:"",domain:""}}}function getDefaultInputSpec(){return{url:"",headers:[],method:"GET",postData:getDefaultPostData(),queryString:[],authorization:getDefaultAuthorization(),inputs:{},script:null}}exports.FileInputValue=FileInputValue;var InputSpec=_Immutable.default.Record(getDefaultInputSpec());function getDefaultPostData(){return{type:"params",data:[],inputData:null}}exports.InputSpec=InputSpec;var PostData=_Immutable.default.Record(getDefaultPostData());function getDefaultNewParam(e,t){return{type:"new",name:e||"",value:t||"",varName:"file"}}exports.PostData=PostData;var getDefaultInput=function(e){return _lodash.default.assign({name:null,type:"variable",required:!0,defaultEnabled:!1,default:"",documentation:""},e)};exports.getDefaultInput=getDefaultInput;var Input=_Immutable.default.Record(getDefaultInput());exports.Input=Input;var getDefaultInputHelperScript=function(){return{code:"",globals:[]}};exports.getDefaultInputHelperScript=getDefaultInputHelperScript;var InputHelperScript=_Immutable.default.Record(getDefaultInputHelperScript());exports.InputHelperScript=InputHelperScript;var getDefaultInputHelperScriptCode=function(){return"// Define your helper functions below:\n// e.g., function pad(input) { return input + ' '; }\n// which can then be used in a JS expression such as\n//   pad(input.myInputName)\n"};function sortVersions(e,t){var a="DESC"===(t=t||"DESC")?-1:1;return e.sort(function(e,t){for(var r="string"==typeof e?e:e.version,o="string"==typeof t?t:t.version,n=function(e){return parseInt(e,10)},u=r.split(".").map(n),s=o.split(".").map(n),p=0;p!==u.length;p++)if(u[p]!==s[p])return a*(u[p]-s[p]);return 0})}function getDefaultOutputScenario(e){return _objectSpread({name:"",outputs:{}},e)}function getDefaultTestCase(){return{name:"",inputs:{},options:{},responseData:{responses:[],stateToken:"",cookies:""},secret:{}}}exports.getDefaultInputHelperScriptCode=getDefaultInputHelperScriptCode;var defaultTestCaseResponse='<!DOCTYPE html>\n<html>\n  <head>\n    <title>New test case</title>\n    <meta charset="UTF-8">\n\n    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto">\n    <style>\n      h1 { font-family: Roboto,"Gill Sans","Gill Sans MT",Calibri,sans-serif; }\n      body { padding-left: 10px; padding-right: 10px; font-family: Roboto,Helvetica,sans-serif; }\n    </style>\n  </head>\n  <body>\n    <h1>New test case</h1>\n    <p><strong>Switch to the "Code view" tab</strong> and paste in the test data you\'d like to try WrapAPI Extractor on.</p>\n  </body>\n</html>\n';function getDefaultExtractorTestCase(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:e.name||"",responseData:{responses:[{body:e.body||defaultTestCaseResponse,request:{uri:{href:e.url||"https://wrapapi.com"}}}]}}}function getDefaultCleanup(){return{type:null,options:{}}}function getDefaultBaseOutput(){return{name:"",matchEngine:null,type:"requiredOutput",children:{},cleanup:getDefaultCleanup(),data:{}}}function getDefaultOutput(e){var t=getDefaultBaseOutput();switch(e){case"regex":return Object.assign(t,{matchEngine:"regex",data:{group:0,match:null,allMatches:!0,regex:{pattern:"",modifiers:"g"},matchOn:"pretty"}});case"css":return Object.assign(t,{matchEngine:"css",data:{cssSelector:"",numToSelect:"first",captureType:"text",attrsToSelect:[],objectIncludeText:!1,objectIncludeHtml:!1},cleanup:{type:"trim",options:{}}});case"collection":return Object.assign(t,{matchEngine:"collection",data:{outputs:{}}});case"json":return Object.assign(t,{matchEngine:"json",data:{jsonSelector:"$",selectorType:"jsonPathFirstOnly"}});case"form":return Object.assign(t,{matchEngine:"form",data:{cssSelector:""}});case"header":return Object.assign(t,{matchEngine:"header",data:{response:0,key:""}});case"cookie":default:return Object.assign(t,{matchEngine:"cookie",data:{response:0,allResponses:!0,key:""}})}}var defaultPostProcessScript='function postProcess(output, input) {\n  // "output" has the raw pre-processing output\n  // "input" has the specified inputs, including defaults\n  return output;\n}\n';exports.defaultPostProcessScript=defaultPostProcessScript;var defaultExtractorPostProcessScript='function postProcess(output) {\n  // "output" has the raw pre-processing output\n}\n';function getDefaultPostProcess(){return{script:defaultPostProcessScript,enabled:!1}}function getDefaultExtractorPostProcess(){return{script:defaultExtractorPostProcessScript,enabled:!1}}function upgradeAPIElement(e){if("composite"===e.type)return e;e.type||(e.type="normal");var t=e.postProcess;function a(e){if("file"===e.type||"new"===e.type)return e;var t=getDefaultNewParam();if(t.name=e.name,"variable"===e.type){var a=e.varName;/^[$A-Z_][0-9A-Z_$]*$/i.test(a)?t.value="{{".concat(a,"}}"):t.value="{{wrapAPIInputs[".concat(JSON.stringify(a),"]}}")}else"expression"===e.type?t.value="{{".concat(e.expression.replace(/input\./g,""),"}}"):"constant"===e.type&&(t.value=e.data);return t}"string"==typeof t?e.postProcess={script:t,enabled:!0}:t||(e.postProcess={script:defaultPostProcessScript,enabled:!1}),e.testCases&&(e.testCases=_lodash.default.filter(e.testCases).map(function(e){return e.options||(e.options={},e.stateToken&&(e.options.stateToken=e.stateToken,delete e.stateToken),e.serializedForm&&(e.options.serializedForm=e.serializedForm,delete e.serializedForm)),e}));var r=e.input;r.postData&&("params"===r.postData.type?r.postData.data=r.postData.data.map(a):"json"!==r.postData.type&&"text"!==r.postData.type||(r.postData.data=function(e){for(var t=_Request.default.parseCurlyExpression(e),a=0;a!==t.length;a++){var r=t[a];if("expression"===r.type){var o=/^[$A-Z_][0-9A-Z_$]*$/i.test(r.data);r.data=o?r.data:"wrapAPIInputs[".concat(JSON.stringify(r.data),"]")}}return t.map(function(e){return"expression"===e.type?"{{".concat(e.data,"}}"):e.data}).join("")}(r.postData.data||""))),r.queryString&&(r.queryString=r.queryString.map(a)),r.headers&&(r.headers=r.headers.map(a));var o=_lodash.default.map(r.queryString,"name"),n=(0,_urijs.default)(r.url).query(!0);return _lodash.default.forEach(n,function(e,t){-1===o.indexOf(t)&&r.queryString.push(getDefaultNewParam(t,e))}),r.url=(0,_urijs.default)(r.url).query({}).normalizeQuery().toString(),e.input.authorization||(e.input.authorization=getDefaultAuthorization()),e.input.method=e.input.method.toUpperCase(),e}exports.defaultExtractorPostProcessScript=defaultExtractorPostProcessScript;var getDefaultBranchingFunction=function(){return"// Define which output scenario we should run next\n// by returning a string corresponding to its name.\n// (e.g., return 'myScenario' in the code to\n// go to the scenario named myScenario)\nfunction branch(output, input) {\n  // output has the output from this component API element\n  // input has the inputs from the overall composite API element\n  return output.outputScenario;\n}\n"};exports.getDefaultBranchingFunction=getDefaultBranchingFunction;var getDefaultVertexPostProcess=function(){return"// Modify and return what you want as the output\nfunction postProcess(output, input) {\n  // output has the output from this component API element\n  // input has the inputs from the overall composite API element\n  return output;\n}\n"};exports.getDefaultVertexPostProcess=getDefaultVertexPostProcess;var getDefaultCompositeVertex=function(){return{id:null,type:"apiElement",name:null,data:null,branchingMode:"outputScenario",branchingFunction:getDefaultBranchingFunction(),postProcessEnabled:!1,postProcess:getDefaultVertexPostProcess()}};exports.getDefaultCompositeVertex=getDefaultCompositeVertex;var CompositeVertex=_Immutable.default.Record(getDefaultCompositeVertex());function getDefaultEdgeInput(){return{baseType:"variable",type:"input",data:"",varName:"",expression:""}}function getDefaultEdgeSerializedForm(){return _lodash.default.assign(getDefaultEdgeInput(),{type:"none"})}exports.CompositeVertex=CompositeVertex;var EdgeInput=_Immutable.default.Record(getDefaultEdgeInput());exports.EdgeInput=EdgeInput;var getDefaultCompositeEdge=function(){return{targetId:null,inputs:{},serializedForm:getDefaultEdgeSerializedForm()}};exports.getDefaultCompositeEdge=getDefaultCompositeEdge;var CompositeEdge=_Immutable.default.Record({targetId:null,inputs:new _Immutable.default.Map,serializedForm:new EdgeInput(getDefaultEdgeSerializedForm())});function buildCompositeEdgeInputs(e){var t=_lodash.default.chain(e).map(function(e){var t=e.name,a=-1!==t.search(/^[A-Za-z_$][\w_]*$/);return[e.name,new EdgeInput({baseType:e.type,varName:t,expression:a?"input.".concat(t):"input[".concat(t.replace(/'/g,"\\'"),"]")})]}).fromPairs().value();return _Immutable.default.fromJS(t)}exports.CompositeEdge=CompositeEdge;var getDefaultCompositeInput=function(){return{required:!0,type:"variable"}};exports.getDefaultCompositeInput=getDefaultCompositeInput;var CompositeInput=_Immutable.default.Record(getDefaultCompositeInput());exports.CompositeInput=CompositeInput,CompositeInput.fromJS=function(e){return new CompositeInput("boolean"==typeof e?{required:e,type:"variable"}:e)};var getDefaultCompositeGraph=function(){return{vertices:{0:{id:"0",type:"start",name:"start",data:null}},edges:{0:{start:null}},input:{inputs:{}}}};exports.getDefaultCompositeGraph=getDefaultCompositeGraph;var CompositeGraph=_Immutable.default.Record(getDefaultCompositeGraph());exports.CompositeGraph=CompositeGraph;var getDefaultCompositeAPIElement=function(){return _lodash.default.assign(getDefaultBaseAPIElement(),{type:"composite",graph:getDefaultCompositeGraph(),input:{url:"",inputs:{}}})};exports.getDefaultCompositeAPIElement=getDefaultCompositeAPIElement;var getDefaultError=function(e){var t={success:!1,messages:["There was an unknown error; please try again later"],error:{}};return e&&(t.error=e),t};function findUnusedName(e,t,a){for(var r=!!(a=a||{}).includeSpace,o=t instanceof Array?_lodash.default.zipObject(t,t):t,n=e,u=2;n in o;)n=e+(r?" ":"")+u++;return n}function normalizeOptions(e){if(e instanceof Array){if(e[0]&&"object"!==_typeof(e[0]))return e.map(function(e){return{value:e,label:e}})}else if("object"===_typeof(e))return _lodash.default.map(e,function(e,t){return{value:t,label:e}});return e}exports.getDefaultError=getDefaultError;var _default={sizeToText:sizeToText,apiInputTypes:apiInputTypes,doNothing:doNothing,getFullName:getFullName,getFullNameWithUsername:getFullNameWithUsername,sortAPIElements:sortAPIElements,sortVersions:sortVersions,arrayBufferToBase64:arrayBufferToBase64,getDefaultAPIElement:getDefaultAPIElement,getInitialAPIElement:getInitialAPIElement,getDefaultExtractor:getDefaultExtractor,getDefaultInputSpec:getDefaultInputSpec,InputSpec:InputSpec,getDefaultInputHelperScript:getDefaultInputHelperScript,InputHelperScript:InputHelperScript,getDefaultInputHelperScriptCode:getDefaultInputHelperScriptCode,getDefaultPostData:getDefaultPostData,PostData:PostData,getDefaultNewParam:getDefaultNewParam,getDefaultInput:getDefaultInput,Input:Input,getDefaultFileInputValue:getDefaultFileInputValue,FileInputValue:FileInputValue,getDefaultOutputScenario:getDefaultOutputScenario,getDefaultTestCase:getDefaultTestCase,getDefaultExtractorTestCase:getDefaultExtractorTestCase,getDefaultOutput:getDefaultOutput,getDefaultCleanup:getDefaultCleanup,defaultPostProcessScript:defaultPostProcessScript,getDefaultPostProcess:getDefaultPostProcess,upgradeAPIElement:upgradeAPIElement,getDefaultBranchingFunction:getDefaultBranchingFunction,getDefaultVertexPostProcess:getDefaultVertexPostProcess,getDefaultCompositeVertex:getDefaultCompositeVertex,CompositeVertex:CompositeVertex,getDefaultCompositeEdge:getDefaultCompositeEdge,CompositeEdge:CompositeEdge,buildCompositeEdgeInputs:buildCompositeEdgeInputs,getDefaultEdgeSerializedForm:getDefaultEdgeSerializedForm,getDefaultEdgeInput:getDefaultEdgeInput,EdgeInput:EdgeInput,getDefaultCompositeInput:getDefaultCompositeInput,CompositeInput:CompositeInput,getDefaultCompositeGraph:getDefaultCompositeGraph,CompositeGraph:CompositeGraph,getDefaultCompositeAPIElement:getDefaultCompositeAPIElement,getDefaultError:getDefaultError,findUnusedName:findUnusedName,normalizeOptions:normalizeOptions};exports.default=_default;
},{"./Immutable":8,"./Request":11,"lodash":"lodash","urijs":"urijs"}],15:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.user=user,exports.contactForm=contactForm,exports.default=exports.emailRegex=void 0;var usernameRegex=/^\w[\w-]*\w$/,emailRegex=/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;function user(e){var a={};return e.username?usernameRegex.test(e.username)||(a.username="Your username must only contain numbers, letters, and dashes (-) and be at least 2 characters long"):a.username="Please enter a username.",e.password||(a.password="Please enter a password."),e.email?emailRegex.test(e.email)||(a.email="The email address doesn't look valid. Please try again."):a.email="Please enter your email address.",e.name||(a.name="Please enter your name."),"boolean"!=typeof e.shouldContact&&(a.shouldContact="Please choose whether you're potentially interested in a higher usage limit or a self-hosted/private instance"),a}function contactForm(e){var a={};return e.name||(a.name="Please enter your name."),e.email?emailRegex.test(e.email)||(a.email="The email address doesn't look valid. Please try again."):a.email="Please enter your email.",e.company||(a.company="Please enter your company's name."),a}exports.emailRegex=emailRegex;var _default={user:user,contactForm:contactForm};exports.default=_default;
},{}],16:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getKey=getKey,exports.getNameKey=getNameKey,exports.Reducer=Reducer,exports.connect=connect,exports.default=exports.Actions=void 0;var _reactRedux=require("react-redux"),_lodash=_interopRequireDefault(require("lodash")),_moment=_interopRequireDefault(require("moment")),_Utility=_interopRequireDefault(require("../Utility")),_APIStorage=_interopRequireDefault(require("../APIStorage"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Actions={startUpdateAPIElements:function(){return{type:"APIS_UPDATE_START"}},updateAPIElements:function(e){return{type:"APIS_UPDATE",apiElements:e}},addAPIElement:function(e){return{type:"API_ADD",apiElement:e}},removeAPIElement:function(e){return{type:"API_REMOVE",apiElement:e}},startLoadingAPIElement:function(e){return{type:"API_LOADING",nameVersion:e}},finishLoadingAPIElement:function(e,t,n,r){return{type:"API_LOADED",nameVersion:e,apiElement:t,aliased:n,versions:r}},errorLoadingAPIElement:function(e,t){return{type:"API_ERROR",nameVersion:e,response:t}},startSavingAPIElement:function(e){return{type:"API_SAVING",apiElement:e}},finishSavingAPIElement:function(e,t,n){return{type:"API_SAVED",apiElement:e,response:t,versions:n}},errorSavingAPIElement:function(e,t){return{type:"API_SAVE_ERROR",apiElement:e,response:t}},finishAliasingAPIElement:function(e,t,n){return{type:"API_ALIASED",apiElement:e,aliased:t,response:n}}};function rekeyAPIElementsByName(e){return _lodash.default.fromPairs(e.map(function(e){return[_Utility.default.getFullName(e),e]}))}function getKey(e){return[e.username,e.repository,e.name,e.version].join("/")}function getNameKey(e){return[e.username,e.repository,e.name].join("/")}function Reducer(e,t){if(e||(e={loading:!1,loaded:!1,apiElements:{},apiElementsLoadedAt:null,error:null,fullAPILoading:{},fullAPILoaded:{},fullAPI:{},fullAPIAliased:{},fullAPIVersions:{},fullAPILoadResponse:{},fullAPISaving:{},fullAPISaveResponse:{}}),t)switch(t.type){case"APIS_UPDATE_START":return _objectSpread({},e,{loading:!0});case"APIS_UPDATE":return _objectSpread({},e,{loading:!1,loaded:!0,apiElements:rekeyAPIElementsByName(t.apiElements),apiElementsLoadedAt:(0,_moment.default)()});case"API_ADD":var n=e.apiElements,r=t.apiElement;return _objectSpread({},e,{apiElements:Object.assign(n,_defineProperty({},_Utility.default.getFullName(r),r))});case"API_REMOVE":return _objectSpread({},e,{apiElements:_lodash.default.omit(e.apiElements,_Utility.default.getFullName(t.apiElement))});case"API_LOADING":return _objectSpread({},e,{fullAPILoading:_objectSpread({},e.fullAPILoading,_defineProperty({},getKey(t.nameVersion),!0))});case"API_LOADED":var l=getKey(t.nameVersion),o=getNameKey(t.nameVersion),a=t.apiElement;return a.type&&"normal"!==a.type||(a=_Utility.default.upgradeAPIElement(a)),_objectSpread({},e,{fullAPILoading:_objectSpread({},e.fullAPILoading,_defineProperty({},l,!1)),fullAPILoaded:_objectSpread({},e.fullAPILoaded,_defineProperty({},l,!0)),fullAPI:_objectSpread({},e.fullAPI,_defineProperty({},l,a)),fullAPIAliased:_objectSpread({},e.fullAPIAliased,_defineProperty({},o,t.aliased)),fullAPIVersions:_objectSpread({},e.fullAPIVersions,_defineProperty({},o,_lodash.default.map(t.versions,"version")))});case"API_ERROR":var i=getKey(t.nameVersion);return _objectSpread({},e,{fullAPILoading:_objectSpread({},e.fullAPILoading,_defineProperty({},i,!1)),fullAPILoaded:_objectSpread({},e.fullAPILoaded,_defineProperty({},i,!0)),fullAPILoadResponse:_objectSpread({},e.fullAPI,_defineProperty({},i,t.response))});case"API_SAVING":var s=getKey(t.apiElement);return _objectSpread({},e,{fullAPISaving:_objectSpread({},e.fullAPISaving,_defineProperty({},s,!0)),fullAPISaveResponse:_objectSpread({},e.fullAPISaveResponse,_defineProperty({},s,null))});case"API_SAVED":var u=getKey(t.apiElement),d=getNameKey(t.apiElement);return _objectSpread({},e,{fullAPISaving:_objectSpread({},e.fullAPISaving,_defineProperty({},u,!1)),fullAPI:_objectSpread({},e.fullAPI,_defineProperty({},u,t.apiElement)),fullAPILoaded:_objectSpread({},e.fullAPILoaded,_defineProperty({},u,!0)),fullAPIVersions:_objectSpread({},e.fullAPIVersions,_defineProperty({},d,t.versions)),fullAPISaveResponse:_objectSpread({},e.fullAPISaveResponse,_defineProperty({},u,t.response))});case"API_ALIASED":var A,f=getKey(t.apiElement),P=getNameKey(t.apiElement),p=getKey(t.aliased),c=getNameKey(t.aliased);return _objectSpread({},e,{fullAPISaving:_objectSpread({},e.fullAPISaving,_defineProperty({},f,!1)),fullAPI:_objectSpread({},e.fullAPI,_defineProperty({},p,t.apiElement)),fullAPIAliased:_objectSpread({},e.fullAPIAliased,(A={},_defineProperty(A,P,t.aliased),_defineProperty(A,c,t.aliased),A)),fullAPILoaded:_objectSpread({},e.fullAPILoaded,_defineProperty({},p,!0)),fullAPIVersions:_objectSpread({},e.fullAPIVersions,_defineProperty({},p,t.versions)),fullAPISaveResponse:_objectSpread({},e.fullAPISaveResponse,_defineProperty({},f,t.response))});case"API_SAVE_ERROR":var I=getKey(t.apiElement);return _objectSpread({},e,{fullAPISaving:_objectSpread({},e.fullAPISaving,_defineProperty({},I,!1)),fullAPISaveResponse:_objectSpread({},e.fullAPISaveResponse,_defineProperty({},I,t.response))})}return e}exports.Actions=Actions;var refreshAPIElements=_lodash.default.memoize(function(e){return function(){e(Actions.startUpdateAPIElements()),_APIStorage.default.getAll().then(function(t){e(Actions.updateAPIElements(t))}).catch(function(e){console.error("Error when trying to get API elements"),console.error(e)})}}),loadAPIElement=_lodash.default.memoize(function(e){return function(t,n,r,l){var o={username:t,repository:n,name:r,version:l};return e(Actions.startLoadingAPIElement(o)),_APIStorage.default.get(t,n,r,l,!0).then(function(t){t.success?e(Actions.finishLoadingAPIElement(o,t.data,t.aliased,t.versions)):e(Actions.errorLoadingAPIElement(o,t))}).catch(function(t){e(Actions.errorLoadingAPIElement(o,{success:!1,messages:["An unexpected error has occurred. Please try again later."],error:t}))})}}),saveAPIElement=_lodash.default.memoize(function(e){return function(t,n,r,l){var o,a=!l&&n&&(n.username!==t.username||n.repository!==t.repository||n.name!==t.name);return o=n?l?_APIStorage.default.rename(n.repository,n.name,t):_APIStorage.default.setWithDiff(n,t):_APIStorage.default.set(t),e(Actions.startSavingAPIElement(t)),o.then(function(o){return o.success?(!a&&r||(r=[]),r=_Utility.default.sortVersions(_lodash.default.uniq(r.concat([t.version])),"DESC"),e(Actions.finishSavingAPIElement(t,o,r)),l&&e(Actions.removeAPIElement(n)),e(Actions.addAPIElement(t)),t):(e(Actions.errorSavingAPIElement(t,o)),null)})}}),aliasAPIElement=_lodash.default.memoize(function(e){return function(t,n){return e(Actions.startSavingAPIElement(t)),_APIStorage.default.alias(t,n).then(function(r){return r.success?e(Actions.finishAliasingAPIElement(t,n,r)):e(Actions.errorSavingAPIElement(t,r)),t})}}),addAPIElement=function(e){return function(t){e(Actions.addAPIElement(t))}},removeAPIElement=function(e){return function(t){e(Actions.removeAPIElement(t))}};function connect(e){return(0,_reactRedux.connect)(function(e){var t=e.apiElements;return{apiElementsLoaded:t.loaded,apiElementsLoadedAt:t.apiElementsLoadedAt,apiElementsLoading:t.loading,apiElements:t.apiElements,fullAPILoading:t.fullAPILoading,fullAPILoaded:t.fullAPILoaded,fullAPI:t.fullAPI,fullAPIAliased:t.fullAPIAliased,fullAPIVersions:t.fullAPIVersions,fullAPILoadResponse:t.fullAPILoadResponse,fullAPISaving:t.fullAPISaving,fullAPISaveResponse:t.fullAPISaveResponse}},function(e){return{refreshAPIElements:refreshAPIElements(e),addAPIElement:addAPIElement(e),removeAPIElement:removeAPIElement(e),loadAPIElement:loadAPIElement(e),saveAPIElement:saveAPIElement(e),aliasAPIElement:aliasAPIElement(e)}},null,e)}var _default={Actions:Actions,Reducer:Reducer,connect:connect,getKey:getKey,getNameKey:getNameKey};exports.default=_default;
},{"../APIStorage":1,"../Utility":14,"lodash":"lodash","moment":"moment","react-redux":"react-redux"}],17:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Reducer=Reducer,exports.login=login,exports.logout=logout,exports.connect=connect,exports.default=exports.Actions=void 0;var _reactRedux=require("react-redux"),_lodash=_interopRequireDefault(require("lodash")),_Tutorial=_interopRequireDefault(require("./Tutorial")),_Auth=_interopRequireDefault(require("../Auth")),_Token=_interopRequireDefault(require("../Token")),_APIStorage=_interopRequireDefault(require("../APIStorage")),_Chrome=_interopRequireDefault(require("../Chrome")),_Proxy=_interopRequireDefault(require("../Proxy"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,r)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach(function(t){_defineProperty(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var useToken=_Chrome.default.isChromeExtension(),Actions={startLogin:function(){return{type:"START_LOGIN"}},finishLogin:function(e){return{type:"FINISH_LOGIN",data:e}},updateLoginState:function(e){return{type:"UPDATE_LOGIN_STATE",data:e}},updateProxyAllocation:function(e){return{type:"UPDATE_PROXY_ALLOCATION",data:e}},startLogout:function(){return{type:"START_LOGOUT"}},finishLogout:function(){return{type:"FINISH_LOGOUT"}},startRegister:function(){return{type:"START_REGISTER"}},finishRegister:function(e){return{type:"FINISH_REGISTER",data:e}},setError:function(e){return{type:"SET_ERROR",error:e}},setTutorialCompleted:function(e,t){return{type:"SET_TUTORIAL_COMPLETED",tutorial:e,completed:t}}};function Reducer(e,t){switch(e||(e={loading:!1,loaded:!1,response:{success:!1,loggedIn:!1,username:null,activated:null,isAdmin:null,role:"Normal",name:null,email:null,company:null,tutorialStep:null,yukataTutorialCompleted:!1,extractorTutorialCompleted:!1,featureFlags:{},proxyAllocation:null,token:null,requestLimit:null,organization:null},error:null}),t.type){case"START_LOGIN":case"START_REGISTER":case"START_LOGOUT":return _objectSpread({},e,{loading:!0,error:null});case"FINISH_LOGIN":case"FINISH_REGISTER":case"UPDATE_LOGIN_STATE":if(useToken&&t.data.loggedIn){var o=t.data.token;_APIStorage.default.useToken(o),_Token.default.set(o)}return _objectSpread({},e,{loading:!1,loaded:!0,response:t.data});case"SET_TUTORIAL_COMPLETED":var r="yukata"===t.tutorial?"yukataTutorialCompleted":"extractorTutorialCompleted";return _objectSpread({},e,{response:_objectSpread({},e.response,_defineProperty({},r,t.completed))});case"UPDATE_PROXY_ALLOCATION":return _objectSpread({},e,{loading:!1,loaded:!0,response:_objectSpread({},e.response,{proxyAllocation:t.data})});case"SET_ERROR":return _objectSpread({},e,{loading:!1,error:t.error});case"FINISH_LOGOUT":return useToken&&(_APIStorage.default.useToken(null),_Token.default.set(null)),Object.assign({loading:!1,loaded:!1,response:{success:!1,loggedIn:!1,username:null,activated:null,isAdmin:null,role:"Normal",name:null,email:null,company:null,tutorialStep:null,yukataTutorialCompleted:!1,extractorTutorialCompleted:!1,featureFlags:{},proxyAllocation:null,token:null,requestLimit:null,organization:null},error:null},{loaded:!0})}return e}function login(e,t,o){return e(Actions.startLogin()),_Auth.default.login(t,o).then(function(t){return t.success?(e(Actions.finishLogin(t)),e(_Tutorial.default.Actions.updateLocalTutorialStep(t.tutorialStep))):e(Actions.setError(t)),mapResponseToProps(t)}).catch(function(t){console.error(t),e(Actions.setError(t))})}function logout(e){e(Actions.startLogout());var t=Promise.resolve(null);return useToken&&(t=_Token.default.get()),t.then(function(e){return _Auth.default.logout(e)}).then(function(t){return t.success&&e(Actions.finishLogout()),t}).catch(function(t){console.error(t),e(Actions.setError(t))})}function register(e,t,o){return e(Actions.startRegister()),_Auth.default.register(t,o).then(function(t){return t.success?(e(Actions.finishRegister(t)),e(_Tutorial.default.Actions.updateLocalTutorialStep(t.tutorialStep))):e(Actions.setError(t)),mapResponseToProps(t)}).catch(function(t){e(Actions.setError(t))})}function setTutorialCompleted(e,t,o){return _Auth.default.setTutorialCompleted(t,o).then(function(r){r.success&&e(Actions.setTutorialCompleted(t,o))})}function getLoginState(e,t){if(t&&_lodash.default.get(t,"auth.loaded"))return Promise.resolve(mapResponseToProps(t.auth.response));var o=Promise.resolve(null);useToken&&(o=_Token.default.get());var r=null;return o.then(function(e){return r=e,_Auth.default.isLoggedIn(r)}).then(function(t){if(t.success){var o=r?Object.assign(t,{token:r}):t;e(Actions.updateLoginState(o)),e(_Tutorial.default.Actions.updateLocalTutorialStep(t.tutorialStep)),t.loggedIn&&useToken&&_APIStorage.default.useToken(t.token)}else e(Actions.setError(t));return mapResponseToProps(t)}).catch(function(e){console.error("Error when trying to get login state"),console.error(e)})}function allocateProxy(e){return _Proxy.default.allocate().then(function(t){if(t.success){var o=t.proxyAllocation;e(Actions.updateProxyAllocation(o))}return t})}function mapResponseToProps(e){return{isLoggedIn:e.loggedIn,username:e.username,isActivated:e.activated,isAdmin:e.isAdmin,userRole:e.role,userName:e.name,userEmail:e.email,userCompany:e.company,yukataTutorialCompleted:e.yukataTutorialCompleted,extractorTutorialCompleted:e.extractorTutorialCompleted,proxyAllocation:e.proxyAllocation,featureFlags:e.featureFlags||{},requestLimit:e.requestLimit,organization:e.organization}}function getOrFetchLoginState(e){var t=e.authStateLoaded,o=e.getLoginState;return t?Promise.resolve(e):o()}function connect(e){return(0,_reactRedux.connect)(function(e){var t=e.auth;return _objectSpread({authStateLoaded:t.loaded,authLoading:t.loading,authError:t.error},mapResponseToProps(t.response))},function(e){return{login:login.bind(null,e),logout:logout.bind(null,e),registerUser:register.bind(null,e),getLoginState:getLoginState.bind(null,e),allocateProxy:allocateProxy.bind(null,e),setTutorialCompleted:setTutorialCompleted.bind(null,e)}},null,e)}exports.Actions=Actions;var _default={Actions:Actions,Reducer:Reducer,connect:connect,getOrFetchLoginState:getOrFetchLoginState,getLoginState:getLoginState};exports.default=_default;
},{"../APIStorage":1,"../Auth":2,"../Chrome":5,"../Proxy":10,"../Token":12,"./Tutorial":19,"lodash":"lodash","react-redux":"react-redux"}],18:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _redux=require("redux"),_Auth=require("./Auth"),_Tutorial=require("./Tutorial"),_APIElements=require("./APIElements"),MainReducer=(0,_redux.combineReducers)({tutorialStep:_Tutorial.Reducer,auth:_Auth.Reducer,apiElements:_APIElements.Reducer}),_default=MainReducer;exports.default=_default;
},{"./APIElements":16,"./Auth":17,"./Tutorial":19,"redux":"redux"}],19:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Reducer=Reducer,exports.connectTutorialStep=connectTutorialStep,exports.connectLocalTutorialStep=connectLocalTutorialStep,exports.default=exports.Actions=void 0;var _reactRedux=require("react-redux"),_Tutorial=_interopRequireDefault(require("../Tutorial")),_Auth=_interopRequireDefault(require("../Auth"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var Actions={updateLocalTutorialStep:function(t){return{type:"UPDATE_LOCAL_TUTORIAL_STEP",step:t}},advanceTutorialStep:function(t){return{type:"ADVANCE_TUTORIAL_STEP",curStep:t}}};function Reducer(t,e){if(void 0===t)return null;if("ADVANCE_TUTORIAL_STEP"===e.type){var r=t,u=_Tutorial.default.steps.indexOf(r),n=e.curStep,o=_Tutorial.default.steps.indexOf(n);if(-1===o)throw new Error("Can't find step with name ".concat(n));var a=Math.max(u,o+1);a>=_Tutorial.default.steps.length&&(a=_Tutorial.default.steps.length-1);var c=_Tutorial.default.steps[a];return console.log("Advancing to ".concat(c)),_Auth.default.setTutorialStep(c),c}return"UPDATE_LOCAL_TUTORIAL_STEP"===e.type?e.step:t}function connectTutorialStep(t){return(0,_reactRedux.connect)(function(t){return{tutorialStep:t.tutorialStep}},function(t){return{advanceTutorialStep:function(e){t(Actions.advanceTutorialStep(e))}}},null,t)}function connectLocalTutorialStep(t){return(0,_reactRedux.connect)(null,function(t){return{updateLocalTutorialStep:function(e){t(Actions.updateLocalTutorialStep(e))}}},null,t)}exports.Actions=Actions;var _default={Actions:Actions,Reducer:Reducer,connectTutorialStep:connectTutorialStep,connectLocalTutorialStep:connectLocalTutorialStep};exports.default=_default;
},{"../Auth":2,"../Tutorial":13,"react-redux":"react-redux"}],20:[function(require,module,exports){
"use strict";
},{}],21:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_OverlayTrigger=_interopRequireDefault(require("react-bootstrap/lib/OverlayTrigger")),_Tooltip=_interopRequireDefault(require("react-bootstrap/lib/Tooltip")),_DropdownSelect=_interopRequireDefault(require("./DropdownSelect"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var APIElementSelect=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n)))).props=void 0,r}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"render",value:function(){var e=this.props,t=e.apiElements,r=e.username,o=t.filter(function(e){return!r||e.username===r}),n=t.filter(function(e){return r&&e.username!==r}),a=o.map(function(e){var t=e.username,r=e.repository,o=e.name;return{value:{username:t,repository:r,name:o},label:"".concat(t,"/").concat(r,"/").concat(o)}}),i=n.map(function(e){var t=e.username,r=e.repository,o=e.name;return{value:{username:t,repository:r,name:o},textLabel:"".concat(t,"/").concat(r,"/").concat(o),label:_react.default.createElement("span",null,t,"/",r,"/",o," ",_react.default.createElement(_OverlayTrigger.default,{overlay:_react.default.createElement(_Tooltip.default,{id:"organization"},"Owned by someone in your organization")},_react.default.createElement("i",{className:"fa fa-users"})))}}),u=a.concat(i),l=_lodash.default.omit(this.props,["apiElements","username"]);return _react.default.createElement(_DropdownSelect.default,_extends({},l,{options:u}))}}]),t}();exports.default=APIElementSelect;
},{"./DropdownSelect":24,"lodash":"lodash","react":"react","react-bootstrap/lib/OverlayTrigger":"react-bootstrap/lib/OverlayTrigger","react-bootstrap/lib/Tooltip":"react-bootstrap/lib/Tooltip"}],22:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_Config=_interopRequireDefault(require("../js/Config")),_Browser=require("../js/Browser");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ChromeInstructions=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"render",value:function(){var e="Mac"===(0,_Browser.getOS)();return _react.default.createElement("div",null,_react.default.createElement("ol",null,_react.default.createElement("li",null,"Switch to the tab where you'd like to start capturing requests."),_react.default.createElement("li",null,"Press"," ",e?_react.default.createElement("span",null,_react.default.createElement("kbd",null,"Cmd ⌘")," + ",_react.default.createElement("kbd",null,"Opt")," + ",_react.default.createElement("kbd",null,"I")):_react.default.createElement("span",null,_react.default.createElement("kbd",null,"Ctrl")," + ",_react.default.createElement("kbd",null,"Shift")," + ",_react.default.createElement("kbd",null,"I"))," ","to open up Chrome Developer Tools."),_react.default.createElement("li",null,"Navigate to the WrapAPI tab on the very right.",_react.default.createElement("div",{className:"wa-pad20"},_react.default.createElement("div",{className:"wa-box-shadow20"},_react.default.createElement("img",{src:"".concat(_Config.default.host,"/assets/tutorial/open-devtools.png"),alt:"How to open the WrapAPI Developer Tools tab",className:"wa-full-width"}))))))}}]),t}();exports.default=ChromeInstructions;
},{"../js/Browser":4,"../js/Config":6,"react":"react"}],23:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_Config=_interopRequireDefault(require("../js/Config")),_Chrome=_interopRequireDefault(require("../js/Chrome")),_VideoContainer=_interopRequireDefault(require("./VideoContainer")),_withChrome=_interopRequireDefault(require("./hocs/withChrome"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ChromePluginPrompt=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"render",value:function(){var e=this.props,t=e.isChrome,r=e.isExtensionInstalled;return _react.default.createElement("div",{className:"row"},_react.default.createElement("div",{className:"col-sm-6 col-md-7 col-lg-8"},_react.default.createElement("h2",null,"Installing the WrapAPI Chrome extension"),_react.default.createElement(_VideoContainer.default,{youtubeId:"VeSDsfy4Ue8",imageSrc:"/assets/homepage/video2-thumb.png"})),_react.default.createElement("div",{className:"col-sm-6 col-md-5 col-lg-4"},_react.default.createElement("div",{className:"panel panel-primary wa-top20"},_react.default.createElement("div",{className:"panel-body"},_Config.default.pluginURL?_react.default.createElement("div",{className:"text-center wa-bottom20"},_react.default.createElement("div",{className:"wa-bottom10"},_react.default.createElement("button",{className:"btn btn-lg btn-primary",type:"button",onClick:_Chrome.default.installExtension,disabled:!1===t||r},_react.default.createElement("i",{className:"fa fa-chrome"})," Install WrapAPI Chrome extension")),_react.default.createElement("div",null,_react.default.createElement("a",{href:_Config.default.pluginURL,target:"_blank"},"See it in the Chrome web store"))):_react.default.createElement("div",{className:"wa-bottom20"},_react.default.createElement("div",{className:"text-center wa-bottom10"},_react.default.createElement("a",{className:"btn btn-lg btn-primary",download:!0,href:"/extension.zip"},_react.default.createElement("i",{className:"fa fa-chrome"})," Download WrapAPI Chrome extension")),_react.default.createElement("div",{className:"alert alert-info"},"To install it:",_react.default.createElement("ol",null,_react.default.createElement("li",null,"Extract the contents of the downloaded extensions.zip file to a folder."),_react.default.createElement("li",null,"Open a new tab, and type"," ",_react.default.createElement("strong",null,"chrome://extensions")," into the address bar to manage your Chrome extensions."),_react.default.createElement("li",null,"Check the ",_react.default.createElement("strong",null,"Developer mode")," checkbox in the right top corner."),_react.default.createElement("li",null,"Click the ",_react.default.createElement("strong",null,"Load unpacked extension...")," ","button and select the folder you extracted extensions.zip to.")))),!1===t&&_react.default.createElement("div",{className:"alert alert-danger"},"WrapAPI's request capture plugin is currently only compatible with Chrome, though the rest of the site will work with any browser."," ",_react.default.createElement("a",{href:"https://www.google.com/chrome/browser/"},"Get Chrome to start using capturing requests.")),_react.default.createElement("p",null,_react.default.createElement("strong",null,"Installing the WrapAPI Chrome extension lets you capture requests you make in Chrome")," ","and quickly turn them into API endpoints."),_react.default.createElement("p",null,"For example, it's especially useful for:"),_react.default.createElement("ul",null,_react.default.createElement("li",null,_react.default.createElement("strong",null,"Sites that use AJAX requests")," to load data in the background;"),_react.default.createElement("li",null,_react.default.createElement("strong",null,"Multi-step forms"),", where each step depends on the previous; and"),_react.default.createElement("li",null,_react.default.createElement("strong",null,"Pages behind logins"),"; the Chrome extension lets you start building an API with the cookies of a logged-in session."))))))}}]),t}(),_default=(0,_withChrome.default)(ChromePluginPrompt);exports.default=_default;
},{"../js/Chrome":5,"../js/Config":6,"./VideoContainer":34,"./hocs/withChrome":35,"react":"react"}],24:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_NavDropdown=_interopRequireDefault(require("react-bootstrap/lib/NavDropdown")),_DropdownButton=_interopRequireDefault(require("react-bootstrap/lib/DropdownButton")),_Dropdown=_interopRequireDefault(require("react-bootstrap/lib/Dropdown")),_MenuItem=_interopRequireDefault(require("react-bootstrap/lib/MenuItem")),_Utility=_interopRequireDefault(require("../js/Utility")),_NewUtils=require("./NewUtils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function defaultTextRenderer(e){return e.label}var UnselectableMenuItem=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"render",value:function(){return _react.default.createElement("li",{onClick:_NewUtils.preventDefault},this.props.children)}}]),t}(),propTypes={value:_react.default.PropTypes.oneOfType([_react.default.PropTypes.string,_react.default.PropTypes.number]),options:_react.default.PropTypes.oneOfType([_react.default.PropTypes.array,_react.default.PropTypes.object]),getOptions:_react.default.PropTypes.func,onChange:_react.default.PropTypes.func.isRequired,nav:_react.default.PropTypes.bool,button:_react.default.PropTypes.bool,searchable:_react.default.PropTypes.bool,onToggle:_react.default.PropTypes.func,id:_react.default.PropTypes.string,selectedTextRenderer:_react.default.PropTypes.func,defaultLabel:_react.default.PropTypes.node,pullRight:_react.default.PropTypes.bool},DropdownSelect=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n)))).state={dropdownId:"dropdown".concat(Math.floor(1e9*Math.random())),options:[],open:!1,textFilter:"",selectedMatchIndex:0},r._searchBox=null,r.handleToggle=function(e){var t=r.props.getOptions;r.setState({open:e}),e?(t&&r.setState({options:t()}),r._searchBox&&setTimeout(function(){return r._searchBox.focus()},1)):r.setState({textFilter:"",selectedMatchIndex:0})},r.handleTextFilterChange=function(e){r.setState({textFilter:e.target.value,selectedMatchIndex:0})},r.handleSearchBoxKeyDown=function(e){var t=r.state.selectedMatchIndex,o=r.getDisplayedOptions();if(0!==o.length){var n=null;38===e.keyCode?n=t-1:40===e.keyCode&&(n=t+1),null!=n&&(n=(n+o.length)%o.length,r.setState({selectedMatchIndex:n}))}},r.handleSearchSelect=function(){var e=r.getDisplayedOptions()[r.state.selectedMatchIndex];r.setState({open:!1}),r.props.onChange&&r.props.onChange(e&&e.value)},r}return _inherits(t,_react.default.Component),_createClass(t,[{key:"getDisplayedOptions",value:function(){var e=this.state.textFilter;return _Utility.default.normalizeOptions(this.props.options||this.state.options).filter(function(t){return!e||-1!==(t.textLabel||t.label).indexOf(e)})}},{key:"render",value:function(){var e=this.props,t=e.value,r=e.onChange,o=e.nav,n=e.button,a=e.pullRight,l=e.searchable,i=this.props.selectedTextRenderer||defaultTextRenderer,s=this.props.defaultLabel||"(Select one)",u=_lodash.default.omit(this.props,Object.keys(propTypes)),p=this.state,c=p.dropdownId,f=p.open,d=p.textFilter,_=p.selectedMatchIndex,h=_Utility.default.normalizeOptions(this.props.options||this.state.options),y=this.getDisplayedOptions(),b=null;if(null!=t){var g=h.filter(function(e){return e.value===t});b=0!==g.length?g[0]:{label:null,value:t}}var v=b?i(b):s,m=y.map(function(e,r){if(e.divider)return _react.default.createElement(_MenuItem.default,{key:"divider".concat(r),divider:!0});var o=e.value;return _react.default.createElement(_MenuItem.default,{key:JSON.stringify(o),eventKey:o,active:!!l&&r===_},e.label," ",o===t&&_react.default.createElement("i",{className:"fa fa-check"}))});if(l&&m.unshift(_react.default.createElement(UnselectableMenuItem,null,_react.default.createElement("form",{className:"wa-bs-searchbox",onSubmit:(0,_NewUtils.call)(this,"handleSearchSelect",[],!0)},_react.default.createElement("input",{type:"text",className:"form-control",value:d,onChange:this.handleTextFilterChange,ref:(0,_NewUtils.registerRef)(this,"_searchBox"),onKeyDown:this.handleSearchBoxKeyDown})))),o||n){var T=o?_NavDropdown.default:_DropdownButton.default;return _react.default.createElement(T,_extends({},u,{open:f,title:v||"",onSelect:r,id:this.props.id||c,pullRight:a,onToggle:this.handleToggle}),m)}return _react.default.createElement(_Dropdown.default,_extends({onSelect:r,id:this.props.id||c,onToggle:this.handleToggle,open:f},u),_react.default.createElement(_Dropdown.default.Toggle,{useAnchor:!0,className:"btn-link"},v),_react.default.createElement(_Dropdown.default.Menu,null,m))}}]),t}();DropdownSelect.propTypes=propTypes;var _default=DropdownSelect;exports.default=_default;
},{"../js/Utility":14,"./NewUtils":28,"lodash":"lodash","react":"react","react-bootstrap/lib/Dropdown":"react-bootstrap/lib/Dropdown","react-bootstrap/lib/DropdownButton":"react-bootstrap/lib/DropdownButton","react-bootstrap/lib/MenuItem":"react-bootstrap/lib/MenuItem","react-bootstrap/lib/NavDropdown":"react-bootstrap/lib/NavDropdown"}],25:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_ReactUtils=_interopRequireDefault(require("./ReactUtils")),_NewUtils=_interopRequireDefault(require("./NewUtils")),_Tabs=_interopRequireDefault(require("./Tabs")),_Auth=_interopRequireDefault(require("../js/redux/Auth")),_Auth2=_interopRequireDefault(require("../js/Auth")),_Validate=_interopRequireDefault(require("../js/Validate"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tabOptions={login:"Sign in",register:"Register"},LoginForm=function(e){function t(){var e,a;_classCallCheck(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(a=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(l)))).props=void 0,a.state={form:{email:"",username:"",password:"",name:"",title:"",company:"",intendedUse:"",shouldContact:null},blurred:{},hasSubmitErrors:!1,loading:!1,response:null},a.login=function(){a.setState({loading:!1,response:null}),a.props.login(a.state.form.email,a.state.form.password).then(function(e){e.isLoggedIn&&a.props.onLogin()})},a.register=function(){var e=_Validate.default.user(a.state.form);_lodash.default.isEmpty(e)?(a.setState({hasSubmitErrors:!1,loading:!1,response:null}),a.props.registerUser(a.state.form,a.props.inviteKey).then(function(e){e.isLoggedIn&&a.props.onRegister()})):a.setState({hasSubmitErrors:!0,loading:!1})},a.resetPassword=function(){_Auth2.default.startResetPassword(a.state.form.username,a.state.form.email).then(_NewUtils.default.getThen(_assertThisInitialized(a))).catch(_NewUtils.default.getCatch(_assertThisInitialized(a)))},a.submit=function(e){e&&e.preventDefault(),a.setState({loading:!0,response:null});var t=a.props.tab;"login"===t?a.login():"register"===t?a.register():"resetPassword"===t&&a.resetPassword()},a}return _inherits(t,_react.default.Component),_createClass(t,[{key:"render",value:function(){var e=this.props.tab,t=this.state.loading||this.props.authLoading,a=this.state.response||this.props.authError,r=this.state.form,l=this.state.blurred,o=this.state.hasSubmitErrors,s=null;switch(e){case"login":s="Sign in";break;case"register":s="Register";break;case"resetPassword":s="Reset password"}var n=_Validate.default.user(r),i={};return"register"===e&&(i=_lodash.default.clone(n),o||_lodash.default.forEach(n,function(e,t){l[t]||delete i[t]})),_react.default.createElement("div",null,this.props.showLogo&&_react.default.createElement("div",{className:"text-center wa-top20 wa-bottom20"},_react.default.createElement("img",{src:"/assets/logo-large.png",alt:"WrapAPI logo",style:{maxWidth:"100%",maxHeight:"75px"}})),_react.default.createElement("h1",{className:"wa-top0"},s),_react.default.createElement("div",{className:"wa-bottom20"},_react.default.createElement(_Tabs.default,{tabs:tabOptions,value:e,onChange:_NewUtils.default.callProp(this,"onTabChange")})),_react.default.createElement("div",{className:"row"},"register"===e&&_react.default.createElement("div",{className:"col-sm-6 col-sm-push-6"},_react.default.createElement("div",{className:"panel panel-primary"},_react.default.createElement("div",{className:"panel-body"},_react.default.createElement("p",null,_react.default.createElement("strong",null,"WrapAPI is free to use!")," By registering, you"," ",_react.default.createElement("a",{href:"/terms",target:"_blank"},"agree to our Terms of Service"),", and can:"),_react.default.createElement("ul",null,_react.default.createElement("li",null,"Build and use public APIs, running on our servers"),_react.default.createElement("li",null,"Make 30,000 requests per month"),_react.default.createElement("li",null,"Enjoy the full range of WrapAPI functionality")),_react.default.createElement("h3",null,"Need more?"),_react.default.createElement("div",{className:i.shouldContact?"has-error":""},_react.default.createElement("div",{className:"checkbox"},_react.default.createElement("label",{htmlFor:"shouldContactTrue"},_react.default.createElement("input",{type:"radio",id:"shouldContactTrue",onClick:_NewUtils.default.setState(this,"form.shouldContact",!0),checked:!0===r.shouldContact})," ",_react.default.createElement("strong",null,"Yes; I'm interested")," in more API requests, a self-hosted solution, or private API endpoints.")),_react.default.createElement("div",{className:"checkbox"},_react.default.createElement("label",{htmlFor:"shouldContactFalse"},_react.default.createElement("input",{type:"radio",id:"shouldContactFalse",onClick:_NewUtils.default.setState(this,"form.shouldContact",!1),checked:!1===r.shouldContact})," ","No; the above should be enough.")),i.shouldContact&&_react.default.createElement("p",{className:"help-block"},_react.default.createElement("strong",null,i.shouldContact)))))),_react.default.createElement("div",{className:"register"===e?"col-sm-6 col-sm-pull-6":"col-sm-12"},_NewUtils.default.renderResponse(a),_react.default.createElement("form",{onSubmit:this.submit},_react.default.createElement("div",{className:"form-group ".concat(i.email?"has-error":"")},_react.default.createElement("label",{htmlFor:"email"},"Email","login"===e&&" or username"),_react.default.createElement("input",{type:"text",id:"email",className:"form-control",maxLength:"128",value:r.email,onChange:_NewUtils.default.update(this,"form.email"),onBlur:_NewUtils.default.setState(this,"blurred.email",!0)}),"register"===e&&_react.default.createElement("p",{className:"help-block"},i.email||"We will send an email here with an activation link.")),("register"===e||"resetPassword"===e)&&_react.default.createElement("div",{className:"form-group ".concat(i.username?"has-error":"")},_react.default.createElement("label",{htmlFor:"username"},"Username"),_react.default.createElement("input",{type:"username",id:"username",className:"form-control",value:r.username,onChange:_NewUtils.default.update(this,"form.username"),onBlur:_NewUtils.default.setState(this,"blurred.username",!0)}),"register"===e&&_react.default.createElement("p",{className:"help-block"},i.username||_react.default.createElement("span",null,"APIs you publish will be accessible at"," ",_react.default.createElement("code",null,"(your username)/(repository)/(API name)")))),("register"===e||"login"===e)&&_react.default.createElement("div",{className:"form-group ".concat(i.password?"has-error":"")},_react.default.createElement("label",{htmlFor:"password"},"Password"),_react.default.createElement("input",{type:"password",id:"password",className:"form-control",value:r.password,onChange:_NewUtils.default.update(this,"form.password"),onBlur:_NewUtils.default.setState(this,"blurred.password",!0)}),"register"===e&&_react.default.createElement("p",{className:"help-block"},i.password||"Choose a long, hard-to-guess password that you don't use anywhere else.")),"register"===e&&_react.default.createElement("div",null,_react.default.createElement("div",{className:"form-group ".concat(i.name?"has-error":"")},_react.default.createElement("label",{htmlFor:"name"},"Name"),_react.default.createElement("input",{type:"text",id:"name",className:"form-control",value:r.name,onChange:_NewUtils.default.update(this,"form.name"),onBlur:_NewUtils.default.setState(this,"blurred.name",!0)}),i.name&&_react.default.createElement("p",{className:"help-block"},i.name)),_react.default.createElement("div",{className:"form-group"},_react.default.createElement("label",{htmlFor:"company"},"Company (if applicable)"),_react.default.createElement("input",{type:"text",id:"company",className:"form-control",value:r.company,onChange:_NewUtils.default.update(this,"form.company")})),_react.default.createElement("div",{className:"form-group"},_react.default.createElement("label",{htmlFor:"intendedUse"},"How are you thinking of using WrapAPI? (optional)"),_react.default.createElement("textarea",{id:"intendedUse",className:"form-control",value:r.intendedUse,onChange:_NewUtils.default.update(this,"form.intendedUse"),style:{height:"100px"}}),_react.default.createElement("div",{className:"help-block"},"No worries if you don't know yet, but if you do, we might be able to help with some extra tips!"))),o&&_react.default.createElement("div",{className:"alert alert-danger"},"Some fields don't seem to be filled in correctly! Take a look at the error messages above."),_react.default.createElement("button",{className:"btn btn-primary",type:"submit",disabled:t},s),"login"===e&&_react.default.createElement("a",{href:"#",className:"pull-right",onClick:_NewUtils.default.callProp(this,"onTabChange",["resetPassword"],!0)},"Forgot password")))))}}]),t}(),_default=_Auth.default.connect()(_ReactUtils.default.connectLocalTutorialStep()(LoginForm));exports.default=_default;
},{"../js/Auth":2,"../js/Validate":15,"../js/redux/Auth":17,"./NewUtils":28,"./ReactUtils":32,"./Tabs":33,"lodash":"lodash","react":"react"}],26:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_Fade=_interopRequireDefault(require("react-bootstrap/lib/Fade")),_Auth=_interopRequireDefault(require("../js/redux/Auth")),_ReactUtils=_interopRequireDefault(require("./ReactUtils")),_LoginPage=_interopRequireDefault(require("./LoginPage")),_NewUtils=_interopRequireDefault(require("./NewUtils"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var LoginGate=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,a=new Array(o),n=0;n<o;n++)a[n]=arguments[n];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(a)))).state={isExiting:!1},r}return _inherits(t,_react.default.Component),_createClass(t,[{key:"componentWillMount",value:function(){_Auth.default.getOrFetchLoginState(this.props)}},{key:"render",value:function(){var e=this,t=this.props.componentOnceLoggedIn,r=this.props.logout,o=this.props.username,a=this.props.authStateLoaded,n=this.props.isLoggedIn,i=function(t,r){var o=e.state.isExiting;return{in:r&&(!o||o===t),onExit:_NewUtils.default.setState(e,"isExiting",t),onExited:_NewUtils.default.setState(e,"isExiting",!1),unmountOnExit:!0}};return _react.default.createElement("div",null,_react.default.createElement(_Fade.default,i("notLoaded",!a),_react.default.createElement("div",null,_react.default.createElement("div",{key:"notLoaded",className:"text-center wa-pad20 wa-not-loaded"},_react.default.createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-fw fa-3x"}),_react.default.createElement("div",{className:"wa-top10"},"Please wait... loading your account")))),_react.default.createElement(_Fade.default,i("loginPage",a&&!n),_react.default.createElement("div",{key:"loginPage",className:"wa-login-page"},_react.default.createElement(_LoginPage.default,{openRegisterInNewWindow:!0,showLogo:this.props.showLogo}))),_react.default.createElement(_Fade.default,i("loggedIn",a&&n),_react.default.createElement("div",null,a&&n&&_react.default.createElement(t,{key:"component",username:o,logout:r}))))}}]),t}();LoginGate.propTypes={updateLocalTutorialStep:_react.default.PropTypes.func.isRequired,componentOnceLoggedIn:_react.default.PropTypes.any.isRequired,showLogo:_react.default.PropTypes.bool,logout:_react.default.PropTypes.func.isRequired,username:_react.default.PropTypes.string,authStateLoaded:_react.default.PropTypes.bool.isRequired,isLoggedIn:_react.default.PropTypes.bool.isRequired};var _default=_Auth.default.connect()(_ReactUtils.default.connectLocalTutorialStep()(LoginGate));exports.default=_default;
},{"../js/redux/Auth":17,"./LoginPage":27,"./NewUtils":28,"./ReactUtils":32,"react":"react","react-bootstrap/lib/Fade":"react-bootstrap/lib/Fade"}],27:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_reactRouter=require("react-router"),_Config=_interopRequireDefault(require("../js/Config")),_NewUtils=_interopRequireDefault(require("./NewUtils")),_ChromePluginPrompt=_interopRequireDefault(require("./ChromePluginPrompt")),_LoginForm=_interopRequireDefault(require("./LoginForm"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var LoginPage=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n)))).props=void 0,r.state={tab:"login",registrationResponse:null},r.setTabFromUrl=function(e){"/register"===_lodash.default.get(e,"location.pathname")?r.setState({tab:"register"}):r.setState({tab:"login"})},r.onLogin=function(){var e=_lodash.default.get(r.props,"location.query.redirect");e&&r.props.router.push(e)},r.onRegister=function(e){r.setState({registrationResponse:e})},r.handleTabChange=function(e){r.props.openRegisterInNewWindow&&"register"===e?window.open("".concat(_Config.default.host,"/register")):r.setState({tab:e})},r}return _inherits(t,_react.default.Component),_createClass(t,[{key:"componentWillMount",value:function(){this.setTabFromUrl(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.setTabFromUrl(e)}},{key:"render",value:function(){var e=this.props.showLogo,t=this.props.location&&this.props.location.query||{},r=this.state.registrationResponse,o=this.state.tab;return r&&r.success?_react.default.createElement("div",{className:"container"},_react.default.createElement("h1",null,"Register"),_NewUtils.default.renderResponse(r),_react.default.createElement(_ChromePluginPrompt.default,null)):_react.default.createElement("div",{className:"container"},_react.default.createElement("div",{className:"row"},_react.default.createElement("div",{className:"register"===o?"col-sm-12":"col-sm-6 col-sm-offset-3"},_react.default.createElement("div",{className:"wa-top20 wa-bottom20"},_react.default.createElement(_LoginForm.default,{onLogin:this.onLogin,onRegister:this.onRegister,inviteKey:t.key,showLogo:e,tab:o,onTabChange:this.handleTabChange})))))}}]),t}(),_default=(0,_reactRouter.withRouter)(LoginPage);exports.default=_default;
},{"../js/Config":6,"./ChromePluginPrompt":23,"./LoginForm":25,"./NewUtils":28,"lodash":"lodash","react":"react","react-router":"react-router"}],28:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.preventDefault=preventDefault,exports.stopPropagation=stopPropagation,exports.toggle=toggle,exports.toggleProp=toggleProp,exports.toggleValue=toggleValue,exports.togglePropValue=togglePropValue,exports.toggleFromEvent=toggleFromEvent,exports.togglePropFromEvent=togglePropFromEvent,exports.setProp=setProp,exports.setPropNumber=setPropNumber,exports.setPropValue=setPropValue,exports.deleteProp=deleteProp,exports.update=update,exports.updateNumber=updateNumber,exports.setState=setState,exports.deleteState=deleteState,exports.getThen=getThen,exports.getCatch=getCatch,exports.renderResponse=renderResponse,exports.memoizeLocal=memoizeLocal,exports.all=all,exports.fromEvent=fromEvent,exports.numberFromEvent=numberFromEvent,exports.constant=constant,exports.negate=negate,exports.toggleConstant=toggleConstant,exports.changeProp=changeProp,exports.changeState=changeState,exports.call=call,exports.callProp=callProp,exports.registerRef=registerRef,exports.debounce=debounce,exports.default=exports.deleteMixed=exports.getMixed=exports.setMixed=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_Immutable=_interopRequireDefault(require("../js/Immutable"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var setMixed=_Immutable.default.setMixed;exports.setMixed=setMixed;var getMixed=_Immutable.default.getMixed;exports.getMixed=getMixed;var deleteMixed=_Immutable.default.deleteMixed;function preventDefault(e){e&&e.preventDefault()}function stopPropagation(e){e&&e.stopPropagation()}function preventDefaultAndBlur(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation(),e.target&&e.target.blur())}function toggle(e,t,r){return changeState(e,t,negate,r,"negate")}function toggleProp(e,t,r,n,a){return changeProp(e,t,r,n,negate,a,"negate")}function toggleValue(e,t,r,n){return changeState(e,t,toggleConstant(r),n,["toggleConstant",r])}function togglePropValue(e,t,r,n,a,o){return changeProp(e,t,r,n,toggleConstant(a),o,["toggleConstant",a])}function toggleFromEvent(e,t,r){return changeState(e,t,setOrNull,r,"setOrNull")}function togglePropFromEvent(e,t,r,n,a,o){return changeProp(e,t,r,n,setOrNull,o,"setOrNull")}function setProp(e,t,r,n,a){return changeProp(e,t,r,n,fromEvent,a,"fromEvent")}function setPropNumber(e,t,r,n,a){return changeProp(e,t,r,n,numberFromEvent,a,"numberFromEvent")}function setPropValue(e,t,r,n,a,o){return changeProp(e,t,r,n,constant(a),o,["constant",a])}function deleteProp(e,t,r,n,a){return changeProp(e,t,r,null,remove(n),a,["remove",n])}function update(e,t,r){return changeState(e,t,fromEvent,r,"fromEvent")}function updateNumber(e,t,r){return changeState(e,t,numberFromEvent,r,"numberFromEvent")}function setState(e,t,r,n){return changeState(e,t,constant(r),n,["constant",r])}function deleteState(e,t,r){return changeState(e,t[0],remove(t.slice(1)),r,["remove",t])}function getChanged(e,t){var r={};return _lodash.default.forEach(t,function(n,a){e[a]!==t[a]&&(r[a]=n)}),r}function getThen(e,t,r,n){var a=["__cache",JSON.stringify(["getThen",t,r])];t=t||"response",r=r||"loading",n=n||"data";var o=_lodash.default.get(e,a);if(o)return o;var l=function(a){var o={};o[r]=!1,o[t]=a,a.success&&n&&a.data&&(o[n]=a.data),e.setState(o)};return _lodash.default.setWith(e,a,l,Object),l}function getCatch(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"response",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"loading",n=["__cache",JSON.stringify(["getCatch",t,r])],a=_lodash.default.get(e,n);if(a)return a;var o=function(n){console.error(n.stack);var a={};r&&(a[r]=!1),t&&(a[t]={success:!1,messages:["An unexpected error has occurred. Please try again later."],error:n}),e.setState(a)};return _lodash.default.setWith(e,n,o,Object),o}function renderResponse(e,t){var r=(t=t||{}).type||"alert",n=t.additionalClasses||"",a=t.onClick,o=!!t.errorsOnly;return e?e.success&&o?null:e&&e.messages&&_react.default.createElement("div",{className:"".concat(r," ").concat(r,"-")+(e.success?"success":"danger")+(n?" ".concat(n):"")+(a?" wa-link":""),onClick:a},e.messages.map(function(e,t){return _react.default.createElement("p",{key:t},e)})):null}function memoizeLocal(e,t,r,n){var a=["__cache","memoizeLocal",t],o=_lodash.default.get(e,a)||[],l=o.find(function(e){return e[0]===r});return l?l[1]:(o.push([r,n]),_lodash.default.set(e,a,o),n)}function all(e,t,r){var n=["__cache","all"],a=_lodash.default.get(e,n)||[],o=null,l=!0,u=!1,s=void 0;try{for(var g,c=a[Symbol.iterator]();!(l=(g=c.next()).done);l=!0){for(var i=g.value,p=i.args[0],d=0!==p.length,f=0;f!==p.length;f++)if(p[f]!==t[f]){d=!1;break}if(i.args[1]!==r&&(d=!1),d){o=i;break}}}catch(e){u=!0,s=e}finally{try{l||null==c.return||c.return()}finally{if(u)throw s}}if(o)return o.func;var h=function(n){r&&preventDefaultAndBlur(n);for(var a=e.state,o=0;o!==t.length;o++)e.state=t[o](n);e.state=a};return o={args:[t,r],func:h},a.push(o),_lodash.default.set(e,n,a),h}function fromEvent(e,t){return t&&t.target?t.target.value:t}function numberFromEvent(e,t){var r=parseFloat(t&&t.target?t.target.value:t);return isNaN(r)?null:r}function constant(e){return function(){return e}}function remove(e){return function(t){return deleteMixed(t,e)}}function negate(e){return!e}function toggleConstant(e){return function(t){return t===e?null:e}}function setOrNull(e,t){var r=t&&t.target?t.target.value:t;return e===r?null:r}function changeProp(e,t,r,n,a,o,l){var u=["__cache",JSON.stringify(["changeProp",t,r,n,o,l])],s=_lodash.default.get(e,u);if(s)return s;var g=function(l){o&&preventDefaultAndBlur(l);var u=null;if(r){var s=getMixed(e.props,r);if(n){var g=getMixed(s,n),c=a(g,l);u=setMixed(s,n,c)}else u=a(s,l)}else u=a(null,l);return e.props[t](u),u};return _lodash.default.setWith(e,u,g,Object),g}function changeState(e,t,r,n,a){var o=["__cache",JSON.stringify(["changeState",t,n,a])],l=_lodash.default.get(e,o);if(l)return l;var u=function(a){n&&preventDefaultAndBlur(a);var o=getMixed(e.state,t),l=r(o,a),u=setMixed(e.state,t,l);return e.setState(getChanged(e.state,u)),u};return _lodash.default.setWith(e,o,u,Object),u}function call(e,t,r,n,a){var o=["__cache",JSON.stringify(["call",t,r,n,a])],l=_lodash.default.get(e,o);if(l)return l;var u=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];n&&o[0]&&preventDefaultAndBlur(o[0]);var u=[].concat(r).concat(o),s=_lodash.default.get(e,t);return s?s.apply(e,u):null};return _lodash.default.setWith(e,o,u,Object),u}function callProp(e,t,r,n,a){var o=["__cache",JSON.stringify(["callProp",t,r,n,a])],l=_lodash.default.get(e,o);if(l)return l;var u=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];n&&o[0]&&preventDefaultAndBlur(o[0]);var u=[].concat(r||[]).concat(o),s=_lodash.default.get(e.props,t);return s?s.apply(e,u):null};return _lodash.default.setWith(e,o,u,Object),u}function registerRef(e,t){var r=["__cache",JSON.stringify(["registerRef",t])],n=_lodash.default.get(e,r);if(n)return n;var a=function(r){_lodash.default.setWith(e,t,r,Object)};return _lodash.default.setWith(e,r,a,Object),a}function debounce(e,t,r,n){var a=["__cache",JSON.stringify(["debounce",n])];if(!_lodash.default.get(e,a)){var o=_lodash.default.debounce(t,r);_lodash.default.setWith(e,a,o)}return _lodash.default.get(e,a)}exports.deleteMixed=deleteMixed;var _default={preventDefault:preventDefault,stopPropagation:stopPropagation,toggle:toggle,toggleValue:toggleValue,toggleFromEvent:toggleFromEvent,toggleProp:toggleProp,togglePropValue:togglePropValue,togglePropFromEvent:togglePropFromEvent,setProp:setProp,setPropNumber:setPropNumber,setPropValue:setPropValue,deleteProp:deleteProp,callProp:callProp,call:call,update:update,updateNumber:updateNumber,setState:setState,deleteState:deleteState,registerRef:registerRef,getThen:getThen,getCatch:getCatch,renderResponse:renderResponse,fromEvent:fromEvent,numberFromEvent:numberFromEvent,constant:constant,negate:negate,toggleConstant:toggleConstant,memoizeLocal:memoizeLocal,all:all,changeState:changeState,changeProp:changeProp,debounce:debounce,setMixed:setMixed,getMixed:getMixed,deleteMixed:deleteMixed};exports.default=_default;
},{"../js/Immutable":8,"lodash":"lodash","react":"react"}],29:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_Collapse=_interopRequireDefault(require("react-bootstrap/lib/Collapse"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Panel=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,a=new Array(o),n=0;n<o;n++)a[n]=arguments[n];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(a)))).state={expanded:!1},r.toggleShow=function(e){e&&e.preventDefault&&e.stopPropagation&&(e.preventDefault(),e.stopPropagation()),r.props.onSelect?r.props.onSelect(r.props.eventKey,e):r.setState({expanded:!r.state.expanded})},r}return _inherits(t,_react.default.Component),_createClass(t,[{key:"componentWillMount",value:function(){var e=!0;this.props.collapsible&&(e=!!this.props.defaultExpanded),this.setState({expanded:e})}},{key:"render",value:function(){var e=this.props.left,t=this.props.disableLeftLink,r=this.props.right,o=this.props.collapsible,a=null!=this.props.expanded?this.props.expanded:this.state.expanded,n=this.props.className||"panel panel-default";return _react.default.createElement("div",{className:n},_react.default.createElement("div",{className:"panel-heading wa-header-valign-mid wa-hover-link",onClick:this.toggleShow},e?_react.default.createElement("h4",{className:"left panel-title"},o&&!t?_react.default.createElement("a",{href:"#",onClick:this.toggleShow},a?_react.default.createElement("i",{className:"fa fa-caret-down fa-fw"}):_react.default.createElement("i",{className:"fa fa-caret-right fa-fw"}),e):e):null,r?_react.default.createElement("div",{className:"right"},r):null),_react.default.createElement(_Collapse.default,{in:a},this.props.children))}}]),t}();Panel.propTypes={left:_react.default.PropTypes.node.isRequired,disableLeftLink:_react.default.PropTypes.bool,right:_react.default.PropTypes.node,defaultExpanded:_react.default.PropTypes.bool,collapsible:_react.default.PropTypes.bool,eventKey:_react.default.PropTypes.oneOfType([_react.default.PropTypes.number,_react.default.PropTypes.string]),expanded:_react.default.PropTypes.bool,onSelect:_react.default.PropTypes.func,children:_react.default.PropTypes.node,className:_react.default.PropTypes.string};var _default=Panel;exports.default=_default;
},{"react":"react","react-bootstrap/lib/Collapse":"react-bootstrap/lib/Collapse"}],30:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_redux=require("redux"),_reactRedux=require("react-redux"),_Config=_interopRequireDefault(require("../js/Config")),_Auth=_interopRequireDefault(require("../js/Auth")),_MainReducer=_interopRequireDefault(require("../js/redux/MainReducer")),_LoginGate=_interopRequireDefault(require("./LoginGate")),_Extension=require("../js/Extension"),_PopupPage=_interopRequireDefault(require("./PopupPage"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var store=(0,_redux.createStore)(_MainReducer.default),PopupMainPage=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).handleDisableProxy=function(){(0,_Extension.disableProxy)().then(function(){e.setState({httpFailed:!1})})},e.state={httpFailed:!1},e}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"componentDidMount",value:function(){var e=this;(0,_Extension.isProxyEnabled)().then(function(e){return e?_Auth.default.isLoggedIn():null}).catch(function(t){_Config.default.debug(t),e.setState({httpFailed:!0})})}},{key:"render",value:function(){var e=this.state.httpFailed;return _react.default.createElement("div",{className:"wa-popup"},_react.default.createElement(_reactRedux.Provider,{store:store},e?_react.default.createElement("div",{className:"text-center container  wa-top20 wa-bottom20"},"We couldn't connect to the WrapAPI servers. Try disabling the WrapAPI proxies and then trying again:",_react.default.createElement("button",{className:"btn btn-primary",type:"button",onClick:this.handleDisableProxy},"Disable WrapAPI proxy")):_react.default.createElement(_LoginGate.default,{componentOnceLoggedIn:_PopupPage.default})))}}]),t}();exports.default=PopupMainPage;
},{"../js/Auth":2,"../js/Config":6,"../js/Extension":7,"../js/redux/MainReducer":18,"./LoginGate":26,"./PopupPage":31,"react":"react","react-redux":"react-redux","redux":"redux"}],31:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_rcSwitch=_interopRequireDefault(require("rc-switch")),_lodash=_interopRequireDefault(require("lodash")),_moment=_interopRequireDefault(require("moment")),_Collapse=_interopRequireDefault(require("react-bootstrap/lib/Collapse")),_APIElementSelect=_interopRequireDefault(require("./APIElementSelect")),_ChromeInstructions=_interopRequireDefault(require("./ChromeInstructions")),_APIStorage=_interopRequireDefault(require("../js/APIStorage")),_Browser=require("../js/Browser"),_Extension=require("../js/Extension"),_Config=_interopRequireDefault(require("../js/Config")),_Auth=require("../js/redux/Auth"),_APIElements=require("../js/redux/APIElements"),_Panel=_interopRequireDefault(require("./Panel")),_NewUtils=require("./NewUtils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var PopupPage=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).state=void 0,e.props=void 0,e.handleProxyToggle=function(){var t=e.props.proxyAllocation,r=e.state.proxyOn;e.setState({response:null}),r?(0,_Extension.disableProxy)().then(function(){e.setState({proxyOn:!1,response:{success:!0,messages:["We've disabled the WrapAPI proxy and restored your original connection settings"]}})}).catch(function(t){_Config.default.debug(t),e.setState({response:{success:!1,messages:["We had some trouble changing your proxy settings"]}})}):t&&(e.setState({loading:!0}),(0,_Extension.enableProxy)(t).then(function(){return(0,_Browser.checkConnectivity)()}).then(function(){e.setState({loading:!1,proxyOn:!0,response:{success:!0,messages:[_react.default.createElement("span",{key:0},"Chrome is now using your WrapAPI proxy; navigate to"," ",_react.default.createElement("a",{href:"".concat(_Config.default.host,"/proxy/capture?showInstructions=true")},"WrapAPI's proxy capture page")," ","to start viewing requests and turning them into APIs.")]}})}).catch(function(t){return console.error(t.stack),(0,_Extension.disableProxy)().then(function(){e.setState({loading:!1,proxyOn:!1,response:{success:!1,messages:[_react.default.createElement("div",{key:0},"We can't turn on the proxy yet; please first"," ",_react.default.createElement("a",{href:"".concat(_Config.default.host,"/proxy"),target:"_blank"},"install the WrapAPI proxy root certificate")," ","so that the proxy can properly show you your HTTPS requests.")]}})})}))},e.handleCreateButtonClick=function(){0===e.getExtractors().length?e.handleCreateExtractor():e.setState({showAddToExtractor:!0})},e.handleCreateExtractor=function(){(0,_Extension.getCurrentTabData)().then(function(e){return(0,_Extension.sendToExtractor)(e)})},e.handleAddToExtractor=function(t){var r=t.username,a=t.repository,n=t.name;(0,_Extension.getCurrentTabData)().then(function(t){var o={name:(0,_moment.default)().format("M/D h:mma"),responseData:{responses:[{request:{uri:{href:t.url}},body:t.html}]}};return e.setState({extractorLoading:!0,extractorResponse:null}),_APIStorage.default.addCapture(r,a,n,o).then(function(t){(0,_NewUtils.getThen)(_assertThisInitialized(e),"extractorResponse","extractorLoading")(t),t.success&&chrome.tabs.create({url:"".concat(_Config.default.host,"/extract/").concat(r,"/").concat(a,"/").concat(n,"/0.0.0?showLastTestCase=true")})}).catch((0,_NewUtils.getCatch)(_assertThisInitialized(e),"extractorResponse","extractorLoading"))})},e.state={proxyOn:null,response:null,loading:!1,showAddToExtractor:!1,extractorLoading:!1,extractorResponse:null},e}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.proxyAllocation;t&&(0,_Extension.isProxyEnabled)(t).then(function(t){e.setState({proxyOn:t})}),this.props.refreshAPIElements()}},{key:"getExtractors",value:function(){return _lodash.default.values(this.props.apiElements).filter(function(e){return"extractor"===e.type})}},{key:"render",value:function(){var e=this.props,t=e.logout,r=e.proxyAllocation,a=e.featureFlags,n=e.apiElementsLoading,o=this.props.username,l=this.state,s=l.proxyOn,c=l.response,i=l.loading,u=l.showAddToExtractor,f=l.extractorLoading,p=l.extractorResponse,d=this.getExtractors();return _react.default.createElement("div",{className:"container wa-popup-main"},_react.default.createElement("div",{className:"pull-right wa-top20"},_react.default.createElement("a",{href:"#logout",onClick:t},"Sign out")),_react.default.createElement("h3",null,"Using WrapAPI"),_react.default.createElement("div",{className:"panel-group"},_react.default.createElement("div",{className:"panel panel-default"},_react.default.createElement("a",{href:"".concat(_Config.default.host,"/apis"),target:"_blank",className:"panel-heading wa-header-valign-mid wa-hover-link"},"Go to WrapAPI to view your existing APIs"," ",_react.default.createElement("i",{className:"fa fa-external-link"}))),a.extractor&&_react.default.createElement(_Panel.default,{collapsible:!0,defaultExpanded:!0,left:"Extract data with WrapAPI Extractor"},_react.default.createElement("div",null,_react.default.createElement("div",{className:"panel-body"},_react.default.createElement("div",{className:"text-center wa-bottom10"},_react.default.createElement(_Collapse.default,{in:u},_react.default.createElement("div",null,_react.default.createElement("button",{className:"btn btn-primary",type:"button",onClick:this.handleCreateExtractor,disabled:f},_react.default.createElement("i",{className:"fa fa-plus"})," Create new")," ",_react.default.createElement(_APIElementSelect.default,{button:!0,searchable:!0,pullRight:!0,bsStyle:"primary",defaultLabel:f?_react.default.createElement("span",null,_react.default.createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-fw"}),_react.default.createElement("span",{className:"sr-only"},"Loading")," Add to existing..."):"Add to existing...",username:o,apiElements:d,onChange:this.handleAddToExtractor,disabled:f}))),_react.default.createElement(_Collapse.default,{in:!u},_react.default.createElement("div",null,_react.default.createElement("button",{className:"btn btn-primary",onClick:this.handleCreateButtonClick,disabled:n,type:"button"},"Send this page to WrapAPI Extractor")))),(0,_NewUtils.renderResponse)(p),"Want to just extract data from this page and pages like this? Use the WrapAPI Extractor to define extraction rules, and export to a JSON file or a CSV."))),_react.default.createElement(_Panel.default,{collapsible:!0,defaultExpanded:!0,left:"Use WrapAPI in Chrome DevTools"},_react.default.createElement("div",null,_react.default.createElement("div",{className:"panel-body"},_react.default.createElement(_ChromeInstructions.default,null)))),r&&_react.default.createElement(_Panel.default,{collapsible:!0,defaultExpanded:!0,left:"Use WrapAPI Proxy to capture requests"},_react.default.createElement("div",null,_react.default.createElement("div",{className:"panel-body"},null!=s&&_react.default.createElement(_rcSwitch.default,{checked:s,onChange:this.handleProxyToggle}),i&&_react.default.createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-fw"}),c?_react.default.createElement("div",{className:"wa-top10"},(0,_NewUtils.renderResponse)(c)):null)))))}}]),t}();PopupPage.propTypes={proxyAllocation:_react.default.PropTypes.object,logout:_react.default.PropTypes.func.isRequired,featureFlags:_react.default.PropTypes.object,apiElements:_react.default.PropTypes.arrayOf(_react.default.PropTypes.object).isRequired,refreshAPIElements:_react.default.PropTypes.func.isRequired,username:_react.default.PropTypes.string};var _default=(0,_APIElements.connect)()((0,_Auth.connect)()(PopupPage));exports.default=_default;
},{"../js/APIStorage":1,"../js/Browser":4,"../js/Config":6,"../js/Extension":7,"../js/redux/APIElements":16,"../js/redux/Auth":17,"./APIElementSelect":21,"./ChromeInstructions":22,"./NewUtils":28,"./Panel":29,"lodash":"lodash","moment":"moment","rc-switch":"rc-switch","react":"react","react-bootstrap/lib/Collapse":"react-bootstrap/lib/Collapse"}],32:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_Immutable=_interopRequireDefault(require("../js/Immutable")),_Utility=_interopRequireDefault(require("../js/Utility")),_Tutorial=_interopRequireDefault(require("../js/redux/Tutorial"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function preventDefault(e){e&&e.preventDefault()}function stopPropagation(e){e&&e.stopPropagation()}function joinPath(e,t){return"string"==typeof t?(e="string"==typeof e?e:e.join("."),"".concat(e,".").concat(t)):t instanceof Array?(e=e instanceof Array?e:e.split(".")).concat(t):null}function updateFormFieldWithPrefix(e,t){return function(a,l,r){return a=joinPath(t,a),updateFormField(e,a,l,r)}}function updateFormField(e,t,a,l){var r=e._updateFormFieldCache;r||(e._updateFormFieldCache={},r=e._updateFormFieldCache);var n=JSON.stringify([t,a,l]);if(r[n])return r[n];var o=function(r){var n=r&&r.target?r.target.value:r;try{"int"===a?n=parseInt(n,10):"float"===a&&(n=parseFloat(n))}catch(e){return r.preventDefault&&r.preventDefault(),e}var o=e.state;return o=setMixed(o,t,n),l&&(o=setMixed(o,l,!0)),e.setState(o),null};return r[n]=o,o}function toggle(e,t,a){a&&a.preventDefault();var l=_lodash.default.get(this.state,e)===t?null:t,r=_lodash.default.cloneDeep(this.state);_lodash.default.set(r,e,l),this.setState(r)}function toggleCheckbox(e,t){return toggleBoolTrackingChanges.call(this,e,t,null)}function toggleCheckboxWithPrefix(e,t,a){return toggleCheckbox.call(this,joinPath(e,t),a)}function toggleBool(e,t){return toggleBoolTrackingChanges.call(this,e,null,t)}function splitMutableImmutable(e,t){"string"==typeof t&&(t=t.split("."));for(var a=e,l=[],r=[],n=0;n!==t.length;n++){var o=t[n];if(r.push(o),_Immutable.default.Iterable.isIterable(a[o])){l=t.slice(n+1);break}}return{mutable:r,immutable:l}}function setMixed(e,t,a,l){var r=splitMutableImmutable(e,t),n=!!r.mutable.length,o=!!r.immutable.length,i=n?_lodash.default.get(e,r.mutable):e,u=o?i.setIn(r.immutable,a):a;if(n){var s=[];e=_lodash.default.clone(e);for(var d=0;d!==r.mutable.length-1;d++){var f=r.mutable[d];s.push(f),_lodash.default.set(e,s,_lodash.default.clone(_lodash.default.get(e,s)))}return l?_lodash.default.set(e,r.mutable,u):_lodash.default.setWith(e,r.mutable,u,l),e}return u}function getMixed(e,t){var a=splitMutableImmutable(e,t),l=!!a.mutable.length,r=!!a.immutable.length,n=l?_lodash.default.get(e,a.mutable):e;return r?n.getIn(a.immutable):n}function toggleBoolTrackingChanges(e,t,a){a&&a.preventDefault&&a.preventDefault();var l=this.state;l=setMixed(l,e,!getMixed(l,e)),t&&(t instanceof Array||"string"==typeof t)&&(l=setMixed(l,t,!0)),this.setState(l)}function setState(e,t,a){a&&a.preventDefault&&a.preventDefault();var l=setMixed(this.state,e,t);this.setState(l)}function setStateRadio(e,t){return setState.call(this,e,t.target.value)}function setStateCheckbox(e,t){return setState.call(this,e,t.target.checked)}function addBreaks(e,t){t=t||/[/&]/;var a=e.split(t),l=a.map(function(e,t){return t===a.length-1?_react.default.createElement("span",{key:t},e):_react.default.createElement("span",{key:t},e,"/",_react.default.createElement("wbr",null))});return _react.default.createElement("span",null,l)}function defaultDoneToVariable(e,t){var a={loading:_lodash.default.get(e,"loading")||"loading",response:_lodash.default.get(e,"response")||"response"},l={};_lodash.default.set(l,a.loading,!1),_lodash.default.set(l,a.response,t),this.setState(l)}function defaultDone(e){defaultDoneToVariable.call(this,null,e)}function defaultFailToVariable(e,t){var a=_Utility.default.getDefaultError(t),l={loading:_lodash.default.get(e,"loading")||"loading",response:_lodash.default.get(e,"response")||"response"},r={};_lodash.default.set(r,l.loading,!1),_lodash.default.set(r,l.response,_lodash.default.isEmpty(t)?a:t),this.setState(r)}function defaultFail(e){defaultFailToVariable.call(this,null,e)}function defaultRenderMessages(e,t){return e&&e.messages&&_react.default.createElement("div",{className:"alert alert-".concat(e.success?"success":"danger").concat(t?" ".concat(t):"")},e.messages.map(function(e){return _react.default.createElement("p",{key:e},e)}))}function memoize(e){return e._memoizedCache={},function(){for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];var r=JSON.stringify(a),n=e._memoizedCache;return n[r]||(n[r]=e.apply(this,a)),n[r]}}Function.prototype.bindMemoized=function(e){this._bindMemoizedCache||(this._bindMemoizedCache={});for(var t=arguments.length,a=new Array(t>1?t-1:0),l=1;l<t;l++)a[l-1]=arguments[l];var r=JSON.stringify(a);return this._bindMemoizedCache[r]||(this._bindMemoizedCache[r]=this.bind.apply(this,_toConsumableArray([e].concat(a||[])))),this._bindMemoizedCache[r]};var ReactUtils={preventDefault:preventDefault,stopPropagation:stopPropagation,updateFormField:updateFormField,updateFormFieldWithPrefix:updateFormFieldWithPrefix,addBreaks:addBreaks,toggle:toggle,setMixed:setMixed,setState:setState,setStateRadio:setStateRadio,setStateCheckbox:setStateCheckbox,toggleCheckbox:toggleCheckbox,toggleCheckboxWithPrefix:toggleCheckboxWithPrefix,toggleBool:toggleBool,defaultDoneToVariable:defaultDoneToVariable,defaultFailToVariable:defaultFailToVariable,defaultDone:defaultDone,defaultFail:defaultFail,defaultRenderMessages:defaultRenderMessages,connectTutorialStep:_Tutorial.default.connectTutorialStep,connectLocalTutorialStep:_Tutorial.default.connectLocalTutorialStep,memoize:memoize},_default=ReactUtils;exports.default=_default;
},{"../js/Immutable":8,"../js/Utility":14,"../js/redux/Tutorial":19,"lodash":"lodash","react":"react"}],33:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_Utility=_interopRequireDefault(require("../js/Utility"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tabs=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n)))).onChange=function(e,t){t.preventDefault(),r.props.onChange(e)},r.doNothingCallback=function(e){e.preventDefault(),e.stopPropagation()},r}return _inherits(t,_react.default.Component),_createClass(t,[{key:"render",value:function(){var e=this,t=_Utility.default.normalizeOptions(this.props.tabs),r=this.props.value,o=this.props.className||"nav nav-tabs",n=this.props.disabledTabs;return _react.default.createElement("ul",{className:o,role:"navigation"},t.map(function(t){var o=t.value,a=t.label,i=null,s=e.onChange.bindMemoized(e,o);return r===o?i="active":n&&-1!==n.indexOf(o)&&(i="disabled",s=e.doNothingCallback),_react.default.createElement("li",{key:o,className:i,"data-tab":o},_react.default.createElement("a",{href:"#",onClick:s},a))}))}}]),t}();Tabs.propTypes={tabs:_react.default.PropTypes.oneOfType([_react.default.PropTypes.object,_react.default.PropTypes.array]).isRequired,value:_react.default.PropTypes.oneOfType([_react.default.PropTypes.string,_react.default.PropTypes.number,_react.default.PropTypes.bool]),onChange:_react.default.PropTypes.func.isRequired,disabledTabs:_react.default.PropTypes.oneOfType([_react.default.PropTypes.array,_react.default.PropTypes.object]),className:_react.default.PropTypes.string};var _default=Tabs;exports.default=_default;
},{"../js/Utility":14,"react":"react"}],34:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_NewUtils=_interopRequireDefault(require("./NewUtils"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var PropTypes=_react.default.PropTypes,VideoContainer=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n)))).state={showVideo:!1},r.play=function(){r.setState({showVideo:!0})},r}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"render",value:function(){var e=this.props.youtubeId,t=this.props.imageSrc,r=this.state.showVideo;return _react.default.createElement("div",{className:"wa-pad20"},_react.default.createElement("div",{className:"wa-box-shadow20"},r?_react.default.createElement("div",{className:"wa-video-container"},_react.default.createElement("iframe",{title:"Youtube video",width:"560",height:"315",src:"https://www.youtube.com/embed/".concat(e,"?rel=0&autoplay=1"),frameBorder:"0",allowFullScreen:!0})):_react.default.createElement("a",{href:"#playVideo",onClick:_NewUtils.default.setState(this,"showVideo",!0,!0)},_react.default.createElement("img",{src:t,alt:"Click to play WrapAPI + Reddit video",className:"wa-full-width"}))))}}]),t}();VideoContainer.propTypes={youtubeId:PropTypes.string.isRequired,imageSrc:PropTypes.string.isRequired};var _default=VideoContainer;exports.default=_default;
},{"./NewUtils":28,"react":"react"}],35:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=withChrome;var _react=_interopRequireDefault(require("react")),_Chrome=require("../../js/Chrome");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function withChrome(e){return function(t){function r(){var e,t;_classCallCheck(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=_possibleConstructorReturn(this,(e=_getPrototypeOf(r)).call.apply(e,[this].concat(o)))).state={isChrome:!1,isExtensionInstalled:!1},t}return _inherits(r,_react.default.PureComponent),_createClass(r,[{key:"componentDidMount",value:function(){this.setState({isChrome:(0,_Chrome.isChrome)(),isExtensionInstalled:(0,_Chrome.isExtensionInstalled)()})}},{key:"render",value:function(){var t=this.state,r=t.isChrome,n=t.isExtensionInstalled;return _react.default.createElement(e,_extends({},this.props,{isChrome:r,isExtensionInstalled:n}))}}]),r}()}
},{"../../js/Chrome":5,"react":"react"}],36:[function(require,module,exports){
(function (Buffer){
"use strict";var _lodash=_interopRequireDefault(require("lodash")),_jsBeautify=require("js-beautify"),_jsonPointer=_interopRequireDefault(require("json-pointer")),_jsonpath=_interopRequireDefault(require("jsonpath")),_jsep=_interopRequireDefault(require("jsep")),_urijs=_interopRequireDefault(require("urijs")),_cheerio=_interopRequireDefault(require("cheerio")),_moment=_interopRequireDefault(require("moment")),_ntlm=_interopRequireDefault(require("ntlm"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function memoizeMRU(e,t){t=t||1;var r=[];return function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];for(var u=Array.prototype.slice.call(a),i=0;i!==r.length;i++){var s=r[i];if(_lodash.default.isEqual(s.args,u))return s.result}var l=e.apply(void 0,a);return r.length>=t&&r.shift(),r.push({args:u,result:l}),l}}module.exports=function(e){var t="undefined"!=typeof window;function r(e,t){var r;if(!(e instanceof RegExp)&&"object"===_typeof(e)){if(!e.pattern)return[];try{e=new RegExp(e.pattern,e.modifiers)}catch(e){return[]}}if(e.global){for(var n=[],a=0;null!==(r=e.exec(t))&&a++<1e4;)n.push(r);return n}return null!=(r=e.exec(t))?[r]:[]}var n={body:"",cheerio:null},a={};function o(e,r){var o=a[e];o||(o=_cheerio.default.load(e),t&&(a[e]=o)),n.body=e,n.cheerio=o;var u=[];return o(r).each(function(){var e,t=o(this);u.push({html:o.html(t),text:t.text(),attribs:t[0].attribs,tagName:t.get(0).tagName,index:(e=t[0],function e(t){if(!t)return[];for(var r=0;t.previousSibling;)t=t.previousSibling,r++;var n=e(t.parent);return n.push(r),n}(e).join("."))})}),u}function u(e,t){var r=t.outputs,n=[];if(_lodash.default.forOwn(r,function(t,r){for(var a=t.data.cssSelector,u=_objectSpread({},t,{data:_objectSpread({},t.data,{numToSelect:"all"})}),i=h(e,u),s=_lodash.default.map(o(e,a),"index"),l=0;l!==s.length;l++)n.push({name:r,value:i[l],index:s[l]})}),0===n.length)return null;n.sort(function(e,t){return function(e,t){for(var r=e.split(".").map(function(e){return parseInt(e,10)}),n=t.split(".").map(function(e){return parseInt(e,10)}),a=Math.min(r.length,n.length),o=0;o!==a;o++)if(r[o]!==n[o])return r[o]-n[o];return r.length-n.length}(e.index,t.index)});for(var a=[],u={},i=0;i!==n.length;i++){var s=n[i];u[s.name]&&(a.push(u),u={}),u[s.name]=s.value}return _lodash.default.isEmpty(u)||a.push(u),a}function i(e){return(new _urijs.default).query(e).query()}function s(e,t){var r=t.cssSelector,n=[],a=_cheerio.default.load(e);try{n=a(r)}catch(e){return null}if(0===n.length||"form"!==n.first().prop("tagName").toLowerCase())return null;var o=n.first(),u=o.attr("method");u=_lodash.default.isString(u)?u.toLowerCase().trim():"get";var i=o.attr("action");_lodash.default.isString(i)||(i="");var s=o.serializeArray(),l=_lodash.default.zipObject(_lodash.default.map(s,"name"),_lodash.default.map(s,"value")),c={};return"post"===u||"put"===u||"delete"===u||"options"===u?(c.post=l,c.get=new _urijs.default(i).query(!0)):c.get=s,c}function l(e,t){var r=s(e,t);if(!r)return null;var n,a={postParams:r.post?i(r.post):"",getParams:r.get?i(r.get):""};return n=JSON.stringify(a),"function"==typeof btoa?btoa(n):Buffer.from(n,"utf8").toString("base64")}function c(e,t){return _lodash.default.isString(e)||(e=JSON.stringify(e)),"regex"===t.matchEngine?function(e,t){var n=t,a=n.regex,o=a.pattern,u=a.modifiers,i=new RegExp(o,u),s=-1!==u.indexOf("g"),l=[],c=e;return"pretty"===n.matchOn&&(c=I(null,e)),o&&(l=r(i,c).map(function(e){return e[n.group]})),0===l.length?null:s&&!n.allMatches?l[n.match]:s?l:l[0]}(e,t.data):"css"===t.matchEngine?function(e,t){var r=t,n=r.cssSelector,a=[];try{a=o(e,n)}catch(e){return null}"first"===r.numToSelect&&(a=a.slice(0,1));var u=a.map(function(e){if("text"===r.captureType)return e.text;if("html"===r.captureType)return e.html;if("attribute"===r.captureType)return e.attribs[r.attrsToSelect[0]];var t={};return r.attrsToSelect.forEach(function(r){t[r]=e.attribs[r]}),r.objectIncludeText&&(t.innerText=e.text),r.objectIncludeHtml&&(t.innerHTML=e.html),t});return 0===u.length?null:"first"===r.numToSelect?u[0]:u}(e,t.data):"collection"===t.matchEngine?u(e,t.data):"json"===t.matchEngine?function(e,t){var r;if(L(null,e))r=M(e);else{if(!D(null,e))return null;r=JSON.parse(e)}var n=t,a=n.selectorType,o=n.jsonSelector;if("jsonPointer"===a)try{return _jsonPointer.default.get(r,o)}catch(e){return null}else if("jsonPath"===a||"jsonPathFirstOnly"===a){var u=[];try{u=_jsonpath.default.query(r,o)}catch(e){return null}return 0===u.length?null:"jsonPath"===a?u:u[0]}return null}(e,t.data):"form"===t.matchEngine?l(e,t.data):null}function f(e,t,r){var n={};return _lodash.default.forEach(e,function(e,a){var o=h(r,e,t);"requiredMatch"!==e.type&&(n[a]=o)}),n}function p(e,t){if(null==e)return e;if(t&&t.type){var r=function(e){var r=t.type,n=t.options;switch(r){case"trim":return"string"==typeof e?_lodash.default.trim(e):e;case"extractNumber":if("string"==typeof e){var a=e.match(/\d+(\.\d+)?/);return null===a?null:parseFloat(a[0])}return e;case"date":var o;return(o=n&&n.format?(0,_moment.default)(e,n.format):(0,_moment.default)(e)).isValid()?o:null;case"bool":return!!e}return e};return _lodash.default.isArray(e)?e.map(r):r(e)}return e}function d(e,t,r){var n;if(r&&("requiredOutput"===(n=t.type)||"requiredMatch"===n)&&null==e&&r.push("The required "+("requiredOutput"===t.type?"output":"match")+' "'+t.name+'" did not match within the response'),null!=e&&(e=p(e,t.cleanup),!_lodash.default.isEmpty(t.children))){var a=t.children;return _lodash.default.isArray(e)?e.map(f.bind(this,a,r)):f(a,r,e)}return e}function h(e,t,r){return d(c(e,t),t,r)}function m(e,t){return"header"===t.matchEngine?function(e,t){var r=t,n=r.response,a=r.key.toLowerCase(),o=null!=n?e[n]:e[e.length-1];return o?V(o.headers)[a]:null}(e,t.data):"cookie"===t.matchEngine?function(e,t){var r,n=t,a=n.response,o=n.allResponses,u=n.key;if(o){for(var i=e.length-1;i>=0;i--)if((r=V(F(_lodash.default.get(e[i],["headers","set-cookie"]))))[u])return r[u].data}else if((r=V(F(_lodash.default.get(e[a],["headers","set-cookie"]))))[u])return r[u].data;return null}(e,t.data):c(e&&0!==e.length&&e[e.length-1].body||"",t)}function y(e,t){var r={success:!0,messages:[],data:{}},n=t.outputs;return _lodash.default.forEach(n,function(t){var n=function(e,t,r){return d(m(e,t),t,r)}(e,t,r.messages);"requiredMatch"!==t.type&&(r.data[t.name]=n)}),0!==r.messages.length?(r.success=!1,r):r}function v(e,t,r){var n={success:!1,outputScenario:null,data:null};if(t)for(var a=0;a!==t.length;a++){var o=t[a],u=y(e.responses,o);if(u.success&&(n.success=!0,n.data=u.data,n.stateToken=e.stateToken,n.cookies=e.cookies,n.outputScenario=o.name,!r))break;r&&r.push(u)}return n.success||(n.messages=["None of the output scenarios matched. See the raw data received in rawData"],n.errTypes=["noMatchedOutputScenario"],n.rawData=e),n}function g(r,n,a){return t?function(e,t,r){var n=["XMLHTTPRequest = null;",t+";","onmessage = function(e) {","  var data = e.data;","  var processed = "+r+";","  postMessage(processed);","};"].join("\n");return new Promise(function(t,r){var a=new Worker(URL.createObjectURL(new Blob([n],{type:"application/javascript"})));a.onerror=function(e){r({message:e.message,lineno:e.lineno,colno:e.colno,stack:null,name:null})},a.onmessage=function(e){t(e.data)},a.postMessage(e)})}(r,n,a):e.runSandboxed(r,n,a)}function _(e,t){return"string"==typeof t&&(t={script:t,enabled:!0}),t&&t.enabled?g(e,t.script,"postProcess(data.output, data.input)"):Promise.resolve(e.output)}function b(e,t){var r=["data.expressions.map(function(expr) {","  var input = data.input;","  return eval(expr);","})"].join("\n");return g(e,t,r).then(function(t){return _lodash.default.fromPairs(t.map(function(t,r){return[e.expressions[r],t]}))})}function x(e,t){return e.postProcessError=_lodash.default.omit(t,"stack"),e.success=!1,e.message="The script returned an error: "+t.message,e.origData=e.data,delete e.data,e}function w(e){var t={};return function e(r,n){_lodash.default.forEach(r,function(r,a){var o=(n?n+".":"")+a;"object"===_typeof(r)?e(r,o):t[o]=r})}(e,""),t}function E(e){return e instanceof Array&&0!==e.length&&e.every(_lodash.default.isObject)}function j(e,t){return function e(t,r){switch(t.type){case"Literal":return t.value;case"Identifier":if(void 0===r[t.name])throw new Error(t.name+" is not defined");return r[t.name];case"MemberExpression":var n;n=t.computed?e(t.property,r):t.property.name;var a=e(t.object,r);if(null==a)throw new Error("Cannot read property "+n+" of "+a);return a[n];case"BinaryExpression":var o=e(t.left,r),u=e(t.right,r);switch(t.operator){case"+":return o+u;case"-":return o-u;case"/":return o/u;case"%":return o%u;case"*":return o*u;case"&&":return o&&u;case"||":return o||u;case"&":return o&u;case"|":return o|u;case"^":return o^u;case"<<":return o<<u;case">>":return o>>u;case">>>":return o>>>u;default:throw new Error("Unexpected operator symbol: "+t.operator)}default:throw new Error("Unexpected expression of type "+t.type)}}((0,_jsep.default)(e),t)}function S(e,t){t=t||{};try{"object"!==_typeof(e)&&(e=(0,_jsep.default)(e))}catch(e){return e.message}switch(e.type){case"Identifier":case"Literal":return null;case"MemberExpression":return S(e.object,t)||S(e.property,t);case"CallExpression":return t.allowFunctionCall?null:"You can't call functions";case"BinaryExpression":return t.allowBinaryExpression?S(e.left,t)||S(e.right,t):"You can't use the operator \""+e.operator+'"';default:return"Unexpected expression of type "+e.type}}function O(e,t){var r=(t=t||{}).allowFunctionCall,n=t.allowBinaryExpression;function a(e){return(e.main?[e.main]:[]).concat(e.additional)}var o=function e(t,o){switch(t.type){case"Identifier":return{main:[t.name],additional:[]};case"Literal":return{main:o?null:[t.value],additional:[]};case"MemberExpression":var u=e(t.object),i=e(t.property);if(t.computed&&"Literal"!==t.property.type){var s=[u.main];return i.main&&s.push(i.main),{main:null,additional:s=s.concat(i.additional)}}return{main:u.main?u.main.concat(i.main):null,additional:u.additional.concat(i.additional)};case"CallExpression":if(!r)throw new Error("Unexpected expression of type "+t.type);var l=t.arguments?_lodash.default.flatten(t.arguments.map(function(t){return a(e(t))})):[],c=a(e(t.callee));return{main:null,additional:l.concat(c)};case"BinaryExpression":if(!n)throw new Error("Unexpected expression of type "+t.type);var f=a(e(t.left,!0)),p=a(e(t.right,!0));return{main:null,additional:f.concat(p)};default:throw new Error("Unexpected expression of type "+t.type)}}((0,_jsep.default)(e),!0);return o.additional.concat(o.main?[o.main]:[])}function q(e){return encodeURIComponent(e).replace(/%20/g,"+")}function P(e){var t={};function r(e){e instanceof Array&&e.forEach(function(e){"expression"===e.type&&(t[e.expression]=null)})}return e.postData&&"params"===e.postData.type&&r(e.postData.data),r(e.headers),r(e.queryString),_lodash.default.keys(t)}function T(e){for(var t=/\{\{([^}]+?)\}\}/g,r=[],n=0,a=null;a=t.exec(e);)a.index>n&&r.push({type:"string",data:e.substr(n,a.index-n),start:n}),r.push({type:"expression",data:a[1],start:a.index}),n=a.index+a[0].length;return n!==e.length&&r.push({type:"string",data:e.substr(n),start:n}),r}function N(e,t,r){return("string"==typeof e?T(e):e).map(function(e){if("string"===e.type)return e.data;try{var n=j(e.data,t);return r?r(n):n}catch(e){return""}}).join("")}function C(e,t){(t=t||{}).allowBinaryExpression=null==t.allowBinaryExpression||t.allowBinaryExpression;var r="string"==typeof e?T(e):e;return _lodash.default.uniqWith(_lodash.default.flatten(r.map(function(e){return"expression"===e.type?O(e.data,t):[]})),_lodash.default.isEqual)}function R(e){return"constant"===e.type||"new"===e.type&&0===T(e.value).filter(function(e){return"expression"===e.type}).length}function k(e){var t,r={post:{},get:{}};if(e)try{var n=JSON.parse((t=e,"function"==typeof atob?atob(t):Buffer.from(t,"base64").toString("utf8")));r.post=(0,_urijs.default)().query(n.postParams).query(!0),r.get=(0,_urijs.default)().query(n.getParams).query(!0)}catch(e){}return r}function D(e,t){try{return JSON.parse(t),!0}catch(e){return!1}}function L(e,t){var r=t.match(/^\s*(?:[A-Za-z_$][\w_$]*)?\s*\(([\s\S]*)\)\s*;?\s*$/);try{return JSON.parse(r[1]),!0}catch(e){return!1}}function M(e){var t=e.match(/^\s*(?:[A-Za-z_$][\w_$]*)?\s*\(([\s\S]*)\)\s*;?\s*$/);return JSON.parse(t[1])}function B(e,t){return e&&-1!==e.indexOf("html")||-1!==t.search(/<(body|br|div|em|form|h[1-6]|head|html|iframe|img|input|li|link|ol|script|select|span|strong|style|table|textarea|ul)/)}function A(e,t){return e&&-1!==e.indexOf("xml")||-1!==t.indexOf("<?xml")}function J(e,t){return D(0,t)?"json":L(0,t)?"jsonp":B(e,t)?"html":A(e,t)?"xml":null}var z={},U=null,H=null;function I(e,r){var n=z[r];if(n)return n;if(r===U)return H;var a=r;switch("json"===e||"html"===e||"xml"===e||"jsonp"===e?e:J(e,r)){case"jsonp":a=JSON.stringify(M(r),null,2);break;case"json":a=JSON.stringify(JSON.parse(r),null,2);break;case"html":case"xml":a=(a=(0,_jsBeautify.html)(r,{indent_size:2})).replace(/\n\s+\n/g,"\n")}return t?z[r]=a:(U=r,H=a),a}function $(e){return _lodash.default.chain(e.split(";")).map(_lodash.default.trim).map(function(e){var t=e.split("=");return[t[0],t[1]]}).fromPairs().value()}function F(e){return e?_lodash.default.fromPairs(e.map(function(e){var t=$(e),r=_lodash.default.keys(t)[0];return[r,_lodash.default.set(t,"data",t[r])]})):{}}function V(e){return _lodash.default.fromPairs(_lodash.default.map(e,function(e,t){return[t.toLowerCase(),e]}))}return{matchRegex:r,matchFormOutputRaw:s,matchOutput:c,matchTopLevelOutput:m,runCleanup:p,runOutput:h,runOutputScenario:y,runOutputScenarios:v,runOutputScenariosAndPostProcess:function(e,t,r,n,a){var o=v(e,t,a);if(o.success&&r){var u={output:o,input:n};return new Promise(function(e){_(u,r).then(function(t){e(t)}).catch(function(t){e(x(o,t))})})}return Promise.resolve(o)},applyPostProcess:_,isCollection:E,hasCollection:function(e){return e&&_lodash.default.some(e,E)},collectionToTable:function(e,t){var r="default"in(t=t||{})?t.default:"",n=!("includeHeaders"in t&&!t.includeHeaders),a=e.map(w),o=_lodash.default.chain(a).map(_lodash.default.keys).flatten().uniq().value(),u=_lodash.default.fromPairs(o.map(function(e,t){return[e,t]})),i=a.map(function(e){var t=_lodash.default.fill(Array(o.length),r);return _lodash.default.forEach(e,function(e,r){t[u[r]]=e}),t});return n?[o].concat(i):i},tableToCSV:function(e){return e.map(function(e){return e.map(function(e){return'"'+e.replace(/"/g,'""')+'"'}).join(",")}).join("\r\n")},applyBranchingFunction:function(e,t){return g(e,t,"branch(data.output, data.input)")},applyVertexPostProcess:function(e,t){return g(e,t,"postProcess(data.output, data.input)")},applyInputHelperScript:b,addSandboxedScriptError:x,evalVariableExpression:j,getExpressionTokens:O,getExpressionGlobals:function(e,t){var r=O(e,t);return _lodash.default.uniq(_lodash.default.map(r,0))},getInputExpressions:P,parseCurlyExpression:T,getCurlyExpressionError:function(e,t){(t=t||{}).allowBinaryExpression=null==t.allowBinaryExpression||t.allowBinaryExpression;for(var r="string"==typeof e?T(e):e,n=0;n!==r.length;n++){var a=r[n];if("expression"===a.type){var o=S(a.data);if(o)return"{{"+a.data+"}} is invalid: "+o}}return null},getCurlyExpressionTokens:C,evalCurlyExpression:N,makeReqParams:function(e,r,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=e.url,i=e.method,s=e.postData,l=e.queryString,c=e.headers,f=e.script,p=e.authorization,d={},h=[],m={},y={};if(e.inputs&&r){var v=_lodash.default.chain(e.inputs).map(function(e,t){if(void 0!==r[t]){if("file"===e.type){var n=r[t];if(!(n&&n.content&&n.fileName&&n.mimeType))return e.required&&(y[t]=!0),null;if(!/^[A-Za-z0-9+/=]*$/.test(n.content))return h.push("The file input "+t+" had non-Base64-encoded content"),null}return[t,r[t]]}return!e.required&&e.defaultEnabled?[t,e.default]:(e.required&&(m[t]=!0,"file"===e.type&&(y[t]=!0)),null)}).filter().value();d=_lodash.default.fromPairs(v)}var g=k(a);y=_lodash.default.assign(y,function(e,t,r){if(_lodash.default.isEmpty(e.post)&&_lodash.default.isEmpty(e.get))return t;function n(e){switch(e.type){case"variable":return[e.varName];case"new":return _lodash.default.uniq(_lodash.default.map(C(e.value),0));case"file":return[e.varName]}return[]}var a={post:{},get:{}};"params"===r.postData.type&&r.postData.data.forEach(function(e){a.post[e.name]=n(e).filter(function(e){return t[e]})}),r.queryString.forEach(function(e){a.get[e.name]=n(e).filter(function(e){return t[e]})}),_lodash.default.forEach(e.get,function(e,t){delete a.get[t]}),_lodash.default.forEach(e.post,function(e,t){delete a.post[t]});var o={};function u(e){o[e]=!0}return _lodash.default.forEach(a.get,function(e){e.forEach(u)}),_lodash.default.forEach(a.post,function(e){e.forEach(function(e){o[e]=!0})}),o}(g,m,e)),_lodash.default.forEach(y,function(e,t){h.push('The input "'+t+'" is required.')});var _={method:i.toUpperCase(),headers:{},jar:n,followRedirect:!1},x=P(e),w=f?f.code:"",E=Promise.resolve({});return 0!==x.length&&(E=b({expressions:x,input:_lodash.default.cloneDeep(d)},w)),E.then(function(r){function n(e){switch(e.type){case"constant":return e.data;case"variable":return d[e.varName];case"expression":return r[e.expression];case"new":return i(e.value);case"file":var t=d[e.varName];return t&&t.content&&t.mimeType&&t.fileName?{value:Buffer.from(t.content,"base64"),options:{filename:t.fileName,contentType:t.mimeType}}:void 0}return null}var a=Object.assign(d,{wrapAPIInputs:d});function i(e,t){return N(e,a,t)}u=i(u),_.url=u;var f=_lodash.default.map(e.inputs,"type").some(function(e){return"file"===e});if(s)if("params"!==s.type||_lodash.default.isEmpty(s.data)){if("json"===s.type||"text"===s.type){var m="json"===s.type||"text"===s.type?s.data:"";"json"===s.type?(_.headers["Content-Type"]="application/json; charset=utf-8",m=i(m,JSON.stringify)):"text"===s.type&&(_.headers["Content-Type"]="text/plain",m=i(m)),_.body=m}}else{_.headers["Content-Type"]=f?"multipart/form-data":"application/x-www-form-urlencoded";var y={};s.data.forEach(function(e){R(e)&&(y[i(e.name)]=n(e))}),_lodash.default.forEach(g.post,function(e,t){!e&&y[t]||(y[t]=e)}),s.data.forEach(function(e){R(e)||(y[i(e.name)]=n(e))}),f?(_lodash.default.forEach(y,function(e,t){void 0===e&&delete y[t]}),_.formData=y):_.form=(0,_urijs.default)().query(y).normalizeQuery().query()}var v={};if(p)if("ntlm"===p.mode&&p.ntlm){var b=p.ntlm,x=b.username,w=b.password,E=b.domain;if(o.ntlmResponse){if(!_.url)throw new Error("We cannot create a NTLM response without a URL");v.Authorization=t?"NTLM PlaceholderResponseHeader==":_ntlm.default.responseHeader(o.ntlmResponse,_.url,E?i(E):"wrapapi.com",i(x),i(w))}else v.Authorization=t?"NTLM PlaceholderChallengeHeader==":_ntlm.default.challengeHeader("wrapapi",E?i(E):"wrapapi.com")}else if("basic"===p.mode&&p.basic){var j=p.basic,S=j.username,O=j.password;v.Authorization=Buffer.from("".concat(i(S),":").concat(i(O)),"utf8").toString("base64")}if(c&&c.forEach(function(e){if(":"!==e.name[0]){var t=i(e.name);"content-type"===t.toLowerCase()&&delete _.headers["Content-Type"],"authorization"===t.toLowerCase()&&v.Authorization||(v[t]=n(e))}}),_.headers=Object.assign(_.headers,v),l){var P={};l.forEach(function(e){R(e)&&(P[q(i(e.name))]=q(n(e)))}),_lodash.default.forEach(g.get,function(e,t){var r=q(t);!e&&P[r]||(P[r]=q(e))}),l.forEach(function(e){R(e)||(P[q(i(e.name))]=q(n(e)))}),_.qs=P,_.qsStringifyOptions={encode:!1}}var T={success:0===h.length,reqParams:_};return h&&(T.errors=h),T}).catch(function(e){return console.error(e.stack),{success:!1,reqParams:null,errors:["We encountered an error when evaluating input expressions: "+e.message]}})},querySelectorAllOnString:o,parseHeaderString:$,parseCookies:F,isHTML:B,isXML:A,isJSON:D,isJSONP:L,getJSONP:M,isJSONable:function(e,t){return D(0,t)||L(0,t)},getJSONable:memoizeMRU(function(e){return L(0,e)?M(e):JSON.parse(e)}),getContentType:J,getPretty:I}};
}).call(this,require("buffer").Buffer)

},{"buffer":37,"cheerio":"cheerio","js-beautify":"js-beautify","jsep":"jsep","json-pointer":"json-pointer","jsonpath":"jsonpath","lodash":"lodash","moment":"moment","ntlm":37,"urijs":"urijs"}],37:[function(require,module,exports){

},{}]},{},[9])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjbGllbnQvanMvQVBJU3RvcmFnZS5qcyIsImNsaWVudC9qcy9BdXRoLmpzIiwiY2xpZW50L2pzL0F4aW9zLmpzIiwiY2xpZW50L2pzL0Jyb3dzZXIuanMiLCJjbGllbnQvanMvQ2hyb21lLmpzIiwiY2xpZW50L2pzL0NvbmZpZy5qcyIsImNsaWVudC9qcy9FeHRlbnNpb24uanMiLCJjbGllbnQvanMvSW1tdXRhYmxlLmpzIiwiY2xpZW50L2pzL0luaXRQb3B1cC5qcyIsImNsaWVudC9qcy9Qcm94eS5qcyIsImNsaWVudC9qcy9SZXF1ZXN0LmpzIiwiY2xpZW50L2pzL1Rva2VuLmpzIiwiY2xpZW50L2pzL1R1dG9yaWFsLmpzIiwiY2xpZW50L2pzL1V0aWxpdHkuanMiLCJjbGllbnQvanMvVmFsaWRhdGUuanMiLCJjbGllbnQvanMvcmVkdXgvQVBJRWxlbWVudHMuanMiLCJjbGllbnQvanMvcmVkdXgvQXV0aC5qcyIsImNsaWVudC9qcy9yZWR1eC9NYWluUmVkdWNlci5qcyIsImNsaWVudC9qcy9yZWR1eC9UdXRvcmlhbC5qcyIsImNsaWVudC9qcy9zYW5kYm94LmpzIiwiY2xpZW50L3RlbXBsYXRlcy9BUElFbGVtZW50U2VsZWN0LmpzIiwiY2xpZW50L3RlbXBsYXRlcy9DaHJvbWVJbnN0cnVjdGlvbnMuanMiLCJjbGllbnQvdGVtcGxhdGVzL0Nocm9tZVBsdWdpblByb21wdC5qcyIsImNsaWVudC90ZW1wbGF0ZXMvRHJvcGRvd25TZWxlY3QuanMiLCJjbGllbnQvdGVtcGxhdGVzL0xvZ2luRm9ybS5qcyIsImNsaWVudC90ZW1wbGF0ZXMvTG9naW5HYXRlLmpzIiwiY2xpZW50L3RlbXBsYXRlcy9Mb2dpblBhZ2UuanMiLCJjbGllbnQvdGVtcGxhdGVzL05ld1V0aWxzLmpzIiwiY2xpZW50L3RlbXBsYXRlcy9QYW5lbC5qcyIsImNsaWVudC90ZW1wbGF0ZXMvUG9wdXBNYWluUGFnZS5qcyIsImNsaWVudC90ZW1wbGF0ZXMvUG9wdXBQYWdlLmpzIiwiY2xpZW50L3RlbXBsYXRlcy9SZWFjdFV0aWxzLmpzIiwiY2xpZW50L3RlbXBsYXRlcy9UYWJzLmpzIiwiY2xpZW50L3RlbXBsYXRlcy9WaWRlb0NvbnRhaW5lci5qcyIsImNsaWVudC90ZW1wbGF0ZXMvaG9jcy93aXRoQ2hyb21lLmpzIiwiY29tbW9uL1JlcXVlc3QuanMiLCJub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9saWIvX2VtcHR5LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7OztBQ0FBOzs7O0FDQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfbG9kYXNoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaFwiKSksX2VzNlByb21pc2U9cmVxdWlyZShcImVzNi1wcm9taXNlXCIpLF9kZWVwRGlmZj1yZXF1aXJlKFwiZGVlcC1kaWZmXCIpLF9BeGlvcz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0F4aW9zXCIpKSxfQ29uZmlnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQ29uZmlnXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX12YXIgQVBJU3RvcmFnZT17X3N0b3JhZ2VUb2tlbjpudWxsLF9zdG9yYWdlVG9rZW5RdWVyeVN0cmluZzpcIlwiLF9kZWZhdWx0QVBJU3RvcmFnZURvbmU6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2UodC5kYXRhLHQpfX0sX2RlZmF1bHRBUElTdG9yYWdlRmFpbDpmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7Y29uc29sZS5lcnJvcih0LnN0YWNrKTt2YXIgYT1fbG9kYXNoLmRlZmF1bHQuZ2V0KHQsXCJyZXNwb25zZS5kYXRhXCIpO2UoYSx7c3VjY2VzczohMSxtZXNzYWdlczpbXCJBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLiBDaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb25cIl0scmVzcG9uc2U6YX0pfX0sX2RlZmF1bHRBUElTdG9yYWdlVGhlbjpmdW5jdGlvbihlKXtpZihlJiZlLnN1Y2Nlc3MpcmV0dXJuIGUuZGF0YTt0aHJvdyBuZXcgRXJyb3IoZS5tZXNzYWdlcz9lLm1lc3NhZ2VzLmpvaW4oXCI7IFwiKTpcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuIENoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvblwiKX0sX2RlZmF1bHRBUElTdG9yYWdlVGhlbldpdGhEYXRhOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxfZGVmYXVsdFByb21pc2VPckNhbGxiYWNrOmZ1bmN0aW9uKGUsdCxhKXtyZXR1cm4gdD8oZS50aGVuKEFQSVN0b3JhZ2UuX2RlZmF1bHRBUElTdG9yYWdlRG9uZSh0KSkuY2F0Y2goQVBJU3RvcmFnZS5fZGVmYXVsdEFQSVN0b3JhZ2VGYWlsKHQpKSxudWxsKTplLnRoZW4oYT9BUElTdG9yYWdlLl9kZWZhdWx0QVBJU3RvcmFnZVRoZW5XaXRoRGF0YTpBUElTdG9yYWdlLl9kZWZhdWx0QVBJU3RvcmFnZVRoZW4pfSxfcHJlcGFyZUFQSUVsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9X2xvZGFzaC5kZWZhdWx0LmNsb25lRGVlcChlKTtyZXR1cm4gdC5ncmFwaCYmX2xvZGFzaC5kZWZhdWx0LmZvckVhY2godC5ncmFwaC52ZXJ0aWNlcyxmdW5jdGlvbihlKXtlLmRhdGE9ZS5kYXRhP19sb2Rhc2guZGVmYXVsdC5waWNrKGUuZGF0YSxbXCJ1c2VybmFtZVwiLFwicmVwb3NpdG9yeVwiLFwibmFtZVwiLFwidmVyc2lvblwiXSk6bnVsbH0pLHR9LHVzZVRva2VuOmZ1bmN0aW9uKGUpe0FQSVN0b3JhZ2UuX3N0b3JhZ2VUb2tlbj1lLEFQSVN0b3JhZ2UuX3N0b3JhZ2VUb2tlblF1ZXJ5U3RyaW5nPVwidG9rZW49XCIuY29uY2F0KGUpfSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgYT1lLnVzZXJuYW1lLG89ZS5yZXBvc2l0b3J5LG49ZS5uYW1lLHI9ZS52ZXJzaW9ufHxcIjAuMC4wXCI7cmV0dXJuKDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC9hcGkvXCIpLmNvbmNhdChhLFwiL1wiKS5jb25jYXQobyxcIi9cIikuY29uY2F0KG4sXCIvXCIpLmNvbmNhdChyLFwiP1wiKS5jb25jYXQoQVBJU3RvcmFnZS5fc3RvcmFnZVRva2VuUXVlcnlTdHJpbmcpLG1ldGhvZDpcInBvc3RcIixkYXRhOnthcGlFbGVtZW50OkFQSVN0b3JhZ2UuX3ByZXBhcmVBUElFbGVtZW50KGUpLG9yaWc6dCYmX2xvZGFzaC5kZWZhdWx0LnBpY2sodCxbXCJ1c2VybmFtZVwiLFwicmVwb3NpdG9yeVwiLFwibmFtZVwiXSl9LHdpdGhDcmVkZW50aWFsczohMH0pfSxzZXRXaXRoRGlmZjpmdW5jdGlvbihlLHQpe2lmKCFlfHxlLnVzZXJuYW1lIT09dC51c2VybmFtZXx8ZS5yZXBvc2l0b3J5IT09dC5yZXBvc2l0b3J5fHxlLm5hbWUhPT10Lm5hbWV8fGUudmVyc2lvbiE9PXQudmVyc2lvbilyZXR1cm4gQVBJU3RvcmFnZS5zZXQodCxlKTt2YXIgYT10LnVzZXJuYW1lLG89dC5yZXBvc2l0b3J5LG49dC5uYW1lLHI9dC52ZXJzaW9ufHxcIjAuMC4wXCIsaT0oMCxfZGVlcERpZmYuZGlmZikoZSx0KTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmlzRW1wdHkoaSkmJihpPVtdKSwoMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L2FwaS9cIikuY29uY2F0KGEsXCIvXCIpLmNvbmNhdChvLFwiL1wiKS5jb25jYXQobixcIi9cIikuY29uY2F0KHIsXCI/XCIpLmNvbmNhdChBUElTdG9yYWdlLl9zdG9yYWdlVG9rZW5RdWVyeVN0cmluZyksbWV0aG9kOlwiUE9TVFwiLGRhdGE6e2RpZmY6aX0sd2l0aENyZWRlbnRpYWxzOiEwfSl9LGFsaWFzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuKDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC9hcGkvYWxpYXMvXCIpLmNvbmNhdChbZS51c2VybmFtZSxlLnJlcG9zaXRvcnksZS5uYW1lLHQucmVwb3NpdG9yeSx0Lm5hbWVdLmpvaW4oXCIvXCIpLFwiP1wiKS5jb25jYXQoQVBJU3RvcmFnZS5fc3RvcmFnZVRva2VuUXVlcnlTdHJpbmcpLG1ldGhvZDpcInBvc3RcIix3aXRoQ3JlZGVudGlhbHM6ITB9KX0scmVuYW1lOmZ1bmN0aW9uKGUsdCxhKXtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L2FwaS9cIikuY29uY2F0KGUsXCIvXCIpLmNvbmNhdCh0LFwiL3JlbmFtZT9cIikuY29uY2F0KEFQSVN0b3JhZ2UuX3N0b3JhZ2VUb2tlblF1ZXJ5U3RyaW5nKSxtZXRob2Q6XCJwb3N0XCIsZGF0YTp7YXBpRWxlbWVudDpBUElTdG9yYWdlLl9wcmVwYXJlQVBJRWxlbWVudChhKX0sY29udGVudFR5cGU6XCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIsd2l0aENyZWRlbnRpYWxzOiEwfSl9LGFwaUVsZW1lbnRDYWNoZTp7fSxnZXRDYWNoZWQ6ZnVuY3Rpb24oZSx0LGEsbyl7dmFyIG49SlNPTi5zdHJpbmdpZnkoW2UsdCxhLG9dKSxyPXRoaXMuYXBpRWxlbWVudENhY2hlO3JldHVybiByW25dP19lczZQcm9taXNlLlByb21pc2UucmVzb2x2ZSh0aGlzLmFwaUVsZW1lbnRDYWNoZVtuXSk6dGhpcy5nZXQoZSx0LGEsbykudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gcltuXT1lLGV9KX0sZ2V0OmZ1bmN0aW9uKGUsdCxhLG8sbixyKXtvPW98fFwiMC4wLjBcIjt2YXIgaT0oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L2FwaS9cIikuY29uY2F0KGUsXCIvXCIpLmNvbmNhdCh0LFwiL1wiKS5jb25jYXQoYSxcIi9cIikuY29uY2F0KG8sXCI/XCIpLmNvbmNhdChBUElTdG9yYWdlLl9zdG9yYWdlVG9rZW5RdWVyeVN0cmluZykuY29uY2F0KG4/XCImaW5jbHVkZVZlcnNpb25zPXRydWVcIjpcIlwiKSxtZXRob2Q6XCJnZXRcIix3aXRoQ3JlZGVudGlhbHM6ITB9KTtyZXR1cm4gQVBJU3RvcmFnZS5fZGVmYXVsdFByb21pc2VPckNhbGxiYWNrKGksciwhMCl9LGdldEJ5SWQ6ZnVuY3Rpb24oZSx0KXt2YXIgYT0oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L2FwaS9pZC9cIikuY29uY2F0KGUpLmNvbmNhdChBUElTdG9yYWdlLl9zdG9yYWdlVG9rZW5RdWVyeVN0cmluZyksbWV0aG9kOlwiZ2V0XCIsd2l0aENyZWRlbnRpYWxzOiEwfSk7cmV0dXJuIEFQSVN0b3JhZ2UuX2RlZmF1bHRQcm9taXNlT3JDYWxsYmFjayhhLHQpfSxnZXRBbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9KDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC9hcGk/XCIpLmNvbmNhdChBUElTdG9yYWdlLl9zdG9yYWdlVG9rZW5RdWVyeVN0cmluZyksbWV0aG9kOlwiZ2V0XCIsd2l0aENyZWRlbnRpYWxzOiEwfSk7cmV0dXJuIEFQSVN0b3JhZ2UuX2RlZmF1bHRQcm9taXNlT3JDYWxsYmFjayh0LGUpfSxnZXRWZXJzaW9uczpmdW5jdGlvbihlLHQsYSxvKXt2YXIgbj0oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L2FwaS9cIikuY29uY2F0KGUsXCIvXCIpLmNvbmNhdCh0LFwiL1wiKS5jb25jYXQoYSxcIi92ZXJzaW9uc1wiKSxtZXRob2Q6XCJnZXRcIix3aXRoQ3JlZGVudGlhbHM6ITB9KTtyZXR1cm4gbz8obi50aGVuKGZ1bmN0aW9uKGUpe28oZS52ZXJzaW9ucyxlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28obnVsbCxlKX0pLG51bGwpOm4udGhlbihBUElTdG9yYWdlLl9kZWZhdWx0QVBJU3RvcmFnZVRoZW4pfSxyZW1vdmU6ZnVuY3Rpb24oZSx0LGEsbyl7dmFyIG49KDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC9hcGkvXCIpLmNvbmNhdChlLFwiL1wiKS5jb25jYXQodCxcIi9cIikuY29uY2F0KGEsXCI/XCIpLmNvbmNhdChBUElTdG9yYWdlLl9zdG9yYWdlVG9rZW5RdWVyeVN0cmluZyksbWV0aG9kOlwiREVMRVRFXCIsd2l0aENyZWRlbnRpYWxzOiEwfSk7cmV0dXJuIG8mJm4udGhlbihvKSxufSxnZXRUeXBlOmZ1bmN0aW9uKGUpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvYXBpL3R5cGVcIikscGFyYW1zOnt1c2VybmFtZTplLnVzZXJuYW1lLHJlcG9zaXRvcnk6ZS5yZXBvc2l0b3J5LG5hbWU6ZS5uYW1lfX0pfSxhZGRDYXB0dXJlOmZ1bmN0aW9uKGUsdCxhLG8pe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvYXBpL1wiKS5jb25jYXQoZSxcIi9cIikuY29uY2F0KHQsXCIvXCIpLmNvbmNhdChhLFwiL2FkZENhcHR1cmU/XCIpLmNvbmNhdChBUElTdG9yYWdlLl9zdG9yYWdlVG9rZW5RdWVyeVN0cmluZyksbWV0aG9kOlwicG9zdFwiLGRhdGE6e2NhcHR1cmU6b319KX0sZ2V0UmVzcG9uc2VUZXN0Q2FzZXM6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS51c2VybmFtZSxhPWUucmVwb3NpdG9yeSxvPWUubmFtZTtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L3Rlc3RDYXNlL1wiKS5jb25jYXQodCxcIi9cIikuY29uY2F0KGEsXCIvXCIpLmNvbmNhdChvLFwiP1wiKS5jb25jYXQoQVBJU3RvcmFnZS5fc3RvcmFnZVRva2VuUXVlcnlTdHJpbmcpLG1ldGhvZDpcInBvc3RcIixkYXRhOntvdXRwdXQ6ZS5vdXRwdXR9fSl9LGdldFJlc3BvbnNlVGVzdENhc2U6ZnVuY3Rpb24oZSl7cmV0dXJuKDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC90ZXN0Q2FzZS9cIikuY29uY2F0KGUsXCI/XCIpLmNvbmNhdChBUElTdG9yYWdlLl9zdG9yYWdlVG9rZW5RdWVyeVN0cmluZyksbWV0aG9kOlwiZ2V0XCJ9KX0sZGVsZXRlUmVzcG9uc2VUZXN0Q2FzZXM6ZnVuY3Rpb24oZSl7cmV0dXJuKDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC90ZXN0Q2FzZS9kZWxldGU/XCIpLmNvbmNhdChBUElTdG9yYWdlLl9zdG9yYWdlVG9rZW5RdWVyeVN0cmluZyksbWV0aG9kOlwicG9zdFwiLGRhdGE6e2lkczplfX0pfX0sX2RlZmF1bHQ9QVBJU3RvcmFnZTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zZXRUdXRvcmlhbENvbXBsZXRlZD1zZXRUdXRvcmlhbENvbXBsZXRlZCxleHBvcnRzLmdldEludml0ZXM9Z2V0SW52aXRlcyxleHBvcnRzLmludml0ZT1pbnZpdGUsZXhwb3J0cy5kZWxldGVJbnZpdGU9ZGVsZXRlSW52aXRlLGV4cG9ydHMuZ2V0T3JnYW5pemF0aW9uVXNlcnM9Z2V0T3JnYW5pemF0aW9uVXNlcnMsZXhwb3J0cy5yZW1vdmVVc2VyRnJvbU9yZ2FuaXphdGlvbj1yZW1vdmVVc2VyRnJvbU9yZ2FuaXphdGlvbixleHBvcnRzLmdldFBheW1lbnRNZXRob2Q9Z2V0UGF5bWVudE1ldGhvZCxleHBvcnRzLnNldFBheW1lbnRNZXRob2Q9c2V0UGF5bWVudE1ldGhvZCxleHBvcnRzLmRlZmF1bHQ9ZXhwb3J0cy5Vc2VyUm9sZXM9ZXhwb3J0cy5jaGFuZ2VQYXNzd29yZD1leHBvcnRzLnJlc2V0UGFzc3dvcmQ9ZXhwb3J0cy5pc1ZhbGlkUGFzc3dvcmRSZXNldFRva2VuPWV4cG9ydHMuYWN0aXZhdGU9ZXhwb3J0cy5zdGFydFJlc2V0UGFzc3dvcmQ9ZXhwb3J0cy5zZXRUdXRvcmlhbFN0ZXA9ZXhwb3J0cy5yZWdpc3Rlcj1leHBvcnRzLmxvZ291dD1leHBvcnRzLmlzTG9nZ2VkSW49ZXhwb3J0cy5sb2dpbj12b2lkIDA7dmFyIF9BeGlvcz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0F4aW9zXCIpKSxfQ29uZmlnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQ29uZmlnXCIpKSxfVXRpbGl0eT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL1V0aWxpdHlcIikpLF9Ub2tlbj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL1Rva2VuXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBvd25LZXlzKHQsZSl7dmFyIG89T2JqZWN0LmtleXModCk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0KTtlJiYocj1yLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGUpLmVudW1lcmFibGV9KSksby5wdXNoLmFwcGx5KG8scil9cmV0dXJuIG99ZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgbz1udWxsIT1hcmd1bWVudHNbZV0/YXJndW1lbnRzW2VdOnt9O2UlMj9vd25LZXlzKE9iamVjdChvKSwhMCkuZm9yRWFjaChmdW5jdGlvbihlKXtfZGVmaW5lUHJvcGVydHkodCxlLG9bZV0pfSk6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM/T2JqZWN0LmRlZmluZVByb3BlcnRpZXModCxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhvKSk6b3duS2V5cyhPYmplY3QobykpLmZvckVhY2goZnVuY3Rpb24oZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8sZSkpfSl9cmV0dXJuIHR9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KHQsZSxvKXtyZXR1cm4gZSBpbiB0P09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOm8sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTp0W2VdPW8sdH12YXIgbG9naW49ZnVuY3Rpb24odCxlKXtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L3VzZXIvbG9naW5cIiksbWV0aG9kOlwicG9zdFwiLGRhdGE6e2VtYWlsOnQscGFzc3dvcmQ6ZX0sd2l0aENyZWRlbnRpYWxzOiEwfSkuY2F0Y2goZnVuY3Rpb24odCl7dGhyb3cgX1V0aWxpdHkuZGVmYXVsdC5nZXREZWZhdWx0RXJyb3IodCl9KX07ZXhwb3J0cy5sb2dpbj1sb2dpbjt2YXIgaXNMb2dnZWRJbj1mdW5jdGlvbih0KXt2YXIgZT10P1wiP3Rva2VuPVwiLmNvbmNhdCh0KTpcIlwiO3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdXNlci9pc0xvZ2dlZGluXCIpLmNvbmNhdChlKX0pLmNhdGNoKGZ1bmN0aW9uKHQpe3Rocm93IF9VdGlsaXR5LmRlZmF1bHQuZ2V0RGVmYXVsdEVycm9yKHQpfSl9O2V4cG9ydHMuaXNMb2dnZWRJbj1pc0xvZ2dlZEluO3ZhciBsb2dvdXQ9ZnVuY3Rpb24odCl7dmFyIGU9dD9cIj90b2tlbj1cIi5jb25jYXQodCk6XCJcIjtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L3VzZXIvbG9nb3V0XCIpLmNvbmNhdChlKSxtZXRob2Q6XCJwb3N0XCJ9KS5jYXRjaChmdW5jdGlvbih0KXt0aHJvdyBfVXRpbGl0eS5kZWZhdWx0LmdldERlZmF1bHRFcnJvcih0KX0pfTtleHBvcnRzLmxvZ291dD1sb2dvdXQ7dmFyIHJlZ2lzdGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC91c2VyL3JlZ2lzdGVyXCIpLGRhdGE6X29iamVjdFNwcmVhZCh7fSx0LHtpbnZpdGVLZXk6ZX0pLG1ldGhvZDpcInBvc3RcIn0pLmNhdGNoKGZ1bmN0aW9uKHQpe3Rocm93IF9VdGlsaXR5LmRlZmF1bHQuZ2V0RGVmYXVsdEVycm9yKHQpfSl9O2V4cG9ydHMucmVnaXN0ZXI9cmVnaXN0ZXI7dmFyIHNldFR1dG9yaWFsU3RlcD1mdW5jdGlvbih0LGUpeyhlP1Byb21pc2UucmVzb2x2ZShlKTpfVG9rZW4uZGVmYXVsdC5nZXQoKSkudGhlbihmdW5jdGlvbihlKXt2YXIgbz1lP1wiP3Rva2VuPVwiLmNvbmNhdChlKTpcIlwiO3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdXNlci90dXRvcmlhbFN0ZXBcIikuY29uY2F0KG8pLGRhdGE6e3N0ZXA6dH0sbWV0aG9kOlwicG9zdFwifSl9KS5jYXRjaChmdW5jdGlvbih0KXt0aHJvdyBfVXRpbGl0eS5kZWZhdWx0LmdldERlZmF1bHRFcnJvcih0KX0pfTtmdW5jdGlvbiBzZXRUdXRvcmlhbENvbXBsZXRlZCh0LGUpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdXNlci90dXRvcmlhbENvbXBsZXRlZFwiKSxkYXRhOnt0dXRvcmlhbDp0LGNvbXBsZXRlZDplfSxtZXRob2Q6XCJwb3N0XCJ9KX1leHBvcnRzLnNldFR1dG9yaWFsU3RlcD1zZXRUdXRvcmlhbFN0ZXA7dmFyIHN0YXJ0UmVzZXRQYXNzd29yZD1mdW5jdGlvbih0LGUpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdXNlci9zdGFydFJlc2V0UGFzc3dvcmRcIiksZGF0YTp7dXNlcm5hbWU6dCxlbWFpbDplfSxtZXRob2Q6XCJwb3N0XCJ9KS5jYXRjaChmdW5jdGlvbih0KXt0aHJvdyBfVXRpbGl0eS5kZWZhdWx0LmdldERlZmF1bHRFcnJvcih0KX0pfTtleHBvcnRzLnN0YXJ0UmVzZXRQYXNzd29yZD1zdGFydFJlc2V0UGFzc3dvcmQ7dmFyIGFjdGl2YXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC91c2VyL2FjdGl2YXRlL1wiKS5jb25jYXQodCxcIi9cIikuY29uY2F0KGUpLG1ldGhvZDpcInBvc3RcIn0pfTtleHBvcnRzLmFjdGl2YXRlPWFjdGl2YXRlO3ZhciBpc1ZhbGlkUGFzc3dvcmRSZXNldFRva2VuPWZ1bmN0aW9uKHQpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdXNlci9pc1ZhbGlkUGFzc3dvcmRSZXNldFRva2VuXCIpLG1ldGhvZDpcImdldFwiLHBhcmFtczp7dG9rZW46dH19KX07ZXhwb3J0cy5pc1ZhbGlkUGFzc3dvcmRSZXNldFRva2VuPWlzVmFsaWRQYXNzd29yZFJlc2V0VG9rZW47dmFyIHJlc2V0UGFzc3dvcmQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L3VzZXIvcmVzZXRQYXNzd29yZFwiKSxtZXRob2Q6XCJwb3N0XCIsZGF0YTp7dG9rZW46dCxwYXNzd29yZDplfX0pfTtleHBvcnRzLnJlc2V0UGFzc3dvcmQ9cmVzZXRQYXNzd29yZDt2YXIgY2hhbmdlUGFzc3dvcmQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L3VzZXIvY2hhbmdlUGFzc3dvcmRcIiksbWV0aG9kOlwicG9zdFwiLGRhdGE6e2N1clBhc3N3b3JkOnQscGFzc3dvcmQ6ZX19KX07ZnVuY3Rpb24gZ2V0SW52aXRlcygpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdXNlci9pbnZpdGVzXCIpLG1ldGhvZDpcImdldFwifSl9ZnVuY3Rpb24gaW52aXRlKHQpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdXNlci9pbnZpdGVzXCIpLG1ldGhvZDpcInBvc3RcIixkYXRhOnR9KX1mdW5jdGlvbiBkZWxldGVJbnZpdGUodCl7cmV0dXJuKDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC91c2VyL2ludml0ZXMvXCIpLmNvbmNhdCh0KSxtZXRob2Q6XCJkZWxldGVcIn0pfWV4cG9ydHMuY2hhbmdlUGFzc3dvcmQ9Y2hhbmdlUGFzc3dvcmQ7dmFyIFVzZXJSb2xlcz17Tm9ybWFsOlwiTm9ybWFsIHVzZXJcIixcIk9yZyBhZG1pbmlzdHJhdG9yXCI6XCJPcmcgYWRtaW5pc3RyYXRvclwifTtmdW5jdGlvbiBnZXRPcmdhbml6YXRpb25Vc2Vycygpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdXNlci9vcmdhbml6YXRpb25cIiksbWV0aG9kOlwiZ2V0XCJ9KX1mdW5jdGlvbiByZW1vdmVVc2VyRnJvbU9yZ2FuaXphdGlvbih0KXtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L3VzZXIvb3JnYW5pemF0aW9uL1wiKS5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHQpKSxtZXRob2Q6XCJkZWxldGVcIn0pfWZ1bmN0aW9uIGdldFBheW1lbnRNZXRob2QoKXtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L3VzZXIvcGF5bWVudFwiKX0pfWZ1bmN0aW9uIHNldFBheW1lbnRNZXRob2QodCl7cmV0dXJuKDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC91c2VyL3BheW1lbnRcIiksbWV0aG9kOlwiUE9TVFwiLGRhdGE6e3Rva2VuOnR9fSl9ZXhwb3J0cy5Vc2VyUm9sZXM9VXNlclJvbGVzO3ZhciBfZGVmYXVsdD17bG9naW46bG9naW4saXNMb2dnZWRJbjppc0xvZ2dlZEluLGxvZ291dDpsb2dvdXQscmVnaXN0ZXI6cmVnaXN0ZXIsYWN0aXZhdGU6YWN0aXZhdGUsc2V0VHV0b3JpYWxTdGVwOnNldFR1dG9yaWFsU3RlcCxzZXRUdXRvcmlhbENvbXBsZXRlZDpzZXRUdXRvcmlhbENvbXBsZXRlZCxzdGFydFJlc2V0UGFzc3dvcmQ6c3RhcnRSZXNldFBhc3N3b3JkLGlzVmFsaWRQYXNzd29yZFJlc2V0VG9rZW46aXNWYWxpZFBhc3N3b3JkUmVzZXRUb2tlbixyZXNldFBhc3N3b3JkOnJlc2V0UGFzc3dvcmQsY2hhbmdlUGFzc3dvcmQ6Y2hhbmdlUGFzc3dvcmQsZ2V0SW52aXRlczpnZXRJbnZpdGVzLGludml0ZTppbnZpdGUsZGVsZXRlSW52aXRlOmRlbGV0ZUludml0ZSxVc2VyUm9sZXM6VXNlclJvbGVzLGdldE9yZ2FuaXphdGlvblVzZXJzOmdldE9yZ2FuaXphdGlvblVzZXJzLHJlbW92ZVVzZXJGcm9tT3JnYW5pemF0aW9uOnJlbW92ZVVzZXJGcm9tT3JnYW5pemF0aW9uLGdldFBheW1lbnRNZXRob2Q6Z2V0UGF5bWVudE1ldGhvZCxzZXRQYXltZW50TWV0aG9kOnNldFBheW1lbnRNZXRob2R9O2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfYXhpb3M9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiYXhpb3NcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fXZhciBfZGVmYXVsdD1mdW5jdGlvbihlKXtyZXR1cm4oMCxfYXhpb3MuZGVmYXVsdCkoZSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZS5kYXRhfSl9O2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmdldE9TPWdldE9TLGV4cG9ydHMuY2hlY2tDb25uZWN0aXZpdHk9Y2hlY2tDb25uZWN0aXZpdHksZXhwb3J0cy5kZWZhdWx0PXZvaWQgMDt2YXIgX0F4aW9zPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQXhpb3NcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIGdldE9TKCl7cmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIG5hdmlnYXRvcj9udWxsOi0xIT09bmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZihcIldpblwiKT9cIldpbmRvd3NcIjotMSE9PW5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoXCJNYWNcIik/XCJNYWNcIjotMSE9PW5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoXCJYMTFcIik/XCJVbml4XCI6LTEhPT1uYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKFwiTGludXhcIik/XCJMaW51eFwiOm51bGx9ZnVuY3Rpb24gY2hlY2tDb25uZWN0aXZpdHkoKXtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcImh0dHBzOi8vaHR0cGJpbi5vcmcvZ2V0XCJ9KX12YXIgX2RlZmF1bHQ9e2dldE9TOmdldE9TfTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5pc0Nocm9tZT1pc0Nocm9tZSxleHBvcnRzLmdldEV4dGVuc2lvblZlcnNpb249Z2V0RXh0ZW5zaW9uVmVyc2lvbixleHBvcnRzLmlzRXh0ZW5zaW9uSW5zdGFsbGVkPWlzRXh0ZW5zaW9uSW5zdGFsbGVkLGV4cG9ydHMuaXNDaHJvbWVFeHRlbnNpb249aXNDaHJvbWVFeHRlbnNpb24sZXhwb3J0cy5vcGVuTGluaz1vcGVuTGluayxleHBvcnRzLmluc3RhbGxFeHRlbnNpb249aW5zdGFsbEV4dGVuc2lvbixleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfQ29uZmlnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQ29uZmlnXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBpc0Nocm9tZSgpe3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3c/bnVsbDpcInVuZGVmaW5lZFwiIT10eXBlb2YgY2hyb21lfWZ1bmN0aW9uIGdldEV4dGVuc2lvblZlcnNpb24oKXt2YXIgZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQmJmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid3JhcGFwaS1leHRlbnNpb24taXMtaW5zdGFsbGVkXCIpO3JldHVybiBlP2UuZ2V0QXR0cmlidXRlKFwiZGF0YS12ZXJzaW9uXCIpOm51bGx9ZnVuY3Rpb24gaXNFeHRlbnNpb25JbnN0YWxsZWQoKXtyZXR1cm4hIWdldEV4dGVuc2lvblZlcnNpb24oKX1mdW5jdGlvbiBpc0Nocm9tZUV4dGVuc2lvbigpe3RyeXtyZXR1cm4gY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe3R5cGU6XCJkdW1teVwifSksITB9Y2F0Y2goZSl7cmV0dXJuITF9fWZ1bmN0aW9uIG9wZW5MaW5rKGUpe2lmKGlzQ2hyb21lRXh0ZW5zaW9uKCkpe2UucHJldmVudERlZmF1bHQoKTt2YXIgbj1lLnRhcmdldC5ocmVmO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXtjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZSh7dHlwZTpcImNocm9tZS50YWJzLmNyZWF0ZVwiLGFyZ3M6e3VybDpufX0sZSl9KX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9ZnVuY3Rpb24gaW5zdGFsbEV4dGVuc2lvbihlKXtlJiZlLnByZXZlbnREZWZhdWx0JiZlLnByZXZlbnREZWZhdWx0KCksY2hyb21lLndlYnN0b3JlLmluc3RhbGwoX0NvbmZpZy5kZWZhdWx0LnBsdWdpblVybCxmdW5jdGlvbigpe2NvbnNvbGUubG9nKFwiU3VjY2Vzc2Z1bCBpbnN0YWxsXCIpfSxmdW5jdGlvbihlKXtjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGluc3RhbGwgQ2hyb21lIGV4dGVuc2lvblwiKSxjb25zb2xlLmVycm9yKGUpfSl9dmFyIF9kZWZhdWx0PXtpc0Nocm9tZTppc0Nocm9tZSxnZXRFeHRlbnNpb25WZXJzaW9uOmdldEV4dGVuc2lvblZlcnNpb24saXNFeHRlbnNpb25JbnN0YWxsZWQ6aXNFeHRlbnNpb25JbnN0YWxsZWQsaXNDaHJvbWVFeHRlbnNpb246aXNDaHJvbWVFeHRlbnNpb24sb3Blbkxpbms6b3BlbkxpbmssaW5zdGFsbEV4dGVuc2lvbjppbnN0YWxsRXh0ZW5zaW9ufTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5kZWJ1Zz1kZWJ1ZyxleHBvcnRzLmRlZmF1bHQ9ZXhwb3J0cy5zdHJpcGVLZXk9ZXhwb3J0cy5wcm94eUFsaXZlUGluZ0ludGVydmFsPWV4cG9ydHMucGx1Z2luVVJMPWV4cG9ydHMud3NIb3N0PWV4cG9ydHMuaG9zdD1leHBvcnRzLmVudmlyb25tZW50PXZvaWQgMDt2YXIgc2hvdWxkSW5mZXJIb3N0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJlwiY2hyb21lLWV4dGVuc2lvbjpcIiE9PXdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCxlbnZpcm9ubWVudD1cInByb2R1Y3Rpb25cIjtleHBvcnRzLmVudmlyb25tZW50PWVudmlyb25tZW50O3ZhciBob3N0PXNob3VsZEluZmVySG9zdD9cIlwiLmNvbmNhdCh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wsXCIvL1wiKS5jb25jYXQod2luZG93LmxvY2F0aW9uLmhvc3QpOlwiaHR0cHM6Ly93cmFwYXBpLmNvbVwiO2V4cG9ydHMuaG9zdD1ob3N0O3ZhciB3c0hvc3Q9XCJ3c3M6Ly93cmFwYXBpLmNvbVwiO2V4cG9ydHMud3NIb3N0PXdzSG9zdDt2YXIgcGx1Z2luVVJMPVwiaHR0cHM6Ly9jaHJvbWUuZ29vZ2xlLmNvbS93ZWJzdG9yZS9kZXRhaWwvZm1uZGRrZm1sb2VuY2NhaGZpYWZsbmtwbmduZGthZm1cIjtleHBvcnRzLnBsdWdpblVSTD1wbHVnaW5VUkw7dmFyIHByb3h5QWxpdmVQaW5nSW50ZXJ2YWw9MWU0O2Z1bmN0aW9uIGRlYnVnKCl7fWV4cG9ydHMucHJveHlBbGl2ZVBpbmdJbnRlcnZhbD1wcm94eUFsaXZlUGluZ0ludGVydmFsO3ZhciBzdHJpcGVLZXk9XCJwa19saXZlX1htSDhua0xIcWk1QUhSQ1pJVWlxcVFiYVwiO2V4cG9ydHMuc3RyaXBlS2V5PXN0cmlwZUtleTt2YXIgX2RlZmF1bHQ9e2Vudmlyb25tZW50OmVudmlyb25tZW50LGhvc3Q6aG9zdCx3c0hvc3Q6d3NIb3N0LHBsdWdpblVSTDpwbHVnaW5VUkwscHJveHlBbGl2ZVBpbmdJbnRlcnZhbDpwcm94eUFsaXZlUGluZ0ludGVydmFsLGRlYnVnOmRlYnVnLHN0cmlwZUtleTpzdHJpcGVLZXl9O2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmlzUHJveHlFbmFibGVkPWlzUHJveHlFbmFibGVkLGV4cG9ydHMuZW5hYmxlUHJveHk9ZW5hYmxlUHJveHksZXhwb3J0cy5kaXNhYmxlUHJveHk9ZGlzYWJsZVByb3h5LGV4cG9ydHMuZ2V0Q3VycmVudFRhYkRhdGE9Z2V0Q3VycmVudFRhYkRhdGEsZXhwb3J0cy5zZW5kVG9FeHRyYWN0b3I9c2VuZFRvRXh0cmFjdG9yLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9jaHJvbWVQcm9taXNlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImNocm9tZS1wcm9taXNlXCIpKSxfbG9kYXNoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaFwiKSksX0NvbmZpZz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0NvbmZpZ1wiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19dmFyIGNocm9tZXA9bmV3IF9jaHJvbWVQcm9taXNlLmRlZmF1bHQ7ZnVuY3Rpb24gZ2V0UHJveHlTZXJ2ZXIoZSl7cmV0dXJue3NjaGVtZTpcImh0dHBcIixob3N0OmUuUHJveHlTZXJ2ZXIuaG9zdG5hbWUscG9ydDplLnBvcnR9fWZ1bmN0aW9uIGlzUHJveHlFbmFibGVkKGUpe3JldHVybiBjaHJvbWVwLnByb3h5P2Nocm9tZXAucHJveHkuc2V0dGluZ3MuZ2V0KHt9KS50aGVuKGZ1bmN0aW9uKHIpe3ZhciB0PXIudmFsdWU7cmV0dXJuXCJmaXhlZF9zZXJ2ZXJzXCI9PT10Lm1vZGUmJighZXx8X2xvZGFzaC5kZWZhdWx0LmlzRXF1YWwoX2xvZGFzaC5kZWZhdWx0LmdldCh0LnJ1bGVzLFwic2luZ2xlUHJveHlcIiksZ2V0UHJveHlTZXJ2ZXIoZSkpKX0pOlByb21pc2UucmVzb2x2ZSghMSl9ZnVuY3Rpb24gZW5hYmxlUHJveHkoZSl7cmV0dXJuIGNocm9tZXAucHJveHkuc2V0dGluZ3MuZ2V0KHt9KS50aGVuKGZ1bmN0aW9uKHIpe3JldHVybiBQcm9taXNlLmFsbChbY2hyb21lcC5wcm94eS5zZXR0aW5ncy5zZXQoe3ZhbHVlOnttb2RlOlwiZml4ZWRfc2VydmVyc1wiLHJ1bGVzOntzaW5nbGVQcm94eTpnZXRQcm94eVNlcnZlcihlKSxieXBhc3NMaXN0OltfQ29uZmlnLmRlZmF1bHQuaG9zdF19fX0pLGNocm9tZXAuc3RvcmFnZS5sb2NhbC5zZXQoe3ByZXZpb3VzUHJveHlTZXR0aW5nczpKU09OLnN0cmluZ2lmeShyLnZhbHVlKX0pXSl9KX1mdW5jdGlvbiBkaXNhYmxlUHJveHkoKXtyZXR1cm4gY2hyb21lcC5zdG9yYWdlLmxvY2FsLmdldChcInByZXZpb3VzUHJveHlTZXR0aW5nc1wiKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciByO2lmKGUmJmUucHJldmlvdXNQcm94eVNldHRpbmdzKXRyeXtyPUpTT04ucGFyc2UoZS5wcmV2aW91c1Byb3h5U2V0dGluZ3MpfWNhdGNoKGUpe19Db25maWcuZGVmYXVsdC5kZWJ1ZyhlKX1yZXR1cm4gY2hyb21lcC5wcm94eS5zZXR0aW5ncy5zZXQoe3ZhbHVlOnJ8fHttb2RlOlwic3lzdGVtXCJ9fSl9KX1mdW5jdGlvbiBnZXRDdXJyZW50VGFiRGF0YSgpe3ZhciBlPW51bGwscj1mdW5jdGlvbihyKXtcIndyYXBhcGkuYWN0aXZlVGFiSFRNTFwiPT09ci50eXBlJiZlJiYoZShyLmRhdGEpLGU9bnVsbCl9O2Nocm9tZS5ydW50aW1lLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihyKTt2YXIgdD1uZXcgUHJvbWlzZShmdW5jdGlvbihyKXtlPXJ9KSxvPW51bGw7cmV0dXJuIGNocm9tZXAudGFicy5xdWVyeSh7YWN0aXZlOiEwfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gY29uc29sZS5sb2coZSksbz1lWzBdLnVybCxjaHJvbWVwLnRhYnMuZXhlY3V0ZVNjcmlwdCh7ZmlsZTpcIi9zZW5kUGFnZUhUTUwuanNcIn0pfSkudGhlbihmdW5jdGlvbigpe3JldHVybiB0fSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gY2hyb21lLnJ1bnRpbWUub25NZXNzYWdlLnJlbW92ZUxpc3RlbmVyKHIpLHt1cmw6byxodG1sOmV9fSl9ZnVuY3Rpb24gc2VuZFRvRXh0cmFjdG9yKGUpe3ZhciByPWUuaHRtbCx0PWUudXJsO2Nocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHt0eXBlOlwid3JhcGFwaS5zZW5kVG9FeHRyYWN0b3JcIixkYXRhOntib2R5OnIsdXJsOnR9fSl9dmFyIF9kZWZhdWx0PXtpc1Byb3h5RW5hYmxlZDppc1Byb3h5RW5hYmxlZCxlbmFibGVQcm94eTplbmFibGVQcm94eSxkaXNhYmxlUHJveHk6ZGlzYWJsZVByb3h5LGdldEN1cnJlbnRUYWJEYXRhOmdldEN1cnJlbnRUYWJEYXRhLHNlbmRUb0V4dHJhY3RvcjpzZW5kVG9FeHRyYWN0b3J9O2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfaW1tdXRhYmxlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImltbXV0YWJsZVwiKSksX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIGRvdEZ1bmMoZSl7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsbD1uZXcgQXJyYXkodCksYT0wO2E8dDthKyspbFthXT1hcmd1bWVudHNbYV07cmV0dXJuIGxbMF09bFswXS5zcGxpdChcIi5cIiksdGhpc1tlXS5hcHBseSh0aGlzLGwpfX1mdW5jdGlvbiBhdXRvRnVuYyhlLHQpe3JldHVybiBmdW5jdGlvbihsKXtmb3IodmFyIGE9YXJndW1lbnRzLmxlbmd0aCx1PW5ldyBBcnJheShhPjE/YS0xOjApLHI9MTtyPGE7cisrKXVbci0xXT1hcmd1bWVudHNbcl07cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGw/dGhpc1t0XS5hcHBseSh0aGlzLFtsXS5jb25jYXQodSkpOnRoaXNbZV0uYXBwbHkodGhpcyxbbF0uY29uY2F0KHUpKX19ZnVuY3Rpb24gc3BsaXRNdXRhYmxlSW1tdXRhYmxlKGUsdCl7XCJzdHJpbmdcIj09dHlwZW9mIHQ/dD10LnNwbGl0KFwiLlwiKTpcIm51bWJlclwiPT10eXBlb2YgdCYmKHQ9W3RdKTtmb3IodmFyIGw9ZSxhPVtdLHU9W10scj0wO3IhPT10Lmxlbmd0aDtyKyspe2lmKF9pbW11dGFibGUuZGVmYXVsdC5JdGVyYWJsZS5pc0l0ZXJhYmxlKGwpKXthPXQuc2xpY2Uocik7YnJlYWt9dmFyIGk9dFtyXTt1LnB1c2goaSksbD1lW2ldfXJldHVybnttdXRhYmxlOnUsaW1tdXRhYmxlOmF9fWZ1bmN0aW9uIHNldE1peGVkKGUsdCxsLGEpe3ZhciB1PXNwbGl0TXV0YWJsZUltbXV0YWJsZShlLHQpLHI9ISF1Lm11dGFibGUubGVuZ3RoLGk9ISF1LmltbXV0YWJsZS5sZW5ndGgsbj1yP19sb2Rhc2guZGVmYXVsdC5nZXQoZSx1Lm11dGFibGUpOmU7aWYoKGk/bi5nZXRJbih1LmltbXV0YWJsZSk6bik9PT1sKXJldHVybiBlO3ZhciBtPWk/bi5zZXRJbih1LmltbXV0YWJsZSxsKTpsO2lmKHIpe3ZhciBvPVtdO2U9X2xvZGFzaC5kZWZhdWx0LmNsb25lKGUpO2Zvcih2YXIgZD0wO2QhPT11Lm11dGFibGUubGVuZ3RoLTE7ZCsrKXt2YXIgcz11Lm11dGFibGVbZF07by5wdXNoKHMpLF9sb2Rhc2guZGVmYXVsdC5zZXQoZSxvLF9sb2Rhc2guZGVmYXVsdC5jbG9uZShfbG9kYXNoLmRlZmF1bHQuZ2V0KGUsbykpKX1yZXR1cm4gYT9fbG9kYXNoLmRlZmF1bHQuc2V0V2l0aChlLHUubXV0YWJsZSxtLGEpOl9sb2Rhc2guZGVmYXVsdC5zZXQoZSx1Lm11dGFibGUsbSksZX1yZXR1cm4gbX1mdW5jdGlvbiBnZXRNaXhlZChlLHQpe3ZhciBsPXNwbGl0TXV0YWJsZUltbXV0YWJsZShlLHQpLGE9ISFsLm11dGFibGUubGVuZ3RoLHU9ISFsLmltbXV0YWJsZS5sZW5ndGgscj1hP19sb2Rhc2guZGVmYXVsdC5nZXQoZSxsLm11dGFibGUpOmU7cmV0dXJuIHU/ci5nZXRJbihsLmltbXV0YWJsZSk6cn1mdW5jdGlvbiBkZWxldGVNaXhlZChlLHQpe3ZhciBsPXNwbGl0TXV0YWJsZUltbXV0YWJsZShlLHQpLGE9ISFsLm11dGFibGUubGVuZ3RoLHU9ISFsLmltbXV0YWJsZS5sZW5ndGgscj1hP19sb2Rhc2guZGVmYXVsdC5nZXQoZSxsLm11dGFibGUpOmUsaT11P3IuZGVsZXRlSW4obC5pbW11dGFibGUpOnI7aWYoYSl7dmFyIG49W107ZT1fbG9kYXNoLmRlZmF1bHQuY2xvbmUoZSk7Zm9yKHZhciBtPTA7bSE9PWwubXV0YWJsZS5sZW5ndGgtMTttKyspe3ZhciBvPWwubXV0YWJsZVttXTtuLnB1c2gobyksX2xvZGFzaC5kZWZhdWx0LnNldChlLG4sX2xvZGFzaC5kZWZhdWx0LmNsb25lKF9sb2Rhc2guZGVmYXVsdC5nZXQoZSxuKSkpfWlmKHUpX2xvZGFzaC5kZWZhdWx0LnNldChlLGwubXV0YWJsZSxpKTtlbHNle3ZhciBkPWwubXV0YWJsZS5zbGljZSgwLC0xKSxzPTAhPT1kLmxlbmd0aD9fbG9kYXNoLmRlZmF1bHQuZ2V0KGUsZCk6ZSxiPWwubXV0YWJsZVtsLm11dGFibGUubGVuZ3RoLTFdO3MgaW5zdGFuY2VvZiBBcnJheT9zLnNwbGljZShiLDEpOmRlbGV0ZSBzW2JdfXJldHVybiBlfXJldHVybiBpfV9pbW11dGFibGUuZGVmYXVsdC5JdGVyYWJsZS5wcm90b3R5cGUuZ2V0RG90PWRvdEZ1bmMoXCJnZXRJblwiKSxfaW1tdXRhYmxlLmRlZmF1bHQuSXRlcmFibGUucHJvdG90eXBlLnNldERvdD1kb3RGdW5jKFwic2V0SW5cIiksX2ltbXV0YWJsZS5kZWZhdWx0Lkl0ZXJhYmxlLnByb3RvdHlwZS5nZXRBdXRvPWF1dG9GdW5jKFwiZ2V0SW5cIixcImdldERvdFwiKSxfaW1tdXRhYmxlLmRlZmF1bHQuSXRlcmFibGUucHJvdG90eXBlLnNldEF1dG89YXV0b0Z1bmMoXCJzZXRJblwiLFwic2V0RG90XCIpLF9pbW11dGFibGUuZGVmYXVsdC5pc0ltbXV0YWJsZT1faW1tdXRhYmxlLmRlZmF1bHQuSXRlcmFibGUuaXNJdGVyYWJsZSxfaW1tdXRhYmxlLmRlZmF1bHQudG9KUz1mdW5jdGlvbihlKXtyZXR1cm4gX2ltbXV0YWJsZS5kZWZhdWx0LmlzSW1tdXRhYmxlKGUpP2UudG9KUygpOmV9LF9pbW11dGFibGUuZGVmYXVsdC5zZXRNaXhlZD1zZXRNaXhlZCxfaW1tdXRhYmxlLmRlZmF1bHQuZ2V0TWl4ZWQ9Z2V0TWl4ZWQsX2ltbXV0YWJsZS5kZWZhdWx0LmRlbGV0ZU1peGVkPWRlbGV0ZU1peGVkO3ZhciBfZGVmYXVsdD1faW1tdXRhYmxlLmRlZmF1bHQ7ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9yZWFjdERvbT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdC1kb21cIikpLF9Qb3B1cE1haW5QYWdlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL3RlbXBsYXRlcy9Qb3B1cE1haW5QYWdlXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1yZXF1aXJlKFwiZXM2LXByb21pc2VcIikucG9seWZpbGwoKSxyZXF1aXJlKFwiZXM2LW9iamVjdC1hc3NpZ25cIikucG9seWZpbGwoKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLGZ1bmN0aW9uKCl7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3B1cC1tYWluXCIpJiZfcmVhY3REb20uZGVmYXVsdC5yZW5kZXIoX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfUG9wdXBNYWluUGFnZS5kZWZhdWx0KSxkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvcHVwLW1haW5cIikpfSk7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5jb25uZWN0PWNvbm5lY3QsZXhwb3J0cy5hbGxvY2F0ZT1hbGxvY2F0ZSxleHBvcnRzLnVwZGF0ZUxhc3RQcm94eUludGVyYWN0aW9uPXVwZGF0ZUxhc3RQcm94eUludGVyYWN0aW9uLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9Db25maWc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9Db25maWdcIikpLF9BeGlvcz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0F4aW9zXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBjb25uZWN0KGUsdCxvLGEpe3ZhciByPW5ldyBXZWJTb2NrZXQoXCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0LndzSG9zdCxcIi9yZXF1ZXN0cy9cIikuY29uY2F0KGUpKTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSxuKXtyLm9ubWVzc2FnZT1mdW5jdGlvbihhKXt0cnl7dmFyIHI9YS5kYXRhLGM9SlNPTi5wYXJzZShyKTtpZihcImNhcHR1cmVcIj09PWMudHlwZSl7dmFyIHU9Yy5kYXRhO3QodSl9ZWxzZSBpZihcInN0b3BcIj09PWMudHlwZSlvKCk7ZWxzZXtpZihcInN0YXR1c1wiIT09Yy50eXBlKXRocm93IG5ldyBFcnJvcihcIldlIHJlY2VpdmVkIGFuIHVucmVjb2duaXplZCByZXNwb25zZSB0eXBlIGZyb20gdGhlIFdlYlNvY2tldCBzZXJ2ZXJcIik7ZShjLmRhdGEpfX1jYXRjaChlKXtlLnJlc3BvbnNlPWEsbihlKX19LHIub25jbG9zZT1hLHIub25lcnJvcj1hfSl9ZnVuY3Rpb24gYWxsb2NhdGUoKXtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L3Byb3h5QWxsb2NhdGlvblwiKSxtZXRob2Q6XCJQT1NUXCJ9KX1mdW5jdGlvbiB1cGRhdGVMYXN0UHJveHlJbnRlcmFjdGlvbigpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvcHJveHlBbGxvY2F0aW9uL3VwZGF0ZUxhc3RQcm94eUludGVyYWN0aW9uXCIpLG1ldGhvZDpcIlBPU1RcIn0pfXZhciBfZGVmYXVsdD17Y29ubmVjdDpjb25uZWN0LGFsbG9jYXRlOmFsbG9jYXRlLHVwZGF0ZUxhc3RQcm94eUludGVyYWN0aW9uOnVwZGF0ZUxhc3RQcm94eUludGVyYWN0aW9ufTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5kZWZhdWx0PXZvaWQgMDt2YXIgX1JlcXVlc3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vLi4vY29tbW9uL1JlcXVlc3RcIikpLF9zYW5kYm94PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vc2FuZGJveFwiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19dmFyIF9kZWZhdWx0PSgwLF9SZXF1ZXN0LmRlZmF1bHQpKF9zYW5kYm94LmRlZmF1bHQpO2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNldD1zZXQsZXhwb3J0cy5nZXQ9Z2V0LGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9DaHJvbWU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9DaHJvbWVcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIHNldChlKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24odCl7X0Nocm9tZS5kZWZhdWx0LmlzQ2hyb21lRXh0ZW5zaW9uKCk/Y2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe3R5cGU6XCJjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXRcIixhcmdzOnt0b2tlbjplfX0sdCk6dChudWxsKX0pfWZ1bmN0aW9uIGdldCgpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXtfQ2hyb21lLmRlZmF1bHQuaXNDaHJvbWVFeHRlbnNpb24oKT9jaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZSh7dHlwZTpcImNocm9tZS5zdG9yYWdlLmxvY2FsLmdldFwiLGFyZ3M6XCJ0b2tlblwifSxmdW5jdGlvbih0KXt0JiZ0LnRva2VuP2UodC50b2tlbik6ZShudWxsKX0pOmUobnVsbCl9KX12YXIgX2RlZmF1bHQ9e3NldDpzZXQsZ2V0OmdldH07ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD1leHBvcnRzLm5leHRTdGVwPWV4cG9ydHMuc3RlcHM9dm9pZCAwO3ZhciBzdGVwcz1bXCJwcmVzc1RvUmVjb3JkXCIsXCJjaG9vc2VDYXB0dXJlXCIsXCJzYXZlQ2FwdHVyZVwiLFwiZ29Ub0lucHV0c1RhYlwiLFwiZWRpdFF1ZXJ5QW5kUG9zdFwiLFwiZWRpdFNhdmVJbnB1dFwiLFwid2FpdGluZ0ZvclNhdmVJbnB1dFwiLFwiZ29Ub091dHB1dHNUYWJcIixcImFkZFRlc3RDYXNlXCIsXCJlZGl0VGVzdENhc2VJbnB1dHNcIixcImVkaXRUZXN0Q2FzZVN0YXRlVG9rZW5cIixcInJ1blRlc3RcIixcInNhdmVUZXN0Q2FzZVwiLFwic2VsZWN0VGVzdENhc2VcIixcImFkZE91dHB1dFNjZW5hcmlvXCIsXCJuYW1lT3V0cHV0U2NlbmFyaW9cIixcImNyZWF0ZU91dHB1dFwiLFwic2F2ZU91dHB1dFNjZW5hcmlvXCIsXCJnb1RvVmlld1RhYlwiLFwiZG9uZVwiXTtleHBvcnRzLnN0ZXBzPXN0ZXBzO3ZhciBuZXh0U3RlcD17fTtleHBvcnRzLm5leHRTdGVwPW5leHRTdGVwO2Zvcih2YXIgaT0wO2khPT1zdGVwcy5sZW5ndGgtMTtpKyspbmV4dFN0ZXBbc3RlcHNbaV1dPXN0ZXBzW2krMV07dmFyIF9kZWZhdWx0PXtzdGVwczpzdGVwcyxuZXh0U3RlcDpuZXh0U3RlcH07ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuc29ydEFQSUVsZW1lbnRzPXNvcnRBUElFbGVtZW50cyxleHBvcnRzLmFycmF5QnVmZmVyVG9CYXNlNjQ9YXJyYXlCdWZmZXJUb0Jhc2U2NCxleHBvcnRzLmdldERlZmF1bHRCYXNlQVBJRWxlbWVudD1nZXREZWZhdWx0QmFzZUFQSUVsZW1lbnQsZXhwb3J0cy5nZXREZWZhdWx0QVBJRWxlbWVudD1nZXREZWZhdWx0QVBJRWxlbWVudCxleHBvcnRzLmdldEluaXRpYWxBUElFbGVtZW50PWdldEluaXRpYWxBUElFbGVtZW50LGV4cG9ydHMuZ2V0RGVmYXVsdEV4dHJhY3Rvcj1nZXREZWZhdWx0RXh0cmFjdG9yLGV4cG9ydHMuZ2V0RGVmYXVsdEZpbGVJbnB1dFZhbHVlPWdldERlZmF1bHRGaWxlSW5wdXRWYWx1ZSxleHBvcnRzLmdldERlZmF1bHRJbnB1dFNwZWM9Z2V0RGVmYXVsdElucHV0U3BlYyxleHBvcnRzLmdldERlZmF1bHRQb3N0RGF0YT1nZXREZWZhdWx0UG9zdERhdGEsZXhwb3J0cy5nZXREZWZhdWx0TmV3UGFyYW09Z2V0RGVmYXVsdE5ld1BhcmFtLGV4cG9ydHMuc29ydFZlcnNpb25zPXNvcnRWZXJzaW9ucyxleHBvcnRzLmdldERlZmF1bHRPdXRwdXRTY2VuYXJpbz1nZXREZWZhdWx0T3V0cHV0U2NlbmFyaW8sZXhwb3J0cy5nZXREZWZhdWx0VGVzdENhc2U9Z2V0RGVmYXVsdFRlc3RDYXNlLGV4cG9ydHMuZ2V0RGVmYXVsdEV4dHJhY3RvclRlc3RDYXNlPWdldERlZmF1bHRFeHRyYWN0b3JUZXN0Q2FzZSxleHBvcnRzLmdldERlZmF1bHRDbGVhbnVwPWdldERlZmF1bHRDbGVhbnVwLGV4cG9ydHMuZ2V0RGVmYXVsdFBvc3RQcm9jZXNzPWdldERlZmF1bHRQb3N0UHJvY2VzcyxleHBvcnRzLmdldERlZmF1bHRFeHRyYWN0b3JQb3N0UHJvY2Vzcz1nZXREZWZhdWx0RXh0cmFjdG9yUG9zdFByb2Nlc3MsZXhwb3J0cy51cGdyYWRlQVBJRWxlbWVudD11cGdyYWRlQVBJRWxlbWVudCxleHBvcnRzLmdldERlZmF1bHRFZGdlSW5wdXQ9Z2V0RGVmYXVsdEVkZ2VJbnB1dCxleHBvcnRzLmdldERlZmF1bHRFZGdlU2VyaWFsaXplZEZvcm09Z2V0RGVmYXVsdEVkZ2VTZXJpYWxpemVkRm9ybSxleHBvcnRzLmZpbmRVbnVzZWROYW1lPWZpbmRVbnVzZWROYW1lLGV4cG9ydHMubm9ybWFsaXplT3B0aW9ucz1ub3JtYWxpemVPcHRpb25zLGV4cG9ydHMuZGVmYXVsdD1leHBvcnRzLmdldERlZmF1bHRFcnJvcj1leHBvcnRzLmdldERlZmF1bHRDb21wb3NpdGVBUElFbGVtZW50PWV4cG9ydHMuQ29tcG9zaXRlR3JhcGg9ZXhwb3J0cy5nZXREZWZhdWx0Q29tcG9zaXRlR3JhcGg9ZXhwb3J0cy5Db21wb3NpdGVJbnB1dD1leHBvcnRzLmdldERlZmF1bHRDb21wb3NpdGVJbnB1dD1leHBvcnRzLkNvbXBvc2l0ZUVkZ2U9ZXhwb3J0cy5nZXREZWZhdWx0Q29tcG9zaXRlRWRnZT1leHBvcnRzLkVkZ2VJbnB1dD1leHBvcnRzLkNvbXBvc2l0ZVZlcnRleD1leHBvcnRzLmdldERlZmF1bHRDb21wb3NpdGVWZXJ0ZXg9ZXhwb3J0cy5nZXREZWZhdWx0VmVydGV4UG9zdFByb2Nlc3M9ZXhwb3J0cy5nZXREZWZhdWx0QnJhbmNoaW5nRnVuY3Rpb249ZXhwb3J0cy5kZWZhdWx0RXh0cmFjdG9yUG9zdFByb2Nlc3NTY3JpcHQ9ZXhwb3J0cy5kZWZhdWx0UG9zdFByb2Nlc3NTY3JpcHQ9ZXhwb3J0cy5nZXREZWZhdWx0SW5wdXRIZWxwZXJTY3JpcHRDb2RlPWV4cG9ydHMuSW5wdXRIZWxwZXJTY3JpcHQ9ZXhwb3J0cy5nZXREZWZhdWx0SW5wdXRIZWxwZXJTY3JpcHQ9ZXhwb3J0cy5JbnB1dD1leHBvcnRzLmdldERlZmF1bHRJbnB1dD1leHBvcnRzLlBvc3REYXRhPWV4cG9ydHMuSW5wdXRTcGVjPWV4cG9ydHMuRmlsZUlucHV0VmFsdWU9ZXhwb3J0cy5nZXRGdWxsTmFtZVdpdGhVc2VybmFtZT1leHBvcnRzLmdldEZ1bGxOYW1lPWV4cG9ydHMuZG9Ob3RoaW5nPWV4cG9ydHMuYXBpSW5wdXRUeXBlcz1leHBvcnRzLnNpemVUb1RleHQ9dm9pZCAwO3ZhciBfbG9kYXNoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaFwiKSksX3VyaWpzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInVyaWpzXCIpKSxfSW1tdXRhYmxlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vSW1tdXRhYmxlXCIpKSxfUmVxdWVzdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL1JlcXVlc3RcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIG93bktleXMoZSx0KXt2YXIgYT1PYmplY3Qua2V5cyhlKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3QmJihyPXIuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCkuZW51bWVyYWJsZX0pKSxhLnB1c2guYXBwbHkoYSxyKX1yZXR1cm4gYX1mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBhPW51bGwhPWFyZ3VtZW50c1t0XT9hcmd1bWVudHNbdF06e307dCUyP293bktleXMoT2JqZWN0KGEpLCEwKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe19kZWZpbmVQcm9wZXJ0eShlLHQsYVt0XSl9KTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKGEpKTpvd25LZXlzKE9iamVjdChhKSkuZm9yRWFjaChmdW5jdGlvbih0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSx0KSl9KX1yZXR1cm4gZX1mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkoZSx0LGEpe3JldHVybiB0IGluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6YSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09YSxlfXZhciBzaXplVG9UZXh0PWZ1bmN0aW9uKGUpe3ZhciB0LGE9XCJcIjtyZXR1cm4gZT4xZTY/KHQ9TWF0aC5yb3VuZChlLzFlNioxMCkvMTAsYT1cIiBNXCIpOmU+MWUzPyh0PU1hdGgucm91bmQoZS8xZTMqMTApLzEwLGE9XCIgS1wiKToodD1lLGE9XCIgQlwiKSx0LnRvU3RyaW5nKCkrYX07ZXhwb3J0cy5zaXplVG9UZXh0PXNpemVUb1RleHQ7dmFyIGFwaUlucHV0VHlwZXM9e2NvbnN0YW50OlwiQ29uc3RhbnRcIix2YXJpYWJsZTpcIlRleHQgQVBJIGlucHV0XCIsZmlsZTpcIkZpbGUgQVBJIGlucHV0XCJ9O2V4cG9ydHMuYXBpSW5wdXRUeXBlcz1hcGlJbnB1dFR5cGVzO3ZhciBkb05vdGhpbmc9ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfTtleHBvcnRzLmRvTm90aGluZz1kb05vdGhpbmc7dmFyIGdldEZ1bGxOYW1lPWZ1bmN0aW9uKGUpe3JldHVyblwiXCIuY29uY2F0KGUucmVwb3NpdG9yeSxcIi9cIikuY29uY2F0KGUubmFtZSl9O2V4cG9ydHMuZ2V0RnVsbE5hbWU9Z2V0RnVsbE5hbWU7dmFyIGdldEZ1bGxOYW1lV2l0aFVzZXJuYW1lPWZ1bmN0aW9uKGUpe3JldHVyblwiXCIuY29uY2F0KGUudXNlcm5hbWUsXCIvXCIpLmNvbmNhdChlLnJlcG9zaXRvcnksXCIvXCIpLmNvbmNhdChlLm5hbWUpfTtmdW5jdGlvbiBjb21wYXJlQVBJRWxlbWVudHMoZSx0KXtyZXR1cm4gZS5yZXBvc2l0b3J5PT09dC5yZXBvc2l0b3J5P2UubmFtZTx0Lm5hbWU/LTE6MTplLnJlcG9zaXRvcnk8dC5yZXBvc2l0b3J5Py0xOjF9ZnVuY3Rpb24gc29ydEFQSUVsZW1lbnRzKGUpe3JldHVybiBlLnNvcnQoY29tcGFyZUFQSUVsZW1lbnRzKX1mdW5jdGlvbiBhcnJheUJ1ZmZlclRvQmFzZTY0KGUpe2Zvcih2YXIgdD1cIlwiLGE9bmV3IFVpbnQ4QXJyYXkoZSkscj1hLmJ5dGVMZW5ndGgsbz0wO288cjtvKyspdCs9U3RyaW5nLmZyb21DaGFyQ29kZShhW29dKTtyZXR1cm4gYnRvYSh0KX1mdW5jdGlvbiBnZXREZWZhdWx0QmFzZUFQSUVsZW1lbnQoKXtyZXR1cm57dXNlcm5hbWU6XCJcIixyZXBvc2l0b3J5OlwiXCIsbmFtZTpcIlwiLGRlc2NyaXB0aW9uOlwiXCIscmVhZG1lOlwiXCIsdmVyc2lvbjpcIjAuMC4wXCIsbWFqb3JWZXJzaW9uOjAsbWlub3JWZXJzaW9uOjAsZG90VmVyc2lvbjowLHB1Ymxpc2hlZDohMSxtYWluOiEwLGlzT3duOiEwLHVwZGF0ZWRBdDpudWxsLHN0b3JlZFJlc3BvbnNlQ291bnQ6MH19ZnVuY3Rpb24gZ2V0RGVmYXVsdEFQSUVsZW1lbnQoKXtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmFzc2lnbihnZXREZWZhdWx0QmFzZUFQSUVsZW1lbnQoKSx7dHlwZTpcIm5vcm1hbFwiLGlucHV0OmdldERlZmF1bHRJbnB1dFNwZWMoKSxvdXRwdXQ6e3NjZW5hcmlvczpbXX0sdGVzdENhc2VzOltdLHBvc3RQcm9jZXNzOmdldERlZmF1bHRQb3N0UHJvY2VzcygpfSl9ZXhwb3J0cy5nZXRGdWxsTmFtZVdpdGhVc2VybmFtZT1nZXRGdWxsTmFtZVdpdGhVc2VybmFtZTt2YXIgREVGQVVMVF9VU0VSX0FHRU5UPVwiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzYxLjAuMzE2My4xMDAgU2FmYXJpLzUzNy4zNlwiO2Z1bmN0aW9uIGdldEluaXRpYWxBUElFbGVtZW50KCl7dmFyIGU9Z2V0RGVmYXVsdEFQSUVsZW1lbnQoKTtlLmlucHV0LnVybD1cImh0dHBzOi8vbmV3cy55Y29tYmluYXRvci5jb20vXCIsZS5pbnB1dC5oZWFkZXJzLnB1c2goZ2V0RGVmYXVsdE5ld1BhcmFtKFwiVXNlci1BZ2VudFwiLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBuYXZpZ2F0b3I/bmF2aWdhdG9yLnVzZXJBZ2VudDpERUZBVUxUX1VTRVJfQUdFTlQpKTt2YXIgdD1nZXREZWZhdWx0T3V0cHV0U2NlbmFyaW8oKTtyZXR1cm4gdC5uYW1lPVwiRGVmYXVsdFwiLGUub3V0cHV0LnNjZW5hcmlvcz1bdF0sZX12YXIgaW5pdGlhbFRlc3RDYXNlUmVzcG9uc2U9JzwhRE9DVFlQRSBodG1sPlxcbjxodG1sPlxcbiAgPGhlYWQ+XFxuICAgIDx0aXRsZT5XZWxjb21lIHRvIHRoZSBXcmFwQVBJIGV4dHJhY3RvcjwvdGl0bGU+XFxuICAgIDxtZXRhIGNoYXJzZXQ9XCJVVEYtOFwiPlxcblxcbiAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgdHlwZT1cInRleHQvY3NzXCIgaHJlZj1cImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1Sb2JvdG9cIj5cXG4gICAgPHN0eWxlPlxcbiAgICAgIGgxIHsgZm9udC1mYW1pbHk6IFJvYm90byxcIkdpbGwgU2Fuc1wiLFwiR2lsbCBTYW5zIE1UXCIsQ2FsaWJyaSxzYW5zLXNlcmlmOyB9XFxuICAgICAgYm9keSB7IHBhZGRpbmctbGVmdDogMTBweDsgcGFkZGluZy1yaWdodDogMTBweDsgZm9udC1mYW1pbHk6IFJvYm90byxIZWx2ZXRpY2Esc2Fucy1zZXJpZjsgfVxcbiAgICA8L3N0eWxlPlxcbiAgPC9oZWFkPlxcbiAgPGJvZHk+XFxuICAgIDxoMT5XZWxjb21lIHRvIHRoZSBXcmFwQVBJIEV4dHJhY3RvciE8L2gxPlxcbiAgICA8cD5UbyBzdGFydCB1c2luZyB0aGUgV3JhcEFQSSBFeHRyYWN0b3I6PC9wPlxcbiAgICA8b2w+XFxuICAgICAgPGxpPlN3aXRjaCBvdmVyIHRvIFwiQ29kZSB2aWV3XCIsIGFuZCBwYXN0ZSB0aGUgSFRNTCBvZiBhIHBhZ2UgeW91XFwnZCBsaWtlIHRvIGV4dHJhY3QgZGF0YSBmcm9tLjwvbGk+XFxuICAgICAgPGxpPkVkaXQgdGhlIFVSTCBiYXIgdG8gYmUgdGhlIHBhZ2Ugd2hlcmUgeW91IGdvdCB0aGUgSFRNTCBmcm9tIChzbyB0aGF0IHdlIGdpdmUgeW91IHRoZSBmdWxsIHByZXR0eSBwYWdlIGJ5IGxvYWRpbmcgaXRzIHN0eWxlc2hlZXRzKS48L2xpPlxcbiAgICAgIDxsaT5BZGQgXCJPdXRwdXRzXCIgYnkgY2xpY2tpbmcgb24gdGhlIHBhcnRzIG9mIHRoZSBwYWdlIHlvdVxcJ2QgbGlrZSB0byBleHRyYWN0LjwvbGk+XFxuICAgIDwvb2w+XFxuICAgIDxwPllvdSBjYW4gcGFzdGUgaW4gbXVsdGlwbGUgc3VjaCBcInRlc3QgY2FzZXNcIiB0byBtYWtlIHN1cmUgdGhhdCB0aGUgZXh0cmFjdGlvbiBydWxlcyB5b3UgZGVmaW5lZCB3b3JrIGZvciBhbGwgdGhlIGRpZmZlcmVudCBwYWdlcyB5b3UgbWlnaHQgc2VlLjwvcD5cXG4gIDwvYm9keT5cXG48L2h0bWw+XFxuJztmdW5jdGlvbiBnZXREZWZhdWx0RXh0cmFjdG9yKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3JldHVybiBfbG9kYXNoLmRlZmF1bHQuYXNzaWduKGdldERlZmF1bHRCYXNlQVBJRWxlbWVudCgpLHt0eXBlOlwiZXh0cmFjdG9yXCIsb3V0cHV0OntzY2VuYXJpb3M6W2dldERlZmF1bHRPdXRwdXRTY2VuYXJpbyh7bmFtZTpcIkRlZmF1bHRcIn0pXX0sdGVzdENhc2VzOltnZXREZWZhdWx0RXh0cmFjdG9yVGVzdENhc2Uoe25hbWU6XCJOZXcgdGVzdCBjYXNlXCIsYm9keTplLmJvZHl8fGluaXRpYWxUZXN0Q2FzZVJlc3BvbnNlLHVybDplLnVybH0pXSxwb3N0UHJvY2VzczpnZXREZWZhdWx0RXh0cmFjdG9yUG9zdFByb2Nlc3MoKX0pfWZ1bmN0aW9uIGdldERlZmF1bHRGaWxlSW5wdXRWYWx1ZSgpe3JldHVybntjb250ZW50Om51bGwsbWltZVR5cGU6bnVsbCxmaWxlTmFtZTpcIlwifX12YXIgRmlsZUlucHV0VmFsdWU9X0ltbXV0YWJsZS5kZWZhdWx0LlJlY29yZChnZXREZWZhdWx0RmlsZUlucHV0VmFsdWUoKSk7ZnVuY3Rpb24gZ2V0RGVmYXVsdEF1dGhvcml6YXRpb24oKXtyZXR1cm57bW9kZTpudWxsLGJhc2ljOnt1c2VybmFtZTpcIlwiLHBhc3N3b3JkOlwiXCJ9LG50bG06e3VzZXJuYW1lOlwiXCIscGFzc3dvcmQ6XCJcIixkb21haW46XCJcIn19fWZ1bmN0aW9uIGdldERlZmF1bHRJbnB1dFNwZWMoKXtyZXR1cm57dXJsOlwiXCIsaGVhZGVyczpbXSxtZXRob2Q6XCJHRVRcIixwb3N0RGF0YTpnZXREZWZhdWx0UG9zdERhdGEoKSxxdWVyeVN0cmluZzpbXSxhdXRob3JpemF0aW9uOmdldERlZmF1bHRBdXRob3JpemF0aW9uKCksaW5wdXRzOnt9LHNjcmlwdDpudWxsfX1leHBvcnRzLkZpbGVJbnB1dFZhbHVlPUZpbGVJbnB1dFZhbHVlO3ZhciBJbnB1dFNwZWM9X0ltbXV0YWJsZS5kZWZhdWx0LlJlY29yZChnZXREZWZhdWx0SW5wdXRTcGVjKCkpO2Z1bmN0aW9uIGdldERlZmF1bHRQb3N0RGF0YSgpe3JldHVybnt0eXBlOlwicGFyYW1zXCIsZGF0YTpbXSxpbnB1dERhdGE6bnVsbH19ZXhwb3J0cy5JbnB1dFNwZWM9SW5wdXRTcGVjO3ZhciBQb3N0RGF0YT1fSW1tdXRhYmxlLmRlZmF1bHQuUmVjb3JkKGdldERlZmF1bHRQb3N0RGF0YSgpKTtmdW5jdGlvbiBnZXREZWZhdWx0TmV3UGFyYW0oZSx0KXtyZXR1cm57dHlwZTpcIm5ld1wiLG5hbWU6ZXx8XCJcIix2YWx1ZTp0fHxcIlwiLHZhck5hbWU6XCJmaWxlXCJ9fWV4cG9ydHMuUG9zdERhdGE9UG9zdERhdGE7dmFyIGdldERlZmF1bHRJbnB1dD1mdW5jdGlvbihlKXtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmFzc2lnbih7bmFtZTpudWxsLHR5cGU6XCJ2YXJpYWJsZVwiLHJlcXVpcmVkOiEwLGRlZmF1bHRFbmFibGVkOiExLGRlZmF1bHQ6XCJcIixkb2N1bWVudGF0aW9uOlwiXCJ9LGUpfTtleHBvcnRzLmdldERlZmF1bHRJbnB1dD1nZXREZWZhdWx0SW5wdXQ7dmFyIElucHV0PV9JbW11dGFibGUuZGVmYXVsdC5SZWNvcmQoZ2V0RGVmYXVsdElucHV0KCkpO2V4cG9ydHMuSW5wdXQ9SW5wdXQ7dmFyIGdldERlZmF1bHRJbnB1dEhlbHBlclNjcmlwdD1mdW5jdGlvbigpe3JldHVybntjb2RlOlwiXCIsZ2xvYmFsczpbXX19O2V4cG9ydHMuZ2V0RGVmYXVsdElucHV0SGVscGVyU2NyaXB0PWdldERlZmF1bHRJbnB1dEhlbHBlclNjcmlwdDt2YXIgSW5wdXRIZWxwZXJTY3JpcHQ9X0ltbXV0YWJsZS5kZWZhdWx0LlJlY29yZChnZXREZWZhdWx0SW5wdXRIZWxwZXJTY3JpcHQoKSk7ZXhwb3J0cy5JbnB1dEhlbHBlclNjcmlwdD1JbnB1dEhlbHBlclNjcmlwdDt2YXIgZ2V0RGVmYXVsdElucHV0SGVscGVyU2NyaXB0Q29kZT1mdW5jdGlvbigpe3JldHVyblwiLy8gRGVmaW5lIHlvdXIgaGVscGVyIGZ1bmN0aW9ucyBiZWxvdzpcXG4vLyBlLmcuLCBmdW5jdGlvbiBwYWQoaW5wdXQpIHsgcmV0dXJuIGlucHV0ICsgJyAnOyB9XFxuLy8gd2hpY2ggY2FuIHRoZW4gYmUgdXNlZCBpbiBhIEpTIGV4cHJlc3Npb24gc3VjaCBhc1xcbi8vICAgcGFkKGlucHV0Lm15SW5wdXROYW1lKVxcblwifTtmdW5jdGlvbiBzb3J0VmVyc2lvbnMoZSx0KXt2YXIgYT1cIkRFU0NcIj09PSh0PXR8fFwiREVTQ1wiKT8tMToxO3JldHVybiBlLnNvcnQoZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplLnZlcnNpb24sbz1cInN0cmluZ1wiPT10eXBlb2YgdD90OnQudmVyc2lvbixuPWZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUludChlLDEwKX0sdT1yLnNwbGl0KFwiLlwiKS5tYXAobikscz1vLnNwbGl0KFwiLlwiKS5tYXAobikscD0wO3AhPT11Lmxlbmd0aDtwKyspaWYodVtwXSE9PXNbcF0pcmV0dXJuIGEqKHVbcF0tc1twXSk7cmV0dXJuIDB9KX1mdW5jdGlvbiBnZXREZWZhdWx0T3V0cHV0U2NlbmFyaW8oZSl7cmV0dXJuIF9vYmplY3RTcHJlYWQoe25hbWU6XCJcIixvdXRwdXRzOnt9fSxlKX1mdW5jdGlvbiBnZXREZWZhdWx0VGVzdENhc2UoKXtyZXR1cm57bmFtZTpcIlwiLGlucHV0czp7fSxvcHRpb25zOnt9LHJlc3BvbnNlRGF0YTp7cmVzcG9uc2VzOltdLHN0YXRlVG9rZW46XCJcIixjb29raWVzOlwiXCJ9LHNlY3JldDp7fX19ZXhwb3J0cy5nZXREZWZhdWx0SW5wdXRIZWxwZXJTY3JpcHRDb2RlPWdldERlZmF1bHRJbnB1dEhlbHBlclNjcmlwdENvZGU7dmFyIGRlZmF1bHRUZXN0Q2FzZVJlc3BvbnNlPSc8IURPQ1RZUEUgaHRtbD5cXG48aHRtbD5cXG4gIDxoZWFkPlxcbiAgICA8dGl0bGU+TmV3IHRlc3QgY2FzZTwvdGl0bGU+XFxuICAgIDxtZXRhIGNoYXJzZXQ9XCJVVEYtOFwiPlxcblxcbiAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgdHlwZT1cInRleHQvY3NzXCIgaHJlZj1cImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1Sb2JvdG9cIj5cXG4gICAgPHN0eWxlPlxcbiAgICAgIGgxIHsgZm9udC1mYW1pbHk6IFJvYm90byxcIkdpbGwgU2Fuc1wiLFwiR2lsbCBTYW5zIE1UXCIsQ2FsaWJyaSxzYW5zLXNlcmlmOyB9XFxuICAgICAgYm9keSB7IHBhZGRpbmctbGVmdDogMTBweDsgcGFkZGluZy1yaWdodDogMTBweDsgZm9udC1mYW1pbHk6IFJvYm90byxIZWx2ZXRpY2Esc2Fucy1zZXJpZjsgfVxcbiAgICA8L3N0eWxlPlxcbiAgPC9oZWFkPlxcbiAgPGJvZHk+XFxuICAgIDxoMT5OZXcgdGVzdCBjYXNlPC9oMT5cXG4gICAgPHA+PHN0cm9uZz5Td2l0Y2ggdG8gdGhlIFwiQ29kZSB2aWV3XCIgdGFiPC9zdHJvbmc+IGFuZCBwYXN0ZSBpbiB0aGUgdGVzdCBkYXRhIHlvdVxcJ2QgbGlrZSB0byB0cnkgV3JhcEFQSSBFeHRyYWN0b3Igb24uPC9wPlxcbiAgPC9ib2R5PlxcbjwvaHRtbD5cXG4nO2Z1bmN0aW9uIGdldERlZmF1bHRFeHRyYWN0b3JUZXN0Q2FzZSgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtyZXR1cm57bmFtZTplLm5hbWV8fFwiXCIscmVzcG9uc2VEYXRhOntyZXNwb25zZXM6W3tib2R5OmUuYm9keXx8ZGVmYXVsdFRlc3RDYXNlUmVzcG9uc2UscmVxdWVzdDp7dXJpOntocmVmOmUudXJsfHxcImh0dHBzOi8vd3JhcGFwaS5jb21cIn19fV19fX1mdW5jdGlvbiBnZXREZWZhdWx0Q2xlYW51cCgpe3JldHVybnt0eXBlOm51bGwsb3B0aW9uczp7fX19ZnVuY3Rpb24gZ2V0RGVmYXVsdEJhc2VPdXRwdXQoKXtyZXR1cm57bmFtZTpcIlwiLG1hdGNoRW5naW5lOm51bGwsdHlwZTpcInJlcXVpcmVkT3V0cHV0XCIsY2hpbGRyZW46e30sY2xlYW51cDpnZXREZWZhdWx0Q2xlYW51cCgpLGRhdGE6e319fWZ1bmN0aW9uIGdldERlZmF1bHRPdXRwdXQoZSl7dmFyIHQ9Z2V0RGVmYXVsdEJhc2VPdXRwdXQoKTtzd2l0Y2goZSl7Y2FzZVwicmVnZXhcIjpyZXR1cm4gT2JqZWN0LmFzc2lnbih0LHttYXRjaEVuZ2luZTpcInJlZ2V4XCIsZGF0YTp7Z3JvdXA6MCxtYXRjaDpudWxsLGFsbE1hdGNoZXM6ITAscmVnZXg6e3BhdHRlcm46XCJcIixtb2RpZmllcnM6XCJnXCJ9LG1hdGNoT246XCJwcmV0dHlcIn19KTtjYXNlXCJjc3NcIjpyZXR1cm4gT2JqZWN0LmFzc2lnbih0LHttYXRjaEVuZ2luZTpcImNzc1wiLGRhdGE6e2Nzc1NlbGVjdG9yOlwiXCIsbnVtVG9TZWxlY3Q6XCJmaXJzdFwiLGNhcHR1cmVUeXBlOlwidGV4dFwiLGF0dHJzVG9TZWxlY3Q6W10sb2JqZWN0SW5jbHVkZVRleHQ6ITEsb2JqZWN0SW5jbHVkZUh0bWw6ITF9LGNsZWFudXA6e3R5cGU6XCJ0cmltXCIsb3B0aW9uczp7fX19KTtjYXNlXCJjb2xsZWN0aW9uXCI6cmV0dXJuIE9iamVjdC5hc3NpZ24odCx7bWF0Y2hFbmdpbmU6XCJjb2xsZWN0aW9uXCIsZGF0YTp7b3V0cHV0czp7fX19KTtjYXNlXCJqc29uXCI6cmV0dXJuIE9iamVjdC5hc3NpZ24odCx7bWF0Y2hFbmdpbmU6XCJqc29uXCIsZGF0YTp7anNvblNlbGVjdG9yOlwiJFwiLHNlbGVjdG9yVHlwZTpcImpzb25QYXRoRmlyc3RPbmx5XCJ9fSk7Y2FzZVwiZm9ybVwiOnJldHVybiBPYmplY3QuYXNzaWduKHQse21hdGNoRW5naW5lOlwiZm9ybVwiLGRhdGE6e2Nzc1NlbGVjdG9yOlwiXCJ9fSk7Y2FzZVwiaGVhZGVyXCI6cmV0dXJuIE9iamVjdC5hc3NpZ24odCx7bWF0Y2hFbmdpbmU6XCJoZWFkZXJcIixkYXRhOntyZXNwb25zZTowLGtleTpcIlwifX0pO2Nhc2VcImNvb2tpZVwiOmRlZmF1bHQ6cmV0dXJuIE9iamVjdC5hc3NpZ24odCx7bWF0Y2hFbmdpbmU6XCJjb29raWVcIixkYXRhOntyZXNwb25zZTowLGFsbFJlc3BvbnNlczohMCxrZXk6XCJcIn19KX19dmFyIGRlZmF1bHRQb3N0UHJvY2Vzc1NjcmlwdD0nZnVuY3Rpb24gcG9zdFByb2Nlc3Mob3V0cHV0LCBpbnB1dCkge1xcbiAgLy8gXCJvdXRwdXRcIiBoYXMgdGhlIHJhdyBwcmUtcHJvY2Vzc2luZyBvdXRwdXRcXG4gIC8vIFwiaW5wdXRcIiBoYXMgdGhlIHNwZWNpZmllZCBpbnB1dHMsIGluY2x1ZGluZyBkZWZhdWx0c1xcbiAgcmV0dXJuIG91dHB1dDtcXG59XFxuJztleHBvcnRzLmRlZmF1bHRQb3N0UHJvY2Vzc1NjcmlwdD1kZWZhdWx0UG9zdFByb2Nlc3NTY3JpcHQ7dmFyIGRlZmF1bHRFeHRyYWN0b3JQb3N0UHJvY2Vzc1NjcmlwdD0nZnVuY3Rpb24gcG9zdFByb2Nlc3Mob3V0cHV0KSB7XFxuICAvLyBcIm91dHB1dFwiIGhhcyB0aGUgcmF3IHByZS1wcm9jZXNzaW5nIG91dHB1dFxcbn1cXG4nO2Z1bmN0aW9uIGdldERlZmF1bHRQb3N0UHJvY2Vzcygpe3JldHVybntzY3JpcHQ6ZGVmYXVsdFBvc3RQcm9jZXNzU2NyaXB0LGVuYWJsZWQ6ITF9fWZ1bmN0aW9uIGdldERlZmF1bHRFeHRyYWN0b3JQb3N0UHJvY2Vzcygpe3JldHVybntzY3JpcHQ6ZGVmYXVsdEV4dHJhY3RvclBvc3RQcm9jZXNzU2NyaXB0LGVuYWJsZWQ6ITF9fWZ1bmN0aW9uIHVwZ3JhZGVBUElFbGVtZW50KGUpe2lmKFwiY29tcG9zaXRlXCI9PT1lLnR5cGUpcmV0dXJuIGU7ZS50eXBlfHwoZS50eXBlPVwibm9ybWFsXCIpO3ZhciB0PWUucG9zdFByb2Nlc3M7ZnVuY3Rpb24gYShlKXtpZihcImZpbGVcIj09PWUudHlwZXx8XCJuZXdcIj09PWUudHlwZSlyZXR1cm4gZTt2YXIgdD1nZXREZWZhdWx0TmV3UGFyYW0oKTtpZih0Lm5hbWU9ZS5uYW1lLFwidmFyaWFibGVcIj09PWUudHlwZSl7dmFyIGE9ZS52YXJOYW1lOy9eWyRBLVpfXVswLTlBLVpfJF0qJC9pLnRlc3QoYSk/dC52YWx1ZT1cInt7XCIuY29uY2F0KGEsXCJ9fVwiKTp0LnZhbHVlPVwie3t3cmFwQVBJSW5wdXRzW1wiLmNvbmNhdChKU09OLnN0cmluZ2lmeShhKSxcIl19fVwiKX1lbHNlXCJleHByZXNzaW9uXCI9PT1lLnR5cGU/dC52YWx1ZT1cInt7XCIuY29uY2F0KGUuZXhwcmVzc2lvbi5yZXBsYWNlKC9pbnB1dFxcLi9nLFwiXCIpLFwifX1cIik6XCJjb25zdGFudFwiPT09ZS50eXBlJiYodC52YWx1ZT1lLmRhdGEpO3JldHVybiB0fVwic3RyaW5nXCI9PXR5cGVvZiB0P2UucG9zdFByb2Nlc3M9e3NjcmlwdDp0LGVuYWJsZWQ6ITB9OnR8fChlLnBvc3RQcm9jZXNzPXtzY3JpcHQ6ZGVmYXVsdFBvc3RQcm9jZXNzU2NyaXB0LGVuYWJsZWQ6ITF9KSxlLnRlc3RDYXNlcyYmKGUudGVzdENhc2VzPV9sb2Rhc2guZGVmYXVsdC5maWx0ZXIoZS50ZXN0Q2FzZXMpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5vcHRpb25zfHwoZS5vcHRpb25zPXt9LGUuc3RhdGVUb2tlbiYmKGUub3B0aW9ucy5zdGF0ZVRva2VuPWUuc3RhdGVUb2tlbixkZWxldGUgZS5zdGF0ZVRva2VuKSxlLnNlcmlhbGl6ZWRGb3JtJiYoZS5vcHRpb25zLnNlcmlhbGl6ZWRGb3JtPWUuc2VyaWFsaXplZEZvcm0sZGVsZXRlIGUuc2VyaWFsaXplZEZvcm0pKSxlfSkpO3ZhciByPWUuaW5wdXQ7ci5wb3N0RGF0YSYmKFwicGFyYW1zXCI9PT1yLnBvc3REYXRhLnR5cGU/ci5wb3N0RGF0YS5kYXRhPXIucG9zdERhdGEuZGF0YS5tYXAoYSk6XCJqc29uXCIhPT1yLnBvc3REYXRhLnR5cGUmJlwidGV4dFwiIT09ci5wb3N0RGF0YS50eXBlfHwoci5wb3N0RGF0YS5kYXRhPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1fUmVxdWVzdC5kZWZhdWx0LnBhcnNlQ3VybHlFeHByZXNzaW9uKGUpLGE9MDthIT09dC5sZW5ndGg7YSsrKXt2YXIgcj10W2FdO2lmKFwiZXhwcmVzc2lvblwiPT09ci50eXBlKXt2YXIgbz0vXlskQS1aX11bMC05QS1aXyRdKiQvaS50ZXN0KHIuZGF0YSk7ci5kYXRhPW8/ci5kYXRhOlwid3JhcEFQSUlucHV0c1tcIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkoci5kYXRhKSxcIl1cIil9fXJldHVybiB0Lm1hcChmdW5jdGlvbihlKXtyZXR1cm5cImV4cHJlc3Npb25cIj09PWUudHlwZT9cInt7XCIuY29uY2F0KGUuZGF0YSxcIn19XCIpOmUuZGF0YX0pLmpvaW4oXCJcIil9KHIucG9zdERhdGEuZGF0YXx8XCJcIikpKSxyLnF1ZXJ5U3RyaW5nJiYoci5xdWVyeVN0cmluZz1yLnF1ZXJ5U3RyaW5nLm1hcChhKSksci5oZWFkZXJzJiYoci5oZWFkZXJzPXIuaGVhZGVycy5tYXAoYSkpO3ZhciBvPV9sb2Rhc2guZGVmYXVsdC5tYXAoci5xdWVyeVN0cmluZyxcIm5hbWVcIiksbj0oMCxfdXJpanMuZGVmYXVsdCkoci51cmwpLnF1ZXJ5KCEwKTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmZvckVhY2gobixmdW5jdGlvbihlLHQpey0xPT09by5pbmRleE9mKHQpJiZyLnF1ZXJ5U3RyaW5nLnB1c2goZ2V0RGVmYXVsdE5ld1BhcmFtKHQsZSkpfSksci51cmw9KDAsX3VyaWpzLmRlZmF1bHQpKHIudXJsKS5xdWVyeSh7fSkubm9ybWFsaXplUXVlcnkoKS50b1N0cmluZygpLGUuaW5wdXQuYXV0aG9yaXphdGlvbnx8KGUuaW5wdXQuYXV0aG9yaXphdGlvbj1nZXREZWZhdWx0QXV0aG9yaXphdGlvbigpKSxlLmlucHV0Lm1ldGhvZD1lLmlucHV0Lm1ldGhvZC50b1VwcGVyQ2FzZSgpLGV9ZXhwb3J0cy5kZWZhdWx0RXh0cmFjdG9yUG9zdFByb2Nlc3NTY3JpcHQ9ZGVmYXVsdEV4dHJhY3RvclBvc3RQcm9jZXNzU2NyaXB0O3ZhciBnZXREZWZhdWx0QnJhbmNoaW5nRnVuY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm5cIi8vIERlZmluZSB3aGljaCBvdXRwdXQgc2NlbmFyaW8gd2Ugc2hvdWxkIHJ1biBuZXh0XFxuLy8gYnkgcmV0dXJuaW5nIGEgc3RyaW5nIGNvcnJlc3BvbmRpbmcgdG8gaXRzIG5hbWUuXFxuLy8gKGUuZy4sIHJldHVybiAnbXlTY2VuYXJpbycgaW4gdGhlIGNvZGUgdG9cXG4vLyBnbyB0byB0aGUgc2NlbmFyaW8gbmFtZWQgbXlTY2VuYXJpbylcXG5mdW5jdGlvbiBicmFuY2gob3V0cHV0LCBpbnB1dCkge1xcbiAgLy8gb3V0cHV0IGhhcyB0aGUgb3V0cHV0IGZyb20gdGhpcyBjb21wb25lbnQgQVBJIGVsZW1lbnRcXG4gIC8vIGlucHV0IGhhcyB0aGUgaW5wdXRzIGZyb20gdGhlIG92ZXJhbGwgY29tcG9zaXRlIEFQSSBlbGVtZW50XFxuICByZXR1cm4gb3V0cHV0Lm91dHB1dFNjZW5hcmlvO1xcbn1cXG5cIn07ZXhwb3J0cy5nZXREZWZhdWx0QnJhbmNoaW5nRnVuY3Rpb249Z2V0RGVmYXVsdEJyYW5jaGluZ0Z1bmN0aW9uO3ZhciBnZXREZWZhdWx0VmVydGV4UG9zdFByb2Nlc3M9ZnVuY3Rpb24oKXtyZXR1cm5cIi8vIE1vZGlmeSBhbmQgcmV0dXJuIHdoYXQgeW91IHdhbnQgYXMgdGhlIG91dHB1dFxcbmZ1bmN0aW9uIHBvc3RQcm9jZXNzKG91dHB1dCwgaW5wdXQpIHtcXG4gIC8vIG91dHB1dCBoYXMgdGhlIG91dHB1dCBmcm9tIHRoaXMgY29tcG9uZW50IEFQSSBlbGVtZW50XFxuICAvLyBpbnB1dCBoYXMgdGhlIGlucHV0cyBmcm9tIHRoZSBvdmVyYWxsIGNvbXBvc2l0ZSBBUEkgZWxlbWVudFxcbiAgcmV0dXJuIG91dHB1dDtcXG59XFxuXCJ9O2V4cG9ydHMuZ2V0RGVmYXVsdFZlcnRleFBvc3RQcm9jZXNzPWdldERlZmF1bHRWZXJ0ZXhQb3N0UHJvY2Vzczt2YXIgZ2V0RGVmYXVsdENvbXBvc2l0ZVZlcnRleD1mdW5jdGlvbigpe3JldHVybntpZDpudWxsLHR5cGU6XCJhcGlFbGVtZW50XCIsbmFtZTpudWxsLGRhdGE6bnVsbCxicmFuY2hpbmdNb2RlOlwib3V0cHV0U2NlbmFyaW9cIixicmFuY2hpbmdGdW5jdGlvbjpnZXREZWZhdWx0QnJhbmNoaW5nRnVuY3Rpb24oKSxwb3N0UHJvY2Vzc0VuYWJsZWQ6ITEscG9zdFByb2Nlc3M6Z2V0RGVmYXVsdFZlcnRleFBvc3RQcm9jZXNzKCl9fTtleHBvcnRzLmdldERlZmF1bHRDb21wb3NpdGVWZXJ0ZXg9Z2V0RGVmYXVsdENvbXBvc2l0ZVZlcnRleDt2YXIgQ29tcG9zaXRlVmVydGV4PV9JbW11dGFibGUuZGVmYXVsdC5SZWNvcmQoZ2V0RGVmYXVsdENvbXBvc2l0ZVZlcnRleCgpKTtmdW5jdGlvbiBnZXREZWZhdWx0RWRnZUlucHV0KCl7cmV0dXJue2Jhc2VUeXBlOlwidmFyaWFibGVcIix0eXBlOlwiaW5wdXRcIixkYXRhOlwiXCIsdmFyTmFtZTpcIlwiLGV4cHJlc3Npb246XCJcIn19ZnVuY3Rpb24gZ2V0RGVmYXVsdEVkZ2VTZXJpYWxpemVkRm9ybSgpe3JldHVybiBfbG9kYXNoLmRlZmF1bHQuYXNzaWduKGdldERlZmF1bHRFZGdlSW5wdXQoKSx7dHlwZTpcIm5vbmVcIn0pfWV4cG9ydHMuQ29tcG9zaXRlVmVydGV4PUNvbXBvc2l0ZVZlcnRleDt2YXIgRWRnZUlucHV0PV9JbW11dGFibGUuZGVmYXVsdC5SZWNvcmQoZ2V0RGVmYXVsdEVkZ2VJbnB1dCgpKTtleHBvcnRzLkVkZ2VJbnB1dD1FZGdlSW5wdXQ7dmFyIGdldERlZmF1bHRDb21wb3NpdGVFZGdlPWZ1bmN0aW9uKCl7cmV0dXJue3RhcmdldElkOm51bGwsaW5wdXRzOnt9LHNlcmlhbGl6ZWRGb3JtOmdldERlZmF1bHRFZGdlU2VyaWFsaXplZEZvcm0oKX19O2V4cG9ydHMuZ2V0RGVmYXVsdENvbXBvc2l0ZUVkZ2U9Z2V0RGVmYXVsdENvbXBvc2l0ZUVkZ2U7dmFyIENvbXBvc2l0ZUVkZ2U9X0ltbXV0YWJsZS5kZWZhdWx0LlJlY29yZCh7dGFyZ2V0SWQ6bnVsbCxpbnB1dHM6bmV3IF9JbW11dGFibGUuZGVmYXVsdC5NYXAsc2VyaWFsaXplZEZvcm06bmV3IEVkZ2VJbnB1dChnZXREZWZhdWx0RWRnZVNlcmlhbGl6ZWRGb3JtKCkpfSk7ZnVuY3Rpb24gYnVpbGRDb21wb3NpdGVFZGdlSW5wdXRzKGUpe3ZhciB0PV9sb2Rhc2guZGVmYXVsdC5jaGFpbihlKS5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5uYW1lLGE9LTEhPT10LnNlYXJjaCgvXltBLVphLXpfJF1bXFx3X10qJC8pO3JldHVybltlLm5hbWUsbmV3IEVkZ2VJbnB1dCh7YmFzZVR5cGU6ZS50eXBlLHZhck5hbWU6dCxleHByZXNzaW9uOmE/XCJpbnB1dC5cIi5jb25jYXQodCk6XCJpbnB1dFtcIi5jb25jYXQodC5yZXBsYWNlKC8nL2csXCJcXFxcJ1wiKSxcIl1cIil9KV19KS5mcm9tUGFpcnMoKS52YWx1ZSgpO3JldHVybiBfSW1tdXRhYmxlLmRlZmF1bHQuZnJvbUpTKHQpfWV4cG9ydHMuQ29tcG9zaXRlRWRnZT1Db21wb3NpdGVFZGdlO3ZhciBnZXREZWZhdWx0Q29tcG9zaXRlSW5wdXQ9ZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZWQ6ITAsdHlwZTpcInZhcmlhYmxlXCJ9fTtleHBvcnRzLmdldERlZmF1bHRDb21wb3NpdGVJbnB1dD1nZXREZWZhdWx0Q29tcG9zaXRlSW5wdXQ7dmFyIENvbXBvc2l0ZUlucHV0PV9JbW11dGFibGUuZGVmYXVsdC5SZWNvcmQoZ2V0RGVmYXVsdENvbXBvc2l0ZUlucHV0KCkpO2V4cG9ydHMuQ29tcG9zaXRlSW5wdXQ9Q29tcG9zaXRlSW5wdXQsQ29tcG9zaXRlSW5wdXQuZnJvbUpTPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgQ29tcG9zaXRlSW5wdXQoXCJib29sZWFuXCI9PXR5cGVvZiBlP3tyZXF1aXJlZDplLHR5cGU6XCJ2YXJpYWJsZVwifTplKX07dmFyIGdldERlZmF1bHRDb21wb3NpdGVHcmFwaD1mdW5jdGlvbigpe3JldHVybnt2ZXJ0aWNlczp7MDp7aWQ6XCIwXCIsdHlwZTpcInN0YXJ0XCIsbmFtZTpcInN0YXJ0XCIsZGF0YTpudWxsfX0sZWRnZXM6ezA6e3N0YXJ0Om51bGx9fSxpbnB1dDp7aW5wdXRzOnt9fX19O2V4cG9ydHMuZ2V0RGVmYXVsdENvbXBvc2l0ZUdyYXBoPWdldERlZmF1bHRDb21wb3NpdGVHcmFwaDt2YXIgQ29tcG9zaXRlR3JhcGg9X0ltbXV0YWJsZS5kZWZhdWx0LlJlY29yZChnZXREZWZhdWx0Q29tcG9zaXRlR3JhcGgoKSk7ZXhwb3J0cy5Db21wb3NpdGVHcmFwaD1Db21wb3NpdGVHcmFwaDt2YXIgZ2V0RGVmYXVsdENvbXBvc2l0ZUFQSUVsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmFzc2lnbihnZXREZWZhdWx0QmFzZUFQSUVsZW1lbnQoKSx7dHlwZTpcImNvbXBvc2l0ZVwiLGdyYXBoOmdldERlZmF1bHRDb21wb3NpdGVHcmFwaCgpLGlucHV0Ont1cmw6XCJcIixpbnB1dHM6e319fSl9O2V4cG9ydHMuZ2V0RGVmYXVsdENvbXBvc2l0ZUFQSUVsZW1lbnQ9Z2V0RGVmYXVsdENvbXBvc2l0ZUFQSUVsZW1lbnQ7dmFyIGdldERlZmF1bHRFcnJvcj1mdW5jdGlvbihlKXt2YXIgdD17c3VjY2VzczohMSxtZXNzYWdlczpbXCJUaGVyZSB3YXMgYW4gdW5rbm93biBlcnJvcjsgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlclwiXSxlcnJvcjp7fX07cmV0dXJuIGUmJih0LmVycm9yPWUpLHR9O2Z1bmN0aW9uIGZpbmRVbnVzZWROYW1lKGUsdCxhKXtmb3IodmFyIHI9ISEoYT1hfHx7fSkuaW5jbHVkZVNwYWNlLG89dCBpbnN0YW5jZW9mIEFycmF5P19sb2Rhc2guZGVmYXVsdC56aXBPYmplY3QodCx0KTp0LG49ZSx1PTI7biBpbiBvOyluPWUrKHI/XCIgXCI6XCJcIikrdSsrO3JldHVybiBufWZ1bmN0aW9uIG5vcm1hbGl6ZU9wdGlvbnMoZSl7aWYoZSBpbnN0YW5jZW9mIEFycmF5KXtpZihlWzBdJiZcIm9iamVjdFwiIT09X3R5cGVvZihlWzBdKSlyZXR1cm4gZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue3ZhbHVlOmUsbGFiZWw6ZX19KX1lbHNlIGlmKFwib2JqZWN0XCI9PT1fdHlwZW9mKGUpKXJldHVybiBfbG9kYXNoLmRlZmF1bHQubWFwKGUsZnVuY3Rpb24oZSx0KXtyZXR1cm57dmFsdWU6dCxsYWJlbDplfX0pO3JldHVybiBlfWV4cG9ydHMuZ2V0RGVmYXVsdEVycm9yPWdldERlZmF1bHRFcnJvcjt2YXIgX2RlZmF1bHQ9e3NpemVUb1RleHQ6c2l6ZVRvVGV4dCxhcGlJbnB1dFR5cGVzOmFwaUlucHV0VHlwZXMsZG9Ob3RoaW5nOmRvTm90aGluZyxnZXRGdWxsTmFtZTpnZXRGdWxsTmFtZSxnZXRGdWxsTmFtZVdpdGhVc2VybmFtZTpnZXRGdWxsTmFtZVdpdGhVc2VybmFtZSxzb3J0QVBJRWxlbWVudHM6c29ydEFQSUVsZW1lbnRzLHNvcnRWZXJzaW9uczpzb3J0VmVyc2lvbnMsYXJyYXlCdWZmZXJUb0Jhc2U2NDphcnJheUJ1ZmZlclRvQmFzZTY0LGdldERlZmF1bHRBUElFbGVtZW50OmdldERlZmF1bHRBUElFbGVtZW50LGdldEluaXRpYWxBUElFbGVtZW50OmdldEluaXRpYWxBUElFbGVtZW50LGdldERlZmF1bHRFeHRyYWN0b3I6Z2V0RGVmYXVsdEV4dHJhY3RvcixnZXREZWZhdWx0SW5wdXRTcGVjOmdldERlZmF1bHRJbnB1dFNwZWMsSW5wdXRTcGVjOklucHV0U3BlYyxnZXREZWZhdWx0SW5wdXRIZWxwZXJTY3JpcHQ6Z2V0RGVmYXVsdElucHV0SGVscGVyU2NyaXB0LElucHV0SGVscGVyU2NyaXB0OklucHV0SGVscGVyU2NyaXB0LGdldERlZmF1bHRJbnB1dEhlbHBlclNjcmlwdENvZGU6Z2V0RGVmYXVsdElucHV0SGVscGVyU2NyaXB0Q29kZSxnZXREZWZhdWx0UG9zdERhdGE6Z2V0RGVmYXVsdFBvc3REYXRhLFBvc3REYXRhOlBvc3REYXRhLGdldERlZmF1bHROZXdQYXJhbTpnZXREZWZhdWx0TmV3UGFyYW0sZ2V0RGVmYXVsdElucHV0OmdldERlZmF1bHRJbnB1dCxJbnB1dDpJbnB1dCxnZXREZWZhdWx0RmlsZUlucHV0VmFsdWU6Z2V0RGVmYXVsdEZpbGVJbnB1dFZhbHVlLEZpbGVJbnB1dFZhbHVlOkZpbGVJbnB1dFZhbHVlLGdldERlZmF1bHRPdXRwdXRTY2VuYXJpbzpnZXREZWZhdWx0T3V0cHV0U2NlbmFyaW8sZ2V0RGVmYXVsdFRlc3RDYXNlOmdldERlZmF1bHRUZXN0Q2FzZSxnZXREZWZhdWx0RXh0cmFjdG9yVGVzdENhc2U6Z2V0RGVmYXVsdEV4dHJhY3RvclRlc3RDYXNlLGdldERlZmF1bHRPdXRwdXQ6Z2V0RGVmYXVsdE91dHB1dCxnZXREZWZhdWx0Q2xlYW51cDpnZXREZWZhdWx0Q2xlYW51cCxkZWZhdWx0UG9zdFByb2Nlc3NTY3JpcHQ6ZGVmYXVsdFBvc3RQcm9jZXNzU2NyaXB0LGdldERlZmF1bHRQb3N0UHJvY2VzczpnZXREZWZhdWx0UG9zdFByb2Nlc3MsdXBncmFkZUFQSUVsZW1lbnQ6dXBncmFkZUFQSUVsZW1lbnQsZ2V0RGVmYXVsdEJyYW5jaGluZ0Z1bmN0aW9uOmdldERlZmF1bHRCcmFuY2hpbmdGdW5jdGlvbixnZXREZWZhdWx0VmVydGV4UG9zdFByb2Nlc3M6Z2V0RGVmYXVsdFZlcnRleFBvc3RQcm9jZXNzLGdldERlZmF1bHRDb21wb3NpdGVWZXJ0ZXg6Z2V0RGVmYXVsdENvbXBvc2l0ZVZlcnRleCxDb21wb3NpdGVWZXJ0ZXg6Q29tcG9zaXRlVmVydGV4LGdldERlZmF1bHRDb21wb3NpdGVFZGdlOmdldERlZmF1bHRDb21wb3NpdGVFZGdlLENvbXBvc2l0ZUVkZ2U6Q29tcG9zaXRlRWRnZSxidWlsZENvbXBvc2l0ZUVkZ2VJbnB1dHM6YnVpbGRDb21wb3NpdGVFZGdlSW5wdXRzLGdldERlZmF1bHRFZGdlU2VyaWFsaXplZEZvcm06Z2V0RGVmYXVsdEVkZ2VTZXJpYWxpemVkRm9ybSxnZXREZWZhdWx0RWRnZUlucHV0OmdldERlZmF1bHRFZGdlSW5wdXQsRWRnZUlucHV0OkVkZ2VJbnB1dCxnZXREZWZhdWx0Q29tcG9zaXRlSW5wdXQ6Z2V0RGVmYXVsdENvbXBvc2l0ZUlucHV0LENvbXBvc2l0ZUlucHV0OkNvbXBvc2l0ZUlucHV0LGdldERlZmF1bHRDb21wb3NpdGVHcmFwaDpnZXREZWZhdWx0Q29tcG9zaXRlR3JhcGgsQ29tcG9zaXRlR3JhcGg6Q29tcG9zaXRlR3JhcGgsZ2V0RGVmYXVsdENvbXBvc2l0ZUFQSUVsZW1lbnQ6Z2V0RGVmYXVsdENvbXBvc2l0ZUFQSUVsZW1lbnQsZ2V0RGVmYXVsdEVycm9yOmdldERlZmF1bHRFcnJvcixmaW5kVW51c2VkTmFtZTpmaW5kVW51c2VkTmFtZSxub3JtYWxpemVPcHRpb25zOm5vcm1hbGl6ZU9wdGlvbnN9O2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnVzZXI9dXNlcixleHBvcnRzLmNvbnRhY3RGb3JtPWNvbnRhY3RGb3JtLGV4cG9ydHMuZGVmYXVsdD1leHBvcnRzLmVtYWlsUmVnZXg9dm9pZCAwO3ZhciB1c2VybmFtZVJlZ2V4PS9eXFx3W1xcdy1dKlxcdyQvLGVtYWlsUmVnZXg9L15bYS16QS1aMC05LiEjJCUm4oCZKisvPT9eX2B7fH1+LV0rQFthLXpBLVowLTktXSsoPzpcXC5bYS16QS1aMC05LV0rKSokLztmdW5jdGlvbiB1c2VyKGUpe3ZhciBhPXt9O3JldHVybiBlLnVzZXJuYW1lP3VzZXJuYW1lUmVnZXgudGVzdChlLnVzZXJuYW1lKXx8KGEudXNlcm5hbWU9XCJZb3VyIHVzZXJuYW1lIG11c3Qgb25seSBjb250YWluIG51bWJlcnMsIGxldHRlcnMsIGFuZCBkYXNoZXMgKC0pIGFuZCBiZSBhdCBsZWFzdCAyIGNoYXJhY3RlcnMgbG9uZ1wiKTphLnVzZXJuYW1lPVwiUGxlYXNlIGVudGVyIGEgdXNlcm5hbWUuXCIsZS5wYXNzd29yZHx8KGEucGFzc3dvcmQ9XCJQbGVhc2UgZW50ZXIgYSBwYXNzd29yZC5cIiksZS5lbWFpbD9lbWFpbFJlZ2V4LnRlc3QoZS5lbWFpbCl8fChhLmVtYWlsPVwiVGhlIGVtYWlsIGFkZHJlc3MgZG9lc24ndCBsb29rIHZhbGlkLiBQbGVhc2UgdHJ5IGFnYWluLlwiKTphLmVtYWlsPVwiUGxlYXNlIGVudGVyIHlvdXIgZW1haWwgYWRkcmVzcy5cIixlLm5hbWV8fChhLm5hbWU9XCJQbGVhc2UgZW50ZXIgeW91ciBuYW1lLlwiKSxcImJvb2xlYW5cIiE9dHlwZW9mIGUuc2hvdWxkQ29udGFjdCYmKGEuc2hvdWxkQ29udGFjdD1cIlBsZWFzZSBjaG9vc2Ugd2hldGhlciB5b3UncmUgcG90ZW50aWFsbHkgaW50ZXJlc3RlZCBpbiBhIGhpZ2hlciB1c2FnZSBsaW1pdCBvciBhIHNlbGYtaG9zdGVkL3ByaXZhdGUgaW5zdGFuY2VcIiksYX1mdW5jdGlvbiBjb250YWN0Rm9ybShlKXt2YXIgYT17fTtyZXR1cm4gZS5uYW1lfHwoYS5uYW1lPVwiUGxlYXNlIGVudGVyIHlvdXIgbmFtZS5cIiksZS5lbWFpbD9lbWFpbFJlZ2V4LnRlc3QoZS5lbWFpbCl8fChhLmVtYWlsPVwiVGhlIGVtYWlsIGFkZHJlc3MgZG9lc24ndCBsb29rIHZhbGlkLiBQbGVhc2UgdHJ5IGFnYWluLlwiKTphLmVtYWlsPVwiUGxlYXNlIGVudGVyIHlvdXIgZW1haWwuXCIsZS5jb21wYW55fHwoYS5jb21wYW55PVwiUGxlYXNlIGVudGVyIHlvdXIgY29tcGFueSdzIG5hbWUuXCIpLGF9ZXhwb3J0cy5lbWFpbFJlZ2V4PWVtYWlsUmVnZXg7dmFyIF9kZWZhdWx0PXt1c2VyOnVzZXIsY29udGFjdEZvcm06Y29udGFjdEZvcm19O2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmdldEtleT1nZXRLZXksZXhwb3J0cy5nZXROYW1lS2V5PWdldE5hbWVLZXksZXhwb3J0cy5SZWR1Y2VyPVJlZHVjZXIsZXhwb3J0cy5jb25uZWN0PWNvbm5lY3QsZXhwb3J0cy5kZWZhdWx0PWV4cG9ydHMuQWN0aW9ucz12b2lkIDA7dmFyIF9yZWFjdFJlZHV4PXJlcXVpcmUoXCJyZWFjdC1yZWR1eFwiKSxfbG9kYXNoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaFwiKSksX21vbWVudD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJtb21lbnRcIikpLF9VdGlsaXR5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL1V0aWxpdHlcIikpLF9BUElTdG9yYWdlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL0FQSVN0b3JhZ2VcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIG93bktleXMoZSx0KXt2YXIgbj1PYmplY3Qua2V5cyhlKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3QmJihyPXIuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCkuZW51bWVyYWJsZX0pKSxuLnB1c2guYXBwbHkobixyKX1yZXR1cm4gbn1mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPW51bGwhPWFyZ3VtZW50c1t0XT9hcmd1bWVudHNbdF06e307dCUyP293bktleXMoT2JqZWN0KG4pLCEwKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe19kZWZpbmVQcm9wZXJ0eShlLHQsblt0XSl9KTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKTpvd25LZXlzKE9iamVjdChuKSkuZm9yRWFjaChmdW5jdGlvbih0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobix0KSl9KX1yZXR1cm4gZX1mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkoZSx0LG4pe3JldHVybiB0IGluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6bixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09bixlfXZhciBBY3Rpb25zPXtzdGFydFVwZGF0ZUFQSUVsZW1lbnRzOmZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6XCJBUElTX1VQREFURV9TVEFSVFwifX0sdXBkYXRlQVBJRWxlbWVudHM6ZnVuY3Rpb24oZSl7cmV0dXJue3R5cGU6XCJBUElTX1VQREFURVwiLGFwaUVsZW1lbnRzOmV9fSxhZGRBUElFbGVtZW50OmZ1bmN0aW9uKGUpe3JldHVybnt0eXBlOlwiQVBJX0FERFwiLGFwaUVsZW1lbnQ6ZX19LHJlbW92ZUFQSUVsZW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJue3R5cGU6XCJBUElfUkVNT1ZFXCIsYXBpRWxlbWVudDplfX0sc3RhcnRMb2FkaW5nQVBJRWxlbWVudDpmdW5jdGlvbihlKXtyZXR1cm57dHlwZTpcIkFQSV9MT0FESU5HXCIsbmFtZVZlcnNpb246ZX19LGZpbmlzaExvYWRpbmdBUElFbGVtZW50OmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybnt0eXBlOlwiQVBJX0xPQURFRFwiLG5hbWVWZXJzaW9uOmUsYXBpRWxlbWVudDp0LGFsaWFzZWQ6bix2ZXJzaW9uczpyfX0sZXJyb3JMb2FkaW5nQVBJRWxlbWVudDpmdW5jdGlvbihlLHQpe3JldHVybnt0eXBlOlwiQVBJX0VSUk9SXCIsbmFtZVZlcnNpb246ZSxyZXNwb25zZTp0fX0sc3RhcnRTYXZpbmdBUElFbGVtZW50OmZ1bmN0aW9uKGUpe3JldHVybnt0eXBlOlwiQVBJX1NBVklOR1wiLGFwaUVsZW1lbnQ6ZX19LGZpbmlzaFNhdmluZ0FQSUVsZW1lbnQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybnt0eXBlOlwiQVBJX1NBVkVEXCIsYXBpRWxlbWVudDplLHJlc3BvbnNlOnQsdmVyc2lvbnM6bn19LGVycm9yU2F2aW5nQVBJRWxlbWVudDpmdW5jdGlvbihlLHQpe3JldHVybnt0eXBlOlwiQVBJX1NBVkVfRVJST1JcIixhcGlFbGVtZW50OmUscmVzcG9uc2U6dH19LGZpbmlzaEFsaWFzaW5nQVBJRWxlbWVudDpmdW5jdGlvbihlLHQsbil7cmV0dXJue3R5cGU6XCJBUElfQUxJQVNFRFwiLGFwaUVsZW1lbnQ6ZSxhbGlhc2VkOnQscmVzcG9uc2U6bn19fTtmdW5jdGlvbiByZWtleUFQSUVsZW1lbnRzQnlOYW1lKGUpe3JldHVybiBfbG9kYXNoLmRlZmF1bHQuZnJvbVBhaXJzKGUubWFwKGZ1bmN0aW9uKGUpe3JldHVybltfVXRpbGl0eS5kZWZhdWx0LmdldEZ1bGxOYW1lKGUpLGVdfSkpfWZ1bmN0aW9uIGdldEtleShlKXtyZXR1cm5bZS51c2VybmFtZSxlLnJlcG9zaXRvcnksZS5uYW1lLGUudmVyc2lvbl0uam9pbihcIi9cIil9ZnVuY3Rpb24gZ2V0TmFtZUtleShlKXtyZXR1cm5bZS51c2VybmFtZSxlLnJlcG9zaXRvcnksZS5uYW1lXS5qb2luKFwiL1wiKX1mdW5jdGlvbiBSZWR1Y2VyKGUsdCl7aWYoZXx8KGU9e2xvYWRpbmc6ITEsbG9hZGVkOiExLGFwaUVsZW1lbnRzOnt9LGFwaUVsZW1lbnRzTG9hZGVkQXQ6bnVsbCxlcnJvcjpudWxsLGZ1bGxBUElMb2FkaW5nOnt9LGZ1bGxBUElMb2FkZWQ6e30sZnVsbEFQSTp7fSxmdWxsQVBJQWxpYXNlZDp7fSxmdWxsQVBJVmVyc2lvbnM6e30sZnVsbEFQSUxvYWRSZXNwb25zZTp7fSxmdWxsQVBJU2F2aW5nOnt9LGZ1bGxBUElTYXZlUmVzcG9uc2U6e319KSx0KXN3aXRjaCh0LnR5cGUpe2Nhc2VcIkFQSVNfVVBEQVRFX1NUQVJUXCI6cmV0dXJuIF9vYmplY3RTcHJlYWQoe30sZSx7bG9hZGluZzohMH0pO2Nhc2VcIkFQSVNfVVBEQVRFXCI6cmV0dXJuIF9vYmplY3RTcHJlYWQoe30sZSx7bG9hZGluZzohMSxsb2FkZWQ6ITAsYXBpRWxlbWVudHM6cmVrZXlBUElFbGVtZW50c0J5TmFtZSh0LmFwaUVsZW1lbnRzKSxhcGlFbGVtZW50c0xvYWRlZEF0OigwLF9tb21lbnQuZGVmYXVsdCkoKX0pO2Nhc2VcIkFQSV9BRERcIjp2YXIgbj1lLmFwaUVsZW1lbnRzLHI9dC5hcGlFbGVtZW50O3JldHVybiBfb2JqZWN0U3ByZWFkKHt9LGUse2FwaUVsZW1lbnRzOk9iamVjdC5hc3NpZ24obixfZGVmaW5lUHJvcGVydHkoe30sX1V0aWxpdHkuZGVmYXVsdC5nZXRGdWxsTmFtZShyKSxyKSl9KTtjYXNlXCJBUElfUkVNT1ZFXCI6cmV0dXJuIF9vYmplY3RTcHJlYWQoe30sZSx7YXBpRWxlbWVudHM6X2xvZGFzaC5kZWZhdWx0Lm9taXQoZS5hcGlFbGVtZW50cyxfVXRpbGl0eS5kZWZhdWx0LmdldEZ1bGxOYW1lKHQuYXBpRWxlbWVudCkpfSk7Y2FzZVwiQVBJX0xPQURJTkdcIjpyZXR1cm4gX29iamVjdFNwcmVhZCh7fSxlLHtmdWxsQVBJTG9hZGluZzpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSUxvYWRpbmcsX2RlZmluZVByb3BlcnR5KHt9LGdldEtleSh0Lm5hbWVWZXJzaW9uKSwhMCkpfSk7Y2FzZVwiQVBJX0xPQURFRFwiOnZhciBsPWdldEtleSh0Lm5hbWVWZXJzaW9uKSxvPWdldE5hbWVLZXkodC5uYW1lVmVyc2lvbiksYT10LmFwaUVsZW1lbnQ7cmV0dXJuIGEudHlwZSYmXCJub3JtYWxcIiE9PWEudHlwZXx8KGE9X1V0aWxpdHkuZGVmYXVsdC51cGdyYWRlQVBJRWxlbWVudChhKSksX29iamVjdFNwcmVhZCh7fSxlLHtmdWxsQVBJTG9hZGluZzpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSUxvYWRpbmcsX2RlZmluZVByb3BlcnR5KHt9LGwsITEpKSxmdWxsQVBJTG9hZGVkOl9vYmplY3RTcHJlYWQoe30sZS5mdWxsQVBJTG9hZGVkLF9kZWZpbmVQcm9wZXJ0eSh7fSxsLCEwKSksZnVsbEFQSTpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSSxfZGVmaW5lUHJvcGVydHkoe30sbCxhKSksZnVsbEFQSUFsaWFzZWQ6X29iamVjdFNwcmVhZCh7fSxlLmZ1bGxBUElBbGlhc2VkLF9kZWZpbmVQcm9wZXJ0eSh7fSxvLHQuYWxpYXNlZCkpLGZ1bGxBUElWZXJzaW9uczpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSVZlcnNpb25zLF9kZWZpbmVQcm9wZXJ0eSh7fSxvLF9sb2Rhc2guZGVmYXVsdC5tYXAodC52ZXJzaW9ucyxcInZlcnNpb25cIikpKX0pO2Nhc2VcIkFQSV9FUlJPUlwiOnZhciBpPWdldEtleSh0Lm5hbWVWZXJzaW9uKTtyZXR1cm4gX29iamVjdFNwcmVhZCh7fSxlLHtmdWxsQVBJTG9hZGluZzpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSUxvYWRpbmcsX2RlZmluZVByb3BlcnR5KHt9LGksITEpKSxmdWxsQVBJTG9hZGVkOl9vYmplY3RTcHJlYWQoe30sZS5mdWxsQVBJTG9hZGVkLF9kZWZpbmVQcm9wZXJ0eSh7fSxpLCEwKSksZnVsbEFQSUxvYWRSZXNwb25zZTpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSSxfZGVmaW5lUHJvcGVydHkoe30saSx0LnJlc3BvbnNlKSl9KTtjYXNlXCJBUElfU0FWSU5HXCI6dmFyIHM9Z2V0S2V5KHQuYXBpRWxlbWVudCk7cmV0dXJuIF9vYmplY3RTcHJlYWQoe30sZSx7ZnVsbEFQSVNhdmluZzpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSVNhdmluZyxfZGVmaW5lUHJvcGVydHkoe30scywhMCkpLGZ1bGxBUElTYXZlUmVzcG9uc2U6X29iamVjdFNwcmVhZCh7fSxlLmZ1bGxBUElTYXZlUmVzcG9uc2UsX2RlZmluZVByb3BlcnR5KHt9LHMsbnVsbCkpfSk7Y2FzZVwiQVBJX1NBVkVEXCI6dmFyIHU9Z2V0S2V5KHQuYXBpRWxlbWVudCksZD1nZXROYW1lS2V5KHQuYXBpRWxlbWVudCk7cmV0dXJuIF9vYmplY3RTcHJlYWQoe30sZSx7ZnVsbEFQSVNhdmluZzpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSVNhdmluZyxfZGVmaW5lUHJvcGVydHkoe30sdSwhMSkpLGZ1bGxBUEk6X29iamVjdFNwcmVhZCh7fSxlLmZ1bGxBUEksX2RlZmluZVByb3BlcnR5KHt9LHUsdC5hcGlFbGVtZW50KSksZnVsbEFQSUxvYWRlZDpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSUxvYWRlZCxfZGVmaW5lUHJvcGVydHkoe30sdSwhMCkpLGZ1bGxBUElWZXJzaW9uczpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSVZlcnNpb25zLF9kZWZpbmVQcm9wZXJ0eSh7fSxkLHQudmVyc2lvbnMpKSxmdWxsQVBJU2F2ZVJlc3BvbnNlOl9vYmplY3RTcHJlYWQoe30sZS5mdWxsQVBJU2F2ZVJlc3BvbnNlLF9kZWZpbmVQcm9wZXJ0eSh7fSx1LHQucmVzcG9uc2UpKX0pO2Nhc2VcIkFQSV9BTElBU0VEXCI6dmFyIEEsZj1nZXRLZXkodC5hcGlFbGVtZW50KSxQPWdldE5hbWVLZXkodC5hcGlFbGVtZW50KSxwPWdldEtleSh0LmFsaWFzZWQpLGM9Z2V0TmFtZUtleSh0LmFsaWFzZWQpO3JldHVybiBfb2JqZWN0U3ByZWFkKHt9LGUse2Z1bGxBUElTYXZpbmc6X29iamVjdFNwcmVhZCh7fSxlLmZ1bGxBUElTYXZpbmcsX2RlZmluZVByb3BlcnR5KHt9LGYsITEpKSxmdWxsQVBJOl9vYmplY3RTcHJlYWQoe30sZS5mdWxsQVBJLF9kZWZpbmVQcm9wZXJ0eSh7fSxwLHQuYXBpRWxlbWVudCkpLGZ1bGxBUElBbGlhc2VkOl9vYmplY3RTcHJlYWQoe30sZS5mdWxsQVBJQWxpYXNlZCwoQT17fSxfZGVmaW5lUHJvcGVydHkoQSxQLHQuYWxpYXNlZCksX2RlZmluZVByb3BlcnR5KEEsYyx0LmFsaWFzZWQpLEEpKSxmdWxsQVBJTG9hZGVkOl9vYmplY3RTcHJlYWQoe30sZS5mdWxsQVBJTG9hZGVkLF9kZWZpbmVQcm9wZXJ0eSh7fSxwLCEwKSksZnVsbEFQSVZlcnNpb25zOl9vYmplY3RTcHJlYWQoe30sZS5mdWxsQVBJVmVyc2lvbnMsX2RlZmluZVByb3BlcnR5KHt9LHAsdC52ZXJzaW9ucykpLGZ1bGxBUElTYXZlUmVzcG9uc2U6X29iamVjdFNwcmVhZCh7fSxlLmZ1bGxBUElTYXZlUmVzcG9uc2UsX2RlZmluZVByb3BlcnR5KHt9LGYsdC5yZXNwb25zZSkpfSk7Y2FzZVwiQVBJX1NBVkVfRVJST1JcIjp2YXIgST1nZXRLZXkodC5hcGlFbGVtZW50KTtyZXR1cm4gX29iamVjdFNwcmVhZCh7fSxlLHtmdWxsQVBJU2F2aW5nOl9vYmplY3RTcHJlYWQoe30sZS5mdWxsQVBJU2F2aW5nLF9kZWZpbmVQcm9wZXJ0eSh7fSxJLCExKSksZnVsbEFQSVNhdmVSZXNwb25zZTpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSVNhdmVSZXNwb25zZSxfZGVmaW5lUHJvcGVydHkoe30sSSx0LnJlc3BvbnNlKSl9KX1yZXR1cm4gZX1leHBvcnRzLkFjdGlvbnM9QWN0aW9uczt2YXIgcmVmcmVzaEFQSUVsZW1lbnRzPV9sb2Rhc2guZGVmYXVsdC5tZW1vaXplKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe2UoQWN0aW9ucy5zdGFydFVwZGF0ZUFQSUVsZW1lbnRzKCkpLF9BUElTdG9yYWdlLmRlZmF1bHQuZ2V0QWxsKCkudGhlbihmdW5jdGlvbih0KXtlKEFjdGlvbnMudXBkYXRlQVBJRWxlbWVudHModCkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Y29uc29sZS5lcnJvcihcIkVycm9yIHdoZW4gdHJ5aW5nIHRvIGdldCBBUEkgZWxlbWVudHNcIiksY29uc29sZS5lcnJvcihlKX0pfX0pLGxvYWRBUElFbGVtZW50PV9sb2Rhc2guZGVmYXVsdC5tZW1vaXplKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LG4scixsKXt2YXIgbz17dXNlcm5hbWU6dCxyZXBvc2l0b3J5Om4sbmFtZTpyLHZlcnNpb246bH07cmV0dXJuIGUoQWN0aW9ucy5zdGFydExvYWRpbmdBUElFbGVtZW50KG8pKSxfQVBJU3RvcmFnZS5kZWZhdWx0LmdldCh0LG4scixsLCEwKS50aGVuKGZ1bmN0aW9uKHQpe3Quc3VjY2Vzcz9lKEFjdGlvbnMuZmluaXNoTG9hZGluZ0FQSUVsZW1lbnQobyx0LmRhdGEsdC5hbGlhc2VkLHQudmVyc2lvbnMpKTplKEFjdGlvbnMuZXJyb3JMb2FkaW5nQVBJRWxlbWVudChvLHQpKX0pLmNhdGNoKGZ1bmN0aW9uKHQpe2UoQWN0aW9ucy5lcnJvckxvYWRpbmdBUElFbGVtZW50KG8se3N1Y2Nlc3M6ITEsbWVzc2FnZXM6W1wiQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCJdLGVycm9yOnR9KSl9KX19KSxzYXZlQVBJRWxlbWVudD1fbG9kYXNoLmRlZmF1bHQubWVtb2l6ZShmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuLHIsbCl7dmFyIG8sYT0hbCYmbiYmKG4udXNlcm5hbWUhPT10LnVzZXJuYW1lfHxuLnJlcG9zaXRvcnkhPT10LnJlcG9zaXRvcnl8fG4ubmFtZSE9PXQubmFtZSk7cmV0dXJuIG89bj9sP19BUElTdG9yYWdlLmRlZmF1bHQucmVuYW1lKG4ucmVwb3NpdG9yeSxuLm5hbWUsdCk6X0FQSVN0b3JhZ2UuZGVmYXVsdC5zZXRXaXRoRGlmZihuLHQpOl9BUElTdG9yYWdlLmRlZmF1bHQuc2V0KHQpLGUoQWN0aW9ucy5zdGFydFNhdmluZ0FQSUVsZW1lbnQodCkpLG8udGhlbihmdW5jdGlvbihvKXtyZXR1cm4gby5zdWNjZXNzPyghYSYmcnx8KHI9W10pLHI9X1V0aWxpdHkuZGVmYXVsdC5zb3J0VmVyc2lvbnMoX2xvZGFzaC5kZWZhdWx0LnVuaXEoci5jb25jYXQoW3QudmVyc2lvbl0pKSxcIkRFU0NcIiksZShBY3Rpb25zLmZpbmlzaFNhdmluZ0FQSUVsZW1lbnQodCxvLHIpKSxsJiZlKEFjdGlvbnMucmVtb3ZlQVBJRWxlbWVudChuKSksZShBY3Rpb25zLmFkZEFQSUVsZW1lbnQodCkpLHQpOihlKEFjdGlvbnMuZXJyb3JTYXZpbmdBUElFbGVtZW50KHQsbykpLG51bGwpfSl9fSksYWxpYXNBUElFbGVtZW50PV9sb2Rhc2guZGVmYXVsdC5tZW1vaXplKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LG4pe3JldHVybiBlKEFjdGlvbnMuc3RhcnRTYXZpbmdBUElFbGVtZW50KHQpKSxfQVBJU3RvcmFnZS5kZWZhdWx0LmFsaWFzKHQsbikudGhlbihmdW5jdGlvbihyKXtyZXR1cm4gci5zdWNjZXNzP2UoQWN0aW9ucy5maW5pc2hBbGlhc2luZ0FQSUVsZW1lbnQodCxuLHIpKTplKEFjdGlvbnMuZXJyb3JTYXZpbmdBUElFbGVtZW50KHQscikpLHR9KX19KSxhZGRBUElFbGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtlKEFjdGlvbnMuYWRkQVBJRWxlbWVudCh0KSl9fSxyZW1vdmVBUElFbGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtlKEFjdGlvbnMucmVtb3ZlQVBJRWxlbWVudCh0KSl9fTtmdW5jdGlvbiBjb25uZWN0KGUpe3JldHVybigwLF9yZWFjdFJlZHV4LmNvbm5lY3QpKGZ1bmN0aW9uKGUpe3ZhciB0PWUuYXBpRWxlbWVudHM7cmV0dXJue2FwaUVsZW1lbnRzTG9hZGVkOnQubG9hZGVkLGFwaUVsZW1lbnRzTG9hZGVkQXQ6dC5hcGlFbGVtZW50c0xvYWRlZEF0LGFwaUVsZW1lbnRzTG9hZGluZzp0LmxvYWRpbmcsYXBpRWxlbWVudHM6dC5hcGlFbGVtZW50cyxmdWxsQVBJTG9hZGluZzp0LmZ1bGxBUElMb2FkaW5nLGZ1bGxBUElMb2FkZWQ6dC5mdWxsQVBJTG9hZGVkLGZ1bGxBUEk6dC5mdWxsQVBJLGZ1bGxBUElBbGlhc2VkOnQuZnVsbEFQSUFsaWFzZWQsZnVsbEFQSVZlcnNpb25zOnQuZnVsbEFQSVZlcnNpb25zLGZ1bGxBUElMb2FkUmVzcG9uc2U6dC5mdWxsQVBJTG9hZFJlc3BvbnNlLGZ1bGxBUElTYXZpbmc6dC5mdWxsQVBJU2F2aW5nLGZ1bGxBUElTYXZlUmVzcG9uc2U6dC5mdWxsQVBJU2F2ZVJlc3BvbnNlfX0sZnVuY3Rpb24oZSl7cmV0dXJue3JlZnJlc2hBUElFbGVtZW50czpyZWZyZXNoQVBJRWxlbWVudHMoZSksYWRkQVBJRWxlbWVudDphZGRBUElFbGVtZW50KGUpLHJlbW92ZUFQSUVsZW1lbnQ6cmVtb3ZlQVBJRWxlbWVudChlKSxsb2FkQVBJRWxlbWVudDpsb2FkQVBJRWxlbWVudChlKSxzYXZlQVBJRWxlbWVudDpzYXZlQVBJRWxlbWVudChlKSxhbGlhc0FQSUVsZW1lbnQ6YWxpYXNBUElFbGVtZW50KGUpfX0sbnVsbCxlKX12YXIgX2RlZmF1bHQ9e0FjdGlvbnM6QWN0aW9ucyxSZWR1Y2VyOlJlZHVjZXIsY29ubmVjdDpjb25uZWN0LGdldEtleTpnZXRLZXksZ2V0TmFtZUtleTpnZXROYW1lS2V5fTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5SZWR1Y2VyPVJlZHVjZXIsZXhwb3J0cy5sb2dpbj1sb2dpbixleHBvcnRzLmxvZ291dD1sb2dvdXQsZXhwb3J0cy5jb25uZWN0PWNvbm5lY3QsZXhwb3J0cy5kZWZhdWx0PWV4cG9ydHMuQWN0aW9ucz12b2lkIDA7dmFyIF9yZWFjdFJlZHV4PXJlcXVpcmUoXCJyZWFjdC1yZWR1eFwiKSxfbG9kYXNoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaFwiKSksX1R1dG9yaWFsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vVHV0b3JpYWxcIikpLF9BdXRoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL0F1dGhcIikpLF9Ub2tlbj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9Ub2tlblwiKSksX0FQSVN0b3JhZ2U9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vQVBJU3RvcmFnZVwiKSksX0Nocm9tZT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9DaHJvbWVcIikpLF9Qcm94eT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9Qcm94eVwiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gb3duS2V5cyhlLHQpe3ZhciBvPU9iamVjdC5rZXlzKGUpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7dCYmKHI9ci5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KS5lbnVtZXJhYmxlfSkpLG8ucHVzaC5hcHBseShvLHIpfXJldHVybiBvfWZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIG89bnVsbCE9YXJndW1lbnRzW3RdP2FyZ3VtZW50c1t0XTp7fTt0JTI/b3duS2V5cyhPYmplY3QobyksITApLmZvckVhY2goZnVuY3Rpb24odCl7X2RlZmluZVByb3BlcnR5KGUsdCxvW3RdKX0pOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobykpOm93bktleXMoT2JqZWN0KG8pKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLHQpKX0pfXJldHVybiBlfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShlLHQsbyl7cmV0dXJuIHQgaW4gZT9PYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTpvLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVt0XT1vLGV9dmFyIHVzZVRva2VuPV9DaHJvbWUuZGVmYXVsdC5pc0Nocm9tZUV4dGVuc2lvbigpLEFjdGlvbnM9e3N0YXJ0TG9naW46ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpcIlNUQVJUX0xPR0lOXCJ9fSxmaW5pc2hMb2dpbjpmdW5jdGlvbihlKXtyZXR1cm57dHlwZTpcIkZJTklTSF9MT0dJTlwiLGRhdGE6ZX19LHVwZGF0ZUxvZ2luU3RhdGU6ZnVuY3Rpb24oZSl7cmV0dXJue3R5cGU6XCJVUERBVEVfTE9HSU5fU1RBVEVcIixkYXRhOmV9fSx1cGRhdGVQcm94eUFsbG9jYXRpb246ZnVuY3Rpb24oZSl7cmV0dXJue3R5cGU6XCJVUERBVEVfUFJPWFlfQUxMT0NBVElPTlwiLGRhdGE6ZX19LHN0YXJ0TG9nb3V0OmZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6XCJTVEFSVF9MT0dPVVRcIn19LGZpbmlzaExvZ291dDpmdW5jdGlvbigpe3JldHVybnt0eXBlOlwiRklOSVNIX0xPR09VVFwifX0sc3RhcnRSZWdpc3RlcjpmdW5jdGlvbigpe3JldHVybnt0eXBlOlwiU1RBUlRfUkVHSVNURVJcIn19LGZpbmlzaFJlZ2lzdGVyOmZ1bmN0aW9uKGUpe3JldHVybnt0eXBlOlwiRklOSVNIX1JFR0lTVEVSXCIsZGF0YTplfX0sc2V0RXJyb3I6ZnVuY3Rpb24oZSl7cmV0dXJue3R5cGU6XCJTRVRfRVJST1JcIixlcnJvcjplfX0sc2V0VHV0b3JpYWxDb21wbGV0ZWQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm57dHlwZTpcIlNFVF9UVVRPUklBTF9DT01QTEVURURcIix0dXRvcmlhbDplLGNvbXBsZXRlZDp0fX19O2Z1bmN0aW9uIFJlZHVjZXIoZSx0KXtzd2l0Y2goZXx8KGU9e2xvYWRpbmc6ITEsbG9hZGVkOiExLHJlc3BvbnNlOntzdWNjZXNzOiExLGxvZ2dlZEluOiExLHVzZXJuYW1lOm51bGwsYWN0aXZhdGVkOm51bGwsaXNBZG1pbjpudWxsLHJvbGU6XCJOb3JtYWxcIixuYW1lOm51bGwsZW1haWw6bnVsbCxjb21wYW55Om51bGwsdHV0b3JpYWxTdGVwOm51bGwseXVrYXRhVHV0b3JpYWxDb21wbGV0ZWQ6ITEsZXh0cmFjdG9yVHV0b3JpYWxDb21wbGV0ZWQ6ITEsZmVhdHVyZUZsYWdzOnt9LHByb3h5QWxsb2NhdGlvbjpudWxsLHRva2VuOm51bGwscmVxdWVzdExpbWl0Om51bGwsb3JnYW5pemF0aW9uOm51bGx9LGVycm9yOm51bGx9KSx0LnR5cGUpe2Nhc2VcIlNUQVJUX0xPR0lOXCI6Y2FzZVwiU1RBUlRfUkVHSVNURVJcIjpjYXNlXCJTVEFSVF9MT0dPVVRcIjpyZXR1cm4gX29iamVjdFNwcmVhZCh7fSxlLHtsb2FkaW5nOiEwLGVycm9yOm51bGx9KTtjYXNlXCJGSU5JU0hfTE9HSU5cIjpjYXNlXCJGSU5JU0hfUkVHSVNURVJcIjpjYXNlXCJVUERBVEVfTE9HSU5fU1RBVEVcIjppZih1c2VUb2tlbiYmdC5kYXRhLmxvZ2dlZEluKXt2YXIgbz10LmRhdGEudG9rZW47X0FQSVN0b3JhZ2UuZGVmYXVsdC51c2VUb2tlbihvKSxfVG9rZW4uZGVmYXVsdC5zZXQobyl9cmV0dXJuIF9vYmplY3RTcHJlYWQoe30sZSx7bG9hZGluZzohMSxsb2FkZWQ6ITAscmVzcG9uc2U6dC5kYXRhfSk7Y2FzZVwiU0VUX1RVVE9SSUFMX0NPTVBMRVRFRFwiOnZhciByPVwieXVrYXRhXCI9PT10LnR1dG9yaWFsP1wieXVrYXRhVHV0b3JpYWxDb21wbGV0ZWRcIjpcImV4dHJhY3RvclR1dG9yaWFsQ29tcGxldGVkXCI7cmV0dXJuIF9vYmplY3RTcHJlYWQoe30sZSx7cmVzcG9uc2U6X29iamVjdFNwcmVhZCh7fSxlLnJlc3BvbnNlLF9kZWZpbmVQcm9wZXJ0eSh7fSxyLHQuY29tcGxldGVkKSl9KTtjYXNlXCJVUERBVEVfUFJPWFlfQUxMT0NBVElPTlwiOnJldHVybiBfb2JqZWN0U3ByZWFkKHt9LGUse2xvYWRpbmc6ITEsbG9hZGVkOiEwLHJlc3BvbnNlOl9vYmplY3RTcHJlYWQoe30sZS5yZXNwb25zZSx7cHJveHlBbGxvY2F0aW9uOnQuZGF0YX0pfSk7Y2FzZVwiU0VUX0VSUk9SXCI6cmV0dXJuIF9vYmplY3RTcHJlYWQoe30sZSx7bG9hZGluZzohMSxlcnJvcjp0LmVycm9yfSk7Y2FzZVwiRklOSVNIX0xPR09VVFwiOnJldHVybiB1c2VUb2tlbiYmKF9BUElTdG9yYWdlLmRlZmF1bHQudXNlVG9rZW4obnVsbCksX1Rva2VuLmRlZmF1bHQuc2V0KG51bGwpKSxPYmplY3QuYXNzaWduKHtsb2FkaW5nOiExLGxvYWRlZDohMSxyZXNwb25zZTp7c3VjY2VzczohMSxsb2dnZWRJbjohMSx1c2VybmFtZTpudWxsLGFjdGl2YXRlZDpudWxsLGlzQWRtaW46bnVsbCxyb2xlOlwiTm9ybWFsXCIsbmFtZTpudWxsLGVtYWlsOm51bGwsY29tcGFueTpudWxsLHR1dG9yaWFsU3RlcDpudWxsLHl1a2F0YVR1dG9yaWFsQ29tcGxldGVkOiExLGV4dHJhY3RvclR1dG9yaWFsQ29tcGxldGVkOiExLGZlYXR1cmVGbGFnczp7fSxwcm94eUFsbG9jYXRpb246bnVsbCx0b2tlbjpudWxsLHJlcXVlc3RMaW1pdDpudWxsLG9yZ2FuaXphdGlvbjpudWxsfSxlcnJvcjpudWxsfSx7bG9hZGVkOiEwfSl9cmV0dXJuIGV9ZnVuY3Rpb24gbG9naW4oZSx0LG8pe3JldHVybiBlKEFjdGlvbnMuc3RhcnRMb2dpbigpKSxfQXV0aC5kZWZhdWx0LmxvZ2luKHQsbykudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdC5zdWNjZXNzPyhlKEFjdGlvbnMuZmluaXNoTG9naW4odCkpLGUoX1R1dG9yaWFsLmRlZmF1bHQuQWN0aW9ucy51cGRhdGVMb2NhbFR1dG9yaWFsU3RlcCh0LnR1dG9yaWFsU3RlcCkpKTplKEFjdGlvbnMuc2V0RXJyb3IodCkpLG1hcFJlc3BvbnNlVG9Qcm9wcyh0KX0pLmNhdGNoKGZ1bmN0aW9uKHQpe2NvbnNvbGUuZXJyb3IodCksZShBY3Rpb25zLnNldEVycm9yKHQpKX0pfWZ1bmN0aW9uIGxvZ291dChlKXtlKEFjdGlvbnMuc3RhcnRMb2dvdXQoKSk7dmFyIHQ9UHJvbWlzZS5yZXNvbHZlKG51bGwpO3JldHVybiB1c2VUb2tlbiYmKHQ9X1Rva2VuLmRlZmF1bHQuZ2V0KCkpLHQudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gX0F1dGguZGVmYXVsdC5sb2dvdXQoZSl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LnN1Y2Nlc3MmJmUoQWN0aW9ucy5maW5pc2hMb2dvdXQoKSksdH0pLmNhdGNoKGZ1bmN0aW9uKHQpe2NvbnNvbGUuZXJyb3IodCksZShBY3Rpb25zLnNldEVycm9yKHQpKX0pfWZ1bmN0aW9uIHJlZ2lzdGVyKGUsdCxvKXtyZXR1cm4gZShBY3Rpb25zLnN0YXJ0UmVnaXN0ZXIoKSksX0F1dGguZGVmYXVsdC5yZWdpc3Rlcih0LG8pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQuc3VjY2Vzcz8oZShBY3Rpb25zLmZpbmlzaFJlZ2lzdGVyKHQpKSxlKF9UdXRvcmlhbC5kZWZhdWx0LkFjdGlvbnMudXBkYXRlTG9jYWxUdXRvcmlhbFN0ZXAodC50dXRvcmlhbFN0ZXApKSk6ZShBY3Rpb25zLnNldEVycm9yKHQpKSxtYXBSZXNwb25zZVRvUHJvcHModCl9KS5jYXRjaChmdW5jdGlvbih0KXtlKEFjdGlvbnMuc2V0RXJyb3IodCkpfSl9ZnVuY3Rpb24gc2V0VHV0b3JpYWxDb21wbGV0ZWQoZSx0LG8pe3JldHVybiBfQXV0aC5kZWZhdWx0LnNldFR1dG9yaWFsQ29tcGxldGVkKHQsbykudGhlbihmdW5jdGlvbihyKXtyLnN1Y2Nlc3MmJmUoQWN0aW9ucy5zZXRUdXRvcmlhbENvbXBsZXRlZCh0LG8pKX0pfWZ1bmN0aW9uIGdldExvZ2luU3RhdGUoZSx0KXtpZih0JiZfbG9kYXNoLmRlZmF1bHQuZ2V0KHQsXCJhdXRoLmxvYWRlZFwiKSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG1hcFJlc3BvbnNlVG9Qcm9wcyh0LmF1dGgucmVzcG9uc2UpKTt2YXIgbz1Qcm9taXNlLnJlc29sdmUobnVsbCk7dXNlVG9rZW4mJihvPV9Ub2tlbi5kZWZhdWx0LmdldCgpKTt2YXIgcj1udWxsO3JldHVybiBvLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHI9ZSxfQXV0aC5kZWZhdWx0LmlzTG9nZ2VkSW4ocil9KS50aGVuKGZ1bmN0aW9uKHQpe2lmKHQuc3VjY2Vzcyl7dmFyIG89cj9PYmplY3QuYXNzaWduKHQse3Rva2VuOnJ9KTp0O2UoQWN0aW9ucy51cGRhdGVMb2dpblN0YXRlKG8pKSxlKF9UdXRvcmlhbC5kZWZhdWx0LkFjdGlvbnMudXBkYXRlTG9jYWxUdXRvcmlhbFN0ZXAodC50dXRvcmlhbFN0ZXApKSx0LmxvZ2dlZEluJiZ1c2VUb2tlbiYmX0FQSVN0b3JhZ2UuZGVmYXVsdC51c2VUb2tlbih0LnRva2VuKX1lbHNlIGUoQWN0aW9ucy5zZXRFcnJvcih0KSk7cmV0dXJuIG1hcFJlc3BvbnNlVG9Qcm9wcyh0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2NvbnNvbGUuZXJyb3IoXCJFcnJvciB3aGVuIHRyeWluZyB0byBnZXQgbG9naW4gc3RhdGVcIiksY29uc29sZS5lcnJvcihlKX0pfWZ1bmN0aW9uIGFsbG9jYXRlUHJveHkoZSl7cmV0dXJuIF9Qcm94eS5kZWZhdWx0LmFsbG9jYXRlKCkudGhlbihmdW5jdGlvbih0KXtpZih0LnN1Y2Nlc3Mpe3ZhciBvPXQucHJveHlBbGxvY2F0aW9uO2UoQWN0aW9ucy51cGRhdGVQcm94eUFsbG9jYXRpb24obykpfXJldHVybiB0fSl9ZnVuY3Rpb24gbWFwUmVzcG9uc2VUb1Byb3BzKGUpe3JldHVybntpc0xvZ2dlZEluOmUubG9nZ2VkSW4sdXNlcm5hbWU6ZS51c2VybmFtZSxpc0FjdGl2YXRlZDplLmFjdGl2YXRlZCxpc0FkbWluOmUuaXNBZG1pbix1c2VyUm9sZTplLnJvbGUsdXNlck5hbWU6ZS5uYW1lLHVzZXJFbWFpbDplLmVtYWlsLHVzZXJDb21wYW55OmUuY29tcGFueSx5dWthdGFUdXRvcmlhbENvbXBsZXRlZDplLnl1a2F0YVR1dG9yaWFsQ29tcGxldGVkLGV4dHJhY3RvclR1dG9yaWFsQ29tcGxldGVkOmUuZXh0cmFjdG9yVHV0b3JpYWxDb21wbGV0ZWQscHJveHlBbGxvY2F0aW9uOmUucHJveHlBbGxvY2F0aW9uLGZlYXR1cmVGbGFnczplLmZlYXR1cmVGbGFnc3x8e30scmVxdWVzdExpbWl0OmUucmVxdWVzdExpbWl0LG9yZ2FuaXphdGlvbjplLm9yZ2FuaXphdGlvbn19ZnVuY3Rpb24gZ2V0T3JGZXRjaExvZ2luU3RhdGUoZSl7dmFyIHQ9ZS5hdXRoU3RhdGVMb2FkZWQsbz1lLmdldExvZ2luU3RhdGU7cmV0dXJuIHQ/UHJvbWlzZS5yZXNvbHZlKGUpOm8oKX1mdW5jdGlvbiBjb25uZWN0KGUpe3JldHVybigwLF9yZWFjdFJlZHV4LmNvbm5lY3QpKGZ1bmN0aW9uKGUpe3ZhciB0PWUuYXV0aDtyZXR1cm4gX29iamVjdFNwcmVhZCh7YXV0aFN0YXRlTG9hZGVkOnQubG9hZGVkLGF1dGhMb2FkaW5nOnQubG9hZGluZyxhdXRoRXJyb3I6dC5lcnJvcn0sbWFwUmVzcG9uc2VUb1Byb3BzKHQucmVzcG9uc2UpKX0sZnVuY3Rpb24oZSl7cmV0dXJue2xvZ2luOmxvZ2luLmJpbmQobnVsbCxlKSxsb2dvdXQ6bG9nb3V0LmJpbmQobnVsbCxlKSxyZWdpc3RlclVzZXI6cmVnaXN0ZXIuYmluZChudWxsLGUpLGdldExvZ2luU3RhdGU6Z2V0TG9naW5TdGF0ZS5iaW5kKG51bGwsZSksYWxsb2NhdGVQcm94eTphbGxvY2F0ZVByb3h5LmJpbmQobnVsbCxlKSxzZXRUdXRvcmlhbENvbXBsZXRlZDpzZXRUdXRvcmlhbENvbXBsZXRlZC5iaW5kKG51bGwsZSl9fSxudWxsLGUpfWV4cG9ydHMuQWN0aW9ucz1BY3Rpb25zO3ZhciBfZGVmYXVsdD17QWN0aW9uczpBY3Rpb25zLFJlZHVjZXI6UmVkdWNlcixjb25uZWN0OmNvbm5lY3QsZ2V0T3JGZXRjaExvZ2luU3RhdGU6Z2V0T3JGZXRjaExvZ2luU3RhdGUsZ2V0TG9naW5TdGF0ZTpnZXRMb2dpblN0YXRlfTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5kZWZhdWx0PXZvaWQgMDt2YXIgX3JlZHV4PXJlcXVpcmUoXCJyZWR1eFwiKSxfQXV0aD1yZXF1aXJlKFwiLi9BdXRoXCIpLF9UdXRvcmlhbD1yZXF1aXJlKFwiLi9UdXRvcmlhbFwiKSxfQVBJRWxlbWVudHM9cmVxdWlyZShcIi4vQVBJRWxlbWVudHNcIiksTWFpblJlZHVjZXI9KDAsX3JlZHV4LmNvbWJpbmVSZWR1Y2Vycykoe3R1dG9yaWFsU3RlcDpfVHV0b3JpYWwuUmVkdWNlcixhdXRoOl9BdXRoLlJlZHVjZXIsYXBpRWxlbWVudHM6X0FQSUVsZW1lbnRzLlJlZHVjZXJ9KSxfZGVmYXVsdD1NYWluUmVkdWNlcjtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5SZWR1Y2VyPVJlZHVjZXIsZXhwb3J0cy5jb25uZWN0VHV0b3JpYWxTdGVwPWNvbm5lY3RUdXRvcmlhbFN0ZXAsZXhwb3J0cy5jb25uZWN0TG9jYWxUdXRvcmlhbFN0ZXA9Y29ubmVjdExvY2FsVHV0b3JpYWxTdGVwLGV4cG9ydHMuZGVmYXVsdD1leHBvcnRzLkFjdGlvbnM9dm9pZCAwO3ZhciBfcmVhY3RSZWR1eD1yZXF1aXJlKFwicmVhY3QtcmVkdXhcIiksX1R1dG9yaWFsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL1R1dG9yaWFsXCIpKSxfQXV0aD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9BdXRoXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX12YXIgQWN0aW9ucz17dXBkYXRlTG9jYWxUdXRvcmlhbFN0ZXA6ZnVuY3Rpb24odCl7cmV0dXJue3R5cGU6XCJVUERBVEVfTE9DQUxfVFVUT1JJQUxfU1RFUFwiLHN0ZXA6dH19LGFkdmFuY2VUdXRvcmlhbFN0ZXA6ZnVuY3Rpb24odCl7cmV0dXJue3R5cGU6XCJBRFZBTkNFX1RVVE9SSUFMX1NURVBcIixjdXJTdGVwOnR9fX07ZnVuY3Rpb24gUmVkdWNlcih0LGUpe2lmKHZvaWQgMD09PXQpcmV0dXJuIG51bGw7aWYoXCJBRFZBTkNFX1RVVE9SSUFMX1NURVBcIj09PWUudHlwZSl7dmFyIHI9dCx1PV9UdXRvcmlhbC5kZWZhdWx0LnN0ZXBzLmluZGV4T2Yociksbj1lLmN1clN0ZXAsbz1fVHV0b3JpYWwuZGVmYXVsdC5zdGVwcy5pbmRleE9mKG4pO2lmKC0xPT09byl0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBmaW5kIHN0ZXAgd2l0aCBuYW1lIFwiLmNvbmNhdChuKSk7dmFyIGE9TWF0aC5tYXgodSxvKzEpO2E+PV9UdXRvcmlhbC5kZWZhdWx0LnN0ZXBzLmxlbmd0aCYmKGE9X1R1dG9yaWFsLmRlZmF1bHQuc3RlcHMubGVuZ3RoLTEpO3ZhciBjPV9UdXRvcmlhbC5kZWZhdWx0LnN0ZXBzW2FdO3JldHVybiBjb25zb2xlLmxvZyhcIkFkdmFuY2luZyB0byBcIi5jb25jYXQoYykpLF9BdXRoLmRlZmF1bHQuc2V0VHV0b3JpYWxTdGVwKGMpLGN9cmV0dXJuXCJVUERBVEVfTE9DQUxfVFVUT1JJQUxfU1RFUFwiPT09ZS50eXBlP2Uuc3RlcDp0fWZ1bmN0aW9uIGNvbm5lY3RUdXRvcmlhbFN0ZXAodCl7cmV0dXJuKDAsX3JlYWN0UmVkdXguY29ubmVjdCkoZnVuY3Rpb24odCl7cmV0dXJue3R1dG9yaWFsU3RlcDp0LnR1dG9yaWFsU3RlcH19LGZ1bmN0aW9uKHQpe3JldHVybnthZHZhbmNlVHV0b3JpYWxTdGVwOmZ1bmN0aW9uKGUpe3QoQWN0aW9ucy5hZHZhbmNlVHV0b3JpYWxTdGVwKGUpKX19fSxudWxsLHQpfWZ1bmN0aW9uIGNvbm5lY3RMb2NhbFR1dG9yaWFsU3RlcCh0KXtyZXR1cm4oMCxfcmVhY3RSZWR1eC5jb25uZWN0KShudWxsLGZ1bmN0aW9uKHQpe3JldHVybnt1cGRhdGVMb2NhbFR1dG9yaWFsU3RlcDpmdW5jdGlvbihlKXt0KEFjdGlvbnMudXBkYXRlTG9jYWxUdXRvcmlhbFN0ZXAoZSkpfX19LG51bGwsdCl9ZXhwb3J0cy5BY3Rpb25zPUFjdGlvbnM7dmFyIF9kZWZhdWx0PXtBY3Rpb25zOkFjdGlvbnMsUmVkdWNlcjpSZWR1Y2VyLGNvbm5lY3RUdXRvcmlhbFN0ZXA6Y29ubmVjdFR1dG9yaWFsU3RlcCxjb25uZWN0TG9jYWxUdXRvcmlhbFN0ZXA6Y29ubmVjdExvY2FsVHV0b3JpYWxTdGVwfTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5kZWZhdWx0PXZvaWQgMDt2YXIgX3JlYWN0PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKSxfbG9kYXNoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaFwiKSksX092ZXJsYXlUcmlnZ2VyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0LWJvb3RzdHJhcC9saWIvT3ZlcmxheVRyaWdnZXJcIikpLF9Ub29sdGlwPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0LWJvb3RzdHJhcC9saWIvVG9vbHRpcFwiKSksX0Ryb3Bkb3duU2VsZWN0PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vRHJvcGRvd25TZWxlY3RcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9leHRlbmRzKCl7cmV0dXJuKF9leHRlbmRzPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciByPWFyZ3VtZW50c1t0XTtmb3IodmFyIG8gaW4gcilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixvKSYmKGVbb109cltvXSl9cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG8mJihvLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLmtleSxvKX19ZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsdCxyKXtyZXR1cm4gdCYmX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsdCksciYmX2RlZmluZVByb3BlcnRpZXMoZSxyKSxlfWZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKGUsdCl7cmV0dXJuIXR8fFwib2JqZWN0XCIhPT1fdHlwZW9mKHQpJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0P19hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSk6dH1mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpe2lmKHZvaWQgMD09PWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiBlfWZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihlKXtyZXR1cm4oX2dldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9KShlKX1mdW5jdGlvbiBfaW5oZXJpdHMoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJl9zZXRQcm90b3R5cGVPZihlLHQpfWZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihlLHQpe3JldHVybihfc2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlLHQpe3JldHVybiBlLl9fcHJvdG9fXz10LGV9KShlLHQpfXZhciBBUElFbGVtZW50U2VsZWN0PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgZSxyO19jbGFzc0NhbGxDaGVjayh0aGlzLHQpO2Zvcih2YXIgbz1hcmd1bWVudHMubGVuZ3RoLG49bmV3IEFycmF5KG8pLGE9MDthPG87YSsrKW5bYV09YXJndW1lbnRzW2FdO3JldHVybihyPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsKGU9X2dldFByb3RvdHlwZU9mKHQpKS5jYWxsLmFwcGx5KGUsW3RoaXNdLmNvbmNhdChuKSkpKS5wcm9wcz12b2lkIDAscn1yZXR1cm4gX2luaGVyaXRzKHQsX3JlYWN0LmRlZmF1bHQuUHVyZUNvbXBvbmVudCksX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucHJvcHMsdD1lLmFwaUVsZW1lbnRzLHI9ZS51c2VybmFtZSxvPXQuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFyfHxlLnVzZXJuYW1lPT09cn0pLG49dC5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIHImJmUudXNlcm5hbWUhPT1yfSksYT1vLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lLnVzZXJuYW1lLHI9ZS5yZXBvc2l0b3J5LG89ZS5uYW1lO3JldHVybnt2YWx1ZTp7dXNlcm5hbWU6dCxyZXBvc2l0b3J5OnIsbmFtZTpvfSxsYWJlbDpcIlwiLmNvbmNhdCh0LFwiL1wiKS5jb25jYXQocixcIi9cIikuY29uY2F0KG8pfX0pLGk9bi5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZS51c2VybmFtZSxyPWUucmVwb3NpdG9yeSxvPWUubmFtZTtyZXR1cm57dmFsdWU6e3VzZXJuYW1lOnQscmVwb3NpdG9yeTpyLG5hbWU6b30sdGV4dExhYmVsOlwiXCIuY29uY2F0KHQsXCIvXCIpLmNvbmNhdChyLFwiL1wiKS5jb25jYXQobyksbGFiZWw6X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInNwYW5cIixudWxsLHQsXCIvXCIscixcIi9cIixvLFwiIFwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX092ZXJsYXlUcmlnZ2VyLmRlZmF1bHQse292ZXJsYXk6X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfVG9vbHRpcC5kZWZhdWx0LHtpZDpcIm9yZ2FuaXphdGlvblwifSxcIk93bmVkIGJ5IHNvbWVvbmUgaW4geW91ciBvcmdhbml6YXRpb25cIil9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImZhIGZhLXVzZXJzXCJ9KSkpfX0pLHU9YS5jb25jYXQoaSksbD1fbG9kYXNoLmRlZmF1bHQub21pdCh0aGlzLnByb3BzLFtcImFwaUVsZW1lbnRzXCIsXCJ1c2VybmFtZVwiXSk7cmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0Ryb3Bkb3duU2VsZWN0LmRlZmF1bHQsX2V4dGVuZHMoe30sbCx7b3B0aW9uczp1fSkpfX1dKSx0fSgpO2V4cG9ydHMuZGVmYXVsdD1BUElFbGVtZW50U2VsZWN0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX0NvbmZpZz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9qcy9Db25maWdcIikpLF9Ccm93c2VyPXJlcXVpcmUoXCIuLi9qcy9Ccm93c2VyXCIpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgQ2hyb21lSW5zdHJ1Y3Rpb25zPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gX2NsYXNzQ2FsbENoZWNrKHRoaXMsdCksX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcyxfZ2V0UHJvdG90eXBlT2YodCkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gX2luaGVyaXRzKHQsX3JlYWN0LmRlZmF1bHQuUHVyZUNvbXBvbmVudCksX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPVwiTWFjXCI9PT0oMCxfQnJvd3Nlci5nZXRPUykoKTtyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcIm9sXCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwibGlcIixudWxsLFwiU3dpdGNoIHRvIHRoZSB0YWIgd2hlcmUgeW91J2QgbGlrZSB0byBzdGFydCBjYXB0dXJpbmcgcmVxdWVzdHMuXCIpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLG51bGwsXCJQcmVzc1wiLFwiIFwiLGU/X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInNwYW5cIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJrYmRcIixudWxsLFwiQ21kIOKMmFwiKSxcIiArIFwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJrYmRcIixudWxsLFwiT3B0XCIpLFwiICsgXCIsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImtiZFwiLG51bGwsXCJJXCIpKTpfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImtiZFwiLG51bGwsXCJDdHJsXCIpLFwiICsgXCIsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImtiZFwiLG51bGwsXCJTaGlmdFwiKSxcIiArIFwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJrYmRcIixudWxsLFwiSVwiKSksXCIgXCIsXCJ0byBvcGVuIHVwIENocm9tZSBEZXZlbG9wZXIgVG9vbHMuXCIpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLG51bGwsXCJOYXZpZ2F0ZSB0byB0aGUgV3JhcEFQSSB0YWIgb24gdGhlIHZlcnkgcmlnaHQuXCIsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJ3YS1wYWQyMFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcIndhLWJveC1zaGFkb3cyMFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaW1nXCIse3NyYzpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hc3NldHMvdHV0b3JpYWwvb3Blbi1kZXZ0b29scy5wbmdcIiksYWx0OlwiSG93IHRvIG9wZW4gdGhlIFdyYXBBUEkgRGV2ZWxvcGVyIFRvb2xzIHRhYlwiLGNsYXNzTmFtZTpcIndhLWZ1bGwtd2lkdGhcIn0pKSkpKSl9fV0pLHR9KCk7ZXhwb3J0cy5kZWZhdWx0PUNocm9tZUluc3RydWN0aW9uczsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9Db25maWc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanMvQ29uZmlnXCIpKSxfQ2hyb21lPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL0Nocm9tZVwiKSksX1ZpZGVvQ29udGFpbmVyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vVmlkZW9Db250YWluZXJcIikpLF93aXRoQ2hyb21lPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vaG9jcy93aXRoQ2hyb21lXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBfdHlwZW9mKGUpe3JldHVybihfdHlwZW9mPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBhPXRbcl07YS5lbnVtZXJhYmxlPWEuZW51bWVyYWJsZXx8ITEsYS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gYSYmKGEud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGEua2V5LGEpfX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSx0LHIpe3JldHVybiB0JiZfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxyJiZfZGVmaW5lUHJvcGVydGllcyhlLHIpLGV9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PV90eXBlb2YodCkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/X2Fzc2VydFRoaXNJbml0aWFsaXplZChlKTp0fWZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKGUpe3JldHVybihfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIF9pbmhlcml0cyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmX3NldFByb3RvdHlwZU9mKGUsdCl9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKGUsdCl7cmV0dXJuKF9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0pKGUsdCl9dmFyIENocm9tZVBsdWdpblByb21wdD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIF9jbGFzc0NhbGxDaGVjayh0aGlzLHQpLF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsX2dldFByb3RvdHlwZU9mKHQpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIF9pbmhlcml0cyh0LF9yZWFjdC5kZWZhdWx0LlB1cmVDb21wb25lbnQpLF9jcmVhdGVDbGFzcyh0LFt7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnByb3BzLHQ9ZS5pc0Nocm9tZSxyPWUuaXNFeHRlbnNpb25JbnN0YWxsZWQ7cmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwicm93XCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiY29sLXNtLTYgY29sLW1kLTcgY29sLWxnLThcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImgyXCIsbnVsbCxcIkluc3RhbGxpbmcgdGhlIFdyYXBBUEkgQ2hyb21lIGV4dGVuc2lvblwiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9WaWRlb0NvbnRhaW5lci5kZWZhdWx0LHt5b3V0dWJlSWQ6XCJWZVNEc2Z5NFVlOFwiLGltYWdlU3JjOlwiL2Fzc2V0cy9ob21lcGFnZS92aWRlbzItdGh1bWIucG5nXCJ9KSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJjb2wtc20tNiBjb2wtbWQtNSBjb2wtbGctNFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInBhbmVsIHBhbmVsLXByaW1hcnkgd2EtdG9wMjBcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJwYW5lbC1ib2R5XCJ9LF9Db25maWcuZGVmYXVsdC5wbHVnaW5VUkw/X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJ0ZXh0LWNlbnRlciB3YS1ib3R0b20yMFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcIndhLWJvdHRvbTEwXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIix7Y2xhc3NOYW1lOlwiYnRuIGJ0bi1sZyBidG4tcHJpbWFyeVwiLHR5cGU6XCJidXR0b25cIixvbkNsaWNrOl9DaHJvbWUuZGVmYXVsdC5pbnN0YWxsRXh0ZW5zaW9uLGRpc2FibGVkOiExPT09dHx8cn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlcIix7Y2xhc3NOYW1lOlwiZmEgZmEtY2hyb21lXCJ9KSxcIiBJbnN0YWxsIFdyYXBBUEkgQ2hyb21lIGV4dGVuc2lvblwiKSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImFcIix7aHJlZjpfQ29uZmlnLmRlZmF1bHQucGx1Z2luVVJMLHRhcmdldDpcIl9ibGFua1wifSxcIlNlZSBpdCBpbiB0aGUgQ2hyb21lIHdlYiBzdG9yZVwiKSkpOl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwid2EtYm90dG9tMjBcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJ0ZXh0LWNlbnRlciB3YS1ib3R0b20xMFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYVwiLHtjbGFzc05hbWU6XCJidG4gYnRuLWxnIGJ0bi1wcmltYXJ5XCIsZG93bmxvYWQ6ITAsaHJlZjpcIi9leHRlbnNpb24uemlwXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImZhIGZhLWNocm9tZVwifSksXCIgRG93bmxvYWQgV3JhcEFQSSBDaHJvbWUgZXh0ZW5zaW9uXCIpKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImFsZXJ0IGFsZXJ0LWluZm9cIn0sXCJUbyBpbnN0YWxsIGl0OlwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJvbFwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxpXCIsbnVsbCxcIkV4dHJhY3QgdGhlIGNvbnRlbnRzIG9mIHRoZSBkb3dubG9hZGVkIGV4dGVuc2lvbnMuemlwIGZpbGUgdG8gYSBmb2xkZXIuXCIpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLG51bGwsXCJPcGVuIGEgbmV3IHRhYiwgYW5kIHR5cGVcIixcIiBcIixfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsbnVsbCxcImNocm9tZTovL2V4dGVuc2lvbnNcIiksXCIgaW50byB0aGUgYWRkcmVzcyBiYXIgdG8gbWFuYWdlIHlvdXIgQ2hyb21lIGV4dGVuc2lvbnMuXCIpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLG51bGwsXCJDaGVjayB0aGUgXCIsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInN0cm9uZ1wiLG51bGwsXCJEZXZlbG9wZXIgbW9kZVwiKSxcIiBjaGVja2JveCBpbiB0aGUgcmlnaHQgdG9wIGNvcm5lci5cIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxpXCIsbnVsbCxcIkNsaWNrIHRoZSBcIixfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsbnVsbCxcIkxvYWQgdW5wYWNrZWQgZXh0ZW5zaW9uLi4uXCIpLFwiIFwiLFwiYnV0dG9uIGFuZCBzZWxlY3QgdGhlIGZvbGRlciB5b3UgZXh0cmFjdGVkIGV4dGVuc2lvbnMuemlwIHRvLlwiKSkpKSwhMT09PXQmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiYWxlcnQgYWxlcnQtZGFuZ2VyXCJ9LFwiV3JhcEFQSSdzIHJlcXVlc3QgY2FwdHVyZSBwbHVnaW4gaXMgY3VycmVudGx5IG9ubHkgY29tcGF0aWJsZSB3aXRoIENocm9tZSwgdGhvdWdoIHRoZSByZXN0IG9mIHRoZSBzaXRlIHdpbGwgd29yayB3aXRoIGFueSBicm93c2VyLlwiLFwiIFwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJhXCIse2hyZWY6XCJodHRwczovL3d3dy5nb29nbGUuY29tL2Nocm9tZS9icm93c2VyL1wifSxcIkdldCBDaHJvbWUgdG8gc3RhcnQgdXNpbmcgY2FwdHVyaW5nIHJlcXVlc3RzLlwiKSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInBcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLFwiSW5zdGFsbGluZyB0aGUgV3JhcEFQSSBDaHJvbWUgZXh0ZW5zaW9uIGxldHMgeW91IGNhcHR1cmUgcmVxdWVzdHMgeW91IG1ha2UgaW4gQ2hyb21lXCIpLFwiIFwiLFwiYW5kIHF1aWNrbHkgdHVybiB0aGVtIGludG8gQVBJIGVuZHBvaW50cy5cIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInBcIixudWxsLFwiRm9yIGV4YW1wbGUsIGl0J3MgZXNwZWNpYWxseSB1c2VmdWwgZm9yOlwiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidWxcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInN0cm9uZ1wiLG51bGwsXCJTaXRlcyB0aGF0IHVzZSBBSkFYIHJlcXVlc3RzXCIpLFwiIHRvIGxvYWQgZGF0YSBpbiB0aGUgYmFja2dyb3VuZDtcIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxpXCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsbnVsbCxcIk11bHRpLXN0ZXAgZm9ybXNcIiksXCIsIHdoZXJlIGVhY2ggc3RlcCBkZXBlbmRzIG9uIHRoZSBwcmV2aW91czsgYW5kXCIpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInN0cm9uZ1wiLG51bGwsXCJQYWdlcyBiZWhpbmQgbG9naW5zXCIpLFwiOyB0aGUgQ2hyb21lIGV4dGVuc2lvbiBsZXRzIHlvdSBzdGFydCBidWlsZGluZyBhbiBBUEkgd2l0aCB0aGUgY29va2llcyBvZiBhIGxvZ2dlZC1pbiBzZXNzaW9uLlwiKSkpKSkpfX1dKSx0fSgpLF9kZWZhdWx0PSgwLF93aXRoQ2hyb21lLmRlZmF1bHQpKENocm9tZVBsdWdpblByb21wdCk7ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpLF9OYXZEcm9wZG93bj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdC1ib290c3RyYXAvbGliL05hdkRyb3Bkb3duXCIpKSxfRHJvcGRvd25CdXR0b249X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3QtYm9vdHN0cmFwL2xpYi9Ecm9wZG93bkJ1dHRvblwiKSksX0Ryb3Bkb3duPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0LWJvb3RzdHJhcC9saWIvRHJvcGRvd25cIikpLF9NZW51SXRlbT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdC1ib290c3RyYXAvbGliL01lbnVJdGVtXCIpKSxfVXRpbGl0eT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9qcy9VdGlsaXR5XCIpKSxfTmV3VXRpbHM9cmVxdWlyZShcIi4vTmV3VXRpbHNcIik7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gX2V4dGVuZHMoKXtyZXR1cm4oX2V4dGVuZHM9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIHI9YXJndW1lbnRzW3RdO2Zvcih2YXIgbyBpbiByKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLG8pJiYoZVtvXT1yW29dKX1yZXR1cm4gZX0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBfdHlwZW9mKGUpe3JldHVybihfdHlwZW9mPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07by5lbnVtZXJhYmxlPW8uZW51bWVyYWJsZXx8ITEsby5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG8ua2V5LG8pfX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSx0LHIpe3JldHVybiB0JiZfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxyJiZfZGVmaW5lUHJvcGVydGllcyhlLHIpLGV9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PV90eXBlb2YodCkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/X2Fzc2VydFRoaXNJbml0aWFsaXplZChlKTp0fWZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKGUpe3JldHVybihfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIF9pbmhlcml0cyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmX3NldFByb3RvdHlwZU9mKGUsdCl9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKGUsdCl7cmV0dXJuKF9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0pKGUsdCl9ZnVuY3Rpb24gZGVmYXVsdFRleHRSZW5kZXJlcihlKXtyZXR1cm4gZS5sYWJlbH12YXIgVW5zZWxlY3RhYmxlTWVudUl0ZW09ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBfY2xhc3NDYWxsQ2hlY2sodGhpcyx0KSxfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLF9nZXRQcm90b3R5cGVPZih0KS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBfaW5oZXJpdHModCxfcmVhY3QuZGVmYXVsdC5QdXJlQ29tcG9uZW50KSxfY3JlYXRlQ2xhc3ModCxbe2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLHtvbkNsaWNrOl9OZXdVdGlscy5wcmV2ZW50RGVmYXVsdH0sdGhpcy5wcm9wcy5jaGlsZHJlbil9fV0pLHR9KCkscHJvcFR5cGVzPXt2YWx1ZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMub25lT2ZUeXBlKFtfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuc3RyaW5nLF9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5udW1iZXJdKSxvcHRpb25zOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5vbmVPZlR5cGUoW19yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5hcnJheSxfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMub2JqZWN0XSksZ2V0T3B0aW9uczpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYyxvbkNoYW5nZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLG5hdjpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYm9vbCxidXR0b246X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmJvb2wsc2VhcmNoYWJsZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYm9vbCxvblRvZ2dsZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYyxpZDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuc3RyaW5nLHNlbGVjdGVkVGV4dFJlbmRlcmVyOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5mdW5jLGRlZmF1bHRMYWJlbDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMubm9kZSxwdWxsUmlnaHQ6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmJvb2x9LERyb3Bkb3duU2VsZWN0PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgZSxyO19jbGFzc0NhbGxDaGVjayh0aGlzLHQpO2Zvcih2YXIgbz1hcmd1bWVudHMubGVuZ3RoLG49bmV3IEFycmF5KG8pLGE9MDthPG87YSsrKW5bYV09YXJndW1lbnRzW2FdO3JldHVybihyPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsKGU9X2dldFByb3RvdHlwZU9mKHQpKS5jYWxsLmFwcGx5KGUsW3RoaXNdLmNvbmNhdChuKSkpKS5zdGF0ZT17ZHJvcGRvd25JZDpcImRyb3Bkb3duXCIuY29uY2F0KE1hdGguZmxvb3IoMWU5Kk1hdGgucmFuZG9tKCkpKSxvcHRpb25zOltdLG9wZW46ITEsdGV4dEZpbHRlcjpcIlwiLHNlbGVjdGVkTWF0Y2hJbmRleDowfSxyLl9zZWFyY2hCb3g9bnVsbCxyLmhhbmRsZVRvZ2dsZT1mdW5jdGlvbihlKXt2YXIgdD1yLnByb3BzLmdldE9wdGlvbnM7ci5zZXRTdGF0ZSh7b3BlbjplfSksZT8odCYmci5zZXRTdGF0ZSh7b3B0aW9uczp0KCl9KSxyLl9zZWFyY2hCb3gmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gci5fc2VhcmNoQm94LmZvY3VzKCl9LDEpKTpyLnNldFN0YXRlKHt0ZXh0RmlsdGVyOlwiXCIsc2VsZWN0ZWRNYXRjaEluZGV4OjB9KX0sci5oYW5kbGVUZXh0RmlsdGVyQ2hhbmdlPWZ1bmN0aW9uKGUpe3Iuc2V0U3RhdGUoe3RleHRGaWx0ZXI6ZS50YXJnZXQudmFsdWUsc2VsZWN0ZWRNYXRjaEluZGV4OjB9KX0sci5oYW5kbGVTZWFyY2hCb3hLZXlEb3duPWZ1bmN0aW9uKGUpe3ZhciB0PXIuc3RhdGUuc2VsZWN0ZWRNYXRjaEluZGV4LG89ci5nZXREaXNwbGF5ZWRPcHRpb25zKCk7aWYoMCE9PW8ubGVuZ3RoKXt2YXIgbj1udWxsOzM4PT09ZS5rZXlDb2RlP249dC0xOjQwPT09ZS5rZXlDb2RlJiYobj10KzEpLG51bGwhPW4mJihuPShuK28ubGVuZ3RoKSVvLmxlbmd0aCxyLnNldFN0YXRlKHtzZWxlY3RlZE1hdGNoSW5kZXg6bn0pKX19LHIuaGFuZGxlU2VhcmNoU2VsZWN0PWZ1bmN0aW9uKCl7dmFyIGU9ci5nZXREaXNwbGF5ZWRPcHRpb25zKClbci5zdGF0ZS5zZWxlY3RlZE1hdGNoSW5kZXhdO3Iuc2V0U3RhdGUoe29wZW46ITF9KSxyLnByb3BzLm9uQ2hhbmdlJiZyLnByb3BzLm9uQ2hhbmdlKGUmJmUudmFsdWUpfSxyfXJldHVybiBfaW5oZXJpdHModCxfcmVhY3QuZGVmYXVsdC5Db21wb25lbnQpLF9jcmVhdGVDbGFzcyh0LFt7a2V5OlwiZ2V0RGlzcGxheWVkT3B0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zdGF0ZS50ZXh0RmlsdGVyO3JldHVybiBfVXRpbGl0eS5kZWZhdWx0Lm5vcm1hbGl6ZU9wdGlvbnModGhpcy5wcm9wcy5vcHRpb25zfHx0aGlzLnN0YXRlLm9wdGlvbnMpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4hZXx8LTEhPT0odC50ZXh0TGFiZWx8fHQubGFiZWwpLmluZGV4T2YoZSl9KX19LHtrZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucHJvcHMsdD1lLnZhbHVlLHI9ZS5vbkNoYW5nZSxvPWUubmF2LG49ZS5idXR0b24sYT1lLnB1bGxSaWdodCxsPWUuc2VhcmNoYWJsZSxpPXRoaXMucHJvcHMuc2VsZWN0ZWRUZXh0UmVuZGVyZXJ8fGRlZmF1bHRUZXh0UmVuZGVyZXIscz10aGlzLnByb3BzLmRlZmF1bHRMYWJlbHx8XCIoU2VsZWN0IG9uZSlcIix1PV9sb2Rhc2guZGVmYXVsdC5vbWl0KHRoaXMucHJvcHMsT2JqZWN0LmtleXMocHJvcFR5cGVzKSkscD10aGlzLnN0YXRlLGM9cC5kcm9wZG93bklkLGY9cC5vcGVuLGQ9cC50ZXh0RmlsdGVyLF89cC5zZWxlY3RlZE1hdGNoSW5kZXgsaD1fVXRpbGl0eS5kZWZhdWx0Lm5vcm1hbGl6ZU9wdGlvbnModGhpcy5wcm9wcy5vcHRpb25zfHx0aGlzLnN0YXRlLm9wdGlvbnMpLHk9dGhpcy5nZXREaXNwbGF5ZWRPcHRpb25zKCksYj1udWxsO2lmKG51bGwhPXQpe3ZhciBnPWguZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnZhbHVlPT09dH0pO2I9MCE9PWcubGVuZ3RoP2dbMF06e2xhYmVsOm51bGwsdmFsdWU6dH19dmFyIHY9Yj9pKGIpOnMsbT15Lm1hcChmdW5jdGlvbihlLHIpe2lmKGUuZGl2aWRlcilyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTWVudUl0ZW0uZGVmYXVsdCx7a2V5OlwiZGl2aWRlclwiLmNvbmNhdChyKSxkaXZpZGVyOiEwfSk7dmFyIG89ZS52YWx1ZTtyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTWVudUl0ZW0uZGVmYXVsdCx7a2V5OkpTT04uc3RyaW5naWZ5KG8pLGV2ZW50S2V5Om8sYWN0aXZlOiEhbCYmcj09PV99LGUubGFiZWwsXCIgXCIsbz09PXQmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImZhIGZhLWNoZWNrXCJ9KSl9KTtpZihsJiZtLnVuc2hpZnQoX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChVbnNlbGVjdGFibGVNZW51SXRlbSxudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIse2NsYXNzTmFtZTpcIndhLWJzLXNlYXJjaGJveFwiLG9uU3VibWl0OigwLF9OZXdVdGlscy5jYWxsKSh0aGlzLFwiaGFuZGxlU2VhcmNoU2VsZWN0XCIsW10sITApfSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIix7dHlwZTpcInRleHRcIixjbGFzc05hbWU6XCJmb3JtLWNvbnRyb2xcIix2YWx1ZTpkLG9uQ2hhbmdlOnRoaXMuaGFuZGxlVGV4dEZpbHRlckNoYW5nZSxyZWY6KDAsX05ld1V0aWxzLnJlZ2lzdGVyUmVmKSh0aGlzLFwiX3NlYXJjaEJveFwiKSxvbktleURvd246dGhpcy5oYW5kbGVTZWFyY2hCb3hLZXlEb3dufSkpKSksb3x8bil7dmFyIFQ9bz9fTmF2RHJvcGRvd24uZGVmYXVsdDpfRHJvcGRvd25CdXR0b24uZGVmYXVsdDtyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChULF9leHRlbmRzKHt9LHUse29wZW46Zix0aXRsZTp2fHxcIlwiLG9uU2VsZWN0OnIsaWQ6dGhpcy5wcm9wcy5pZHx8YyxwdWxsUmlnaHQ6YSxvblRvZ2dsZTp0aGlzLmhhbmRsZVRvZ2dsZX0pLG0pfXJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Ecm9wZG93bi5kZWZhdWx0LF9leHRlbmRzKHtvblNlbGVjdDpyLGlkOnRoaXMucHJvcHMuaWR8fGMsb25Ub2dnbGU6dGhpcy5oYW5kbGVUb2dnbGUsb3BlbjpmfSx1KSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Ecm9wZG93bi5kZWZhdWx0LlRvZ2dsZSx7dXNlQW5jaG9yOiEwLGNsYXNzTmFtZTpcImJ0bi1saW5rXCJ9LHYpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0Ryb3Bkb3duLmRlZmF1bHQuTWVudSxudWxsLG0pKX19XSksdH0oKTtEcm9wZG93blNlbGVjdC5wcm9wVHlwZXM9cHJvcFR5cGVzO3ZhciBfZGVmYXVsdD1Ecm9wZG93blNlbGVjdDtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5kZWZhdWx0PXZvaWQgMDt2YXIgX3JlYWN0PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKSxfbG9kYXNoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaFwiKSksX1JlYWN0VXRpbHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9SZWFjdFV0aWxzXCIpKSxfTmV3VXRpbHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9OZXdVdGlsc1wiKSksX1RhYnM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9UYWJzXCIpKSxfQXV0aD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9qcy9yZWR1eC9BdXRoXCIpKSxfQXV0aDI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanMvQXV0aFwiKSksX1ZhbGlkYXRlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL1ZhbGlkYXRlXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBfdHlwZW9mKGUpe3JldHVybihfdHlwZW9mPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsdCl7Zm9yKHZhciBhPTA7YTx0Lmxlbmd0aDthKyspe3ZhciByPXRbYV07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSx0LGEpe3JldHVybiB0JiZfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxhJiZfZGVmaW5lUHJvcGVydGllcyhlLGEpLGV9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PV90eXBlb2YodCkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/X2Fzc2VydFRoaXNJbml0aWFsaXplZChlKTp0fWZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihlKXtyZXR1cm4oX2dldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9KShlKX1mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpe2lmKHZvaWQgMD09PWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiBlfWZ1bmN0aW9uIF9pbmhlcml0cyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmX3NldFByb3RvdHlwZU9mKGUsdCl9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKGUsdCl7cmV0dXJuKF9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0pKGUsdCl9dmFyIHRhYk9wdGlvbnM9e2xvZ2luOlwiU2lnbiBpblwiLHJlZ2lzdGVyOlwiUmVnaXN0ZXJcIn0sTG9naW5Gb3JtPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgZSxhO19jbGFzc0NhbGxDaGVjayh0aGlzLHQpO2Zvcih2YXIgcj1hcmd1bWVudHMubGVuZ3RoLGw9bmV3IEFycmF5KHIpLG89MDtvPHI7bysrKWxbb109YXJndW1lbnRzW29dO3JldHVybihhPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsKGU9X2dldFByb3RvdHlwZU9mKHQpKS5jYWxsLmFwcGx5KGUsW3RoaXNdLmNvbmNhdChsKSkpKS5wcm9wcz12b2lkIDAsYS5zdGF0ZT17Zm9ybTp7ZW1haWw6XCJcIix1c2VybmFtZTpcIlwiLHBhc3N3b3JkOlwiXCIsbmFtZTpcIlwiLHRpdGxlOlwiXCIsY29tcGFueTpcIlwiLGludGVuZGVkVXNlOlwiXCIsc2hvdWxkQ29udGFjdDpudWxsfSxibHVycmVkOnt9LGhhc1N1Ym1pdEVycm9yczohMSxsb2FkaW5nOiExLHJlc3BvbnNlOm51bGx9LGEubG9naW49ZnVuY3Rpb24oKXthLnNldFN0YXRlKHtsb2FkaW5nOiExLHJlc3BvbnNlOm51bGx9KSxhLnByb3BzLmxvZ2luKGEuc3RhdGUuZm9ybS5lbWFpbCxhLnN0YXRlLmZvcm0ucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24oZSl7ZS5pc0xvZ2dlZEluJiZhLnByb3BzLm9uTG9naW4oKX0pfSxhLnJlZ2lzdGVyPWZ1bmN0aW9uKCl7dmFyIGU9X1ZhbGlkYXRlLmRlZmF1bHQudXNlcihhLnN0YXRlLmZvcm0pO19sb2Rhc2guZGVmYXVsdC5pc0VtcHR5KGUpPyhhLnNldFN0YXRlKHtoYXNTdWJtaXRFcnJvcnM6ITEsbG9hZGluZzohMSxyZXNwb25zZTpudWxsfSksYS5wcm9wcy5yZWdpc3RlclVzZXIoYS5zdGF0ZS5mb3JtLGEucHJvcHMuaW52aXRlS2V5KS50aGVuKGZ1bmN0aW9uKGUpe2UuaXNMb2dnZWRJbiYmYS5wcm9wcy5vblJlZ2lzdGVyKCl9KSk6YS5zZXRTdGF0ZSh7aGFzU3VibWl0RXJyb3JzOiEwLGxvYWRpbmc6ITF9KX0sYS5yZXNldFBhc3N3b3JkPWZ1bmN0aW9uKCl7X0F1dGgyLmRlZmF1bHQuc3RhcnRSZXNldFBhc3N3b3JkKGEuc3RhdGUuZm9ybS51c2VybmFtZSxhLnN0YXRlLmZvcm0uZW1haWwpLnRoZW4oX05ld1V0aWxzLmRlZmF1bHQuZ2V0VGhlbihfYXNzZXJ0VGhpc0luaXRpYWxpemVkKGEpKSkuY2F0Y2goX05ld1V0aWxzLmRlZmF1bHQuZ2V0Q2F0Y2goX2Fzc2VydFRoaXNJbml0aWFsaXplZChhKSkpfSxhLnN1Ym1pdD1mdW5jdGlvbihlKXtlJiZlLnByZXZlbnREZWZhdWx0KCksYS5zZXRTdGF0ZSh7bG9hZGluZzohMCxyZXNwb25zZTpudWxsfSk7dmFyIHQ9YS5wcm9wcy50YWI7XCJsb2dpblwiPT09dD9hLmxvZ2luKCk6XCJyZWdpc3RlclwiPT09dD9hLnJlZ2lzdGVyKCk6XCJyZXNldFBhc3N3b3JkXCI9PT10JiZhLnJlc2V0UGFzc3dvcmQoKX0sYX1yZXR1cm4gX2luaGVyaXRzKHQsX3JlYWN0LmRlZmF1bHQuQ29tcG9uZW50KSxfY3JlYXRlQ2xhc3ModCxbe2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcm9wcy50YWIsdD10aGlzLnN0YXRlLmxvYWRpbmd8fHRoaXMucHJvcHMuYXV0aExvYWRpbmcsYT10aGlzLnN0YXRlLnJlc3BvbnNlfHx0aGlzLnByb3BzLmF1dGhFcnJvcixyPXRoaXMuc3RhdGUuZm9ybSxsPXRoaXMuc3RhdGUuYmx1cnJlZCxvPXRoaXMuc3RhdGUuaGFzU3VibWl0RXJyb3JzLHM9bnVsbDtzd2l0Y2goZSl7Y2FzZVwibG9naW5cIjpzPVwiU2lnbiBpblwiO2JyZWFrO2Nhc2VcInJlZ2lzdGVyXCI6cz1cIlJlZ2lzdGVyXCI7YnJlYWs7Y2FzZVwicmVzZXRQYXNzd29yZFwiOnM9XCJSZXNldCBwYXNzd29yZFwifXZhciBuPV9WYWxpZGF0ZS5kZWZhdWx0LnVzZXIociksaT17fTtyZXR1cm5cInJlZ2lzdGVyXCI9PT1lJiYoaT1fbG9kYXNoLmRlZmF1bHQuY2xvbmUobiksb3x8X2xvZGFzaC5kZWZhdWx0LmZvckVhY2gobixmdW5jdGlvbihlLHQpe2xbdF18fGRlbGV0ZSBpW3RdfSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixudWxsLHRoaXMucHJvcHMuc2hvd0xvZ28mJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwidGV4dC1jZW50ZXIgd2EtdG9wMjAgd2EtYm90dG9tMjBcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImltZ1wiLHtzcmM6XCIvYXNzZXRzL2xvZ28tbGFyZ2UucG5nXCIsYWx0OlwiV3JhcEFQSSBsb2dvXCIsc3R5bGU6e21heFdpZHRoOlwiMTAwJVwiLG1heEhlaWdodDpcIjc1cHhcIn19KSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImgxXCIse2NsYXNzTmFtZTpcIndhLXRvcDBcIn0scyksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJ3YS1ib3R0b20yMFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9UYWJzLmRlZmF1bHQse3RhYnM6dGFiT3B0aW9ucyx2YWx1ZTplLG9uQ2hhbmdlOl9OZXdVdGlscy5kZWZhdWx0LmNhbGxQcm9wKHRoaXMsXCJvblRhYkNoYW5nZVwiKX0pKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInJvd1wifSxcInJlZ2lzdGVyXCI9PT1lJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImNvbC1zbS02IGNvbC1zbS1wdXNoLTZcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJwYW5lbCBwYW5lbC1wcmltYXJ5XCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwicGFuZWwtYm9keVwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwicFwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInN0cm9uZ1wiLG51bGwsXCJXcmFwQVBJIGlzIGZyZWUgdG8gdXNlIVwiKSxcIiBCeSByZWdpc3RlcmluZywgeW91XCIsXCIgXCIsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImFcIix7aHJlZjpcIi90ZXJtc1wiLHRhcmdldDpcIl9ibGFua1wifSxcImFncmVlIHRvIG91ciBUZXJtcyBvZiBTZXJ2aWNlXCIpLFwiLCBhbmQgY2FuOlwiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidWxcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLG51bGwsXCJCdWlsZCBhbmQgdXNlIHB1YmxpYyBBUElzLCBydW5uaW5nIG9uIG91ciBzZXJ2ZXJzXCIpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLG51bGwsXCJNYWtlIDMwLDAwMCByZXF1ZXN0cyBwZXIgbW9udGhcIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxpXCIsbnVsbCxcIkVuam95IHRoZSBmdWxsIHJhbmdlIG9mIFdyYXBBUEkgZnVuY3Rpb25hbGl0eVwiKSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImgzXCIsbnVsbCxcIk5lZWQgbW9yZT9cIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6aS5zaG91bGRDb250YWN0P1wiaGFzLWVycm9yXCI6XCJcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJjaGVja2JveFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIix7aHRtbEZvcjpcInNob3VsZENvbnRhY3RUcnVlXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLHt0eXBlOlwicmFkaW9cIixpZDpcInNob3VsZENvbnRhY3RUcnVlXCIsb25DbGljazpfTmV3VXRpbHMuZGVmYXVsdC5zZXRTdGF0ZSh0aGlzLFwiZm9ybS5zaG91bGRDb250YWN0XCIsITApLGNoZWNrZWQ6ITA9PT1yLnNob3VsZENvbnRhY3R9KSxcIiBcIixfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsbnVsbCxcIlllczsgSSdtIGludGVyZXN0ZWRcIiksXCIgaW4gbW9yZSBBUEkgcmVxdWVzdHMsIGEgc2VsZi1ob3N0ZWQgc29sdXRpb24sIG9yIHByaXZhdGUgQVBJIGVuZHBvaW50cy5cIikpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiY2hlY2tib3hcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIse2h0bWxGb3I6XCJzaG91bGRDb250YWN0RmFsc2VcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlucHV0XCIse3R5cGU6XCJyYWRpb1wiLGlkOlwic2hvdWxkQ29udGFjdEZhbHNlXCIsb25DbGljazpfTmV3VXRpbHMuZGVmYXVsdC5zZXRTdGF0ZSh0aGlzLFwiZm9ybS5zaG91bGRDb250YWN0XCIsITEpLGNoZWNrZWQ6ITE9PT1yLnNob3VsZENvbnRhY3R9KSxcIiBcIixcIk5vOyB0aGUgYWJvdmUgc2hvdWxkIGJlIGVub3VnaC5cIikpLGkuc2hvdWxkQ29udGFjdCYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInBcIix7Y2xhc3NOYW1lOlwiaGVscC1ibG9ja1wifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsbnVsbCxpLnNob3VsZENvbnRhY3QpKSkpKSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJyZWdpc3RlclwiPT09ZT9cImNvbC1zbS02IGNvbC1zbS1wdWxsLTZcIjpcImNvbC1zbS0xMlwifSxfTmV3VXRpbHMuZGVmYXVsdC5yZW5kZXJSZXNwb25zZShhKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiLHtvblN1Ym1pdDp0aGlzLnN1Ym1pdH0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJmb3JtLWdyb3VwIFwiLmNvbmNhdChpLmVtYWlsP1wiaGFzLWVycm9yXCI6XCJcIil9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLHtodG1sRm9yOlwiZW1haWxcIn0sXCJFbWFpbFwiLFwibG9naW5cIj09PWUmJlwiIG9yIHVzZXJuYW1lXCIpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLHt0eXBlOlwidGV4dFwiLGlkOlwiZW1haWxcIixjbGFzc05hbWU6XCJmb3JtLWNvbnRyb2xcIixtYXhMZW5ndGg6XCIxMjhcIix2YWx1ZTpyLmVtYWlsLG9uQ2hhbmdlOl9OZXdVdGlscy5kZWZhdWx0LnVwZGF0ZSh0aGlzLFwiZm9ybS5lbWFpbFwiKSxvbkJsdXI6X05ld1V0aWxzLmRlZmF1bHQuc2V0U3RhdGUodGhpcyxcImJsdXJyZWQuZW1haWxcIiwhMCl9KSxcInJlZ2lzdGVyXCI9PT1lJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwicFwiLHtjbGFzc05hbWU6XCJoZWxwLWJsb2NrXCJ9LGkuZW1haWx8fFwiV2Ugd2lsbCBzZW5kIGFuIGVtYWlsIGhlcmUgd2l0aCBhbiBhY3RpdmF0aW9uIGxpbmsuXCIpKSwoXCJyZWdpc3RlclwiPT09ZXx8XCJyZXNldFBhc3N3b3JkXCI9PT1lKSYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJmb3JtLWdyb3VwIFwiLmNvbmNhdChpLnVzZXJuYW1lP1wiaGFzLWVycm9yXCI6XCJcIil9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLHtodG1sRm9yOlwidXNlcm5hbWVcIn0sXCJVc2VybmFtZVwiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIix7dHlwZTpcInVzZXJuYW1lXCIsaWQ6XCJ1c2VybmFtZVwiLGNsYXNzTmFtZTpcImZvcm0tY29udHJvbFwiLHZhbHVlOnIudXNlcm5hbWUsb25DaGFuZ2U6X05ld1V0aWxzLmRlZmF1bHQudXBkYXRlKHRoaXMsXCJmb3JtLnVzZXJuYW1lXCIpLG9uQmx1cjpfTmV3VXRpbHMuZGVmYXVsdC5zZXRTdGF0ZSh0aGlzLFwiYmx1cnJlZC51c2VybmFtZVwiLCEwKX0pLFwicmVnaXN0ZXJcIj09PWUmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJwXCIse2NsYXNzTmFtZTpcImhlbHAtYmxvY2tcIn0saS51c2VybmFtZXx8X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInNwYW5cIixudWxsLFwiQVBJcyB5b3UgcHVibGlzaCB3aWxsIGJlIGFjY2Vzc2libGUgYXRcIixcIiBcIixfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiY29kZVwiLG51bGwsXCIoeW91ciB1c2VybmFtZSkvKHJlcG9zaXRvcnkpLyhBUEkgbmFtZSlcIikpKSksKFwicmVnaXN0ZXJcIj09PWV8fFwibG9naW5cIj09PWUpJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImZvcm0tZ3JvdXAgXCIuY29uY2F0KGkucGFzc3dvcmQ/XCJoYXMtZXJyb3JcIjpcIlwiKX0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIse2h0bWxGb3I6XCJwYXNzd29yZFwifSxcIlBhc3N3b3JkXCIpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLHt0eXBlOlwicGFzc3dvcmRcIixpZDpcInBhc3N3b3JkXCIsY2xhc3NOYW1lOlwiZm9ybS1jb250cm9sXCIsdmFsdWU6ci5wYXNzd29yZCxvbkNoYW5nZTpfTmV3VXRpbHMuZGVmYXVsdC51cGRhdGUodGhpcyxcImZvcm0ucGFzc3dvcmRcIiksb25CbHVyOl9OZXdVdGlscy5kZWZhdWx0LnNldFN0YXRlKHRoaXMsXCJibHVycmVkLnBhc3N3b3JkXCIsITApfSksXCJyZWdpc3RlclwiPT09ZSYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInBcIix7Y2xhc3NOYW1lOlwiaGVscC1ibG9ja1wifSxpLnBhc3N3b3JkfHxcIkNob29zZSBhIGxvbmcsIGhhcmQtdG8tZ3Vlc3MgcGFzc3dvcmQgdGhhdCB5b3UgZG9uJ3QgdXNlIGFueXdoZXJlIGVsc2UuXCIpKSxcInJlZ2lzdGVyXCI9PT1lJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImZvcm0tZ3JvdXAgXCIuY29uY2F0KGkubmFtZT9cImhhcy1lcnJvclwiOlwiXCIpfSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIix7aHRtbEZvcjpcIm5hbWVcIn0sXCJOYW1lXCIpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLHt0eXBlOlwidGV4dFwiLGlkOlwibmFtZVwiLGNsYXNzTmFtZTpcImZvcm0tY29udHJvbFwiLHZhbHVlOnIubmFtZSxvbkNoYW5nZTpfTmV3VXRpbHMuZGVmYXVsdC51cGRhdGUodGhpcyxcImZvcm0ubmFtZVwiKSxvbkJsdXI6X05ld1V0aWxzLmRlZmF1bHQuc2V0U3RhdGUodGhpcyxcImJsdXJyZWQubmFtZVwiLCEwKX0pLGkubmFtZSYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInBcIix7Y2xhc3NOYW1lOlwiaGVscC1ibG9ja1wifSxpLm5hbWUpKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImZvcm0tZ3JvdXBcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIse2h0bWxGb3I6XCJjb21wYW55XCJ9LFwiQ29tcGFueSAoaWYgYXBwbGljYWJsZSlcIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlucHV0XCIse3R5cGU6XCJ0ZXh0XCIsaWQ6XCJjb21wYW55XCIsY2xhc3NOYW1lOlwiZm9ybS1jb250cm9sXCIsdmFsdWU6ci5jb21wYW55LG9uQ2hhbmdlOl9OZXdVdGlscy5kZWZhdWx0LnVwZGF0ZSh0aGlzLFwiZm9ybS5jb21wYW55XCIpfSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiZm9ybS1ncm91cFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIix7aHRtbEZvcjpcImludGVuZGVkVXNlXCJ9LFwiSG93IGFyZSB5b3UgdGhpbmtpbmcgb2YgdXNpbmcgV3JhcEFQST8gKG9wdGlvbmFsKVwiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIix7aWQ6XCJpbnRlbmRlZFVzZVwiLGNsYXNzTmFtZTpcImZvcm0tY29udHJvbFwiLHZhbHVlOnIuaW50ZW5kZWRVc2Usb25DaGFuZ2U6X05ld1V0aWxzLmRlZmF1bHQudXBkYXRlKHRoaXMsXCJmb3JtLmludGVuZGVkVXNlXCIpLHN0eWxlOntoZWlnaHQ6XCIxMDBweFwifX0pLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiaGVscC1ibG9ja1wifSxcIk5vIHdvcnJpZXMgaWYgeW91IGRvbid0IGtub3cgeWV0LCBidXQgaWYgeW91IGRvLCB3ZSBtaWdodCBiZSBhYmxlIHRvIGhlbHAgd2l0aCBzb21lIGV4dHJhIHRpcHMhXCIpKSksbyYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJhbGVydCBhbGVydC1kYW5nZXJcIn0sXCJTb21lIGZpZWxkcyBkb24ndCBzZWVtIHRvIGJlIGZpbGxlZCBpbiBjb3JyZWN0bHkhIFRha2UgYSBsb29rIGF0IHRoZSBlcnJvciBtZXNzYWdlcyBhYm92ZS5cIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLHtjbGFzc05hbWU6XCJidG4gYnRuLXByaW1hcnlcIix0eXBlOlwic3VibWl0XCIsZGlzYWJsZWQ6dH0scyksXCJsb2dpblwiPT09ZSYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImFcIix7aHJlZjpcIiNcIixjbGFzc05hbWU6XCJwdWxsLXJpZ2h0XCIsb25DbGljazpfTmV3VXRpbHMuZGVmYXVsdC5jYWxsUHJvcCh0aGlzLFwib25UYWJDaGFuZ2VcIixbXCJyZXNldFBhc3N3b3JkXCJdLCEwKX0sXCJGb3Jnb3QgcGFzc3dvcmRcIikpKSkpfX1dKSx0fSgpLF9kZWZhdWx0PV9BdXRoLmRlZmF1bHQuY29ubmVjdCgpKF9SZWFjdFV0aWxzLmRlZmF1bHQuY29ubmVjdExvY2FsVHV0b3JpYWxTdGVwKCkoTG9naW5Gb3JtKSk7ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX0ZhZGU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3QtYm9vdHN0cmFwL2xpYi9GYWRlXCIpKSxfQXV0aD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9qcy9yZWR1eC9BdXRoXCIpKSxfUmVhY3RVdGlscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL1JlYWN0VXRpbHNcIikpLF9Mb2dpblBhZ2U9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9Mb2dpblBhZ2VcIikpLF9OZXdVdGlscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL05ld1V0aWxzXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBfdHlwZW9mKGUpe3JldHVybihfdHlwZW9mPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07by5lbnVtZXJhYmxlPW8uZW51bWVyYWJsZXx8ITEsby5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG8ua2V5LG8pfX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSx0LHIpe3JldHVybiB0JiZfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxyJiZfZGVmaW5lUHJvcGVydGllcyhlLHIpLGV9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PV90eXBlb2YodCkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/X2Fzc2VydFRoaXNJbml0aWFsaXplZChlKTp0fWZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKGUpe3JldHVybihfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIF9pbmhlcml0cyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmX3NldFByb3RvdHlwZU9mKGUsdCl9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKGUsdCl7cmV0dXJuKF9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0pKGUsdCl9dmFyIExvZ2luR2F0ZT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIGUscjtfY2xhc3NDYWxsQ2hlY2sodGhpcyx0KTtmb3IodmFyIG89YXJndW1lbnRzLmxlbmd0aCxhPW5ldyBBcnJheShvKSxuPTA7bjxvO24rKylhW25dPWFyZ3VtZW50c1tuXTtyZXR1cm4ocj1fcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLChlPV9nZXRQcm90b3R5cGVPZih0KSkuY2FsbC5hcHBseShlLFt0aGlzXS5jb25jYXQoYSkpKSkuc3RhdGU9e2lzRXhpdGluZzohMX0scn1yZXR1cm4gX2luaGVyaXRzKHQsX3JlYWN0LmRlZmF1bHQuQ29tcG9uZW50KSxfY3JlYXRlQ2xhc3ModCxbe2tleTpcImNvbXBvbmVudFdpbGxNb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7X0F1dGguZGVmYXVsdC5nZXRPckZldGNoTG9naW5TdGF0ZSh0aGlzLnByb3BzKX19LHtrZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLnByb3BzLmNvbXBvbmVudE9uY2VMb2dnZWRJbixyPXRoaXMucHJvcHMubG9nb3V0LG89dGhpcy5wcm9wcy51c2VybmFtZSxhPXRoaXMucHJvcHMuYXV0aFN0YXRlTG9hZGVkLG49dGhpcy5wcm9wcy5pc0xvZ2dlZEluLGk9ZnVuY3Rpb24odCxyKXt2YXIgbz1lLnN0YXRlLmlzRXhpdGluZztyZXR1cm57aW46ciYmKCFvfHxvPT09dCksb25FeGl0Ol9OZXdVdGlscy5kZWZhdWx0LnNldFN0YXRlKGUsXCJpc0V4aXRpbmdcIix0KSxvbkV4aXRlZDpfTmV3VXRpbHMuZGVmYXVsdC5zZXRTdGF0ZShlLFwiaXNFeGl0aW5nXCIsITEpLHVubW91bnRPbkV4aXQ6ITB9fTtyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRmFkZS5kZWZhdWx0LGkoXCJub3RMb2FkZWRcIiwhYSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtrZXk6XCJub3RMb2FkZWRcIixjbGFzc05hbWU6XCJ0ZXh0LWNlbnRlciB3YS1wYWQyMCB3YS1ub3QtbG9hZGVkXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gZmEtZncgZmEtM3hcIn0pLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwid2EtdG9wMTBcIn0sXCJQbGVhc2Ugd2FpdC4uLiBsb2FkaW5nIHlvdXIgYWNjb3VudFwiKSkpKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9GYWRlLmRlZmF1bHQsaShcImxvZ2luUGFnZVwiLGEmJiFuKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2tleTpcImxvZ2luUGFnZVwiLGNsYXNzTmFtZTpcIndhLWxvZ2luLXBhZ2VcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTG9naW5QYWdlLmRlZmF1bHQse29wZW5SZWdpc3RlckluTmV3V2luZG93OiEwLHNob3dMb2dvOnRoaXMucHJvcHMuc2hvd0xvZ299KSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0ZhZGUuZGVmYXVsdCxpKFwibG9nZ2VkSW5cIixhJiZuKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsbnVsbCxhJiZuJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KHQse2tleTpcImNvbXBvbmVudFwiLHVzZXJuYW1lOm8sbG9nb3V0OnJ9KSkpKX19XSksdH0oKTtMb2dpbkdhdGUucHJvcFR5cGVzPXt1cGRhdGVMb2NhbFR1dG9yaWFsU3RlcDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLGNvbXBvbmVudE9uY2VMb2dnZWRJbjpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYW55LmlzUmVxdWlyZWQsc2hvd0xvZ286X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmJvb2wsbG9nb3V0Ol9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsdXNlcm5hbWU6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLnN0cmluZyxhdXRoU3RhdGVMb2FkZWQ6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxpc0xvZ2dlZEluOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWR9O3ZhciBfZGVmYXVsdD1fQXV0aC5kZWZhdWx0LmNvbm5lY3QoKShfUmVhY3RVdGlscy5kZWZhdWx0LmNvbm5lY3RMb2NhbFR1dG9yaWFsU3RlcCgpKExvZ2luR2F0ZSkpO2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9sb2Rhc2g9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoXCIpKSxfcmVhY3RSb3V0ZXI9cmVxdWlyZShcInJlYWN0LXJvdXRlclwiKSxfQ29uZmlnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL0NvbmZpZ1wiKSksX05ld1V0aWxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vTmV3VXRpbHNcIikpLF9DaHJvbWVQbHVnaW5Qcm9tcHQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9DaHJvbWVQbHVnaW5Qcm9tcHRcIikpLF9Mb2dpbkZvcm09X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9Mb2dpbkZvcm1cIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgTG9naW5QYWdlPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgZSxyO19jbGFzc0NhbGxDaGVjayh0aGlzLHQpO2Zvcih2YXIgbz1hcmd1bWVudHMubGVuZ3RoLG49bmV3IEFycmF5KG8pLGk9MDtpPG87aSsrKW5baV09YXJndW1lbnRzW2ldO3JldHVybihyPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsKGU9X2dldFByb3RvdHlwZU9mKHQpKS5jYWxsLmFwcGx5KGUsW3RoaXNdLmNvbmNhdChuKSkpKS5wcm9wcz12b2lkIDAsci5zdGF0ZT17dGFiOlwibG9naW5cIixyZWdpc3RyYXRpb25SZXNwb25zZTpudWxsfSxyLnNldFRhYkZyb21Vcmw9ZnVuY3Rpb24oZSl7XCIvcmVnaXN0ZXJcIj09PV9sb2Rhc2guZGVmYXVsdC5nZXQoZSxcImxvY2F0aW9uLnBhdGhuYW1lXCIpP3Iuc2V0U3RhdGUoe3RhYjpcInJlZ2lzdGVyXCJ9KTpyLnNldFN0YXRlKHt0YWI6XCJsb2dpblwifSl9LHIub25Mb2dpbj1mdW5jdGlvbigpe3ZhciBlPV9sb2Rhc2guZGVmYXVsdC5nZXQoci5wcm9wcyxcImxvY2F0aW9uLnF1ZXJ5LnJlZGlyZWN0XCIpO2UmJnIucHJvcHMucm91dGVyLnB1c2goZSl9LHIub25SZWdpc3Rlcj1mdW5jdGlvbihlKXtyLnNldFN0YXRlKHtyZWdpc3RyYXRpb25SZXNwb25zZTplfSl9LHIuaGFuZGxlVGFiQ2hhbmdlPWZ1bmN0aW9uKGUpe3IucHJvcHMub3BlblJlZ2lzdGVySW5OZXdXaW5kb3cmJlwicmVnaXN0ZXJcIj09PWU/d2luZG93Lm9wZW4oXCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvcmVnaXN0ZXJcIikpOnIuc2V0U3RhdGUoe3RhYjplfSl9LHJ9cmV0dXJuIF9pbmhlcml0cyh0LF9yZWFjdC5kZWZhdWx0LkNvbXBvbmVudCksX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJjb21wb25lbnRXaWxsTW91bnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc2V0VGFiRnJvbVVybCh0aGlzLnByb3BzKX19LHtrZXk6XCJjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5zZXRUYWJGcm9tVXJsKGUpfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcm9wcy5zaG93TG9nbyx0PXRoaXMucHJvcHMubG9jYXRpb24mJnRoaXMucHJvcHMubG9jYXRpb24ucXVlcnl8fHt9LHI9dGhpcy5zdGF0ZS5yZWdpc3RyYXRpb25SZXNwb25zZSxvPXRoaXMuc3RhdGUudGFiO3JldHVybiByJiZyLnN1Y2Nlc3M/X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJjb250YWluZXJcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImgxXCIsbnVsbCxcIlJlZ2lzdGVyXCIpLF9OZXdVdGlscy5kZWZhdWx0LnJlbmRlclJlc3BvbnNlKHIpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0Nocm9tZVBsdWdpblByb21wdC5kZWZhdWx0LG51bGwpKTpfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImNvbnRhaW5lclwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInJvd1wifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInJlZ2lzdGVyXCI9PT1vP1wiY29sLXNtLTEyXCI6XCJjb2wtc20tNiBjb2wtc20tb2Zmc2V0LTNcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJ3YS10b3AyMCB3YS1ib3R0b20yMFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Mb2dpbkZvcm0uZGVmYXVsdCx7b25Mb2dpbjp0aGlzLm9uTG9naW4sb25SZWdpc3Rlcjp0aGlzLm9uUmVnaXN0ZXIsaW52aXRlS2V5OnQua2V5LHNob3dMb2dvOmUsdGFiOm8sb25UYWJDaGFuZ2U6dGhpcy5oYW5kbGVUYWJDaGFuZ2V9KSkpKSl9fV0pLHR9KCksX2RlZmF1bHQ9KDAsX3JlYWN0Um91dGVyLndpdGhSb3V0ZXIpKExvZ2luUGFnZSk7ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMucHJldmVudERlZmF1bHQ9cHJldmVudERlZmF1bHQsZXhwb3J0cy5zdG9wUHJvcGFnYXRpb249c3RvcFByb3BhZ2F0aW9uLGV4cG9ydHMudG9nZ2xlPXRvZ2dsZSxleHBvcnRzLnRvZ2dsZVByb3A9dG9nZ2xlUHJvcCxleHBvcnRzLnRvZ2dsZVZhbHVlPXRvZ2dsZVZhbHVlLGV4cG9ydHMudG9nZ2xlUHJvcFZhbHVlPXRvZ2dsZVByb3BWYWx1ZSxleHBvcnRzLnRvZ2dsZUZyb21FdmVudD10b2dnbGVGcm9tRXZlbnQsZXhwb3J0cy50b2dnbGVQcm9wRnJvbUV2ZW50PXRvZ2dsZVByb3BGcm9tRXZlbnQsZXhwb3J0cy5zZXRQcm9wPXNldFByb3AsZXhwb3J0cy5zZXRQcm9wTnVtYmVyPXNldFByb3BOdW1iZXIsZXhwb3J0cy5zZXRQcm9wVmFsdWU9c2V0UHJvcFZhbHVlLGV4cG9ydHMuZGVsZXRlUHJvcD1kZWxldGVQcm9wLGV4cG9ydHMudXBkYXRlPXVwZGF0ZSxleHBvcnRzLnVwZGF0ZU51bWJlcj11cGRhdGVOdW1iZXIsZXhwb3J0cy5zZXRTdGF0ZT1zZXRTdGF0ZSxleHBvcnRzLmRlbGV0ZVN0YXRlPWRlbGV0ZVN0YXRlLGV4cG9ydHMuZ2V0VGhlbj1nZXRUaGVuLGV4cG9ydHMuZ2V0Q2F0Y2g9Z2V0Q2F0Y2gsZXhwb3J0cy5yZW5kZXJSZXNwb25zZT1yZW5kZXJSZXNwb25zZSxleHBvcnRzLm1lbW9pemVMb2NhbD1tZW1vaXplTG9jYWwsZXhwb3J0cy5hbGw9YWxsLGV4cG9ydHMuZnJvbUV2ZW50PWZyb21FdmVudCxleHBvcnRzLm51bWJlckZyb21FdmVudD1udW1iZXJGcm9tRXZlbnQsZXhwb3J0cy5jb25zdGFudD1jb25zdGFudCxleHBvcnRzLm5lZ2F0ZT1uZWdhdGUsZXhwb3J0cy50b2dnbGVDb25zdGFudD10b2dnbGVDb25zdGFudCxleHBvcnRzLmNoYW5nZVByb3A9Y2hhbmdlUHJvcCxleHBvcnRzLmNoYW5nZVN0YXRlPWNoYW5nZVN0YXRlLGV4cG9ydHMuY2FsbD1jYWxsLGV4cG9ydHMuY2FsbFByb3A9Y2FsbFByb3AsZXhwb3J0cy5yZWdpc3RlclJlZj1yZWdpc3RlclJlZixleHBvcnRzLmRlYm91bmNlPWRlYm91bmNlLGV4cG9ydHMuZGVmYXVsdD1leHBvcnRzLmRlbGV0ZU1peGVkPWV4cG9ydHMuZ2V0TWl4ZWQ9ZXhwb3J0cy5zZXRNaXhlZD12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpLF9JbW11dGFibGU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanMvSW1tdXRhYmxlXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX12YXIgc2V0TWl4ZWQ9X0ltbXV0YWJsZS5kZWZhdWx0LnNldE1peGVkO2V4cG9ydHMuc2V0TWl4ZWQ9c2V0TWl4ZWQ7dmFyIGdldE1peGVkPV9JbW11dGFibGUuZGVmYXVsdC5nZXRNaXhlZDtleHBvcnRzLmdldE1peGVkPWdldE1peGVkO3ZhciBkZWxldGVNaXhlZD1fSW1tdXRhYmxlLmRlZmF1bHQuZGVsZXRlTWl4ZWQ7ZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZSl7ZSYmZS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbihlKXtlJiZlLnN0b3BQcm9wYWdhdGlvbigpfWZ1bmN0aW9uIHByZXZlbnREZWZhdWx0QW5kQmx1cihlKXtlJiZlLnByZXZlbnREZWZhdWx0JiYoZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksZS50YXJnZXQmJmUudGFyZ2V0LmJsdXIoKSl9ZnVuY3Rpb24gdG9nZ2xlKGUsdCxyKXtyZXR1cm4gY2hhbmdlU3RhdGUoZSx0LG5lZ2F0ZSxyLFwibmVnYXRlXCIpfWZ1bmN0aW9uIHRvZ2dsZVByb3AoZSx0LHIsbixhKXtyZXR1cm4gY2hhbmdlUHJvcChlLHQscixuLG5lZ2F0ZSxhLFwibmVnYXRlXCIpfWZ1bmN0aW9uIHRvZ2dsZVZhbHVlKGUsdCxyLG4pe3JldHVybiBjaGFuZ2VTdGF0ZShlLHQsdG9nZ2xlQ29uc3RhbnQociksbixbXCJ0b2dnbGVDb25zdGFudFwiLHJdKX1mdW5jdGlvbiB0b2dnbGVQcm9wVmFsdWUoZSx0LHIsbixhLG8pe3JldHVybiBjaGFuZ2VQcm9wKGUsdCxyLG4sdG9nZ2xlQ29uc3RhbnQoYSksbyxbXCJ0b2dnbGVDb25zdGFudFwiLGFdKX1mdW5jdGlvbiB0b2dnbGVGcm9tRXZlbnQoZSx0LHIpe3JldHVybiBjaGFuZ2VTdGF0ZShlLHQsc2V0T3JOdWxsLHIsXCJzZXRPck51bGxcIil9ZnVuY3Rpb24gdG9nZ2xlUHJvcEZyb21FdmVudChlLHQscixuLGEsbyl7cmV0dXJuIGNoYW5nZVByb3AoZSx0LHIsbixzZXRPck51bGwsbyxcInNldE9yTnVsbFwiKX1mdW5jdGlvbiBzZXRQcm9wKGUsdCxyLG4sYSl7cmV0dXJuIGNoYW5nZVByb3AoZSx0LHIsbixmcm9tRXZlbnQsYSxcImZyb21FdmVudFwiKX1mdW5jdGlvbiBzZXRQcm9wTnVtYmVyKGUsdCxyLG4sYSl7cmV0dXJuIGNoYW5nZVByb3AoZSx0LHIsbixudW1iZXJGcm9tRXZlbnQsYSxcIm51bWJlckZyb21FdmVudFwiKX1mdW5jdGlvbiBzZXRQcm9wVmFsdWUoZSx0LHIsbixhLG8pe3JldHVybiBjaGFuZ2VQcm9wKGUsdCxyLG4sY29uc3RhbnQoYSksbyxbXCJjb25zdGFudFwiLGFdKX1mdW5jdGlvbiBkZWxldGVQcm9wKGUsdCxyLG4sYSl7cmV0dXJuIGNoYW5nZVByb3AoZSx0LHIsbnVsbCxyZW1vdmUobiksYSxbXCJyZW1vdmVcIixuXSl9ZnVuY3Rpb24gdXBkYXRlKGUsdCxyKXtyZXR1cm4gY2hhbmdlU3RhdGUoZSx0LGZyb21FdmVudCxyLFwiZnJvbUV2ZW50XCIpfWZ1bmN0aW9uIHVwZGF0ZU51bWJlcihlLHQscil7cmV0dXJuIGNoYW5nZVN0YXRlKGUsdCxudW1iZXJGcm9tRXZlbnQscixcIm51bWJlckZyb21FdmVudFwiKX1mdW5jdGlvbiBzZXRTdGF0ZShlLHQscixuKXtyZXR1cm4gY2hhbmdlU3RhdGUoZSx0LGNvbnN0YW50KHIpLG4sW1wiY29uc3RhbnRcIixyXSl9ZnVuY3Rpb24gZGVsZXRlU3RhdGUoZSx0LHIpe3JldHVybiBjaGFuZ2VTdGF0ZShlLHRbMF0scmVtb3ZlKHQuc2xpY2UoMSkpLHIsW1wicmVtb3ZlXCIsdF0pfWZ1bmN0aW9uIGdldENoYW5nZWQoZSx0KXt2YXIgcj17fTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmZvckVhY2godCxmdW5jdGlvbihuLGEpe2VbYV0hPT10W2FdJiYoclthXT1uKX0pLHJ9ZnVuY3Rpb24gZ2V0VGhlbihlLHQscixuKXt2YXIgYT1bXCJfX2NhY2hlXCIsSlNPTi5zdHJpbmdpZnkoW1wiZ2V0VGhlblwiLHQscl0pXTt0PXR8fFwicmVzcG9uc2VcIixyPXJ8fFwibG9hZGluZ1wiLG49bnx8XCJkYXRhXCI7dmFyIG89X2xvZGFzaC5kZWZhdWx0LmdldChlLGEpO2lmKG8pcmV0dXJuIG87dmFyIGw9ZnVuY3Rpb24oYSl7dmFyIG89e307b1tyXT0hMSxvW3RdPWEsYS5zdWNjZXNzJiZuJiZhLmRhdGEmJihvW25dPWEuZGF0YSksZS5zZXRTdGF0ZShvKX07cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5zZXRXaXRoKGUsYSxsLE9iamVjdCksbH1mdW5jdGlvbiBnZXRDYXRjaChlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06XCJyZXNwb25zZVwiLHI9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOlwibG9hZGluZ1wiLG49W1wiX19jYWNoZVwiLEpTT04uc3RyaW5naWZ5KFtcImdldENhdGNoXCIsdCxyXSldLGE9X2xvZGFzaC5kZWZhdWx0LmdldChlLG4pO2lmKGEpcmV0dXJuIGE7dmFyIG89ZnVuY3Rpb24obil7Y29uc29sZS5lcnJvcihuLnN0YWNrKTt2YXIgYT17fTtyJiYoYVtyXT0hMSksdCYmKGFbdF09e3N1Y2Nlc3M6ITEsbWVzc2FnZXM6W1wiQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCJdLGVycm9yOm59KSxlLnNldFN0YXRlKGEpfTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnNldFdpdGgoZSxuLG8sT2JqZWN0KSxvfWZ1bmN0aW9uIHJlbmRlclJlc3BvbnNlKGUsdCl7dmFyIHI9KHQ9dHx8e30pLnR5cGV8fFwiYWxlcnRcIixuPXQuYWRkaXRpb25hbENsYXNzZXN8fFwiXCIsYT10Lm9uQ2xpY2ssbz0hIXQuZXJyb3JzT25seTtyZXR1cm4gZT9lLnN1Y2Nlc3MmJm8/bnVsbDplJiZlLm1lc3NhZ2VzJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcIlwiLmNvbmNhdChyLFwiIFwiKS5jb25jYXQocixcIi1cIikrKGUuc3VjY2Vzcz9cInN1Y2Nlc3NcIjpcImRhbmdlclwiKSsobj9cIiBcIi5jb25jYXQobik6XCJcIikrKGE/XCIgd2EtbGlua1wiOlwiXCIpLG9uQ2xpY2s6YX0sZS5tZXNzYWdlcy5tYXAoZnVuY3Rpb24oZSx0KXtyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInBcIix7a2V5OnR9LGUpfSkpOm51bGx9ZnVuY3Rpb24gbWVtb2l6ZUxvY2FsKGUsdCxyLG4pe3ZhciBhPVtcIl9fY2FjaGVcIixcIm1lbW9pemVMb2NhbFwiLHRdLG89X2xvZGFzaC5kZWZhdWx0LmdldChlLGEpfHxbXSxsPW8uZmluZChmdW5jdGlvbihlKXtyZXR1cm4gZVswXT09PXJ9KTtyZXR1cm4gbD9sWzFdOihvLnB1c2goW3Isbl0pLF9sb2Rhc2guZGVmYXVsdC5zZXQoZSxhLG8pLG4pfWZ1bmN0aW9uIGFsbChlLHQscil7dmFyIG49W1wiX19jYWNoZVwiLFwiYWxsXCJdLGE9X2xvZGFzaC5kZWZhdWx0LmdldChlLG4pfHxbXSxvPW51bGwsbD0hMCx1PSExLHM9dm9pZCAwO3RyeXtmb3IodmFyIGcsYz1hW1N5bWJvbC5pdGVyYXRvcl0oKTshKGw9KGc9Yy5uZXh0KCkpLmRvbmUpO2w9ITApe2Zvcih2YXIgaT1nLnZhbHVlLHA9aS5hcmdzWzBdLGQ9MCE9PXAubGVuZ3RoLGY9MDtmIT09cC5sZW5ndGg7ZisrKWlmKHBbZl0hPT10W2ZdKXtkPSExO2JyZWFrfWlmKGkuYXJnc1sxXSE9PXImJihkPSExKSxkKXtvPWk7YnJlYWt9fX1jYXRjaChlKXt1PSEwLHM9ZX1maW5hbGx5e3RyeXtsfHxudWxsPT1jLnJldHVybnx8Yy5yZXR1cm4oKX1maW5hbGx5e2lmKHUpdGhyb3cgc319aWYobylyZXR1cm4gby5mdW5jO3ZhciBoPWZ1bmN0aW9uKG4pe3ImJnByZXZlbnREZWZhdWx0QW5kQmx1cihuKTtmb3IodmFyIGE9ZS5zdGF0ZSxvPTA7byE9PXQubGVuZ3RoO28rKyllLnN0YXRlPXRbb10obik7ZS5zdGF0ZT1hfTtyZXR1cm4gbz17YXJnczpbdCxyXSxmdW5jOmh9LGEucHVzaChvKSxfbG9kYXNoLmRlZmF1bHQuc2V0KGUsbixhKSxofWZ1bmN0aW9uIGZyb21FdmVudChlLHQpe3JldHVybiB0JiZ0LnRhcmdldD90LnRhcmdldC52YWx1ZTp0fWZ1bmN0aW9uIG51bWJlckZyb21FdmVudChlLHQpe3ZhciByPXBhcnNlRmxvYXQodCYmdC50YXJnZXQ/dC50YXJnZXQudmFsdWU6dCk7cmV0dXJuIGlzTmFOKHIpP251bGw6cn1mdW5jdGlvbiBjb25zdGFudChlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZX19ZnVuY3Rpb24gcmVtb3ZlKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZGVsZXRlTWl4ZWQodCxlKX19ZnVuY3Rpb24gbmVnYXRlKGUpe3JldHVybiFlfWZ1bmN0aW9uIHRvZ2dsZUNvbnN0YW50KGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gdD09PWU/bnVsbDplfX1mdW5jdGlvbiBzZXRPck51bGwoZSx0KXt2YXIgcj10JiZ0LnRhcmdldD90LnRhcmdldC52YWx1ZTp0O3JldHVybiBlPT09cj9udWxsOnJ9ZnVuY3Rpb24gY2hhbmdlUHJvcChlLHQscixuLGEsbyxsKXt2YXIgdT1bXCJfX2NhY2hlXCIsSlNPTi5zdHJpbmdpZnkoW1wiY2hhbmdlUHJvcFwiLHQscixuLG8sbF0pXSxzPV9sb2Rhc2guZGVmYXVsdC5nZXQoZSx1KTtpZihzKXJldHVybiBzO3ZhciBnPWZ1bmN0aW9uKGwpe28mJnByZXZlbnREZWZhdWx0QW5kQmx1cihsKTt2YXIgdT1udWxsO2lmKHIpe3ZhciBzPWdldE1peGVkKGUucHJvcHMscik7aWYobil7dmFyIGc9Z2V0TWl4ZWQocyxuKSxjPWEoZyxsKTt1PXNldE1peGVkKHMsbixjKX1lbHNlIHU9YShzLGwpfWVsc2UgdT1hKG51bGwsbCk7cmV0dXJuIGUucHJvcHNbdF0odSksdX07cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5zZXRXaXRoKGUsdSxnLE9iamVjdCksZ31mdW5jdGlvbiBjaGFuZ2VTdGF0ZShlLHQscixuLGEpe3ZhciBvPVtcIl9fY2FjaGVcIixKU09OLnN0cmluZ2lmeShbXCJjaGFuZ2VTdGF0ZVwiLHQsbixhXSldLGw9X2xvZGFzaC5kZWZhdWx0LmdldChlLG8pO2lmKGwpcmV0dXJuIGw7dmFyIHU9ZnVuY3Rpb24oYSl7biYmcHJldmVudERlZmF1bHRBbmRCbHVyKGEpO3ZhciBvPWdldE1peGVkKGUuc3RhdGUsdCksbD1yKG8sYSksdT1zZXRNaXhlZChlLnN0YXRlLHQsbCk7cmV0dXJuIGUuc2V0U3RhdGUoZ2V0Q2hhbmdlZChlLnN0YXRlLHUpKSx1fTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnNldFdpdGgoZSxvLHUsT2JqZWN0KSx1fWZ1bmN0aW9uIGNhbGwoZSx0LHIsbixhKXt2YXIgbz1bXCJfX2NhY2hlXCIsSlNPTi5zdHJpbmdpZnkoW1wiY2FsbFwiLHQscixuLGFdKV0sbD1fbG9kYXNoLmRlZmF1bHQuZ2V0KGUsbyk7aWYobClyZXR1cm4gbDt2YXIgdT1mdW5jdGlvbigpe2Zvcih2YXIgYT1hcmd1bWVudHMubGVuZ3RoLG89bmV3IEFycmF5KGEpLGw9MDtsPGE7bCsrKW9bbF09YXJndW1lbnRzW2xdO24mJm9bMF0mJnByZXZlbnREZWZhdWx0QW5kQmx1cihvWzBdKTt2YXIgdT1bXS5jb25jYXQocikuY29uY2F0KG8pLHM9X2xvZGFzaC5kZWZhdWx0LmdldChlLHQpO3JldHVybiBzP3MuYXBwbHkoZSx1KTpudWxsfTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnNldFdpdGgoZSxvLHUsT2JqZWN0KSx1fWZ1bmN0aW9uIGNhbGxQcm9wKGUsdCxyLG4sYSl7dmFyIG89W1wiX19jYWNoZVwiLEpTT04uc3RyaW5naWZ5KFtcImNhbGxQcm9wXCIsdCxyLG4sYV0pXSxsPV9sb2Rhc2guZGVmYXVsdC5nZXQoZSxvKTtpZihsKXJldHVybiBsO3ZhciB1PWZ1bmN0aW9uKCl7Zm9yKHZhciBhPWFyZ3VtZW50cy5sZW5ndGgsbz1uZXcgQXJyYXkoYSksbD0wO2w8YTtsKyspb1tsXT1hcmd1bWVudHNbbF07biYmb1swXSYmcHJldmVudERlZmF1bHRBbmRCbHVyKG9bMF0pO3ZhciB1PVtdLmNvbmNhdChyfHxbXSkuY29uY2F0KG8pLHM9X2xvZGFzaC5kZWZhdWx0LmdldChlLnByb3BzLHQpO3JldHVybiBzP3MuYXBwbHkoZSx1KTpudWxsfTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnNldFdpdGgoZSxvLHUsT2JqZWN0KSx1fWZ1bmN0aW9uIHJlZ2lzdGVyUmVmKGUsdCl7dmFyIHI9W1wiX19jYWNoZVwiLEpTT04uc3RyaW5naWZ5KFtcInJlZ2lzdGVyUmVmXCIsdF0pXSxuPV9sb2Rhc2guZGVmYXVsdC5nZXQoZSxyKTtpZihuKXJldHVybiBuO3ZhciBhPWZ1bmN0aW9uKHIpe19sb2Rhc2guZGVmYXVsdC5zZXRXaXRoKGUsdCxyLE9iamVjdCl9O3JldHVybiBfbG9kYXNoLmRlZmF1bHQuc2V0V2l0aChlLHIsYSxPYmplY3QpLGF9ZnVuY3Rpb24gZGVib3VuY2UoZSx0LHIsbil7dmFyIGE9W1wiX19jYWNoZVwiLEpTT04uc3RyaW5naWZ5KFtcImRlYm91bmNlXCIsbl0pXTtpZighX2xvZGFzaC5kZWZhdWx0LmdldChlLGEpKXt2YXIgbz1fbG9kYXNoLmRlZmF1bHQuZGVib3VuY2UodCxyKTtfbG9kYXNoLmRlZmF1bHQuc2V0V2l0aChlLGEsbyl9cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5nZXQoZSxhKX1leHBvcnRzLmRlbGV0ZU1peGVkPWRlbGV0ZU1peGVkO3ZhciBfZGVmYXVsdD17cHJldmVudERlZmF1bHQ6cHJldmVudERlZmF1bHQsc3RvcFByb3BhZ2F0aW9uOnN0b3BQcm9wYWdhdGlvbix0b2dnbGU6dG9nZ2xlLHRvZ2dsZVZhbHVlOnRvZ2dsZVZhbHVlLHRvZ2dsZUZyb21FdmVudDp0b2dnbGVGcm9tRXZlbnQsdG9nZ2xlUHJvcDp0b2dnbGVQcm9wLHRvZ2dsZVByb3BWYWx1ZTp0b2dnbGVQcm9wVmFsdWUsdG9nZ2xlUHJvcEZyb21FdmVudDp0b2dnbGVQcm9wRnJvbUV2ZW50LHNldFByb3A6c2V0UHJvcCxzZXRQcm9wTnVtYmVyOnNldFByb3BOdW1iZXIsc2V0UHJvcFZhbHVlOnNldFByb3BWYWx1ZSxkZWxldGVQcm9wOmRlbGV0ZVByb3AsY2FsbFByb3A6Y2FsbFByb3AsY2FsbDpjYWxsLHVwZGF0ZTp1cGRhdGUsdXBkYXRlTnVtYmVyOnVwZGF0ZU51bWJlcixzZXRTdGF0ZTpzZXRTdGF0ZSxkZWxldGVTdGF0ZTpkZWxldGVTdGF0ZSxyZWdpc3RlclJlZjpyZWdpc3RlclJlZixnZXRUaGVuOmdldFRoZW4sZ2V0Q2F0Y2g6Z2V0Q2F0Y2gscmVuZGVyUmVzcG9uc2U6cmVuZGVyUmVzcG9uc2UsZnJvbUV2ZW50OmZyb21FdmVudCxudW1iZXJGcm9tRXZlbnQ6bnVtYmVyRnJvbUV2ZW50LGNvbnN0YW50OmNvbnN0YW50LG5lZ2F0ZTpuZWdhdGUsdG9nZ2xlQ29uc3RhbnQ6dG9nZ2xlQ29uc3RhbnQsbWVtb2l6ZUxvY2FsOm1lbW9pemVMb2NhbCxhbGw6YWxsLGNoYW5nZVN0YXRlOmNoYW5nZVN0YXRlLGNoYW5nZVByb3A6Y2hhbmdlUHJvcCxkZWJvdW5jZTpkZWJvdW5jZSxzZXRNaXhlZDpzZXRNaXhlZCxnZXRNaXhlZDpnZXRNaXhlZCxkZWxldGVNaXhlZDpkZWxldGVNaXhlZH07ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX0NvbGxhcHNlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0LWJvb3RzdHJhcC9saWIvQ29sbGFwc2VcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgUGFuZWw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciBlLHI7X2NsYXNzQ2FsbENoZWNrKHRoaXMsdCk7Zm9yKHZhciBvPWFyZ3VtZW50cy5sZW5ndGgsYT1uZXcgQXJyYXkobyksbj0wO248bztuKyspYVtuXT1hcmd1bWVudHNbbl07cmV0dXJuKHI9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoZT1fZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwuYXBwbHkoZSxbdGhpc10uY29uY2F0KGEpKSkpLnN0YXRlPXtleHBhbmRlZDohMX0sci50b2dnbGVTaG93PWZ1bmN0aW9uKGUpe2UmJmUucHJldmVudERlZmF1bHQmJmUuc3RvcFByb3BhZ2F0aW9uJiYoZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCkpLHIucHJvcHMub25TZWxlY3Q/ci5wcm9wcy5vblNlbGVjdChyLnByb3BzLmV2ZW50S2V5LGUpOnIuc2V0U3RhdGUoe2V4cGFuZGVkOiFyLnN0YXRlLmV4cGFuZGVkfSl9LHJ9cmV0dXJuIF9pbmhlcml0cyh0LF9yZWFjdC5kZWZhdWx0LkNvbXBvbmVudCksX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJjb21wb25lbnRXaWxsTW91bnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSEwO3RoaXMucHJvcHMuY29sbGFwc2libGUmJihlPSEhdGhpcy5wcm9wcy5kZWZhdWx0RXhwYW5kZWQpLHRoaXMuc2V0U3RhdGUoe2V4cGFuZGVkOmV9KX19LHtrZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucHJvcHMubGVmdCx0PXRoaXMucHJvcHMuZGlzYWJsZUxlZnRMaW5rLHI9dGhpcy5wcm9wcy5yaWdodCxvPXRoaXMucHJvcHMuY29sbGFwc2libGUsYT1udWxsIT10aGlzLnByb3BzLmV4cGFuZGVkP3RoaXMucHJvcHMuZXhwYW5kZWQ6dGhpcy5zdGF0ZS5leHBhbmRlZCxuPXRoaXMucHJvcHMuY2xhc3NOYW1lfHxcInBhbmVsIHBhbmVsLWRlZmF1bHRcIjtyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6bn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJwYW5lbC1oZWFkaW5nIHdhLWhlYWRlci12YWxpZ24tbWlkIHdhLWhvdmVyLWxpbmtcIixvbkNsaWNrOnRoaXMudG9nZ2xlU2hvd30sZT9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaDRcIix7Y2xhc3NOYW1lOlwibGVmdCBwYW5lbC10aXRsZVwifSxvJiYhdD9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYVwiLHtocmVmOlwiI1wiLG9uQ2xpY2s6dGhpcy50b2dnbGVTaG93fSxhP19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImZhIGZhLWNhcmV0LWRvd24gZmEtZndcIn0pOl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImZhIGZhLWNhcmV0LXJpZ2h0IGZhLWZ3XCJ9KSxlKTplKTpudWxsLHI/X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJyaWdodFwifSxyKTpudWxsKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Db2xsYXBzZS5kZWZhdWx0LHtpbjphfSx0aGlzLnByb3BzLmNoaWxkcmVuKSl9fV0pLHR9KCk7UGFuZWwucHJvcFR5cGVzPXtsZWZ0Ol9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5ub2RlLmlzUmVxdWlyZWQsZGlzYWJsZUxlZnRMaW5rOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5ib29sLHJpZ2h0Ol9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5ub2RlLGRlZmF1bHRFeHBhbmRlZDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYm9vbCxjb2xsYXBzaWJsZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYm9vbCxldmVudEtleTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMub25lT2ZUeXBlKFtfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMubnVtYmVyLF9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5zdHJpbmddKSxleHBhbmRlZDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYm9vbCxvblNlbGVjdDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYyxjaGlsZHJlbjpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMubm9kZSxjbGFzc05hbWU6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLnN0cmluZ307dmFyIF9kZWZhdWx0PVBhbmVsO2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9yZWR1eD1yZXF1aXJlKFwicmVkdXhcIiksX3JlYWN0UmVkdXg9cmVxdWlyZShcInJlYWN0LXJlZHV4XCIpLF9Db25maWc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanMvQ29uZmlnXCIpKSxfQXV0aD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9qcy9BdXRoXCIpKSxfTWFpblJlZHVjZXI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanMvcmVkdXgvTWFpblJlZHVjZXJcIikpLF9Mb2dpbkdhdGU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9Mb2dpbkdhdGVcIikpLF9FeHRlbnNpb249cmVxdWlyZShcIi4uL2pzL0V4dGVuc2lvblwiKSxfUG9wdXBQYWdlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vUG9wdXBQYWdlXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBfdHlwZW9mKGUpe3JldHVybihfdHlwZW9mPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4ua2V5LG4pfX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSx0LHIpe3JldHVybiB0JiZfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxyJiZfZGVmaW5lUHJvcGVydGllcyhlLHIpLGV9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PV90eXBlb2YodCkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/X2Fzc2VydFRoaXNJbml0aWFsaXplZChlKTp0fWZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKGUpe3JldHVybihfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIF9pbmhlcml0cyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmX3NldFByb3RvdHlwZU9mKGUsdCl9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKGUsdCl7cmV0dXJuKF9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0pKGUsdCl9dmFyIHN0b3JlPSgwLF9yZWR1eC5jcmVhdGVTdG9yZSkoX01haW5SZWR1Y2VyLmRlZmF1bHQpLFBvcHVwTWFpblBhZ2U9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciBlO3JldHVybiBfY2xhc3NDYWxsQ2hlY2sodGhpcyx0KSwoZT1fcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLF9nZXRQcm90b3R5cGVPZih0KS5jYWxsKHRoaXMpKSkuaGFuZGxlRGlzYWJsZVByb3h5PWZ1bmN0aW9uKCl7KDAsX0V4dGVuc2lvbi5kaXNhYmxlUHJveHkpKCkudGhlbihmdW5jdGlvbigpe2Uuc2V0U3RhdGUoe2h0dHBGYWlsZWQ6ITF9KX0pfSxlLnN0YXRlPXtodHRwRmFpbGVkOiExfSxlfXJldHVybiBfaW5oZXJpdHModCxfcmVhY3QuZGVmYXVsdC5QdXJlQ29tcG9uZW50KSxfY3JlYXRlQ2xhc3ModCxbe2tleTpcImNvbXBvbmVudERpZE1vdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzOygwLF9FeHRlbnNpb24uaXNQcm94eUVuYWJsZWQpKCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZT9fQXV0aC5kZWZhdWx0LmlzTG9nZ2VkSW4oKTpudWxsfSkuY2F0Y2goZnVuY3Rpb24odCl7X0NvbmZpZy5kZWZhdWx0LmRlYnVnKHQpLGUuc2V0U3RhdGUoe2h0dHBGYWlsZWQ6ITB9KX0pfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zdGF0ZS5odHRwRmFpbGVkO3JldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcIndhLXBvcHVwXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0UmVkdXguUHJvdmlkZXIse3N0b3JlOnN0b3JlfSxlP19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwidGV4dC1jZW50ZXIgY29udGFpbmVyICB3YS10b3AyMCB3YS1ib3R0b20yMFwifSxcIldlIGNvdWxkbid0IGNvbm5lY3QgdG8gdGhlIFdyYXBBUEkgc2VydmVycy4gVHJ5IGRpc2FibGluZyB0aGUgV3JhcEFQSSBwcm94aWVzIGFuZCB0aGVuIHRyeWluZyBhZ2FpbjpcIixfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIse2NsYXNzTmFtZTpcImJ0biBidG4tcHJpbWFyeVwiLHR5cGU6XCJidXR0b25cIixvbkNsaWNrOnRoaXMuaGFuZGxlRGlzYWJsZVByb3h5fSxcIkRpc2FibGUgV3JhcEFQSSBwcm94eVwiKSk6X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTG9naW5HYXRlLmRlZmF1bHQse2NvbXBvbmVudE9uY2VMb2dnZWRJbjpfUG9wdXBQYWdlLmRlZmF1bHR9KSkpfX1dKSx0fSgpO2V4cG9ydHMuZGVmYXVsdD1Qb3B1cE1haW5QYWdlOyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX3JjU3dpdGNoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJjLXN3aXRjaFwiKSksX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpLF9tb21lbnQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibW9tZW50XCIpKSxfQ29sbGFwc2U9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3QtYm9vdHN0cmFwL2xpYi9Db2xsYXBzZVwiKSksX0FQSUVsZW1lbnRTZWxlY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9BUElFbGVtZW50U2VsZWN0XCIpKSxfQ2hyb21lSW5zdHJ1Y3Rpb25zPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQ2hyb21lSW5zdHJ1Y3Rpb25zXCIpKSxfQVBJU3RvcmFnZT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9qcy9BUElTdG9yYWdlXCIpKSxfQnJvd3Nlcj1yZXF1aXJlKFwiLi4vanMvQnJvd3NlclwiKSxfRXh0ZW5zaW9uPXJlcXVpcmUoXCIuLi9qcy9FeHRlbnNpb25cIiksX0NvbmZpZz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9qcy9Db25maWdcIikpLF9BdXRoPXJlcXVpcmUoXCIuLi9qcy9yZWR1eC9BdXRoXCIpLF9BUElFbGVtZW50cz1yZXF1aXJlKFwiLi4vanMvcmVkdXgvQVBJRWxlbWVudHNcIiksX1BhbmVsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vUGFuZWxcIikpLF9OZXdVdGlscz1yZXF1aXJlKFwiLi9OZXdVdGlsc1wiKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBfdHlwZW9mKGUpe3JldHVybihfdHlwZW9mPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBhPXRbcl07YS5lbnVtZXJhYmxlPWEuZW51bWVyYWJsZXx8ITEsYS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gYSYmKGEud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGEua2V5LGEpfX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSx0LHIpe3JldHVybiB0JiZfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxyJiZfZGVmaW5lUHJvcGVydGllcyhlLHIpLGV9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PV90eXBlb2YodCkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/X2Fzc2VydFRoaXNJbml0aWFsaXplZChlKTp0fWZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihlKXtyZXR1cm4oX2dldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9KShlKX1mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpe2lmKHZvaWQgMD09PWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiBlfWZ1bmN0aW9uIF9pbmhlcml0cyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmX3NldFByb3RvdHlwZU9mKGUsdCl9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKGUsdCl7cmV0dXJuKF9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0pKGUsdCl9dmFyIFBvcHVwUGFnZT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIGU7cmV0dXJuIF9jbGFzc0NhbGxDaGVjayh0aGlzLHQpLChlPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsX2dldFByb3RvdHlwZU9mKHQpLmNhbGwodGhpcykpKS5zdGF0ZT12b2lkIDAsZS5wcm9wcz12b2lkIDAsZS5oYW5kbGVQcm94eVRvZ2dsZT1mdW5jdGlvbigpe3ZhciB0PWUucHJvcHMucHJveHlBbGxvY2F0aW9uLHI9ZS5zdGF0ZS5wcm94eU9uO2Uuc2V0U3RhdGUoe3Jlc3BvbnNlOm51bGx9KSxyPygwLF9FeHRlbnNpb24uZGlzYWJsZVByb3h5KSgpLnRoZW4oZnVuY3Rpb24oKXtlLnNldFN0YXRlKHtwcm94eU9uOiExLHJlc3BvbnNlOntzdWNjZXNzOiEwLG1lc3NhZ2VzOltcIldlJ3ZlIGRpc2FibGVkIHRoZSBXcmFwQVBJIHByb3h5IGFuZCByZXN0b3JlZCB5b3VyIG9yaWdpbmFsIGNvbm5lY3Rpb24gc2V0dGluZ3NcIl19fSl9KS5jYXRjaChmdW5jdGlvbih0KXtfQ29uZmlnLmRlZmF1bHQuZGVidWcodCksZS5zZXRTdGF0ZSh7cmVzcG9uc2U6e3N1Y2Nlc3M6ITEsbWVzc2FnZXM6W1wiV2UgaGFkIHNvbWUgdHJvdWJsZSBjaGFuZ2luZyB5b3VyIHByb3h5IHNldHRpbmdzXCJdfX0pfSk6dCYmKGUuc2V0U3RhdGUoe2xvYWRpbmc6ITB9KSwoMCxfRXh0ZW5zaW9uLmVuYWJsZVByb3h5KSh0KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuKDAsX0Jyb3dzZXIuY2hlY2tDb25uZWN0aXZpdHkpKCl9KS50aGVuKGZ1bmN0aW9uKCl7ZS5zZXRTdGF0ZSh7bG9hZGluZzohMSxwcm94eU9uOiEwLHJlc3BvbnNlOntzdWNjZXNzOiEwLG1lc3NhZ2VzOltfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLHtrZXk6MH0sXCJDaHJvbWUgaXMgbm93IHVzaW5nIHlvdXIgV3JhcEFQSSBwcm94eTsgbmF2aWdhdGUgdG9cIixcIiBcIixfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYVwiLHtocmVmOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL3Byb3h5L2NhcHR1cmU/c2hvd0luc3RydWN0aW9ucz10cnVlXCIpfSxcIldyYXBBUEkncyBwcm94eSBjYXB0dXJlIHBhZ2VcIiksXCIgXCIsXCJ0byBzdGFydCB2aWV3aW5nIHJlcXVlc3RzIGFuZCB0dXJuaW5nIHRoZW0gaW50byBBUElzLlwiKV19fSl9KS5jYXRjaChmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS5lcnJvcih0LnN0YWNrKSwoMCxfRXh0ZW5zaW9uLmRpc2FibGVQcm94eSkoKS50aGVuKGZ1bmN0aW9uKCl7ZS5zZXRTdGF0ZSh7bG9hZGluZzohMSxwcm94eU9uOiExLHJlc3BvbnNlOntzdWNjZXNzOiExLG1lc3NhZ2VzOltfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2tleTowfSxcIldlIGNhbid0IHR1cm4gb24gdGhlIHByb3h5IHlldDsgcGxlYXNlIGZpcnN0XCIsXCIgXCIsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImFcIix7aHJlZjpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9wcm94eVwiKSx0YXJnZXQ6XCJfYmxhbmtcIn0sXCJpbnN0YWxsIHRoZSBXcmFwQVBJIHByb3h5IHJvb3QgY2VydGlmaWNhdGVcIiksXCIgXCIsXCJzbyB0aGF0IHRoZSBwcm94eSBjYW4gcHJvcGVybHkgc2hvdyB5b3UgeW91ciBIVFRQUyByZXF1ZXN0cy5cIildfX0pfSl9KSl9LGUuaGFuZGxlQ3JlYXRlQnV0dG9uQ2xpY2s9ZnVuY3Rpb24oKXswPT09ZS5nZXRFeHRyYWN0b3JzKCkubGVuZ3RoP2UuaGFuZGxlQ3JlYXRlRXh0cmFjdG9yKCk6ZS5zZXRTdGF0ZSh7c2hvd0FkZFRvRXh0cmFjdG9yOiEwfSl9LGUuaGFuZGxlQ3JlYXRlRXh0cmFjdG9yPWZ1bmN0aW9uKCl7KDAsX0V4dGVuc2lvbi5nZXRDdXJyZW50VGFiRGF0YSkoKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybigwLF9FeHRlbnNpb24uc2VuZFRvRXh0cmFjdG9yKShlKX0pfSxlLmhhbmRsZUFkZFRvRXh0cmFjdG9yPWZ1bmN0aW9uKHQpe3ZhciByPXQudXNlcm5hbWUsYT10LnJlcG9zaXRvcnksbj10Lm5hbWU7KDAsX0V4dGVuc2lvbi5nZXRDdXJyZW50VGFiRGF0YSkoKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBvPXtuYW1lOigwLF9tb21lbnQuZGVmYXVsdCkoKS5mb3JtYXQoXCJNL0QgaDptbWFcIikscmVzcG9uc2VEYXRhOntyZXNwb25zZXM6W3tyZXF1ZXN0Ont1cmk6e2hyZWY6dC51cmx9fSxib2R5OnQuaHRtbH1dfX07cmV0dXJuIGUuc2V0U3RhdGUoe2V4dHJhY3RvckxvYWRpbmc6ITAsZXh0cmFjdG9yUmVzcG9uc2U6bnVsbH0pLF9BUElTdG9yYWdlLmRlZmF1bHQuYWRkQ2FwdHVyZShyLGEsbixvKS50aGVuKGZ1bmN0aW9uKHQpeygwLF9OZXdVdGlscy5nZXRUaGVuKShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpLFwiZXh0cmFjdG9yUmVzcG9uc2VcIixcImV4dHJhY3RvckxvYWRpbmdcIikodCksdC5zdWNjZXNzJiZjaHJvbWUudGFicy5jcmVhdGUoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9leHRyYWN0L1wiKS5jb25jYXQocixcIi9cIikuY29uY2F0KGEsXCIvXCIpLmNvbmNhdChuLFwiLzAuMC4wP3Nob3dMYXN0VGVzdENhc2U9dHJ1ZVwiKX0pfSkuY2F0Y2goKDAsX05ld1V0aWxzLmdldENhdGNoKShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpLFwiZXh0cmFjdG9yUmVzcG9uc2VcIixcImV4dHJhY3RvckxvYWRpbmdcIikpfSl9LGUuc3RhdGU9e3Byb3h5T246bnVsbCxyZXNwb25zZTpudWxsLGxvYWRpbmc6ITEsc2hvd0FkZFRvRXh0cmFjdG9yOiExLGV4dHJhY3RvckxvYWRpbmc6ITEsZXh0cmFjdG9yUmVzcG9uc2U6bnVsbH0sZX1yZXR1cm4gX2luaGVyaXRzKHQsX3JlYWN0LmRlZmF1bHQuUHVyZUNvbXBvbmVudCksX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJjb21wb25lbnRXaWxsTW91bnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLnByb3BzLnByb3h5QWxsb2NhdGlvbjt0JiYoMCxfRXh0ZW5zaW9uLmlzUHJveHlFbmFibGVkKSh0KS50aGVuKGZ1bmN0aW9uKHQpe2Uuc2V0U3RhdGUoe3Byb3h5T246dH0pfSksdGhpcy5wcm9wcy5yZWZyZXNoQVBJRWxlbWVudHMoKX19LHtrZXk6XCJnZXRFeHRyYWN0b3JzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnZhbHVlcyh0aGlzLnByb3BzLmFwaUVsZW1lbnRzKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJleHRyYWN0b3JcIj09PWUudHlwZX0pfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcm9wcyx0PWUubG9nb3V0LHI9ZS5wcm94eUFsbG9jYXRpb24sYT1lLmZlYXR1cmVGbGFncyxuPWUuYXBpRWxlbWVudHNMb2FkaW5nLG89dGhpcy5wcm9wcy51c2VybmFtZSxsPXRoaXMuc3RhdGUscz1sLnByb3h5T24sYz1sLnJlc3BvbnNlLGk9bC5sb2FkaW5nLHU9bC5zaG93QWRkVG9FeHRyYWN0b3IsZj1sLmV4dHJhY3RvckxvYWRpbmcscD1sLmV4dHJhY3RvclJlc3BvbnNlLGQ9dGhpcy5nZXRFeHRyYWN0b3JzKCk7cmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiY29udGFpbmVyIHdhLXBvcHVwLW1haW5cIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJwdWxsLXJpZ2h0IHdhLXRvcDIwXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJhXCIse2hyZWY6XCIjbG9nb3V0XCIsb25DbGljazp0fSxcIlNpZ24gb3V0XCIpKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaDNcIixudWxsLFwiVXNpbmcgV3JhcEFQSVwiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInBhbmVsLWdyb3VwXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwicGFuZWwgcGFuZWwtZGVmYXVsdFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYVwiLHtocmVmOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FwaXNcIiksdGFyZ2V0OlwiX2JsYW5rXCIsY2xhc3NOYW1lOlwicGFuZWwtaGVhZGluZyB3YS1oZWFkZXItdmFsaWduLW1pZCB3YS1ob3Zlci1saW5rXCJ9LFwiR28gdG8gV3JhcEFQSSB0byB2aWV3IHlvdXIgZXhpc3RpbmcgQVBJc1wiLFwiIFwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImZhIGZhLWV4dGVybmFsLWxpbmtcIn0pKSksYS5leHRyYWN0b3ImJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1BhbmVsLmRlZmF1bHQse2NvbGxhcHNpYmxlOiEwLGRlZmF1bHRFeHBhbmRlZDohMCxsZWZ0OlwiRXh0cmFjdCBkYXRhIHdpdGggV3JhcEFQSSBFeHRyYWN0b3JcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJwYW5lbC1ib2R5XCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwidGV4dC1jZW50ZXIgd2EtYm90dG9tMTBcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQ29sbGFwc2UuZGVmYXVsdCx7aW46dX0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLHtjbGFzc05hbWU6XCJidG4gYnRuLXByaW1hcnlcIix0eXBlOlwiYnV0dG9uXCIsb25DbGljazp0aGlzLmhhbmRsZUNyZWF0ZUV4dHJhY3RvcixkaXNhYmxlZDpmfSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaVwiLHtjbGFzc05hbWU6XCJmYSBmYS1wbHVzXCJ9KSxcIiBDcmVhdGUgbmV3XCIpLFwiIFwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0FQSUVsZW1lbnRTZWxlY3QuZGVmYXVsdCx7YnV0dG9uOiEwLHNlYXJjaGFibGU6ITAscHVsbFJpZ2h0OiEwLGJzU3R5bGU6XCJwcmltYXJ5XCIsZGVmYXVsdExhYmVsOmY/X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInNwYW5cIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gZmEtZndcIn0pLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIse2NsYXNzTmFtZTpcInNyLW9ubHlcIn0sXCJMb2FkaW5nXCIpLFwiIEFkZCB0byBleGlzdGluZy4uLlwiKTpcIkFkZCB0byBleGlzdGluZy4uLlwiLHVzZXJuYW1lOm8sYXBpRWxlbWVudHM6ZCxvbkNoYW5nZTp0aGlzLmhhbmRsZUFkZFRvRXh0cmFjdG9yLGRpc2FibGVkOmZ9KSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0NvbGxhcHNlLmRlZmF1bHQse2luOiF1fSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIse2NsYXNzTmFtZTpcImJ0biBidG4tcHJpbWFyeVwiLG9uQ2xpY2s6dGhpcy5oYW5kbGVDcmVhdGVCdXR0b25DbGljayxkaXNhYmxlZDpuLHR5cGU6XCJidXR0b25cIn0sXCJTZW5kIHRoaXMgcGFnZSB0byBXcmFwQVBJIEV4dHJhY3RvclwiKSkpKSwoMCxfTmV3VXRpbHMucmVuZGVyUmVzcG9uc2UpKHApLFwiV2FudCB0byBqdXN0IGV4dHJhY3QgZGF0YSBmcm9tIHRoaXMgcGFnZSBhbmQgcGFnZXMgbGlrZSB0aGlzPyBVc2UgdGhlIFdyYXBBUEkgRXh0cmFjdG9yIHRvIGRlZmluZSBleHRyYWN0aW9uIHJ1bGVzLCBhbmQgZXhwb3J0IHRvIGEgSlNPTiBmaWxlIG9yIGEgQ1NWLlwiKSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1BhbmVsLmRlZmF1bHQse2NvbGxhcHNpYmxlOiEwLGRlZmF1bHRFeHBhbmRlZDohMCxsZWZ0OlwiVXNlIFdyYXBBUEkgaW4gQ2hyb21lIERldlRvb2xzXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwicGFuZWwtYm9keVwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9DaHJvbWVJbnN0cnVjdGlvbnMuZGVmYXVsdCxudWxsKSkpKSxyJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9QYW5lbC5kZWZhdWx0LHtjb2xsYXBzaWJsZTohMCxkZWZhdWx0RXhwYW5kZWQ6ITAsbGVmdDpcIlVzZSBXcmFwQVBJIFByb3h5IHRvIGNhcHR1cmUgcmVxdWVzdHNcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJwYW5lbC1ib2R5XCJ9LG51bGwhPXMmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JjU3dpdGNoLmRlZmF1bHQse2NoZWNrZWQ6cyxvbkNoYW5nZTp0aGlzLmhhbmRsZVByb3h5VG9nZ2xlfSksaSYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlcIix7Y2xhc3NOYW1lOlwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBmYS1md1wifSksYz9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcIndhLXRvcDEwXCJ9LCgwLF9OZXdVdGlscy5yZW5kZXJSZXNwb25zZSkoYykpOm51bGwpKSkpKX19XSksdH0oKTtQb3B1cFBhZ2UucHJvcFR5cGVzPXtwcm94eUFsbG9jYXRpb246X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLm9iamVjdCxsb2dvdXQ6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxmZWF0dXJlRmxhZ3M6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLm9iamVjdCxhcGlFbGVtZW50czpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYXJyYXlPZihfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMub2JqZWN0KS5pc1JlcXVpcmVkLHJlZnJlc2hBUElFbGVtZW50czpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLHVzZXJuYW1lOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5zdHJpbmd9O3ZhciBfZGVmYXVsdD0oMCxfQVBJRWxlbWVudHMuY29ubmVjdCkoKSgoMCxfQXV0aC5jb25uZWN0KSgpKFBvcHVwUGFnZSkpO2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9sb2Rhc2g9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoXCIpKSxfSW1tdXRhYmxlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL0ltbXV0YWJsZVwiKSksX1V0aWxpdHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanMvVXRpbGl0eVwiKSksX1R1dG9yaWFsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL3JlZHV4L1R1dG9yaWFsXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoZSl7cmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhlKXx8X2l0ZXJhYmxlVG9BcnJheShlKXx8X25vbkl0ZXJhYmxlU3ByZWFkKCl9ZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpfWZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoZSl7aWYoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChlKXx8XCJbb2JqZWN0IEFyZ3VtZW50c11cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSlyZXR1cm4gQXJyYXkuZnJvbShlKX1mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoZSl7aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciB0PTAsYT1uZXcgQXJyYXkoZS5sZW5ndGgpO3Q8ZS5sZW5ndGg7dCsrKWFbdF09ZVt0XTtyZXR1cm4gYX19ZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZSl7ZSYmZS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbihlKXtlJiZlLnN0b3BQcm9wYWdhdGlvbigpfWZ1bmN0aW9uIGpvaW5QYXRoKGUsdCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/KGU9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplLmpvaW4oXCIuXCIpLFwiXCIuY29uY2F0KGUsXCIuXCIpLmNvbmNhdCh0KSk6dCBpbnN0YW5jZW9mIEFycmF5PyhlPWUgaW5zdGFuY2VvZiBBcnJheT9lOmUuc3BsaXQoXCIuXCIpKS5jb25jYXQodCk6bnVsbH1mdW5jdGlvbiB1cGRhdGVGb3JtRmllbGRXaXRoUHJlZml4KGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGEsbCxyKXtyZXR1cm4gYT1qb2luUGF0aCh0LGEpLHVwZGF0ZUZvcm1GaWVsZChlLGEsbCxyKX19ZnVuY3Rpb24gdXBkYXRlRm9ybUZpZWxkKGUsdCxhLGwpe3ZhciByPWUuX3VwZGF0ZUZvcm1GaWVsZENhY2hlO3J8fChlLl91cGRhdGVGb3JtRmllbGRDYWNoZT17fSxyPWUuX3VwZGF0ZUZvcm1GaWVsZENhY2hlKTt2YXIgbj1KU09OLnN0cmluZ2lmeShbdCxhLGxdKTtpZihyW25dKXJldHVybiByW25dO3ZhciBvPWZ1bmN0aW9uKHIpe3ZhciBuPXImJnIudGFyZ2V0P3IudGFyZ2V0LnZhbHVlOnI7dHJ5e1wiaW50XCI9PT1hP249cGFyc2VJbnQobiwxMCk6XCJmbG9hdFwiPT09YSYmKG49cGFyc2VGbG9hdChuKSl9Y2F0Y2goZSl7cmV0dXJuIHIucHJldmVudERlZmF1bHQmJnIucHJldmVudERlZmF1bHQoKSxlfXZhciBvPWUuc3RhdGU7cmV0dXJuIG89c2V0TWl4ZWQobyx0LG4pLGwmJihvPXNldE1peGVkKG8sbCwhMCkpLGUuc2V0U3RhdGUobyksbnVsbH07cmV0dXJuIHJbbl09byxvfWZ1bmN0aW9uIHRvZ2dsZShlLHQsYSl7YSYmYS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBsPV9sb2Rhc2guZGVmYXVsdC5nZXQodGhpcy5zdGF0ZSxlKT09PXQ/bnVsbDp0LHI9X2xvZGFzaC5kZWZhdWx0LmNsb25lRGVlcCh0aGlzLnN0YXRlKTtfbG9kYXNoLmRlZmF1bHQuc2V0KHIsZSxsKSx0aGlzLnNldFN0YXRlKHIpfWZ1bmN0aW9uIHRvZ2dsZUNoZWNrYm94KGUsdCl7cmV0dXJuIHRvZ2dsZUJvb2xUcmFja2luZ0NoYW5nZXMuY2FsbCh0aGlzLGUsdCxudWxsKX1mdW5jdGlvbiB0b2dnbGVDaGVja2JveFdpdGhQcmVmaXgoZSx0LGEpe3JldHVybiB0b2dnbGVDaGVja2JveC5jYWxsKHRoaXMsam9pblBhdGgoZSx0KSxhKX1mdW5jdGlvbiB0b2dnbGVCb29sKGUsdCl7cmV0dXJuIHRvZ2dsZUJvb2xUcmFja2luZ0NoYW5nZXMuY2FsbCh0aGlzLGUsbnVsbCx0KX1mdW5jdGlvbiBzcGxpdE11dGFibGVJbW11dGFibGUoZSx0KXtcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9dC5zcGxpdChcIi5cIikpO2Zvcih2YXIgYT1lLGw9W10scj1bXSxuPTA7biE9PXQubGVuZ3RoO24rKyl7dmFyIG89dFtuXTtpZihyLnB1c2gobyksX0ltbXV0YWJsZS5kZWZhdWx0Lkl0ZXJhYmxlLmlzSXRlcmFibGUoYVtvXSkpe2w9dC5zbGljZShuKzEpO2JyZWFrfX1yZXR1cm57bXV0YWJsZTpyLGltbXV0YWJsZTpsfX1mdW5jdGlvbiBzZXRNaXhlZChlLHQsYSxsKXt2YXIgcj1zcGxpdE11dGFibGVJbW11dGFibGUoZSx0KSxuPSEhci5tdXRhYmxlLmxlbmd0aCxvPSEhci5pbW11dGFibGUubGVuZ3RoLGk9bj9fbG9kYXNoLmRlZmF1bHQuZ2V0KGUsci5tdXRhYmxlKTplLHU9bz9pLnNldEluKHIuaW1tdXRhYmxlLGEpOmE7aWYobil7dmFyIHM9W107ZT1fbG9kYXNoLmRlZmF1bHQuY2xvbmUoZSk7Zm9yKHZhciBkPTA7ZCE9PXIubXV0YWJsZS5sZW5ndGgtMTtkKyspe3ZhciBmPXIubXV0YWJsZVtkXTtzLnB1c2goZiksX2xvZGFzaC5kZWZhdWx0LnNldChlLHMsX2xvZGFzaC5kZWZhdWx0LmNsb25lKF9sb2Rhc2guZGVmYXVsdC5nZXQoZSxzKSkpfXJldHVybiBsP19sb2Rhc2guZGVmYXVsdC5zZXQoZSxyLm11dGFibGUsdSk6X2xvZGFzaC5kZWZhdWx0LnNldFdpdGgoZSxyLm11dGFibGUsdSxsKSxlfXJldHVybiB1fWZ1bmN0aW9uIGdldE1peGVkKGUsdCl7dmFyIGE9c3BsaXRNdXRhYmxlSW1tdXRhYmxlKGUsdCksbD0hIWEubXV0YWJsZS5sZW5ndGgscj0hIWEuaW1tdXRhYmxlLmxlbmd0aCxuPWw/X2xvZGFzaC5kZWZhdWx0LmdldChlLGEubXV0YWJsZSk6ZTtyZXR1cm4gcj9uLmdldEluKGEuaW1tdXRhYmxlKTpufWZ1bmN0aW9uIHRvZ2dsZUJvb2xUcmFja2luZ0NoYW5nZXMoZSx0LGEpe2EmJmEucHJldmVudERlZmF1bHQmJmEucHJldmVudERlZmF1bHQoKTt2YXIgbD10aGlzLnN0YXRlO2w9c2V0TWl4ZWQobCxlLCFnZXRNaXhlZChsLGUpKSx0JiYodCBpbnN0YW5jZW9mIEFycmF5fHxcInN0cmluZ1wiPT10eXBlb2YgdCkmJihsPXNldE1peGVkKGwsdCwhMCkpLHRoaXMuc2V0U3RhdGUobCl9ZnVuY3Rpb24gc2V0U3RhdGUoZSx0LGEpe2EmJmEucHJldmVudERlZmF1bHQmJmEucHJldmVudERlZmF1bHQoKTt2YXIgbD1zZXRNaXhlZCh0aGlzLnN0YXRlLGUsdCk7dGhpcy5zZXRTdGF0ZShsKX1mdW5jdGlvbiBzZXRTdGF0ZVJhZGlvKGUsdCl7cmV0dXJuIHNldFN0YXRlLmNhbGwodGhpcyxlLHQudGFyZ2V0LnZhbHVlKX1mdW5jdGlvbiBzZXRTdGF0ZUNoZWNrYm94KGUsdCl7cmV0dXJuIHNldFN0YXRlLmNhbGwodGhpcyxlLHQudGFyZ2V0LmNoZWNrZWQpfWZ1bmN0aW9uIGFkZEJyZWFrcyhlLHQpe3Q9dHx8L1svJl0vO3ZhciBhPWUuc3BsaXQodCksbD1hLm1hcChmdW5jdGlvbihlLHQpe3JldHVybiB0PT09YS5sZW5ndGgtMT9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLHtrZXk6dH0sZSk6X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInNwYW5cIix7a2V5OnR9LGUsXCIvXCIsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcIndiclwiLG51bGwpKX0pO3JldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLG51bGwsbCl9ZnVuY3Rpb24gZGVmYXVsdERvbmVUb1ZhcmlhYmxlKGUsdCl7dmFyIGE9e2xvYWRpbmc6X2xvZGFzaC5kZWZhdWx0LmdldChlLFwibG9hZGluZ1wiKXx8XCJsb2FkaW5nXCIscmVzcG9uc2U6X2xvZGFzaC5kZWZhdWx0LmdldChlLFwicmVzcG9uc2VcIil8fFwicmVzcG9uc2VcIn0sbD17fTtfbG9kYXNoLmRlZmF1bHQuc2V0KGwsYS5sb2FkaW5nLCExKSxfbG9kYXNoLmRlZmF1bHQuc2V0KGwsYS5yZXNwb25zZSx0KSx0aGlzLnNldFN0YXRlKGwpfWZ1bmN0aW9uIGRlZmF1bHREb25lKGUpe2RlZmF1bHREb25lVG9WYXJpYWJsZS5jYWxsKHRoaXMsbnVsbCxlKX1mdW5jdGlvbiBkZWZhdWx0RmFpbFRvVmFyaWFibGUoZSx0KXt2YXIgYT1fVXRpbGl0eS5kZWZhdWx0LmdldERlZmF1bHRFcnJvcih0KSxsPXtsb2FkaW5nOl9sb2Rhc2guZGVmYXVsdC5nZXQoZSxcImxvYWRpbmdcIil8fFwibG9hZGluZ1wiLHJlc3BvbnNlOl9sb2Rhc2guZGVmYXVsdC5nZXQoZSxcInJlc3BvbnNlXCIpfHxcInJlc3BvbnNlXCJ9LHI9e307X2xvZGFzaC5kZWZhdWx0LnNldChyLGwubG9hZGluZywhMSksX2xvZGFzaC5kZWZhdWx0LnNldChyLGwucmVzcG9uc2UsX2xvZGFzaC5kZWZhdWx0LmlzRW1wdHkodCk/YTp0KSx0aGlzLnNldFN0YXRlKHIpfWZ1bmN0aW9uIGRlZmF1bHRGYWlsKGUpe2RlZmF1bHRGYWlsVG9WYXJpYWJsZS5jYWxsKHRoaXMsbnVsbCxlKX1mdW5jdGlvbiBkZWZhdWx0UmVuZGVyTWVzc2FnZXMoZSx0KXtyZXR1cm4gZSYmZS5tZXNzYWdlcyYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJhbGVydCBhbGVydC1cIi5jb25jYXQoZS5zdWNjZXNzP1wic3VjY2Vzc1wiOlwiZGFuZ2VyXCIpLmNvbmNhdCh0P1wiIFwiLmNvbmNhdCh0KTpcIlwiKX0sZS5tZXNzYWdlcy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJwXCIse2tleTplfSxlKX0pKX1mdW5jdGlvbiBtZW1vaXplKGUpe3JldHVybiBlLl9tZW1vaXplZENhY2hlPXt9LGZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsYT1uZXcgQXJyYXkodCksbD0wO2w8dDtsKyspYVtsXT1hcmd1bWVudHNbbF07dmFyIHI9SlNPTi5zdHJpbmdpZnkoYSksbj1lLl9tZW1vaXplZENhY2hlO3JldHVybiBuW3JdfHwobltyXT1lLmFwcGx5KHRoaXMsYSkpLG5bcl19fUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kTWVtb2l6ZWQ9ZnVuY3Rpb24oZSl7dGhpcy5fYmluZE1lbW9pemVkQ2FjaGV8fCh0aGlzLl9iaW5kTWVtb2l6ZWRDYWNoZT17fSk7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsYT1uZXcgQXJyYXkodD4xP3QtMTowKSxsPTE7bDx0O2wrKylhW2wtMV09YXJndW1lbnRzW2xdO3ZhciByPUpTT04uc3RyaW5naWZ5KGEpO3JldHVybiB0aGlzLl9iaW5kTWVtb2l6ZWRDYWNoZVtyXXx8KHRoaXMuX2JpbmRNZW1vaXplZENhY2hlW3JdPXRoaXMuYmluZC5hcHBseSh0aGlzLF90b0NvbnN1bWFibGVBcnJheShbZV0uY29uY2F0KGF8fFtdKSkpKSx0aGlzLl9iaW5kTWVtb2l6ZWRDYWNoZVtyXX07dmFyIFJlYWN0VXRpbHM9e3ByZXZlbnREZWZhdWx0OnByZXZlbnREZWZhdWx0LHN0b3BQcm9wYWdhdGlvbjpzdG9wUHJvcGFnYXRpb24sdXBkYXRlRm9ybUZpZWxkOnVwZGF0ZUZvcm1GaWVsZCx1cGRhdGVGb3JtRmllbGRXaXRoUHJlZml4OnVwZGF0ZUZvcm1GaWVsZFdpdGhQcmVmaXgsYWRkQnJlYWtzOmFkZEJyZWFrcyx0b2dnbGU6dG9nZ2xlLHNldE1peGVkOnNldE1peGVkLHNldFN0YXRlOnNldFN0YXRlLHNldFN0YXRlUmFkaW86c2V0U3RhdGVSYWRpbyxzZXRTdGF0ZUNoZWNrYm94OnNldFN0YXRlQ2hlY2tib3gsdG9nZ2xlQ2hlY2tib3g6dG9nZ2xlQ2hlY2tib3gsdG9nZ2xlQ2hlY2tib3hXaXRoUHJlZml4OnRvZ2dsZUNoZWNrYm94V2l0aFByZWZpeCx0b2dnbGVCb29sOnRvZ2dsZUJvb2wsZGVmYXVsdERvbmVUb1ZhcmlhYmxlOmRlZmF1bHREb25lVG9WYXJpYWJsZSxkZWZhdWx0RmFpbFRvVmFyaWFibGU6ZGVmYXVsdEZhaWxUb1ZhcmlhYmxlLGRlZmF1bHREb25lOmRlZmF1bHREb25lLGRlZmF1bHRGYWlsOmRlZmF1bHRGYWlsLGRlZmF1bHRSZW5kZXJNZXNzYWdlczpkZWZhdWx0UmVuZGVyTWVzc2FnZXMsY29ubmVjdFR1dG9yaWFsU3RlcDpfVHV0b3JpYWwuZGVmYXVsdC5jb25uZWN0VHV0b3JpYWxTdGVwLGNvbm5lY3RMb2NhbFR1dG9yaWFsU3RlcDpfVHV0b3JpYWwuZGVmYXVsdC5jb25uZWN0TG9jYWxUdXRvcmlhbFN0ZXAsbWVtb2l6ZTptZW1vaXplfSxfZGVmYXVsdD1SZWFjdFV0aWxzO2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9VdGlsaXR5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL1V0aWxpdHlcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgVGFicz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIGUscjtfY2xhc3NDYWxsQ2hlY2sodGhpcyx0KTtmb3IodmFyIG89YXJndW1lbnRzLmxlbmd0aCxuPW5ldyBBcnJheShvKSxhPTA7YTxvO2ErKyluW2FdPWFyZ3VtZW50c1thXTtyZXR1cm4ocj1fcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLChlPV9nZXRQcm90b3R5cGVPZih0KSkuY2FsbC5hcHBseShlLFt0aGlzXS5jb25jYXQobikpKSkub25DaGFuZ2U9ZnVuY3Rpb24oZSx0KXt0LnByZXZlbnREZWZhdWx0KCksci5wcm9wcy5vbkNoYW5nZShlKX0sci5kb05vdGhpbmdDYWxsYmFjaz1mdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKX0scn1yZXR1cm4gX2luaGVyaXRzKHQsX3JlYWN0LmRlZmF1bHQuQ29tcG9uZW50KSxfY3JlYXRlQ2xhc3ModCxbe2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PV9VdGlsaXR5LmRlZmF1bHQubm9ybWFsaXplT3B0aW9ucyh0aGlzLnByb3BzLnRhYnMpLHI9dGhpcy5wcm9wcy52YWx1ZSxvPXRoaXMucHJvcHMuY2xhc3NOYW1lfHxcIm5hdiBuYXYtdGFic1wiLG49dGhpcy5wcm9wcy5kaXNhYmxlZFRhYnM7cmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLHtjbGFzc05hbWU6byxyb2xlOlwibmF2aWdhdGlvblwifSx0Lm1hcChmdW5jdGlvbih0KXt2YXIgbz10LnZhbHVlLGE9dC5sYWJlbCxpPW51bGwscz1lLm9uQ2hhbmdlLmJpbmRNZW1vaXplZChlLG8pO3JldHVybiByPT09bz9pPVwiYWN0aXZlXCI6biYmLTEhPT1uLmluZGV4T2YobykmJihpPVwiZGlzYWJsZWRcIixzPWUuZG9Ob3RoaW5nQ2FsbGJhY2spLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLHtrZXk6byxjbGFzc05hbWU6aSxcImRhdGEtdGFiXCI6b30sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImFcIix7aHJlZjpcIiNcIixvbkNsaWNrOnN9LGEpKX0pKX19XSksdH0oKTtUYWJzLnByb3BUeXBlcz17dGFiczpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMub25lT2ZUeXBlKFtfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMub2JqZWN0LF9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5hcnJheV0pLmlzUmVxdWlyZWQsdmFsdWU6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLm9uZU9mVHlwZShbX3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLnN0cmluZyxfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMubnVtYmVyLF9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5ib29sXSksb25DaGFuZ2U6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxkaXNhYmxlZFRhYnM6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLm9uZU9mVHlwZShbX3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmFycmF5LF9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5vYmplY3RdKSxjbGFzc05hbWU6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLnN0cmluZ307dmFyIF9kZWZhdWx0PVRhYnM7ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX05ld1V0aWxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vTmV3VXRpbHNcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgUHJvcFR5cGVzPV9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcyxWaWRlb0NvbnRhaW5lcj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIGUscjtfY2xhc3NDYWxsQ2hlY2sodGhpcyx0KTtmb3IodmFyIG89YXJndW1lbnRzLmxlbmd0aCxuPW5ldyBBcnJheShvKSxpPTA7aTxvO2krKyluW2ldPWFyZ3VtZW50c1tpXTtyZXR1cm4ocj1fcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLChlPV9nZXRQcm90b3R5cGVPZih0KSkuY2FsbC5hcHBseShlLFt0aGlzXS5jb25jYXQobikpKSkuc3RhdGU9e3Nob3dWaWRlbzohMX0sci5wbGF5PWZ1bmN0aW9uKCl7ci5zZXRTdGF0ZSh7c2hvd1ZpZGVvOiEwfSl9LHJ9cmV0dXJuIF9pbmhlcml0cyh0LF9yZWFjdC5kZWZhdWx0LlB1cmVDb21wb25lbnQpLF9jcmVhdGVDbGFzcyh0LFt7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnByb3BzLnlvdXR1YmVJZCx0PXRoaXMucHJvcHMuaW1hZ2VTcmMscj10aGlzLnN0YXRlLnNob3dWaWRlbztyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJ3YS1wYWQyMFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcIndhLWJveC1zaGFkb3cyMFwifSxyP19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwid2EtdmlkZW8tY29udGFpbmVyXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIix7dGl0bGU6XCJZb3V0dWJlIHZpZGVvXCIsd2lkdGg6XCI1NjBcIixoZWlnaHQ6XCIzMTVcIixzcmM6XCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC9cIi5jb25jYXQoZSxcIj9yZWw9MCZhdXRvcGxheT0xXCIpLGZyYW1lQm9yZGVyOlwiMFwiLGFsbG93RnVsbFNjcmVlbjohMH0pKTpfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYVwiLHtocmVmOlwiI3BsYXlWaWRlb1wiLG9uQ2xpY2s6X05ld1V0aWxzLmRlZmF1bHQuc2V0U3RhdGUodGhpcyxcInNob3dWaWRlb1wiLCEwLCEwKX0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImltZ1wiLHtzcmM6dCxhbHQ6XCJDbGljayB0byBwbGF5IFdyYXBBUEkgKyBSZWRkaXQgdmlkZW9cIixjbGFzc05hbWU6XCJ3YS1mdWxsLXdpZHRoXCJ9KSkpKX19XSksdH0oKTtWaWRlb0NvbnRhaW5lci5wcm9wVHlwZXM9e3lvdXR1YmVJZDpQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsaW1hZ2VTcmM6UHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkfTt2YXIgX2RlZmF1bHQ9VmlkZW9Db250YWluZXI7ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD13aXRoQ2hyb21lO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9DaHJvbWU9cmVxdWlyZShcIi4uLy4uL2pzL0Nocm9tZVwiKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBfdHlwZW9mKGUpe3JldHVybihfdHlwZW9mPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBfZXh0ZW5kcygpe3JldHVybihfZXh0ZW5kcz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgcj1hcmd1bWVudHNbdF07Zm9yKHZhciBuIGluIHIpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIsbikmJihlW25dPXJbbl0pfXJldHVybiBlfSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbil9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX1mdW5jdGlvbiB3aXRoQ2hyb21lKGUpe3JldHVybiBmdW5jdGlvbih0KXtmdW5jdGlvbiByKCl7dmFyIGUsdDtfY2xhc3NDYWxsQ2hlY2sodGhpcyxyKTtmb3IodmFyIG49YXJndW1lbnRzLmxlbmd0aCxvPW5ldyBBcnJheShuKSxpPTA7aTxuO2krKylvW2ldPWFyZ3VtZW50c1tpXTtyZXR1cm4odD1fcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLChlPV9nZXRQcm90b3R5cGVPZihyKSkuY2FsbC5hcHBseShlLFt0aGlzXS5jb25jYXQobykpKSkuc3RhdGU9e2lzQ2hyb21lOiExLGlzRXh0ZW5zaW9uSW5zdGFsbGVkOiExfSx0fXJldHVybiBfaW5oZXJpdHMocixfcmVhY3QuZGVmYXVsdC5QdXJlQ29tcG9uZW50KSxfY3JlYXRlQ2xhc3Mocixbe2tleTpcImNvbXBvbmVudERpZE1vdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNldFN0YXRlKHtpc0Nocm9tZTooMCxfQ2hyb21lLmlzQ2hyb21lKSgpLGlzRXh0ZW5zaW9uSW5zdGFsbGVkOigwLF9DaHJvbWUuaXNFeHRlbnNpb25JbnN0YWxsZWQpKCl9KX19LHtrZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuc3RhdGUscj10LmlzQ2hyb21lLG49dC5pc0V4dGVuc2lvbkluc3RhbGxlZDtyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChlLF9leHRlbmRzKHt9LHRoaXMucHJvcHMse2lzQ2hyb21lOnIsaXNFeHRlbnNpb25JbnN0YWxsZWQ6bn0pKX19XSkscn0oKX0iLCJcInVzZSBzdHJpY3RcIjt2YXIgX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpLF9qc0JlYXV0aWZ5PXJlcXVpcmUoXCJqcy1iZWF1dGlmeVwiKSxfanNvblBvaW50ZXI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwianNvbi1wb2ludGVyXCIpKSxfanNvbnBhdGg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwianNvbnBhdGhcIikpLF9qc2VwPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImpzZXBcIikpLF91cmlqcz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJ1cmlqc1wiKSksX2NoZWVyaW89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiY2hlZXJpb1wiKSksX21vbWVudD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJtb21lbnRcIikpLF9udGxtPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIm50bG1cIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIG93bktleXMoZSx0KXt2YXIgcj1PYmplY3Qua2V5cyhlKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3QmJihuPW4uZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCkuZW51bWVyYWJsZX0pKSxyLnB1c2guYXBwbHkocixuKX1yZXR1cm4gcn1mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciByPW51bGwhPWFyZ3VtZW50c1t0XT9hcmd1bWVudHNbdF06e307dCUyP293bktleXMoT2JqZWN0KHIpLCEwKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe19kZWZpbmVQcm9wZXJ0eShlLHQsclt0XSl9KTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHIpKTpvd25LZXlzKE9iamVjdChyKSkuZm9yRWFjaChmdW5jdGlvbih0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iocix0KSl9KX1yZXR1cm4gZX1mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkoZSx0LHIpe3JldHVybiB0IGluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6cixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09cixlfWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIG1lbW9pemVNUlUoZSx0KXt0PXR8fDE7dmFyIHI9W107cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWFyZ3VtZW50cy5sZW5ndGgsYT1uZXcgQXJyYXkobiksbz0wO288bjtvKyspYVtvXT1hcmd1bWVudHNbb107Zm9yKHZhciB1PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGEpLGk9MDtpIT09ci5sZW5ndGg7aSsrKXt2YXIgcz1yW2ldO2lmKF9sb2Rhc2guZGVmYXVsdC5pc0VxdWFsKHMuYXJncyx1KSlyZXR1cm4gcy5yZXN1bHR9dmFyIGw9ZS5hcHBseSh2b2lkIDAsYSk7cmV0dXJuIHIubGVuZ3RoPj10JiZyLnNoaWZ0KCksci5wdXNoKHthcmdzOnUscmVzdWx0Omx9KSxsfX1tb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93O2Z1bmN0aW9uIHIoZSx0KXt2YXIgcjtpZighKGUgaW5zdGFuY2VvZiBSZWdFeHApJiZcIm9iamVjdFwiPT09X3R5cGVvZihlKSl7aWYoIWUucGF0dGVybilyZXR1cm5bXTt0cnl7ZT1uZXcgUmVnRXhwKGUucGF0dGVybixlLm1vZGlmaWVycyl9Y2F0Y2goZSl7cmV0dXJuW119fWlmKGUuZ2xvYmFsKXtmb3IodmFyIG49W10sYT0wO251bGwhPT0ocj1lLmV4ZWModCkpJiZhKys8MWU0OyluLnB1c2gocik7cmV0dXJuIG59cmV0dXJuIG51bGwhPShyPWUuZXhlYyh0KSk/W3JdOltdfXZhciBuPXtib2R5OlwiXCIsY2hlZXJpbzpudWxsfSxhPXt9O2Z1bmN0aW9uIG8oZSxyKXt2YXIgbz1hW2VdO298fChvPV9jaGVlcmlvLmRlZmF1bHQubG9hZChlKSx0JiYoYVtlXT1vKSksbi5ib2R5PWUsbi5jaGVlcmlvPW87dmFyIHU9W107cmV0dXJuIG8ocikuZWFjaChmdW5jdGlvbigpe3ZhciBlLHQ9byh0aGlzKTt1LnB1c2goe2h0bWw6by5odG1sKHQpLHRleHQ6dC50ZXh0KCksYXR0cmliczp0WzBdLmF0dHJpYnMsdGFnTmFtZTp0LmdldCgwKS50YWdOYW1lLGluZGV4OihlPXRbMF0sZnVuY3Rpb24gZSh0KXtpZighdClyZXR1cm5bXTtmb3IodmFyIHI9MDt0LnByZXZpb3VzU2libGluZzspdD10LnByZXZpb3VzU2libGluZyxyKys7dmFyIG49ZSh0LnBhcmVudCk7cmV0dXJuIG4ucHVzaChyKSxufShlKS5qb2luKFwiLlwiKSl9KX0pLHV9ZnVuY3Rpb24gdShlLHQpe3ZhciByPXQub3V0cHV0cyxuPVtdO2lmKF9sb2Rhc2guZGVmYXVsdC5mb3JPd24ocixmdW5jdGlvbih0LHIpe2Zvcih2YXIgYT10LmRhdGEuY3NzU2VsZWN0b3IsdT1fb2JqZWN0U3ByZWFkKHt9LHQse2RhdGE6X29iamVjdFNwcmVhZCh7fSx0LmRhdGEse251bVRvU2VsZWN0OlwiYWxsXCJ9KX0pLGk9aChlLHUpLHM9X2xvZGFzaC5kZWZhdWx0Lm1hcChvKGUsYSksXCJpbmRleFwiKSxsPTA7bCE9PXMubGVuZ3RoO2wrKyluLnB1c2goe25hbWU6cix2YWx1ZTppW2xdLGluZGV4OnNbbF19KX0pLDA9PT1uLmxlbmd0aClyZXR1cm4gbnVsbDtuLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9ZS5zcGxpdChcIi5cIikubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUludChlLDEwKX0pLG49dC5zcGxpdChcIi5cIikubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUludChlLDEwKX0pLGE9TWF0aC5taW4oci5sZW5ndGgsbi5sZW5ndGgpLG89MDtvIT09YTtvKyspaWYocltvXSE9PW5bb10pcmV0dXJuIHJbb10tbltvXTtyZXR1cm4gci5sZW5ndGgtbi5sZW5ndGh9KGUuaW5kZXgsdC5pbmRleCl9KTtmb3IodmFyIGE9W10sdT17fSxpPTA7aSE9PW4ubGVuZ3RoO2krKyl7dmFyIHM9bltpXTt1W3MubmFtZV0mJihhLnB1c2godSksdT17fSksdVtzLm5hbWVdPXMudmFsdWV9cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5pc0VtcHR5KHUpfHxhLnB1c2godSksYX1mdW5jdGlvbiBpKGUpe3JldHVybihuZXcgX3VyaWpzLmRlZmF1bHQpLnF1ZXJ5KGUpLnF1ZXJ5KCl9ZnVuY3Rpb24gcyhlLHQpe3ZhciByPXQuY3NzU2VsZWN0b3Isbj1bXSxhPV9jaGVlcmlvLmRlZmF1bHQubG9hZChlKTt0cnl7bj1hKHIpfWNhdGNoKGUpe3JldHVybiBudWxsfWlmKDA9PT1uLmxlbmd0aHx8XCJmb3JtXCIhPT1uLmZpcnN0KCkucHJvcChcInRhZ05hbWVcIikudG9Mb3dlckNhc2UoKSlyZXR1cm4gbnVsbDt2YXIgbz1uLmZpcnN0KCksdT1vLmF0dHIoXCJtZXRob2RcIik7dT1fbG9kYXNoLmRlZmF1bHQuaXNTdHJpbmcodSk/dS50b0xvd2VyQ2FzZSgpLnRyaW0oKTpcImdldFwiO3ZhciBpPW8uYXR0cihcImFjdGlvblwiKTtfbG9kYXNoLmRlZmF1bHQuaXNTdHJpbmcoaSl8fChpPVwiXCIpO3ZhciBzPW8uc2VyaWFsaXplQXJyYXkoKSxsPV9sb2Rhc2guZGVmYXVsdC56aXBPYmplY3QoX2xvZGFzaC5kZWZhdWx0Lm1hcChzLFwibmFtZVwiKSxfbG9kYXNoLmRlZmF1bHQubWFwKHMsXCJ2YWx1ZVwiKSksYz17fTtyZXR1cm5cInBvc3RcIj09PXV8fFwicHV0XCI9PT11fHxcImRlbGV0ZVwiPT09dXx8XCJvcHRpb25zXCI9PT11PyhjLnBvc3Q9bCxjLmdldD1uZXcgX3VyaWpzLmRlZmF1bHQoaSkucXVlcnkoITApKTpjLmdldD1zLGN9ZnVuY3Rpb24gbChlLHQpe3ZhciByPXMoZSx0KTtpZighcilyZXR1cm4gbnVsbDt2YXIgbixhPXtwb3N0UGFyYW1zOnIucG9zdD9pKHIucG9zdCk6XCJcIixnZXRQYXJhbXM6ci5nZXQ/aShyLmdldCk6XCJcIn07cmV0dXJuIG49SlNPTi5zdHJpbmdpZnkoYSksXCJmdW5jdGlvblwiPT10eXBlb2YgYnRvYT9idG9hKG4pOkJ1ZmZlci5mcm9tKG4sXCJ1dGY4XCIpLnRvU3RyaW5nKFwiYmFzZTY0XCIpfWZ1bmN0aW9uIGMoZSx0KXtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmlzU3RyaW5nKGUpfHwoZT1KU09OLnN0cmluZ2lmeShlKSksXCJyZWdleFwiPT09dC5tYXRjaEVuZ2luZT9mdW5jdGlvbihlLHQpe3ZhciBuPXQsYT1uLnJlZ2V4LG89YS5wYXR0ZXJuLHU9YS5tb2RpZmllcnMsaT1uZXcgUmVnRXhwKG8sdSkscz0tMSE9PXUuaW5kZXhPZihcImdcIiksbD1bXSxjPWU7cmV0dXJuXCJwcmV0dHlcIj09PW4ubWF0Y2hPbiYmKGM9SShudWxsLGUpKSxvJiYobD1yKGksYykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlW24uZ3JvdXBdfSkpLDA9PT1sLmxlbmd0aD9udWxsOnMmJiFuLmFsbE1hdGNoZXM/bFtuLm1hdGNoXTpzP2w6bFswXX0oZSx0LmRhdGEpOlwiY3NzXCI9PT10Lm1hdGNoRW5naW5lP2Z1bmN0aW9uKGUsdCl7dmFyIHI9dCxuPXIuY3NzU2VsZWN0b3IsYT1bXTt0cnl7YT1vKGUsbil9Y2F0Y2goZSl7cmV0dXJuIG51bGx9XCJmaXJzdFwiPT09ci5udW1Ub1NlbGVjdCYmKGE9YS5zbGljZSgwLDEpKTt2YXIgdT1hLm1hcChmdW5jdGlvbihlKXtpZihcInRleHRcIj09PXIuY2FwdHVyZVR5cGUpcmV0dXJuIGUudGV4dDtpZihcImh0bWxcIj09PXIuY2FwdHVyZVR5cGUpcmV0dXJuIGUuaHRtbDtpZihcImF0dHJpYnV0ZVwiPT09ci5jYXB0dXJlVHlwZSlyZXR1cm4gZS5hdHRyaWJzW3IuYXR0cnNUb1NlbGVjdFswXV07dmFyIHQ9e307cmV0dXJuIHIuYXR0cnNUb1NlbGVjdC5mb3JFYWNoKGZ1bmN0aW9uKHIpe3Rbcl09ZS5hdHRyaWJzW3JdfSksci5vYmplY3RJbmNsdWRlVGV4dCYmKHQuaW5uZXJUZXh0PWUudGV4dCksci5vYmplY3RJbmNsdWRlSHRtbCYmKHQuaW5uZXJIVE1MPWUuaHRtbCksdH0pO3JldHVybiAwPT09dS5sZW5ndGg/bnVsbDpcImZpcnN0XCI9PT1yLm51bVRvU2VsZWN0P3VbMF06dX0oZSx0LmRhdGEpOlwiY29sbGVjdGlvblwiPT09dC5tYXRjaEVuZ2luZT91KGUsdC5kYXRhKTpcImpzb25cIj09PXQubWF0Y2hFbmdpbmU/ZnVuY3Rpb24oZSx0KXt2YXIgcjtpZihMKG51bGwsZSkpcj1NKGUpO2Vsc2V7aWYoIUQobnVsbCxlKSlyZXR1cm4gbnVsbDtyPUpTT04ucGFyc2UoZSl9dmFyIG49dCxhPW4uc2VsZWN0b3JUeXBlLG89bi5qc29uU2VsZWN0b3I7aWYoXCJqc29uUG9pbnRlclwiPT09YSl0cnl7cmV0dXJuIF9qc29uUG9pbnRlci5kZWZhdWx0LmdldChyLG8pfWNhdGNoKGUpe3JldHVybiBudWxsfWVsc2UgaWYoXCJqc29uUGF0aFwiPT09YXx8XCJqc29uUGF0aEZpcnN0T25seVwiPT09YSl7dmFyIHU9W107dHJ5e3U9X2pzb25wYXRoLmRlZmF1bHQucXVlcnkocixvKX1jYXRjaChlKXtyZXR1cm4gbnVsbH1yZXR1cm4gMD09PXUubGVuZ3RoP251bGw6XCJqc29uUGF0aFwiPT09YT91OnVbMF19cmV0dXJuIG51bGx9KGUsdC5kYXRhKTpcImZvcm1cIj09PXQubWF0Y2hFbmdpbmU/bChlLHQuZGF0YSk6bnVsbH1mdW5jdGlvbiBmKGUsdCxyKXt2YXIgbj17fTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmZvckVhY2goZSxmdW5jdGlvbihlLGEpe3ZhciBvPWgocixlLHQpO1wicmVxdWlyZWRNYXRjaFwiIT09ZS50eXBlJiYoblthXT1vKX0pLG59ZnVuY3Rpb24gcChlLHQpe2lmKG51bGw9PWUpcmV0dXJuIGU7aWYodCYmdC50eXBlKXt2YXIgcj1mdW5jdGlvbihlKXt2YXIgcj10LnR5cGUsbj10Lm9wdGlvbnM7c3dpdGNoKHIpe2Nhc2VcInRyaW1cIjpyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZT9fbG9kYXNoLmRlZmF1bHQudHJpbShlKTplO2Nhc2VcImV4dHJhY3ROdW1iZXJcIjppZihcInN0cmluZ1wiPT10eXBlb2YgZSl7dmFyIGE9ZS5tYXRjaCgvXFxkKyhcXC5cXGQrKT8vKTtyZXR1cm4gbnVsbD09PWE/bnVsbDpwYXJzZUZsb2F0KGFbMF0pfXJldHVybiBlO2Nhc2VcImRhdGVcIjp2YXIgbztyZXR1cm4obz1uJiZuLmZvcm1hdD8oMCxfbW9tZW50LmRlZmF1bHQpKGUsbi5mb3JtYXQpOigwLF9tb21lbnQuZGVmYXVsdCkoZSkpLmlzVmFsaWQoKT9vOm51bGw7Y2FzZVwiYm9vbFwiOnJldHVybiEhZX1yZXR1cm4gZX07cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5pc0FycmF5KGUpP2UubWFwKHIpOnIoZSl9cmV0dXJuIGV9ZnVuY3Rpb24gZChlLHQscil7dmFyIG47aWYociYmKFwicmVxdWlyZWRPdXRwdXRcIj09PShuPXQudHlwZSl8fFwicmVxdWlyZWRNYXRjaFwiPT09bikmJm51bGw9PWUmJnIucHVzaChcIlRoZSByZXF1aXJlZCBcIisoXCJyZXF1aXJlZE91dHB1dFwiPT09dC50eXBlP1wib3V0cHV0XCI6XCJtYXRjaFwiKSsnIFwiJyt0Lm5hbWUrJ1wiIGRpZCBub3QgbWF0Y2ggd2l0aGluIHRoZSByZXNwb25zZScpLG51bGwhPWUmJihlPXAoZSx0LmNsZWFudXApLCFfbG9kYXNoLmRlZmF1bHQuaXNFbXB0eSh0LmNoaWxkcmVuKSkpe3ZhciBhPXQuY2hpbGRyZW47cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5pc0FycmF5KGUpP2UubWFwKGYuYmluZCh0aGlzLGEscikpOmYoYSxyLGUpfXJldHVybiBlfWZ1bmN0aW9uIGgoZSx0LHIpe3JldHVybiBkKGMoZSx0KSx0LHIpfWZ1bmN0aW9uIG0oZSx0KXtyZXR1cm5cImhlYWRlclwiPT09dC5tYXRjaEVuZ2luZT9mdW5jdGlvbihlLHQpe3ZhciByPXQsbj1yLnJlc3BvbnNlLGE9ci5rZXkudG9Mb3dlckNhc2UoKSxvPW51bGwhPW4/ZVtuXTplW2UubGVuZ3RoLTFdO3JldHVybiBvP1Yoby5oZWFkZXJzKVthXTpudWxsfShlLHQuZGF0YSk6XCJjb29raWVcIj09PXQubWF0Y2hFbmdpbmU/ZnVuY3Rpb24oZSx0KXt2YXIgcixuPXQsYT1uLnJlc3BvbnNlLG89bi5hbGxSZXNwb25zZXMsdT1uLmtleTtpZihvKXtmb3IodmFyIGk9ZS5sZW5ndGgtMTtpPj0wO2ktLSlpZigocj1WKEYoX2xvZGFzaC5kZWZhdWx0LmdldChlW2ldLFtcImhlYWRlcnNcIixcInNldC1jb29raWVcIl0pKSkpW3VdKXJldHVybiByW3VdLmRhdGF9ZWxzZSBpZigocj1WKEYoX2xvZGFzaC5kZWZhdWx0LmdldChlW2FdLFtcImhlYWRlcnNcIixcInNldC1jb29raWVcIl0pKSkpW3VdKXJldHVybiByW3VdLmRhdGE7cmV0dXJuIG51bGx9KGUsdC5kYXRhKTpjKGUmJjAhPT1lLmxlbmd0aCYmZVtlLmxlbmd0aC0xXS5ib2R5fHxcIlwiLHQpfWZ1bmN0aW9uIHkoZSx0KXt2YXIgcj17c3VjY2VzczohMCxtZXNzYWdlczpbXSxkYXRhOnt9fSxuPXQub3V0cHV0cztyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmZvckVhY2gobixmdW5jdGlvbih0KXt2YXIgbj1mdW5jdGlvbihlLHQscil7cmV0dXJuIGQobShlLHQpLHQscil9KGUsdCxyLm1lc3NhZ2VzKTtcInJlcXVpcmVkTWF0Y2hcIiE9PXQudHlwZSYmKHIuZGF0YVt0Lm5hbWVdPW4pfSksMCE9PXIubWVzc2FnZXMubGVuZ3RoPyhyLnN1Y2Nlc3M9ITEscik6cn1mdW5jdGlvbiB2KGUsdCxyKXt2YXIgbj17c3VjY2VzczohMSxvdXRwdXRTY2VuYXJpbzpudWxsLGRhdGE6bnVsbH07aWYodClmb3IodmFyIGE9MDthIT09dC5sZW5ndGg7YSsrKXt2YXIgbz10W2FdLHU9eShlLnJlc3BvbnNlcyxvKTtpZih1LnN1Y2Nlc3MmJihuLnN1Y2Nlc3M9ITAsbi5kYXRhPXUuZGF0YSxuLnN0YXRlVG9rZW49ZS5zdGF0ZVRva2VuLG4uY29va2llcz1lLmNvb2tpZXMsbi5vdXRwdXRTY2VuYXJpbz1vLm5hbWUsIXIpKWJyZWFrO3ImJnIucHVzaCh1KX1yZXR1cm4gbi5zdWNjZXNzfHwobi5tZXNzYWdlcz1bXCJOb25lIG9mIHRoZSBvdXRwdXQgc2NlbmFyaW9zIG1hdGNoZWQuIFNlZSB0aGUgcmF3IGRhdGEgcmVjZWl2ZWQgaW4gcmF3RGF0YVwiXSxuLmVyclR5cGVzPVtcIm5vTWF0Y2hlZE91dHB1dFNjZW5hcmlvXCJdLG4ucmF3RGF0YT1lKSxufWZ1bmN0aW9uIGcocixuLGEpe3JldHVybiB0P2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1bXCJYTUxIVFRQUmVxdWVzdCA9IG51bGw7XCIsdCtcIjtcIixcIm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHtcIixcIiAgdmFyIGRhdGEgPSBlLmRhdGE7XCIsXCIgIHZhciBwcm9jZXNzZWQgPSBcIityK1wiO1wiLFwiICBwb3N0TWVzc2FnZShwcm9jZXNzZWQpO1wiLFwifTtcIl0uam9pbihcIlxcblwiKTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24odCxyKXt2YXIgYT1uZXcgV29ya2VyKFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW25dLHt0eXBlOlwiYXBwbGljYXRpb24vamF2YXNjcmlwdFwifSkpKTthLm9uZXJyb3I9ZnVuY3Rpb24oZSl7cih7bWVzc2FnZTplLm1lc3NhZ2UsbGluZW5vOmUubGluZW5vLGNvbG5vOmUuY29sbm8sc3RhY2s6bnVsbCxuYW1lOm51bGx9KX0sYS5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7dChlLmRhdGEpfSxhLnBvc3RNZXNzYWdlKGUpfSl9KHIsbixhKTplLnJ1blNhbmRib3hlZChyLG4sYSl9ZnVuY3Rpb24gXyhlLHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD17c2NyaXB0OnQsZW5hYmxlZDohMH0pLHQmJnQuZW5hYmxlZD9nKGUsdC5zY3JpcHQsXCJwb3N0UHJvY2VzcyhkYXRhLm91dHB1dCwgZGF0YS5pbnB1dClcIik6UHJvbWlzZS5yZXNvbHZlKGUub3V0cHV0KX1mdW5jdGlvbiBiKGUsdCl7dmFyIHI9W1wiZGF0YS5leHByZXNzaW9ucy5tYXAoZnVuY3Rpb24oZXhwcikge1wiLFwiICB2YXIgaW5wdXQgPSBkYXRhLmlucHV0O1wiLFwiICByZXR1cm4gZXZhbChleHByKTtcIixcIn0pXCJdLmpvaW4oXCJcXG5cIik7cmV0dXJuIGcoZSx0LHIpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5mcm9tUGFpcnModC5tYXAoZnVuY3Rpb24odCxyKXtyZXR1cm5bZS5leHByZXNzaW9uc1tyXSx0XX0pKX0pfWZ1bmN0aW9uIHgoZSx0KXtyZXR1cm4gZS5wb3N0UHJvY2Vzc0Vycm9yPV9sb2Rhc2guZGVmYXVsdC5vbWl0KHQsXCJzdGFja1wiKSxlLnN1Y2Nlc3M9ITEsZS5tZXNzYWdlPVwiVGhlIHNjcmlwdCByZXR1cm5lZCBhbiBlcnJvcjogXCIrdC5tZXNzYWdlLGUub3JpZ0RhdGE9ZS5kYXRhLGRlbGV0ZSBlLmRhdGEsZX1mdW5jdGlvbiB3KGUpe3ZhciB0PXt9O3JldHVybiBmdW5jdGlvbiBlKHIsbil7X2xvZGFzaC5kZWZhdWx0LmZvckVhY2gocixmdW5jdGlvbihyLGEpe3ZhciBvPShuP24rXCIuXCI6XCJcIikrYTtcIm9iamVjdFwiPT09X3R5cGVvZihyKT9lKHIsbyk6dFtvXT1yfSl9KGUsXCJcIiksdH1mdW5jdGlvbiBFKGUpe3JldHVybiBlIGluc3RhbmNlb2YgQXJyYXkmJjAhPT1lLmxlbmd0aCYmZS5ldmVyeShfbG9kYXNoLmRlZmF1bHQuaXNPYmplY3QpfWZ1bmN0aW9uIGooZSx0KXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIpe3N3aXRjaCh0LnR5cGUpe2Nhc2VcIkxpdGVyYWxcIjpyZXR1cm4gdC52YWx1ZTtjYXNlXCJJZGVudGlmaWVyXCI6aWYodm9pZCAwPT09clt0Lm5hbWVdKXRocm93IG5ldyBFcnJvcih0Lm5hbWUrXCIgaXMgbm90IGRlZmluZWRcIik7cmV0dXJuIHJbdC5uYW1lXTtjYXNlXCJNZW1iZXJFeHByZXNzaW9uXCI6dmFyIG47bj10LmNvbXB1dGVkP2UodC5wcm9wZXJ0eSxyKTp0LnByb3BlcnR5Lm5hbWU7dmFyIGE9ZSh0Lm9iamVjdCxyKTtpZihudWxsPT1hKXRocm93IG5ldyBFcnJvcihcIkNhbm5vdCByZWFkIHByb3BlcnR5IFwiK24rXCIgb2YgXCIrYSk7cmV0dXJuIGFbbl07Y2FzZVwiQmluYXJ5RXhwcmVzc2lvblwiOnZhciBvPWUodC5sZWZ0LHIpLHU9ZSh0LnJpZ2h0LHIpO3N3aXRjaCh0Lm9wZXJhdG9yKXtjYXNlXCIrXCI6cmV0dXJuIG8rdTtjYXNlXCItXCI6cmV0dXJuIG8tdTtjYXNlXCIvXCI6cmV0dXJuIG8vdTtjYXNlXCIlXCI6cmV0dXJuIG8ldTtjYXNlXCIqXCI6cmV0dXJuIG8qdTtjYXNlXCImJlwiOnJldHVybiBvJiZ1O2Nhc2VcInx8XCI6cmV0dXJuIG98fHU7Y2FzZVwiJlwiOnJldHVybiBvJnU7Y2FzZVwifFwiOnJldHVybiBvfHU7Y2FzZVwiXlwiOnJldHVybiBvXnU7Y2FzZVwiPDxcIjpyZXR1cm4gbzw8dTtjYXNlXCI+PlwiOnJldHVybiBvPj51O2Nhc2VcIj4+PlwiOnJldHVybiBvPj4+dTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgb3BlcmF0b3Igc3ltYm9sOiBcIit0Lm9wZXJhdG9yKX1kZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgZXhwcmVzc2lvbiBvZiB0eXBlIFwiK3QudHlwZSl9fSgoMCxfanNlcC5kZWZhdWx0KShlKSx0KX1mdW5jdGlvbiBTKGUsdCl7dD10fHx7fTt0cnl7XCJvYmplY3RcIiE9PV90eXBlb2YoZSkmJihlPSgwLF9qc2VwLmRlZmF1bHQpKGUpKX1jYXRjaChlKXtyZXR1cm4gZS5tZXNzYWdlfXN3aXRjaChlLnR5cGUpe2Nhc2VcIklkZW50aWZpZXJcIjpjYXNlXCJMaXRlcmFsXCI6cmV0dXJuIG51bGw7Y2FzZVwiTWVtYmVyRXhwcmVzc2lvblwiOnJldHVybiBTKGUub2JqZWN0LHQpfHxTKGUucHJvcGVydHksdCk7Y2FzZVwiQ2FsbEV4cHJlc3Npb25cIjpyZXR1cm4gdC5hbGxvd0Z1bmN0aW9uQ2FsbD9udWxsOlwiWW91IGNhbid0IGNhbGwgZnVuY3Rpb25zXCI7Y2FzZVwiQmluYXJ5RXhwcmVzc2lvblwiOnJldHVybiB0LmFsbG93QmluYXJ5RXhwcmVzc2lvbj9TKGUubGVmdCx0KXx8UyhlLnJpZ2h0LHQpOlwiWW91IGNhbid0IHVzZSB0aGUgb3BlcmF0b3IgXFxcIlwiK2Uub3BlcmF0b3IrJ1wiJztkZWZhdWx0OnJldHVyblwiVW5leHBlY3RlZCBleHByZXNzaW9uIG9mIHR5cGUgXCIrZS50eXBlfX1mdW5jdGlvbiBPKGUsdCl7dmFyIHI9KHQ9dHx8e30pLmFsbG93RnVuY3Rpb25DYWxsLG49dC5hbGxvd0JpbmFyeUV4cHJlc3Npb247ZnVuY3Rpb24gYShlKXtyZXR1cm4oZS5tYWluP1tlLm1haW5dOltdKS5jb25jYXQoZS5hZGRpdGlvbmFsKX12YXIgbz1mdW5jdGlvbiBlKHQsbyl7c3dpdGNoKHQudHlwZSl7Y2FzZVwiSWRlbnRpZmllclwiOnJldHVybnttYWluOlt0Lm5hbWVdLGFkZGl0aW9uYWw6W119O2Nhc2VcIkxpdGVyYWxcIjpyZXR1cm57bWFpbjpvP251bGw6W3QudmFsdWVdLGFkZGl0aW9uYWw6W119O2Nhc2VcIk1lbWJlckV4cHJlc3Npb25cIjp2YXIgdT1lKHQub2JqZWN0KSxpPWUodC5wcm9wZXJ0eSk7aWYodC5jb21wdXRlZCYmXCJMaXRlcmFsXCIhPT10LnByb3BlcnR5LnR5cGUpe3ZhciBzPVt1Lm1haW5dO3JldHVybiBpLm1haW4mJnMucHVzaChpLm1haW4pLHttYWluOm51bGwsYWRkaXRpb25hbDpzPXMuY29uY2F0KGkuYWRkaXRpb25hbCl9fXJldHVybnttYWluOnUubWFpbj91Lm1haW4uY29uY2F0KGkubWFpbik6bnVsbCxhZGRpdGlvbmFsOnUuYWRkaXRpb25hbC5jb25jYXQoaS5hZGRpdGlvbmFsKX07Y2FzZVwiQ2FsbEV4cHJlc3Npb25cIjppZighcil0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIGV4cHJlc3Npb24gb2YgdHlwZSBcIit0LnR5cGUpO3ZhciBsPXQuYXJndW1lbnRzP19sb2Rhc2guZGVmYXVsdC5mbGF0dGVuKHQuYXJndW1lbnRzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gYShlKHQpKX0pKTpbXSxjPWEoZSh0LmNhbGxlZSkpO3JldHVybnttYWluOm51bGwsYWRkaXRpb25hbDpsLmNvbmNhdChjKX07Y2FzZVwiQmluYXJ5RXhwcmVzc2lvblwiOmlmKCFuKXRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgZXhwcmVzc2lvbiBvZiB0eXBlIFwiK3QudHlwZSk7dmFyIGY9YShlKHQubGVmdCwhMCkpLHA9YShlKHQucmlnaHQsITApKTtyZXR1cm57bWFpbjpudWxsLGFkZGl0aW9uYWw6Zi5jb25jYXQocCl9O2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBleHByZXNzaW9uIG9mIHR5cGUgXCIrdC50eXBlKX19KCgwLF9qc2VwLmRlZmF1bHQpKGUpLCEwKTtyZXR1cm4gby5hZGRpdGlvbmFsLmNvbmNhdChvLm1haW4/W28ubWFpbl06W10pfWZ1bmN0aW9uIHEoZSl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChlKS5yZXBsYWNlKC8lMjAvZyxcIitcIil9ZnVuY3Rpb24gUChlKXt2YXIgdD17fTtmdW5jdGlvbiByKGUpe2UgaW5zdGFuY2VvZiBBcnJheSYmZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1wiZXhwcmVzc2lvblwiPT09ZS50eXBlJiYodFtlLmV4cHJlc3Npb25dPW51bGwpfSl9cmV0dXJuIGUucG9zdERhdGEmJlwicGFyYW1zXCI9PT1lLnBvc3REYXRhLnR5cGUmJnIoZS5wb3N0RGF0YS5kYXRhKSxyKGUuaGVhZGVycykscihlLnF1ZXJ5U3RyaW5nKSxfbG9kYXNoLmRlZmF1bHQua2V5cyh0KX1mdW5jdGlvbiBUKGUpe2Zvcih2YXIgdD0vXFx7XFx7KFtefV0rPylcXH1cXH0vZyxyPVtdLG49MCxhPW51bGw7YT10LmV4ZWMoZSk7KWEuaW5kZXg+biYmci5wdXNoKHt0eXBlOlwic3RyaW5nXCIsZGF0YTplLnN1YnN0cihuLGEuaW5kZXgtbiksc3RhcnQ6bn0pLHIucHVzaCh7dHlwZTpcImV4cHJlc3Npb25cIixkYXRhOmFbMV0sc3RhcnQ6YS5pbmRleH0pLG49YS5pbmRleCthWzBdLmxlbmd0aDtyZXR1cm4gbiE9PWUubGVuZ3RoJiZyLnB1c2goe3R5cGU6XCJzdHJpbmdcIixkYXRhOmUuc3Vic3RyKG4pLHN0YXJ0Om59KSxyfWZ1bmN0aW9uIE4oZSx0LHIpe3JldHVybihcInN0cmluZ1wiPT10eXBlb2YgZT9UKGUpOmUpLm1hcChmdW5jdGlvbihlKXtpZihcInN0cmluZ1wiPT09ZS50eXBlKXJldHVybiBlLmRhdGE7dHJ5e3ZhciBuPWooZS5kYXRhLHQpO3JldHVybiByP3Iobik6bn1jYXRjaChlKXtyZXR1cm5cIlwifX0pLmpvaW4oXCJcIil9ZnVuY3Rpb24gQyhlLHQpeyh0PXR8fHt9KS5hbGxvd0JpbmFyeUV4cHJlc3Npb249bnVsbD09dC5hbGxvd0JpbmFyeUV4cHJlc3Npb258fHQuYWxsb3dCaW5hcnlFeHByZXNzaW9uO3ZhciByPVwic3RyaW5nXCI9PXR5cGVvZiBlP1QoZSk6ZTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnVuaXFXaXRoKF9sb2Rhc2guZGVmYXVsdC5mbGF0dGVuKHIubWFwKGZ1bmN0aW9uKGUpe3JldHVyblwiZXhwcmVzc2lvblwiPT09ZS50eXBlP08oZS5kYXRhLHQpOltdfSkpLF9sb2Rhc2guZGVmYXVsdC5pc0VxdWFsKX1mdW5jdGlvbiBSKGUpe3JldHVyblwiY29uc3RhbnRcIj09PWUudHlwZXx8XCJuZXdcIj09PWUudHlwZSYmMD09PVQoZS52YWx1ZSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwiZXhwcmVzc2lvblwiPT09ZS50eXBlfSkubGVuZ3RofWZ1bmN0aW9uIGsoZSl7dmFyIHQscj17cG9zdDp7fSxnZXQ6e319O2lmKGUpdHJ5e3ZhciBuPUpTT04ucGFyc2UoKHQ9ZSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBhdG9iP2F0b2IodCk6QnVmZmVyLmZyb20odCxcImJhc2U2NFwiKS50b1N0cmluZyhcInV0ZjhcIikpKTtyLnBvc3Q9KDAsX3VyaWpzLmRlZmF1bHQpKCkucXVlcnkobi5wb3N0UGFyYW1zKS5xdWVyeSghMCksci5nZXQ9KDAsX3VyaWpzLmRlZmF1bHQpKCkucXVlcnkobi5nZXRQYXJhbXMpLnF1ZXJ5KCEwKX1jYXRjaChlKXt9cmV0dXJuIHJ9ZnVuY3Rpb24gRChlLHQpe3RyeXtyZXR1cm4gSlNPTi5wYXJzZSh0KSwhMH1jYXRjaChlKXtyZXR1cm4hMX19ZnVuY3Rpb24gTChlLHQpe3ZhciByPXQubWF0Y2goL15cXHMqKD86W0EtWmEtel8kXVtcXHdfJF0qKT9cXHMqXFwoKFtcXHNcXFNdKilcXClcXHMqOz9cXHMqJC8pO3RyeXtyZXR1cm4gSlNPTi5wYXJzZShyWzFdKSwhMH1jYXRjaChlKXtyZXR1cm4hMX19ZnVuY3Rpb24gTShlKXt2YXIgdD1lLm1hdGNoKC9eXFxzKig/OltBLVphLXpfJF1bXFx3XyRdKik/XFxzKlxcKChbXFxzXFxTXSopXFwpXFxzKjs/XFxzKiQvKTtyZXR1cm4gSlNPTi5wYXJzZSh0WzFdKX1mdW5jdGlvbiBCKGUsdCl7cmV0dXJuIGUmJi0xIT09ZS5pbmRleE9mKFwiaHRtbFwiKXx8LTEhPT10LnNlYXJjaCgvPChib2R5fGJyfGRpdnxlbXxmb3JtfGhbMS02XXxoZWFkfGh0bWx8aWZyYW1lfGltZ3xpbnB1dHxsaXxsaW5rfG9sfHNjcmlwdHxzZWxlY3R8c3BhbnxzdHJvbmd8c3R5bGV8dGFibGV8dGV4dGFyZWF8dWwpLyl9ZnVuY3Rpb24gQShlLHQpe3JldHVybiBlJiYtMSE9PWUuaW5kZXhPZihcInhtbFwiKXx8LTEhPT10LmluZGV4T2YoXCI8P3htbFwiKX1mdW5jdGlvbiBKKGUsdCl7cmV0dXJuIEQoMCx0KT9cImpzb25cIjpMKDAsdCk/XCJqc29ucFwiOkIoZSx0KT9cImh0bWxcIjpBKGUsdCk/XCJ4bWxcIjpudWxsfXZhciB6PXt9LFU9bnVsbCxIPW51bGw7ZnVuY3Rpb24gSShlLHIpe3ZhciBuPXpbcl07aWYobilyZXR1cm4gbjtpZihyPT09VSlyZXR1cm4gSDt2YXIgYT1yO3N3aXRjaChcImpzb25cIj09PWV8fFwiaHRtbFwiPT09ZXx8XCJ4bWxcIj09PWV8fFwianNvbnBcIj09PWU/ZTpKKGUscikpe2Nhc2VcImpzb25wXCI6YT1KU09OLnN0cmluZ2lmeShNKHIpLG51bGwsMik7YnJlYWs7Y2FzZVwianNvblwiOmE9SlNPTi5zdHJpbmdpZnkoSlNPTi5wYXJzZShyKSxudWxsLDIpO2JyZWFrO2Nhc2VcImh0bWxcIjpjYXNlXCJ4bWxcIjphPShhPSgwLF9qc0JlYXV0aWZ5Lmh0bWwpKHIse2luZGVudF9zaXplOjJ9KSkucmVwbGFjZSgvXFxuXFxzK1xcbi9nLFwiXFxuXCIpfXJldHVybiB0P3pbcl09YTooVT1yLEg9YSksYX1mdW5jdGlvbiAkKGUpe3JldHVybiBfbG9kYXNoLmRlZmF1bHQuY2hhaW4oZS5zcGxpdChcIjtcIikpLm1hcChfbG9kYXNoLmRlZmF1bHQudHJpbSkubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWUuc3BsaXQoXCI9XCIpO3JldHVyblt0WzBdLHRbMV1dfSkuZnJvbVBhaXJzKCkudmFsdWUoKX1mdW5jdGlvbiBGKGUpe3JldHVybiBlP19sb2Rhc2guZGVmYXVsdC5mcm9tUGFpcnMoZS5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9JChlKSxyPV9sb2Rhc2guZGVmYXVsdC5rZXlzKHQpWzBdO3JldHVybltyLF9sb2Rhc2guZGVmYXVsdC5zZXQodCxcImRhdGFcIix0W3JdKV19KSk6e319ZnVuY3Rpb24gVihlKXtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmZyb21QYWlycyhfbG9kYXNoLmRlZmF1bHQubWFwKGUsZnVuY3Rpb24oZSx0KXtyZXR1cm5bdC50b0xvd2VyQ2FzZSgpLGVdfSkpfXJldHVybnttYXRjaFJlZ2V4OnIsbWF0Y2hGb3JtT3V0cHV0UmF3OnMsbWF0Y2hPdXRwdXQ6YyxtYXRjaFRvcExldmVsT3V0cHV0Om0scnVuQ2xlYW51cDpwLHJ1bk91dHB1dDpoLHJ1bk91dHB1dFNjZW5hcmlvOnkscnVuT3V0cHV0U2NlbmFyaW9zOnYscnVuT3V0cHV0U2NlbmFyaW9zQW5kUG9zdFByb2Nlc3M6ZnVuY3Rpb24oZSx0LHIsbixhKXt2YXIgbz12KGUsdCxhKTtpZihvLnN1Y2Nlc3MmJnIpe3ZhciB1PXtvdXRwdXQ6byxpbnB1dDpufTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSl7Xyh1LHIpLnRoZW4oZnVuY3Rpb24odCl7ZSh0KX0pLmNhdGNoKGZ1bmN0aW9uKHQpe2UoeChvLHQpKX0pfSl9cmV0dXJuIFByb21pc2UucmVzb2x2ZShvKX0sYXBwbHlQb3N0UHJvY2VzczpfLGlzQ29sbGVjdGlvbjpFLGhhc0NvbGxlY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJl9sb2Rhc2guZGVmYXVsdC5zb21lKGUsRSl9LGNvbGxlY3Rpb25Ub1RhYmxlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9XCJkZWZhdWx0XCJpbih0PXR8fHt9KT90LmRlZmF1bHQ6XCJcIixuPSEoXCJpbmNsdWRlSGVhZGVyc1wiaW4gdCYmIXQuaW5jbHVkZUhlYWRlcnMpLGE9ZS5tYXAodyksbz1fbG9kYXNoLmRlZmF1bHQuY2hhaW4oYSkubWFwKF9sb2Rhc2guZGVmYXVsdC5rZXlzKS5mbGF0dGVuKCkudW5pcSgpLnZhbHVlKCksdT1fbG9kYXNoLmRlZmF1bHQuZnJvbVBhaXJzKG8ubWFwKGZ1bmN0aW9uKGUsdCl7cmV0dXJuW2UsdF19KSksaT1hLm1hcChmdW5jdGlvbihlKXt2YXIgdD1fbG9kYXNoLmRlZmF1bHQuZmlsbChBcnJheShvLmxlbmd0aCkscik7cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5mb3JFYWNoKGUsZnVuY3Rpb24oZSxyKXt0W3Vbcl1dPWV9KSx0fSk7cmV0dXJuIG4/W29dLmNvbmNhdChpKTppfSx0YWJsZVRvQ1NWOmZ1bmN0aW9uKGUpe3JldHVybiBlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuJ1wiJytlLnJlcGxhY2UoL1wiL2csJ1wiXCInKSsnXCInfSkuam9pbihcIixcIil9KS5qb2luKFwiXFxyXFxuXCIpfSxhcHBseUJyYW5jaGluZ0Z1bmN0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGcoZSx0LFwiYnJhbmNoKGRhdGEub3V0cHV0LCBkYXRhLmlucHV0KVwiKX0sYXBwbHlWZXJ0ZXhQb3N0UHJvY2VzczpmdW5jdGlvbihlLHQpe3JldHVybiBnKGUsdCxcInBvc3RQcm9jZXNzKGRhdGEub3V0cHV0LCBkYXRhLmlucHV0KVwiKX0sYXBwbHlJbnB1dEhlbHBlclNjcmlwdDpiLGFkZFNhbmRib3hlZFNjcmlwdEVycm9yOngsZXZhbFZhcmlhYmxlRXhwcmVzc2lvbjpqLGdldEV4cHJlc3Npb25Ub2tlbnM6TyxnZXRFeHByZXNzaW9uR2xvYmFsczpmdW5jdGlvbihlLHQpe3ZhciByPU8oZSx0KTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnVuaXEoX2xvZGFzaC5kZWZhdWx0Lm1hcChyLDApKX0sZ2V0SW5wdXRFeHByZXNzaW9uczpQLHBhcnNlQ3VybHlFeHByZXNzaW9uOlQsZ2V0Q3VybHlFeHByZXNzaW9uRXJyb3I6ZnVuY3Rpb24oZSx0KXsodD10fHx7fSkuYWxsb3dCaW5hcnlFeHByZXNzaW9uPW51bGw9PXQuYWxsb3dCaW5hcnlFeHByZXNzaW9ufHx0LmFsbG93QmluYXJ5RXhwcmVzc2lvbjtmb3IodmFyIHI9XCJzdHJpbmdcIj09dHlwZW9mIGU/VChlKTplLG49MDtuIT09ci5sZW5ndGg7bisrKXt2YXIgYT1yW25dO2lmKFwiZXhwcmVzc2lvblwiPT09YS50eXBlKXt2YXIgbz1TKGEuZGF0YSk7aWYobylyZXR1cm5cInt7XCIrYS5kYXRhK1wifX0gaXMgaW52YWxpZDogXCIrb319cmV0dXJuIG51bGx9LGdldEN1cmx5RXhwcmVzc2lvblRva2VuczpDLGV2YWxDdXJseUV4cHJlc3Npb246TixtYWtlUmVxUGFyYW1zOmZ1bmN0aW9uKGUscixuLGEpe3ZhciBvPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdP2FyZ3VtZW50c1s0XTp7fSx1PWUudXJsLGk9ZS5tZXRob2Qscz1lLnBvc3REYXRhLGw9ZS5xdWVyeVN0cmluZyxjPWUuaGVhZGVycyxmPWUuc2NyaXB0LHA9ZS5hdXRob3JpemF0aW9uLGQ9e30saD1bXSxtPXt9LHk9e307aWYoZS5pbnB1dHMmJnIpe3ZhciB2PV9sb2Rhc2guZGVmYXVsdC5jaGFpbihlLmlucHV0cykubWFwKGZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwIT09clt0XSl7aWYoXCJmaWxlXCI9PT1lLnR5cGUpe3ZhciBuPXJbdF07aWYoIShuJiZuLmNvbnRlbnQmJm4uZmlsZU5hbWUmJm4ubWltZVR5cGUpKXJldHVybiBlLnJlcXVpcmVkJiYoeVt0XT0hMCksbnVsbDtpZighL15bQS1aYS16MC05Ky89XSokLy50ZXN0KG4uY29udGVudCkpcmV0dXJuIGgucHVzaChcIlRoZSBmaWxlIGlucHV0IFwiK3QrXCIgaGFkIG5vbi1CYXNlNjQtZW5jb2RlZCBjb250ZW50XCIpLG51bGx9cmV0dXJuW3Qsclt0XV19cmV0dXJuIWUucmVxdWlyZWQmJmUuZGVmYXVsdEVuYWJsZWQ/W3QsZS5kZWZhdWx0XTooZS5yZXF1aXJlZCYmKG1bdF09ITAsXCJmaWxlXCI9PT1lLnR5cGUmJih5W3RdPSEwKSksbnVsbCl9KS5maWx0ZXIoKS52YWx1ZSgpO2Q9X2xvZGFzaC5kZWZhdWx0LmZyb21QYWlycyh2KX12YXIgZz1rKGEpO3k9X2xvZGFzaC5kZWZhdWx0LmFzc2lnbih5LGZ1bmN0aW9uKGUsdCxyKXtpZihfbG9kYXNoLmRlZmF1bHQuaXNFbXB0eShlLnBvc3QpJiZfbG9kYXNoLmRlZmF1bHQuaXNFbXB0eShlLmdldCkpcmV0dXJuIHQ7ZnVuY3Rpb24gbihlKXtzd2l0Y2goZS50eXBlKXtjYXNlXCJ2YXJpYWJsZVwiOnJldHVybltlLnZhck5hbWVdO2Nhc2VcIm5ld1wiOnJldHVybiBfbG9kYXNoLmRlZmF1bHQudW5pcShfbG9kYXNoLmRlZmF1bHQubWFwKEMoZS52YWx1ZSksMCkpO2Nhc2VcImZpbGVcIjpyZXR1cm5bZS52YXJOYW1lXX1yZXR1cm5bXX12YXIgYT17cG9zdDp7fSxnZXQ6e319O1wicGFyYW1zXCI9PT1yLnBvc3REYXRhLnR5cGUmJnIucG9zdERhdGEuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2EucG9zdFtlLm5hbWVdPW4oZSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSl9KSxyLnF1ZXJ5U3RyaW5nLmZvckVhY2goZnVuY3Rpb24oZSl7YS5nZXRbZS5uYW1lXT1uKGUpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0pfSksX2xvZGFzaC5kZWZhdWx0LmZvckVhY2goZS5nZXQsZnVuY3Rpb24oZSx0KXtkZWxldGUgYS5nZXRbdF19KSxfbG9kYXNoLmRlZmF1bHQuZm9yRWFjaChlLnBvc3QsZnVuY3Rpb24oZSx0KXtkZWxldGUgYS5wb3N0W3RdfSk7dmFyIG89e307ZnVuY3Rpb24gdShlKXtvW2VdPSEwfXJldHVybiBfbG9kYXNoLmRlZmF1bHQuZm9yRWFjaChhLmdldCxmdW5jdGlvbihlKXtlLmZvckVhY2godSl9KSxfbG9kYXNoLmRlZmF1bHQuZm9yRWFjaChhLnBvc3QsZnVuY3Rpb24oZSl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe29bZV09ITB9KX0pLG99KGcsbSxlKSksX2xvZGFzaC5kZWZhdWx0LmZvckVhY2goeSxmdW5jdGlvbihlLHQpe2gucHVzaCgnVGhlIGlucHV0IFwiJyt0KydcIiBpcyByZXF1aXJlZC4nKX0pO3ZhciBfPXttZXRob2Q6aS50b1VwcGVyQ2FzZSgpLGhlYWRlcnM6e30samFyOm4sZm9sbG93UmVkaXJlY3Q6ITF9LHg9UChlKSx3PWY/Zi5jb2RlOlwiXCIsRT1Qcm9taXNlLnJlc29sdmUoe30pO3JldHVybiAwIT09eC5sZW5ndGgmJihFPWIoe2V4cHJlc3Npb25zOngsaW5wdXQ6X2xvZGFzaC5kZWZhdWx0LmNsb25lRGVlcChkKX0sdykpLEUudGhlbihmdW5jdGlvbihyKXtmdW5jdGlvbiBuKGUpe3N3aXRjaChlLnR5cGUpe2Nhc2VcImNvbnN0YW50XCI6cmV0dXJuIGUuZGF0YTtjYXNlXCJ2YXJpYWJsZVwiOnJldHVybiBkW2UudmFyTmFtZV07Y2FzZVwiZXhwcmVzc2lvblwiOnJldHVybiByW2UuZXhwcmVzc2lvbl07Y2FzZVwibmV3XCI6cmV0dXJuIGkoZS52YWx1ZSk7Y2FzZVwiZmlsZVwiOnZhciB0PWRbZS52YXJOYW1lXTtyZXR1cm4gdCYmdC5jb250ZW50JiZ0Lm1pbWVUeXBlJiZ0LmZpbGVOYW1lP3t2YWx1ZTpCdWZmZXIuZnJvbSh0LmNvbnRlbnQsXCJiYXNlNjRcIiksb3B0aW9uczp7ZmlsZW5hbWU6dC5maWxlTmFtZSxjb250ZW50VHlwZTp0Lm1pbWVUeXBlfX06dm9pZCAwfXJldHVybiBudWxsfXZhciBhPU9iamVjdC5hc3NpZ24oZCx7d3JhcEFQSUlucHV0czpkfSk7ZnVuY3Rpb24gaShlLHQpe3JldHVybiBOKGUsYSx0KX11PWkodSksXy51cmw9dTt2YXIgZj1fbG9kYXNoLmRlZmF1bHQubWFwKGUuaW5wdXRzLFwidHlwZVwiKS5zb21lKGZ1bmN0aW9uKGUpe3JldHVyblwiZmlsZVwiPT09ZX0pO2lmKHMpaWYoXCJwYXJhbXNcIiE9PXMudHlwZXx8X2xvZGFzaC5kZWZhdWx0LmlzRW1wdHkocy5kYXRhKSl7aWYoXCJqc29uXCI9PT1zLnR5cGV8fFwidGV4dFwiPT09cy50eXBlKXt2YXIgbT1cImpzb25cIj09PXMudHlwZXx8XCJ0ZXh0XCI9PT1zLnR5cGU/cy5kYXRhOlwiXCI7XCJqc29uXCI9PT1zLnR5cGU/KF8uaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIixtPWkobSxKU09OLnN0cmluZ2lmeSkpOlwidGV4dFwiPT09cy50eXBlJiYoXy5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdPVwidGV4dC9wbGFpblwiLG09aShtKSksXy5ib2R5PW19fWVsc2V7Xy5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdPWY/XCJtdWx0aXBhcnQvZm9ybS1kYXRhXCI6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIjt2YXIgeT17fTtzLmRhdGEuZm9yRWFjaChmdW5jdGlvbihlKXtSKGUpJiYoeVtpKGUubmFtZSldPW4oZSkpfSksX2xvZGFzaC5kZWZhdWx0LmZvckVhY2goZy5wb3N0LGZ1bmN0aW9uKGUsdCl7IWUmJnlbdF18fCh5W3RdPWUpfSkscy5kYXRhLmZvckVhY2goZnVuY3Rpb24oZSl7UihlKXx8KHlbaShlLm5hbWUpXT1uKGUpKX0pLGY/KF9sb2Rhc2guZGVmYXVsdC5mb3JFYWNoKHksZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT1lJiZkZWxldGUgeVt0XX0pLF8uZm9ybURhdGE9eSk6Xy5mb3JtPSgwLF91cmlqcy5kZWZhdWx0KSgpLnF1ZXJ5KHkpLm5vcm1hbGl6ZVF1ZXJ5KCkucXVlcnkoKX12YXIgdj17fTtpZihwKWlmKFwibnRsbVwiPT09cC5tb2RlJiZwLm50bG0pe3ZhciBiPXAubnRsbSx4PWIudXNlcm5hbWUsdz1iLnBhc3N3b3JkLEU9Yi5kb21haW47aWYoby5udGxtUmVzcG9uc2Upe2lmKCFfLnVybCl0aHJvdyBuZXcgRXJyb3IoXCJXZSBjYW5ub3QgY3JlYXRlIGEgTlRMTSByZXNwb25zZSB3aXRob3V0IGEgVVJMXCIpO3YuQXV0aG9yaXphdGlvbj10P1wiTlRMTSBQbGFjZWhvbGRlclJlc3BvbnNlSGVhZGVyPT1cIjpfbnRsbS5kZWZhdWx0LnJlc3BvbnNlSGVhZGVyKG8ubnRsbVJlc3BvbnNlLF8udXJsLEU/aShFKTpcIndyYXBhcGkuY29tXCIsaSh4KSxpKHcpKX1lbHNlIHYuQXV0aG9yaXphdGlvbj10P1wiTlRMTSBQbGFjZWhvbGRlckNoYWxsZW5nZUhlYWRlcj09XCI6X250bG0uZGVmYXVsdC5jaGFsbGVuZ2VIZWFkZXIoXCJ3cmFwYXBpXCIsRT9pKEUpOlwid3JhcGFwaS5jb21cIil9ZWxzZSBpZihcImJhc2ljXCI9PT1wLm1vZGUmJnAuYmFzaWMpe3ZhciBqPXAuYmFzaWMsUz1qLnVzZXJuYW1lLE89ai5wYXNzd29yZDt2LkF1dGhvcml6YXRpb249QnVmZmVyLmZyb20oXCJcIi5jb25jYXQoaShTKSxcIjpcIikuY29uY2F0KGkoTykpLFwidXRmOFwiKS50b1N0cmluZyhcImJhc2U2NFwiKX1pZihjJiZjLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoXCI6XCIhPT1lLm5hbWVbMF0pe3ZhciB0PWkoZS5uYW1lKTtcImNvbnRlbnQtdHlwZVwiPT09dC50b0xvd2VyQ2FzZSgpJiZkZWxldGUgXy5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdLFwiYXV0aG9yaXphdGlvblwiPT09dC50b0xvd2VyQ2FzZSgpJiZ2LkF1dGhvcml6YXRpb258fCh2W3RdPW4oZSkpfX0pLF8uaGVhZGVycz1PYmplY3QuYXNzaWduKF8uaGVhZGVycyx2KSxsKXt2YXIgUD17fTtsLmZvckVhY2goZnVuY3Rpb24oZSl7UihlKSYmKFBbcShpKGUubmFtZSkpXT1xKG4oZSkpKX0pLF9sb2Rhc2guZGVmYXVsdC5mb3JFYWNoKGcuZ2V0LGZ1bmN0aW9uKGUsdCl7dmFyIHI9cSh0KTshZSYmUFtyXXx8KFBbcl09cShlKSl9KSxsLmZvckVhY2goZnVuY3Rpb24oZSl7UihlKXx8KFBbcShpKGUubmFtZSkpXT1xKG4oZSkpKX0pLF8ucXM9UCxfLnFzU3RyaW5naWZ5T3B0aW9ucz17ZW5jb2RlOiExfX12YXIgVD17c3VjY2VzczowPT09aC5sZW5ndGgscmVxUGFyYW1zOl99O3JldHVybiBoJiYoVC5lcnJvcnM9aCksVH0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBjb25zb2xlLmVycm9yKGUuc3RhY2spLHtzdWNjZXNzOiExLHJlcVBhcmFtczpudWxsLGVycm9yczpbXCJXZSBlbmNvdW50ZXJlZCBhbiBlcnJvciB3aGVuIGV2YWx1YXRpbmcgaW5wdXQgZXhwcmVzc2lvbnM6IFwiK2UubWVzc2FnZV19fSl9LHF1ZXJ5U2VsZWN0b3JBbGxPblN0cmluZzpvLHBhcnNlSGVhZGVyU3RyaW5nOiQscGFyc2VDb29raWVzOkYsaXNIVE1MOkIsaXNYTUw6QSxpc0pTT046RCxpc0pTT05QOkwsZ2V0SlNPTlA6TSxpc0pTT05hYmxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIEQoMCx0KXx8TCgwLHQpfSxnZXRKU09OYWJsZTptZW1vaXplTVJVKGZ1bmN0aW9uKGUpe3JldHVybiBMKDAsZSk/TShlKTpKU09OLnBhcnNlKGUpfSksZ2V0Q29udGVudFR5cGU6SixnZXRQcmV0dHk6SX19OyIsIiJdfQ==
