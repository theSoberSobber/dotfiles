(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _lodash=_interopRequireDefault(require("lodash")),_es6Promise=require("es6-promise"),_deepDiff=require("deep-diff"),_Axios=_interopRequireDefault(require("./Axios")),_Config=_interopRequireDefault(require("./Config"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var APIStorage={_storageToken:null,_storageTokenQueryString:"",_defaultAPIStorageDone:function(e){return function(t){e(t.data,t)}},_defaultAPIStorageFail:function(e){return function(t){console.error(t.stack);var a=_lodash.default.get(t,"response.data");e(a,{success:!1,messages:["An unexpected error occurred. Check your internet connection"],response:a})}},_defaultAPIStorageThen:function(e){if(e&&e.success)return e.data;throw new Error(e.messages?e.messages.join("; "):"An unexpected error occurred. Check your internet connection")},_defaultAPIStorageThenWithData:function(e){return e},_defaultPromiseOrCallback:function(e,t,a){return t?(e.then(APIStorage._defaultAPIStorageDone(t)).catch(APIStorage._defaultAPIStorageFail(t)),null):e.then(a?APIStorage._defaultAPIStorageThenWithData:APIStorage._defaultAPIStorageThen)},_prepareAPIElement:function(e){var t=_lodash.default.cloneDeep(e);return t.graph&&_lodash.default.forEach(t.graph.vertices,function(e){e.data=e.data?_lodash.default.pick(e.data,["username","repository","name","version"]):null}),t},useToken:function(e){APIStorage._storageToken=e,APIStorage._storageTokenQueryString="token=".concat(e)},set:function(e,t){var a=e.username,o=e.repository,n=e.name,r=e.version||"0.0.0";return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/").concat(a,"/").concat(o,"/").concat(n,"/").concat(r,"?").concat(APIStorage._storageTokenQueryString),method:"post",data:{apiElement:APIStorage._prepareAPIElement(e),orig:t&&_lodash.default.pick(t,["username","repository","name"])},withCredentials:!0})},setWithDiff:function(e,t){if(!e||e.username!==t.username||e.repository!==t.repository||e.name!==t.name||e.version!==t.version)return APIStorage.set(t,e);var a=t.username,o=t.repository,n=t.name,r=t.version||"0.0.0",i=(0,_deepDiff.diff)(e,t);return _lodash.default.isEmpty(i)&&(i=[]),(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/").concat(a,"/").concat(o,"/").concat(n,"/").concat(r,"?").concat(APIStorage._storageTokenQueryString),method:"POST",data:{diff:i},withCredentials:!0})},alias:function(e,t){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/alias/").concat([e.username,e.repository,e.name,t.repository,t.name].join("/"),"?").concat(APIStorage._storageTokenQueryString),method:"post",withCredentials:!0})},rename:function(e,t,a){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/").concat(e,"/").concat(t,"/rename?").concat(APIStorage._storageTokenQueryString),method:"post",data:{apiElement:APIStorage._prepareAPIElement(a)},contentType:"application/json; charset=utf-8",withCredentials:!0})},apiElementCache:{},getCached:function(e,t,a,o){var n=JSON.stringify([e,t,a,o]),r=this.apiElementCache;return r[n]?_es6Promise.Promise.resolve(this.apiElementCache[n]):this.get(e,t,a,o).then(function(e){return r[n]=e,e})},get:function(e,t,a,o,n,r){o=o||"0.0.0";var i=(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/").concat(e,"/").concat(t,"/").concat(a,"/").concat(o,"?").concat(APIStorage._storageTokenQueryString).concat(n?"&includeVersions=true":""),method:"get",withCredentials:!0});return APIStorage._defaultPromiseOrCallback(i,r,!0)},getById:function(e,t){var a=(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/id/").concat(e).concat(APIStorage._storageTokenQueryString),method:"get",withCredentials:!0});return APIStorage._defaultPromiseOrCallback(a,t)},getAll:function(e){var t=(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api?").concat(APIStorage._storageTokenQueryString),method:"get",withCredentials:!0});return APIStorage._defaultPromiseOrCallback(t,e)},getVersions:function(e,t,a,o){var n=(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/").concat(e,"/").concat(t,"/").concat(a,"/versions"),method:"get",withCredentials:!0});return o?(n.then(function(e){o(e.versions,e)}).catch(function(e){o(null,e)}),null):n.then(APIStorage._defaultAPIStorageThen)},remove:function(e,t,a,o){var n=(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/").concat(e,"/").concat(t,"/").concat(a,"?").concat(APIStorage._storageTokenQueryString),method:"DELETE",withCredentials:!0});return o&&n.then(o),n},getType:function(e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/type"),params:{username:e.username,repository:e.repository,name:e.name}})},addCapture:function(e,t,a,o){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/api/").concat(e,"/").concat(t,"/").concat(a,"/addCapture?").concat(APIStorage._storageTokenQueryString),method:"post",data:{capture:o}})},getResponseTestCases:function(e){var t=e.username,a=e.repository,o=e.name;return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/testCase/").concat(t,"/").concat(a,"/").concat(o,"?").concat(APIStorage._storageTokenQueryString),method:"post",data:{output:e.output}})},getResponseTestCase:function(e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/testCase/").concat(e,"?").concat(APIStorage._storageTokenQueryString),method:"get"})},deleteResponseTestCases:function(e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/testCase/delete?").concat(APIStorage._storageTokenQueryString),method:"post",data:{ids:e}})}},_default=APIStorage;exports.default=_default;
},{"./Axios":4,"./Config":7,"deep-diff":"deep-diff","es6-promise":"es6-promise","lodash":"lodash"}],2:[function(require,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ApplicationError=ApplicationError,exports.processResponse=processResponse,exports.getCatch=getCatch,exports.getUnexpectedErrorResponse=getUnexpectedErrorResponse,exports.getResponseFromError=getResponseFromError,exports.default=void 0;var React=_interopRequireWildcard(require("react")),_lodash=_interopRequireDefault(require("lodash")),_NewUtils=require("../templates/NewUtils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var n=o?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(t,s,n):t[s]=e[s]}return t.default=e,r&&r.set(e,t),t}function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ApplicationError(e){this.name="ApplicationError",this.messages=e.messages,this.errTypes=e.errTypes,this.message=e.messages instanceof Array?e.messages.join("\n"):"An unexpected error occurred",this.stack=(new Error).stack}function processResponse(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data";if(!e.success)throw new ApplicationError(e);return r instanceof Array?_lodash.default.pick(e,r):e[r]}function getCatch(e,r,t){return function(o){var s;(r=r||"response",t=t||"loading",o instanceof ApplicationError)?e.setState((_defineProperty(s={},r,{success:!1,messages:o.messages,errTypes:o.errTypes}),_defineProperty(s,t,!1),s)):(0,_NewUtils.getCatch)(e,r,t)(o)}}function getUnexpectedErrorResponse(){return{success:!1,messages:["Sorry, but we ran into an unexpected error. Please try again later"],errTypes:["unexpectedError"]}}function getResponseFromError(e){return e instanceof ApplicationError?{success:!1,messages:e.messages,errTypes:e.errTypes}:(console.error(e),getUnexpectedErrorResponse())}var _default={ApplicationError:ApplicationError,processResponse:processResponse,getUnexpectedErrorResponse:getUnexpectedErrorResponse,getResponseFromError:getResponseFromError};exports.default=_default;
},{"../templates/NewUtils":33,"lodash":"lodash","react":"react"}],3:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setTutorialCompleted=setTutorialCompleted,exports.getInvites=getInvites,exports.invite=invite,exports.deleteInvite=deleteInvite,exports.getOrganizationUsers=getOrganizationUsers,exports.removeUserFromOrganization=removeUserFromOrganization,exports.getPaymentMethod=getPaymentMethod,exports.setPaymentMethod=setPaymentMethod,exports.default=exports.UserRoles=exports.changePassword=exports.resetPassword=exports.isValidPasswordResetToken=exports.activate=exports.startResetPassword=exports.setTutorialStep=exports.register=exports.logout=exports.isLoggedIn=exports.login=void 0;var _Axios=_interopRequireDefault(require("./Axios")),_Config=_interopRequireDefault(require("./Config")),_Utility=_interopRequireDefault(require("./Utility")),_Token=_interopRequireDefault(require("./Token"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function ownKeys(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)}return o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach(function(e){_defineProperty(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function _defineProperty(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var login=function(t,e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/login"),method:"post",data:{email:t,password:e},withCredentials:!0}).catch(function(t){throw _Utility.default.getDefaultError(t)})};exports.login=login;var isLoggedIn=function(t){var e=t?"?token=".concat(t):"";return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/isLoggedin").concat(e)}).catch(function(t){throw _Utility.default.getDefaultError(t)})};exports.isLoggedIn=isLoggedIn;var logout=function(t){var e=t?"?token=".concat(t):"";return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/logout").concat(e),method:"post"}).catch(function(t){throw _Utility.default.getDefaultError(t)})};exports.logout=logout;var register=function(t,e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/register"),data:_objectSpread({},t,{inviteKey:e}),method:"post"}).catch(function(t){throw _Utility.default.getDefaultError(t)})};exports.register=register;var setTutorialStep=function(t,e){(e?Promise.resolve(e):_Token.default.get()).then(function(e){var o=e?"?token=".concat(e):"";return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/tutorialStep").concat(o),data:{step:t},method:"post"})}).catch(function(t){throw _Utility.default.getDefaultError(t)})};function setTutorialCompleted(t,e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/tutorialCompleted"),data:{tutorial:t,completed:e},method:"post"})}exports.setTutorialStep=setTutorialStep;var startResetPassword=function(t,e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/startResetPassword"),data:{username:t,email:e},method:"post"}).catch(function(t){throw _Utility.default.getDefaultError(t)})};exports.startResetPassword=startResetPassword;var activate=function(t,e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/activate/").concat(t,"/").concat(e),method:"post"})};exports.activate=activate;var isValidPasswordResetToken=function(t){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/isValidPasswordResetToken"),method:"get",params:{token:t}})};exports.isValidPasswordResetToken=isValidPasswordResetToken;var resetPassword=function(t,e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/resetPassword"),method:"post",data:{token:t,password:e}})};exports.resetPassword=resetPassword;var changePassword=function(t,e){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/changePassword"),method:"post",data:{curPassword:t,password:e}})};function getInvites(){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/invites"),method:"get"})}function invite(t){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/invites"),method:"post",data:t})}function deleteInvite(t){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/invites/").concat(t),method:"delete"})}exports.changePassword=changePassword;var UserRoles={Normal:"Normal user","Org administrator":"Org administrator"};function getOrganizationUsers(){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/organization"),method:"get"})}function removeUserFromOrganization(t){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/organization/").concat(encodeURIComponent(t)),method:"delete"})}function getPaymentMethod(){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/payment")})}function setPaymentMethod(t){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/user/payment"),method:"POST",data:{token:t}})}exports.UserRoles=UserRoles;var _default={login:login,isLoggedIn:isLoggedIn,logout:logout,register:register,activate:activate,setTutorialStep:setTutorialStep,setTutorialCompleted:setTutorialCompleted,startResetPassword:startResetPassword,isValidPasswordResetToken:isValidPasswordResetToken,resetPassword:resetPassword,changePassword:changePassword,getInvites:getInvites,invite:invite,deleteInvite:deleteInvite,UserRoles:UserRoles,getOrganizationUsers:getOrganizationUsers,removeUserFromOrganization:removeUserFromOrganization,getPaymentMethod:getPaymentMethod,setPaymentMethod:setPaymentMethod};exports.default=_default;
},{"./Axios":4,"./Config":7,"./Token":13,"./Utility":15}],4:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _axios=_interopRequireDefault(require("axios"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default=function(e){return(0,_axios.default)(e).then(function(e){return e.data})};exports.default=_default;
},{"axios":"axios"}],5:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getShortMime=getShortMime,exports.parseHeaderValue=parseHeaderValue,exports.parsePostData=parsePostData,exports.parseURL=parseURL,exports.omitParam=omitParam,exports.getBase64=getBase64,exports.extractBase64=extractBase64,exports.searchInCapture=searchInCapture,exports.default=exports.groupedTextSearchPlaces=exports.allTextSearchPlacesFilter=exports.textSearchPlaces=exports.allShortMimesFilter=exports.shortMimes=void 0;var _urijs=_interopRequireDefault(require("urijs")),_lodash=_interopRequireDefault(require("lodash")),_Base=_interopRequireDefault(require("../../common/Base64"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var shortMimes={doc:"Document (HTML, XML, etc.)",json:"JSON",img:"Images",css:"CSS",js:"JS",other:"Others"};exports.shortMimes=shortMimes;var allShortMimesFilter={doc:!0,json:!0,img:!0,css:!0,js:!0,other:!0};exports.allShortMimesFilter=allShortMimesFilter;var textSearchPlaces={url:"request URL",queryString:"request query strings",postData:"request body (POST data)",requestHeaders:"request headers",requestCookies:"request cookies",responseHeaders:"response headers",responseCookies:"response cookies",responseBody:"response body"};exports.textSearchPlaces=textSearchPlaces;var allTextSearchPlacesFilter={url:!0,queryString:!0,postData:!0,requestHeaders:!0,requestCookies:!0,responseHeaders:!0,responseCookies:!0,responseBody:!0};exports.allTextSearchPlacesFilter=allTextSearchPlacesFilter;var groupedTextSearchPlaces={request:["url","queryString","postData","requestHeaders","requestCookies"],response:["responseHeaders","responseCookies","responseBody"]};function getShortMime(e,r){return"text/css"===(e=e.toLowerCase())?"css":-1!==e.indexOf("javascript")||"js"===r?"js":"image/"===e.substr(0,6)?"img":"application/json"===e||"json"===r?"json":"text/"===e.substr(0,5)?"doc":"other"}function parseHeaderValue(e){var r={},t=e.split(";").map(function(e){return e.trim()}),a=!0,s=!1,o=void 0;try{for(var n,u=t[Symbol.iterator]();!(a=(n=u.next()).done);a=!0){var i=n.value,l=i.indexOf("=");if(-1!==l){var p=i.substr(0,l).trim(),c=i.substr(l+1).trim();c.length&&'"'===c[0]&&(c=JSON.parse(c)),r[p.toLowerCase()]=c}}}catch(e){s=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw o}}return{keyValue:r,parts:t,raw:e}}function parseHeaders(e){var r={},t=e.split("\r\n"),a=!0,s=!1,o=void 0;try{for(var n,u=t[Symbol.iterator]();!(a=(n=u.next()).done);a=!0){var i=n.value,l=i.indexOf(":"),p=i.substr(0,l).trim(),c=parseHeaderValue(i.substr(l+1).trim());r[p.toLowerCase()]=c}}catch(e){s=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw o}}return r}function parsePostData(e){var r=e.mimeType.toLowerCase(),t={mimeType:r};try{var a=JSON.parse(e.text);return t.type="json",t.data=a,t.text=e.text,t}catch(e){}if(e.params)t.type="params",t.data=e.params.map(function(e){return{name:decodeURIComponent(e.name).replace(/\+/g," "),value:{type:"text",data:decodeURIComponent(e.value).replace(/\+/g," ")}}});else if(0===r.indexOf("multipart/form-data")){t=parseHeaderValue(e.mimeType);var s="--".concat(t.keyValue.boundary),o=e.text.split(s).map(function(e){return e.substr(2,e.length-4)});o.shift(),o.pop();var n=[],u=[],i=!0,l=!1,p=void 0;try{for(var c,d=o[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var m=c.value,h=m.indexOf("\r\n\r\n"),f=m.substr(0,h),x=parseHeaders(f),y=x["content-disposition"];if(y){var v=y.keyValue.name,S=m.substr(h+"\r\n\r\n".length),q=void 0,g=void 0;y.keyValue.filename?(q="file",g={fileName:y.keyValue.filename,mimeType:x["content-type"].raw,content:""}):(q="text",g=S),n.push({name:v,value:{type:q,data:g}}),u.push({raw:m,rawHead:f,head:x,content:S})}}}catch(e){l=!0,p=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw p}}t.type="params",t.data=n,t.parts=u}else t.type="text",t.data=e.text;return t}function parseURL(e){var r=_urijs.default.parse(e);r.protocol&&(r.protocol+=":"),r.host=r.hostname+(r.port?":".concat(r.port):""),r.pathname=r.path,delete r.path,delete r.username,delete r.password;for(var t=0,a=["protocol","hostname","port","pathname","search","hash"];t<a.length;t++){var s=a[t];r[s]=r[s]||""}return r}function omitParam(e,r){return e.filter(function(e){return e.name.toUpperCase()!==r.toUpperCase()})}function getBase64(e){for(var r,t=/[A-Za-z0-9+/-_]{10,}={0,2}/g,a=/^[ -~\r\n]*$/,s=[];r=t.exec(e);){var o=r[0];try{var n=_Base.default.decode(o);a.test(n)&&s.push({name:o,value:n})}catch(e){}}return s}function extractBase64(e){var r={};function t(e,t){if(e){var a=getBase64(e);0!==Object.keys(a).length&&(r[t]=a)}}function a(e,t){if(e){var a=[];e.forEach(function(e){a=(a=a.concat(getBase64(e.name))).concat(getBase64(e.value))}),0!==Object.keys(a).length&&(r[t]=a)}}return a((0,_urijs.default)(e.request.url).query("").toString().split("/").map(function(e){return{name:"",value:e}}),"url"),a(e.custom.queryString,"queryString"),e.request.postData&&t(e.request.postData.text,"postData"),a(omitParam(e.request.headers,"cookie"),"requestHeaders"),a(e.request.cookies,"requestCookies"),a(e.response.headers,"responseHeaders"),a(e.response.cookies,"responseCookies"),t(e.custom.finalData&&e.custom.finalData.responseBody.content,"responseBody"),0!==r.length?r:null}function searchInCapture(e,r,t){t=t||allTextSearchPlacesFilter;var a=r.toLowerCase(),s=[];function o(e){return _lodash.default.some(_lodash.default.map(e,function(e){return-1!==e.name.toLowerCase().indexOf(a)||-1!==e.value.toLowerCase().indexOf(a)}))}function n(e,r,t){e&&((-1!==e.toLowerCase().indexOf(a)||o(r))&&s.push(t))}function u(e,r,t){e&&(o(e)||o(r))&&s.push(t)}var i=e.custom.base64,l=(0,_urijs.default)(e.request.url).query("").toString();if(t.url&&n(l,i.url,"url"),t.queryString&&u(e.custom.queryString,i.queryString,"queryString"),t.postData&&e.request.postData&&n(e.request.postData.text,i.postData,"postData"),t.requestHeaders&&u(omitParam(e.request.headers,"cookie"),i.requestHeaders,"requestHeaders"),t.requestCookies&&u(e.request.cookies,i.requestCookies,"requestCookies"),t.responseHeaders&&u(e.response.headers,i.responseHeaders,"responseHeaders"),t.responseCookies&&u(e.response.cookies,i.responseCookies,"responseCookies"),t.responseBody){var p=e.custom.finalData&&e.custom.finalData.responseBody.content;p&&n(p,i.responseBody,"responseBody")}return 0!==s.length?s:null}exports.groupedTextSearchPlaces=groupedTextSearchPlaces;var _default={shortMimes:shortMimes,allShortMimesFilter:allShortMimesFilter,getShortMime:getShortMime,parseHeaderValue:parseHeaderValue,parsePostData:parsePostData,parseURL:parseURL,getBase64:getBase64,extractBase64:extractBase64,omitParam:omitParam,searchInCapture:searchInCapture,textSearchPlaces:textSearchPlaces,groupedTextSearchPlaces:groupedTextSearchPlaces,allTextSearchPlacesFilter:allTextSearchPlacesFilter};exports.default=_default;
},{"../../common/Base64":52,"lodash":"lodash","urijs":"urijs"}],6:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isChrome=isChrome,exports.getExtensionVersion=getExtensionVersion,exports.isExtensionInstalled=isExtensionInstalled,exports.isChromeExtension=isChromeExtension,exports.openLink=openLink,exports.installExtension=installExtension,exports.default=void 0;var _Config=_interopRequireDefault(require("./Config"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function isChrome(){return"undefined"==typeof window?null:"undefined"!=typeof chrome}function getExtensionVersion(){var e="undefined"!=typeof document&&document.getElementById("wrapapi-extension-is-installed");return e?e.getAttribute("data-version"):null}function isExtensionInstalled(){return!!getExtensionVersion()}function isChromeExtension(){try{return chrome.runtime.sendMessage({type:"dummy"}),!0}catch(e){return!1}}function openLink(e){if(isChromeExtension()){e.preventDefault();var n=e.target.href;return new Promise(function(e){chrome.runtime.sendMessage({type:"chrome.tabs.create",args:{url:n}},e)})}return Promise.resolve()}function installExtension(e){e&&e.preventDefault&&e.preventDefault(),chrome.webstore.install(_Config.default.pluginUrl,function(){console.log("Successful install")},function(e){console.error("Failed to install Chrome extension"),console.error(e)})}var _default={isChrome:isChrome,getExtensionVersion:getExtensionVersion,isExtensionInstalled:isExtensionInstalled,isChromeExtension:isChromeExtension,openLink:openLink,installExtension:installExtension};exports.default=_default;
},{"./Config":7}],7:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.debug=debug,exports.default=exports.stripeKey=exports.proxyAlivePingInterval=exports.pluginURL=exports.wsHost=exports.host=exports.environment=void 0;var shouldInferHost="undefined"!=typeof window&&"chrome-extension:"!==window.location.protocol,environment="production";exports.environment=environment;var host=shouldInferHost?"".concat(window.location.protocol,"//").concat(window.location.host):"https://wrapapi.com";exports.host=host;var wsHost="wss://wrapapi.com";exports.wsHost=wsHost;var pluginURL="https://chrome.google.com/webstore/detail/fmnddkfmloenccahfiaflnkpngndkafm";exports.pluginURL=pluginURL;var proxyAlivePingInterval=1e4;function debug(){}exports.proxyAlivePingInterval=proxyAlivePingInterval;var stripeKey="pk_live_XmH8nkLHqi5AHRCZIUiqqQba";exports.stripeKey=stripeKey;var _default={environment:environment,host:host,wsHost:wsHost,pluginURL:pluginURL,proxyAlivePingInterval:proxyAlivePingInterval,debug:debug,stripeKey:stripeKey};exports.default=_default;
},{}],8:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _immutable=_interopRequireDefault(require("immutable")),_lodash=_interopRequireDefault(require("lodash"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function dotFunc(e){return function(){for(var t=arguments.length,l=new Array(t),a=0;a<t;a++)l[a]=arguments[a];return l[0]=l[0].split("."),this[e].apply(this,l)}}function autoFunc(e,t){return function(l){for(var a=arguments.length,u=new Array(a>1?a-1:0),r=1;r<a;r++)u[r-1]=arguments[r];return"string"==typeof l?this[t].apply(this,[l].concat(u)):this[e].apply(this,[l].concat(u))}}function splitMutableImmutable(e,t){"string"==typeof t?t=t.split("."):"number"==typeof t&&(t=[t]);for(var l=e,a=[],u=[],r=0;r!==t.length;r++){if(_immutable.default.Iterable.isIterable(l)){a=t.slice(r);break}var i=t[r];u.push(i),l=e[i]}return{mutable:u,immutable:a}}function setMixed(e,t,l,a){var u=splitMutableImmutable(e,t),r=!!u.mutable.length,i=!!u.immutable.length,n=r?_lodash.default.get(e,u.mutable):e;if((i?n.getIn(u.immutable):n)===l)return e;var m=i?n.setIn(u.immutable,l):l;if(r){var o=[];e=_lodash.default.clone(e);for(var d=0;d!==u.mutable.length-1;d++){var s=u.mutable[d];o.push(s),_lodash.default.set(e,o,_lodash.default.clone(_lodash.default.get(e,o)))}return a?_lodash.default.setWith(e,u.mutable,m,a):_lodash.default.set(e,u.mutable,m),e}return m}function getMixed(e,t){var l=splitMutableImmutable(e,t),a=!!l.mutable.length,u=!!l.immutable.length,r=a?_lodash.default.get(e,l.mutable):e;return u?r.getIn(l.immutable):r}function deleteMixed(e,t){var l=splitMutableImmutable(e,t),a=!!l.mutable.length,u=!!l.immutable.length,r=a?_lodash.default.get(e,l.mutable):e,i=u?r.deleteIn(l.immutable):r;if(a){var n=[];e=_lodash.default.clone(e);for(var m=0;m!==l.mutable.length-1;m++){var o=l.mutable[m];n.push(o),_lodash.default.set(e,n,_lodash.default.clone(_lodash.default.get(e,n)))}if(u)_lodash.default.set(e,l.mutable,i);else{var d=l.mutable.slice(0,-1),s=0!==d.length?_lodash.default.get(e,d):e,b=l.mutable[l.mutable.length-1];s instanceof Array?s.splice(b,1):delete s[b]}return e}return i}_immutable.default.Iterable.prototype.getDot=dotFunc("getIn"),_immutable.default.Iterable.prototype.setDot=dotFunc("setIn"),_immutable.default.Iterable.prototype.getAuto=autoFunc("getIn","getDot"),_immutable.default.Iterable.prototype.setAuto=autoFunc("setIn","setDot"),_immutable.default.isImmutable=_immutable.default.Iterable.isIterable,_immutable.default.toJS=function(e){return _immutable.default.isImmutable(e)?e.toJS():e},_immutable.default.setMixed=setMixed,_immutable.default.getMixed=getMixed,_immutable.default.deleteMixed=deleteMixed;var _default=_immutable.default;exports.default=_default;
},{"immutable":"immutable","lodash":"lodash"}],9:[function(require,module,exports){
"use strict";require("babel-polyfill");var _react=_interopRequireDefault(require("react")),_reactDom=_interopRequireDefault(require("react-dom")),_RequestCaptureMainPage=_interopRequireDefault(require("../templates/RequestCaptureMainPage"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}require("es6-promise").polyfill(),require("es6-object-assign").polyfill(),document.addEventListener("DOMContentLoaded",function(){document.getElementById("request-capture-main")&&_reactDom.default.render(_react.default.createElement(_RequestCaptureMainPage.default),document.getElementById("request-capture-main"))});
},{"../templates/RequestCaptureMainPage":39,"babel-polyfill":"babel-polyfill","es6-object-assign":"es6-object-assign","es6-promise":"es6-promise","react":"react","react-dom":"react-dom"}],10:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.connect=connect,exports.allocate=allocate,exports.updateLastProxyInteraction=updateLastProxyInteraction,exports.default=void 0;var _Config=_interopRequireDefault(require("./Config")),_Axios=_interopRequireDefault(require("./Axios"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function connect(e,t,o,a){var r=new WebSocket("".concat(_Config.default.wsHost,"/requests/").concat(e));return new Promise(function(e,n){r.onmessage=function(a){try{var r=a.data,c=JSON.parse(r);if("capture"===c.type){var u=c.data;t(u)}else if("stop"===c.type)o();else{if("status"!==c.type)throw new Error("We received an unrecognized response type from the WebSocket server");e(c.data)}}catch(e){e.response=a,n(e)}},r.onclose=a,r.onerror=a})}function allocate(){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/proxyAllocation"),method:"POST"})}function updateLastProxyInteraction(){return(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/proxyAllocation/updateLastProxyInteraction"),method:"POST"})}var _default={connect:connect,allocate:allocate,updateLastProxyInteraction:updateLastProxyInteraction};exports.default=_default;
},{"./Axios":4,"./Config":7}],11:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _Request=_interopRequireDefault(require("../../common/Request")),_sandbox=_interopRequireDefault(require("./sandbox"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default=(0,_Request.default)(_sandbox.default);exports.default=_default;
},{"../../common/Request":53,"./sandbox":21}],12:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setCapture=setCapture,exports.getCapture=getCapture,exports.getCaptures=getCaptures,exports.default=void 0;var _Axios=_interopRequireDefault(require("./Axios")),_Config=_interopRequireDefault(require("./Config")),_Token=_interopRequireDefault(require("./Token")),_Ajax=require("./Ajax");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function asyncGeneratorStep(e,t,r,n,a,u,o){try{var s=e[u](o),p=s.value}catch(e){return void r(e)}s.done?t(p):Promise.resolve(p).then(n,a)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var u=e.apply(t,r);function o(e){asyncGeneratorStep(u,n,a,o,s,"next",e)}function s(e){asyncGeneratorStep(u,n,a,o,s,"throw",e)}o(void 0)})}}function setCapture(e,t){return _setCapture.apply(this,arguments)}function _setCapture(){return(_setCapture=_asyncToGenerator(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_Token.default.get();case 2:return n=e.sent,a=n?"?token=".concat(n):"",e.abrupt("return",(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/captures").concat(a),method:"POST",data:{name:t,data:r}}).then(_Ajax.processResponse));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function getCapture(e){return _getCapture.apply(this,arguments)}function _getCapture(){return(_getCapture=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_Token.default.get();case 2:return r=e.sent,n=r?"?token=".concat(r):"",e.abrupt("return",(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/captures/").concat(t).concat(n),method:"GET"}).then(_Ajax.processResponse));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function getCaptures(){return _getCaptures.apply(this,arguments)}function _getCaptures(){return(_getCaptures=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_Token.default.get();case 2:return t=e.sent,r=t?"?token=".concat(t):"",e.abrupt("return",(0,_Axios.default)({url:"".concat(_Config.default.host,"/ajax/captures").concat(r),method:"GET"}).then(_Ajax.processResponse));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _default={setCapture:setCapture,getCapture:getCapture,getCaptures:getCaptures};exports.default=_default;
},{"./Ajax":2,"./Axios":4,"./Config":7,"./Token":13}],13:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.set=set,exports.get=get,exports.default=void 0;var _Chrome=_interopRequireDefault(require("./Chrome"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function set(e){return new Promise(function(t){_Chrome.default.isChromeExtension()?chrome.runtime.sendMessage({type:"chrome.storage.local.set",args:{token:e}},t):t(null)})}function get(){return new Promise(function(e){_Chrome.default.isChromeExtension()?chrome.runtime.sendMessage({type:"chrome.storage.local.get",args:"token"},function(t){t&&t.token?e(t.token):e(null)}):e(null)})}var _default={set:set,get:get};exports.default=_default;
},{"./Chrome":6}],14:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.nextStep=exports.steps=void 0;var steps=["pressToRecord","chooseCapture","saveCapture","goToInputsTab","editQueryAndPost","editSaveInput","waitingForSaveInput","goToOutputsTab","addTestCase","editTestCaseInputs","editTestCaseStateToken","runTest","saveTestCase","selectTestCase","addOutputScenario","nameOutputScenario","createOutput","saveOutputScenario","goToViewTab","done"];exports.steps=steps;var nextStep={};exports.nextStep=nextStep;for(var i=0;i!==steps.length-1;i++)nextStep[steps[i]]=steps[i+1];var _default={steps:steps,nextStep:nextStep};exports.default=_default;
},{}],15:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sortAPIElements=sortAPIElements,exports.arrayBufferToBase64=arrayBufferToBase64,exports.getDefaultBaseAPIElement=getDefaultBaseAPIElement,exports.getDefaultAPIElement=getDefaultAPIElement,exports.getInitialAPIElement=getInitialAPIElement,exports.getDefaultExtractor=getDefaultExtractor,exports.getDefaultFileInputValue=getDefaultFileInputValue,exports.getDefaultInputSpec=getDefaultInputSpec,exports.getDefaultPostData=getDefaultPostData,exports.getDefaultNewParam=getDefaultNewParam,exports.sortVersions=sortVersions,exports.getDefaultOutputScenario=getDefaultOutputScenario,exports.getDefaultTestCase=getDefaultTestCase,exports.getDefaultExtractorTestCase=getDefaultExtractorTestCase,exports.getDefaultCleanup=getDefaultCleanup,exports.getDefaultPostProcess=getDefaultPostProcess,exports.getDefaultExtractorPostProcess=getDefaultExtractorPostProcess,exports.upgradeAPIElement=upgradeAPIElement,exports.getDefaultEdgeInput=getDefaultEdgeInput,exports.getDefaultEdgeSerializedForm=getDefaultEdgeSerializedForm,exports.findUnusedName=findUnusedName,exports.normalizeOptions=normalizeOptions,exports.default=exports.getDefaultError=exports.getDefaultCompositeAPIElement=exports.CompositeGraph=exports.getDefaultCompositeGraph=exports.CompositeInput=exports.getDefaultCompositeInput=exports.CompositeEdge=exports.getDefaultCompositeEdge=exports.EdgeInput=exports.CompositeVertex=exports.getDefaultCompositeVertex=exports.getDefaultVertexPostProcess=exports.getDefaultBranchingFunction=exports.defaultExtractorPostProcessScript=exports.defaultPostProcessScript=exports.getDefaultInputHelperScriptCode=exports.InputHelperScript=exports.getDefaultInputHelperScript=exports.Input=exports.getDefaultInput=exports.PostData=exports.InputSpec=exports.FileInputValue=exports.getFullNameWithUsername=exports.getFullName=exports.doNothing=exports.apiInputTypes=exports.sizeToText=void 0;var _lodash=_interopRequireDefault(require("lodash")),_urijs=_interopRequireDefault(require("urijs")),_Immutable=_interopRequireDefault(require("./Immutable")),_Request=_interopRequireDefault(require("./Request"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var sizeToText=function(e){var t,a="";return e>1e6?(t=Math.round(e/1e6*10)/10,a=" M"):e>1e3?(t=Math.round(e/1e3*10)/10,a=" K"):(t=e,a=" B"),t.toString()+a};exports.sizeToText=sizeToText;var apiInputTypes={constant:"Constant",variable:"Text API input",file:"File API input"};exports.apiInputTypes=apiInputTypes;var doNothing=function(e){e.preventDefault()};exports.doNothing=doNothing;var getFullName=function(e){return"".concat(e.repository,"/").concat(e.name)};exports.getFullName=getFullName;var getFullNameWithUsername=function(e){return"".concat(e.username,"/").concat(e.repository,"/").concat(e.name)};function compareAPIElements(e,t){return e.repository===t.repository?e.name<t.name?-1:1:e.repository<t.repository?-1:1}function sortAPIElements(e){return e.sort(compareAPIElements)}function arrayBufferToBase64(e){for(var t="",a=new Uint8Array(e),r=a.byteLength,o=0;o<r;o++)t+=String.fromCharCode(a[o]);return btoa(t)}function getDefaultBaseAPIElement(){return{username:"",repository:"",name:"",description:"",readme:"",version:"0.0.0",majorVersion:0,minorVersion:0,dotVersion:0,published:!1,main:!0,isOwn:!0,updatedAt:null,storedResponseCount:0}}function getDefaultAPIElement(){return _lodash.default.assign(getDefaultBaseAPIElement(),{type:"normal",input:getDefaultInputSpec(),output:{scenarios:[]},testCases:[],postProcess:getDefaultPostProcess()})}exports.getFullNameWithUsername=getFullNameWithUsername;var DEFAULT_USER_AGENT="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36";function getInitialAPIElement(){var e=getDefaultAPIElement();e.input.url="https://news.ycombinator.com/",e.input.headers.push(getDefaultNewParam("User-Agent","undefined"!=typeof navigator?navigator.userAgent:DEFAULT_USER_AGENT));var t=getDefaultOutputScenario();return t.name="Default",e.output.scenarios=[t],e}var initialTestCaseResponse='<!DOCTYPE html>\n<html>\n  <head>\n    <title>Welcome to the WrapAPI extractor</title>\n    <meta charset="UTF-8">\n\n    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto">\n    <style>\n      h1 { font-family: Roboto,"Gill Sans","Gill Sans MT",Calibri,sans-serif; }\n      body { padding-left: 10px; padding-right: 10px; font-family: Roboto,Helvetica,sans-serif; }\n    </style>\n  </head>\n  <body>\n    <h1>Welcome to the WrapAPI Extractor!</h1>\n    <p>To start using the WrapAPI Extractor:</p>\n    <ol>\n      <li>Switch over to "Code view", and paste the HTML of a page you\'d like to extract data from.</li>\n      <li>Edit the URL bar to be the page where you got the HTML from (so that we give you the full pretty page by loading its stylesheets).</li>\n      <li>Add "Outputs" by clicking on the parts of the page you\'d like to extract.</li>\n    </ol>\n    <p>You can paste in multiple such "test cases" to make sure that the extraction rules you defined work for all the different pages you might see.</p>\n  </body>\n</html>\n';function getDefaultExtractor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _lodash.default.assign(getDefaultBaseAPIElement(),{type:"extractor",output:{scenarios:[getDefaultOutputScenario({name:"Default"})]},testCases:[getDefaultExtractorTestCase({name:"New test case",body:e.body||initialTestCaseResponse,url:e.url})],postProcess:getDefaultExtractorPostProcess()})}function getDefaultFileInputValue(){return{content:null,mimeType:null,fileName:""}}var FileInputValue=_Immutable.default.Record(getDefaultFileInputValue());function getDefaultAuthorization(){return{mode:null,basic:{username:"",password:""},ntlm:{username:"",password:"",domain:""}}}function getDefaultInputSpec(){return{url:"",headers:[],method:"GET",postData:getDefaultPostData(),queryString:[],authorization:getDefaultAuthorization(),inputs:{},script:null}}exports.FileInputValue=FileInputValue;var InputSpec=_Immutable.default.Record(getDefaultInputSpec());function getDefaultPostData(){return{type:"params",data:[],inputData:null}}exports.InputSpec=InputSpec;var PostData=_Immutable.default.Record(getDefaultPostData());function getDefaultNewParam(e,t){return{type:"new",name:e||"",value:t||"",varName:"file"}}exports.PostData=PostData;var getDefaultInput=function(e){return _lodash.default.assign({name:null,type:"variable",required:!0,defaultEnabled:!1,default:"",documentation:""},e)};exports.getDefaultInput=getDefaultInput;var Input=_Immutable.default.Record(getDefaultInput());exports.Input=Input;var getDefaultInputHelperScript=function(){return{code:"",globals:[]}};exports.getDefaultInputHelperScript=getDefaultInputHelperScript;var InputHelperScript=_Immutable.default.Record(getDefaultInputHelperScript());exports.InputHelperScript=InputHelperScript;var getDefaultInputHelperScriptCode=function(){return"// Define your helper functions below:\n// e.g., function pad(input) { return input + ' '; }\n// which can then be used in a JS expression such as\n//   pad(input.myInputName)\n"};function sortVersions(e,t){var a="DESC"===(t=t||"DESC")?-1:1;return e.sort(function(e,t){for(var r="string"==typeof e?e:e.version,o="string"==typeof t?t:t.version,n=function(e){return parseInt(e,10)},u=r.split(".").map(n),s=o.split(".").map(n),p=0;p!==u.length;p++)if(u[p]!==s[p])return a*(u[p]-s[p]);return 0})}function getDefaultOutputScenario(e){return _objectSpread({name:"",outputs:{}},e)}function getDefaultTestCase(){return{name:"",inputs:{},options:{},responseData:{responses:[],stateToken:"",cookies:""},secret:{}}}exports.getDefaultInputHelperScriptCode=getDefaultInputHelperScriptCode;var defaultTestCaseResponse='<!DOCTYPE html>\n<html>\n  <head>\n    <title>New test case</title>\n    <meta charset="UTF-8">\n\n    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto">\n    <style>\n      h1 { font-family: Roboto,"Gill Sans","Gill Sans MT",Calibri,sans-serif; }\n      body { padding-left: 10px; padding-right: 10px; font-family: Roboto,Helvetica,sans-serif; }\n    </style>\n  </head>\n  <body>\n    <h1>New test case</h1>\n    <p><strong>Switch to the "Code view" tab</strong> and paste in the test data you\'d like to try WrapAPI Extractor on.</p>\n  </body>\n</html>\n';function getDefaultExtractorTestCase(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:e.name||"",responseData:{responses:[{body:e.body||defaultTestCaseResponse,request:{uri:{href:e.url||"https://wrapapi.com"}}}]}}}function getDefaultCleanup(){return{type:null,options:{}}}function getDefaultBaseOutput(){return{name:"",matchEngine:null,type:"requiredOutput",children:{},cleanup:getDefaultCleanup(),data:{}}}function getDefaultOutput(e){var t=getDefaultBaseOutput();switch(e){case"regex":return Object.assign(t,{matchEngine:"regex",data:{group:0,match:null,allMatches:!0,regex:{pattern:"",modifiers:"g"},matchOn:"pretty"}});case"css":return Object.assign(t,{matchEngine:"css",data:{cssSelector:"",numToSelect:"first",captureType:"text",attrsToSelect:[],objectIncludeText:!1,objectIncludeHtml:!1},cleanup:{type:"trim",options:{}}});case"collection":return Object.assign(t,{matchEngine:"collection",data:{outputs:{}}});case"json":return Object.assign(t,{matchEngine:"json",data:{jsonSelector:"$",selectorType:"jsonPathFirstOnly"}});case"form":return Object.assign(t,{matchEngine:"form",data:{cssSelector:""}});case"header":return Object.assign(t,{matchEngine:"header",data:{response:0,key:""}});case"cookie":default:return Object.assign(t,{matchEngine:"cookie",data:{response:0,allResponses:!0,key:""}})}}var defaultPostProcessScript='function postProcess(output, input) {\n  // "output" has the raw pre-processing output\n  // "input" has the specified inputs, including defaults\n  return output;\n}\n';exports.defaultPostProcessScript=defaultPostProcessScript;var defaultExtractorPostProcessScript='function postProcess(output) {\n  // "output" has the raw pre-processing output\n}\n';function getDefaultPostProcess(){return{script:defaultPostProcessScript,enabled:!1}}function getDefaultExtractorPostProcess(){return{script:defaultExtractorPostProcessScript,enabled:!1}}function upgradeAPIElement(e){if("composite"===e.type)return e;e.type||(e.type="normal");var t=e.postProcess;function a(e){if("file"===e.type||"new"===e.type)return e;var t=getDefaultNewParam();if(t.name=e.name,"variable"===e.type){var a=e.varName;/^[$A-Z_][0-9A-Z_$]*$/i.test(a)?t.value="{{".concat(a,"}}"):t.value="{{wrapAPIInputs[".concat(JSON.stringify(a),"]}}")}else"expression"===e.type?t.value="{{".concat(e.expression.replace(/input\./g,""),"}}"):"constant"===e.type&&(t.value=e.data);return t}"string"==typeof t?e.postProcess={script:t,enabled:!0}:t||(e.postProcess={script:defaultPostProcessScript,enabled:!1}),e.testCases&&(e.testCases=_lodash.default.filter(e.testCases).map(function(e){return e.options||(e.options={},e.stateToken&&(e.options.stateToken=e.stateToken,delete e.stateToken),e.serializedForm&&(e.options.serializedForm=e.serializedForm,delete e.serializedForm)),e}));var r=e.input;r.postData&&("params"===r.postData.type?r.postData.data=r.postData.data.map(a):"json"!==r.postData.type&&"text"!==r.postData.type||(r.postData.data=function(e){for(var t=_Request.default.parseCurlyExpression(e),a=0;a!==t.length;a++){var r=t[a];if("expression"===r.type){var o=/^[$A-Z_][0-9A-Z_$]*$/i.test(r.data);r.data=o?r.data:"wrapAPIInputs[".concat(JSON.stringify(r.data),"]")}}return t.map(function(e){return"expression"===e.type?"{{".concat(e.data,"}}"):e.data}).join("")}(r.postData.data||""))),r.queryString&&(r.queryString=r.queryString.map(a)),r.headers&&(r.headers=r.headers.map(a));var o=_lodash.default.map(r.queryString,"name"),n=(0,_urijs.default)(r.url).query(!0);return _lodash.default.forEach(n,function(e,t){-1===o.indexOf(t)&&r.queryString.push(getDefaultNewParam(t,e))}),r.url=(0,_urijs.default)(r.url).query({}).normalizeQuery().toString(),e.input.authorization||(e.input.authorization=getDefaultAuthorization()),e.input.method=e.input.method.toUpperCase(),e}exports.defaultExtractorPostProcessScript=defaultExtractorPostProcessScript;var getDefaultBranchingFunction=function(){return"// Define which output scenario we should run next\n// by returning a string corresponding to its name.\n// (e.g., return 'myScenario' in the code to\n// go to the scenario named myScenario)\nfunction branch(output, input) {\n  // output has the output from this component API element\n  // input has the inputs from the overall composite API element\n  return output.outputScenario;\n}\n"};exports.getDefaultBranchingFunction=getDefaultBranchingFunction;var getDefaultVertexPostProcess=function(){return"// Modify and return what you want as the output\nfunction postProcess(output, input) {\n  // output has the output from this component API element\n  // input has the inputs from the overall composite API element\n  return output;\n}\n"};exports.getDefaultVertexPostProcess=getDefaultVertexPostProcess;var getDefaultCompositeVertex=function(){return{id:null,type:"apiElement",name:null,data:null,branchingMode:"outputScenario",branchingFunction:getDefaultBranchingFunction(),postProcessEnabled:!1,postProcess:getDefaultVertexPostProcess()}};exports.getDefaultCompositeVertex=getDefaultCompositeVertex;var CompositeVertex=_Immutable.default.Record(getDefaultCompositeVertex());function getDefaultEdgeInput(){return{baseType:"variable",type:"input",data:"",varName:"",expression:""}}function getDefaultEdgeSerializedForm(){return _lodash.default.assign(getDefaultEdgeInput(),{type:"none"})}exports.CompositeVertex=CompositeVertex;var EdgeInput=_Immutable.default.Record(getDefaultEdgeInput());exports.EdgeInput=EdgeInput;var getDefaultCompositeEdge=function(){return{targetId:null,inputs:{},serializedForm:getDefaultEdgeSerializedForm()}};exports.getDefaultCompositeEdge=getDefaultCompositeEdge;var CompositeEdge=_Immutable.default.Record({targetId:null,inputs:new _Immutable.default.Map,serializedForm:new EdgeInput(getDefaultEdgeSerializedForm())});function buildCompositeEdgeInputs(e){var t=_lodash.default.chain(e).map(function(e){var t=e.name,a=-1!==t.search(/^[A-Za-z_$][\w_]*$/);return[e.name,new EdgeInput({baseType:e.type,varName:t,expression:a?"input.".concat(t):"input[".concat(t.replace(/'/g,"\\'"),"]")})]}).fromPairs().value();return _Immutable.default.fromJS(t)}exports.CompositeEdge=CompositeEdge;var getDefaultCompositeInput=function(){return{required:!0,type:"variable"}};exports.getDefaultCompositeInput=getDefaultCompositeInput;var CompositeInput=_Immutable.default.Record(getDefaultCompositeInput());exports.CompositeInput=CompositeInput,CompositeInput.fromJS=function(e){return new CompositeInput("boolean"==typeof e?{required:e,type:"variable"}:e)};var getDefaultCompositeGraph=function(){return{vertices:{0:{id:"0",type:"start",name:"start",data:null}},edges:{0:{start:null}},input:{inputs:{}}}};exports.getDefaultCompositeGraph=getDefaultCompositeGraph;var CompositeGraph=_Immutable.default.Record(getDefaultCompositeGraph());exports.CompositeGraph=CompositeGraph;var getDefaultCompositeAPIElement=function(){return _lodash.default.assign(getDefaultBaseAPIElement(),{type:"composite",graph:getDefaultCompositeGraph(),input:{url:"",inputs:{}}})};exports.getDefaultCompositeAPIElement=getDefaultCompositeAPIElement;var getDefaultError=function(e){var t={success:!1,messages:["There was an unknown error; please try again later"],error:{}};return e&&(t.error=e),t};function findUnusedName(e,t,a){for(var r=!!(a=a||{}).includeSpace,o=t instanceof Array?_lodash.default.zipObject(t,t):t,n=e,u=2;n in o;)n=e+(r?" ":"")+u++;return n}function normalizeOptions(e){if(e instanceof Array){if(e[0]&&"object"!==_typeof(e[0]))return e.map(function(e){return{value:e,label:e}})}else if("object"===_typeof(e))return _lodash.default.map(e,function(e,t){return{value:t,label:e}});return e}exports.getDefaultError=getDefaultError;var _default={sizeToText:sizeToText,apiInputTypes:apiInputTypes,doNothing:doNothing,getFullName:getFullName,getFullNameWithUsername:getFullNameWithUsername,sortAPIElements:sortAPIElements,sortVersions:sortVersions,arrayBufferToBase64:arrayBufferToBase64,getDefaultAPIElement:getDefaultAPIElement,getInitialAPIElement:getInitialAPIElement,getDefaultExtractor:getDefaultExtractor,getDefaultInputSpec:getDefaultInputSpec,InputSpec:InputSpec,getDefaultInputHelperScript:getDefaultInputHelperScript,InputHelperScript:InputHelperScript,getDefaultInputHelperScriptCode:getDefaultInputHelperScriptCode,getDefaultPostData:getDefaultPostData,PostData:PostData,getDefaultNewParam:getDefaultNewParam,getDefaultInput:getDefaultInput,Input:Input,getDefaultFileInputValue:getDefaultFileInputValue,FileInputValue:FileInputValue,getDefaultOutputScenario:getDefaultOutputScenario,getDefaultTestCase:getDefaultTestCase,getDefaultExtractorTestCase:getDefaultExtractorTestCase,getDefaultOutput:getDefaultOutput,getDefaultCleanup:getDefaultCleanup,defaultPostProcessScript:defaultPostProcessScript,getDefaultPostProcess:getDefaultPostProcess,upgradeAPIElement:upgradeAPIElement,getDefaultBranchingFunction:getDefaultBranchingFunction,getDefaultVertexPostProcess:getDefaultVertexPostProcess,getDefaultCompositeVertex:getDefaultCompositeVertex,CompositeVertex:CompositeVertex,getDefaultCompositeEdge:getDefaultCompositeEdge,CompositeEdge:CompositeEdge,buildCompositeEdgeInputs:buildCompositeEdgeInputs,getDefaultEdgeSerializedForm:getDefaultEdgeSerializedForm,getDefaultEdgeInput:getDefaultEdgeInput,EdgeInput:EdgeInput,getDefaultCompositeInput:getDefaultCompositeInput,CompositeInput:CompositeInput,getDefaultCompositeGraph:getDefaultCompositeGraph,CompositeGraph:CompositeGraph,getDefaultCompositeAPIElement:getDefaultCompositeAPIElement,getDefaultError:getDefaultError,findUnusedName:findUnusedName,normalizeOptions:normalizeOptions};exports.default=_default;
},{"./Immutable":8,"./Request":11,"lodash":"lodash","urijs":"urijs"}],16:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.user=user,exports.contactForm=contactForm,exports.default=exports.emailRegex=void 0;var usernameRegex=/^\w[\w-]*\w$/,emailRegex=/^[a-zA-Z0-9.!#$%&*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;function user(e){var a={};return e.username?usernameRegex.test(e.username)||(a.username="Your username must only contain numbers, letters, and dashes (-) and be at least 2 characters long"):a.username="Please enter a username.",e.password||(a.password="Please enter a password."),e.email?emailRegex.test(e.email)||(a.email="The email address doesn't look valid. Please try again."):a.email="Please enter your email address.",e.name||(a.name="Please enter your name."),"boolean"!=typeof e.shouldContact&&(a.shouldContact="Please choose whether you're potentially interested in a higher usage limit or a self-hosted/private instance"),a}function contactForm(e){var a={};return e.name||(a.name="Please enter your name."),e.email?emailRegex.test(e.email)||(a.email="The email address doesn't look valid. Please try again."):a.email="Please enter your email.",e.company||(a.company="Please enter your company's name."),a}exports.emailRegex=emailRegex;var _default={user:user,contactForm:contactForm};exports.default=_default;
},{}],17:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getKey=getKey,exports.getNameKey=getNameKey,exports.Reducer=Reducer,exports.connect=connect,exports.default=exports.Actions=void 0;var _reactRedux=require("react-redux"),_lodash=_interopRequireDefault(require("lodash")),_moment=_interopRequireDefault(require("moment")),_Utility=_interopRequireDefault(require("../Utility")),_APIStorage=_interopRequireDefault(require("../APIStorage"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Actions={startUpdateAPIElements:function(){return{type:"APIS_UPDATE_START"}},updateAPIElements:function(e){return{type:"APIS_UPDATE",apiElements:e}},addAPIElement:function(e){return{type:"API_ADD",apiElement:e}},removeAPIElement:function(e){return{type:"API_REMOVE",apiElement:e}},startLoadingAPIElement:function(e){return{type:"API_LOADING",nameVersion:e}},finishLoadingAPIElement:function(e,t,n,r){return{type:"API_LOADED",nameVersion:e,apiElement:t,aliased:n,versions:r}},errorLoadingAPIElement:function(e,t){return{type:"API_ERROR",nameVersion:e,response:t}},startSavingAPIElement:function(e){return{type:"API_SAVING",apiElement:e}},finishSavingAPIElement:function(e,t,n){return{type:"API_SAVED",apiElement:e,response:t,versions:n}},errorSavingAPIElement:function(e,t){return{type:"API_SAVE_ERROR",apiElement:e,response:t}},finishAliasingAPIElement:function(e,t,n){return{type:"API_ALIASED",apiElement:e,aliased:t,response:n}}};function rekeyAPIElementsByName(e){return _lodash.default.fromPairs(e.map(function(e){return[_Utility.default.getFullName(e),e]}))}function getKey(e){return[e.username,e.repository,e.name,e.version].join("/")}function getNameKey(e){return[e.username,e.repository,e.name].join("/")}function Reducer(e,t){if(e||(e={loading:!1,loaded:!1,apiElements:{},apiElementsLoadedAt:null,error:null,fullAPILoading:{},fullAPILoaded:{},fullAPI:{},fullAPIAliased:{},fullAPIVersions:{},fullAPILoadResponse:{},fullAPISaving:{},fullAPISaveResponse:{}}),t)switch(t.type){case"APIS_UPDATE_START":return _objectSpread({},e,{loading:!0});case"APIS_UPDATE":return _objectSpread({},e,{loading:!1,loaded:!0,apiElements:rekeyAPIElementsByName(t.apiElements),apiElementsLoadedAt:(0,_moment.default)()});case"API_ADD":var n=e.apiElements,r=t.apiElement;return _objectSpread({},e,{apiElements:Object.assign(n,_defineProperty({},_Utility.default.getFullName(r),r))});case"API_REMOVE":return _objectSpread({},e,{apiElements:_lodash.default.omit(e.apiElements,_Utility.default.getFullName(t.apiElement))});case"API_LOADING":return _objectSpread({},e,{fullAPILoading:_objectSpread({},e.fullAPILoading,_defineProperty({},getKey(t.nameVersion),!0))});case"API_LOADED":var l=getKey(t.nameVersion),o=getNameKey(t.nameVersion),a=t.apiElement;return a.type&&"normal"!==a.type||(a=_Utility.default.upgradeAPIElement(a)),_objectSpread({},e,{fullAPILoading:_objectSpread({},e.fullAPILoading,_defineProperty({},l,!1)),fullAPILoaded:_objectSpread({},e.fullAPILoaded,_defineProperty({},l,!0)),fullAPI:_objectSpread({},e.fullAPI,_defineProperty({},l,a)),fullAPIAliased:_objectSpread({},e.fullAPIAliased,_defineProperty({},o,t.aliased)),fullAPIVersions:_objectSpread({},e.fullAPIVersions,_defineProperty({},o,_lodash.default.map(t.versions,"version")))});case"API_ERROR":var i=getKey(t.nameVersion);return _objectSpread({},e,{fullAPILoading:_objectSpread({},e.fullAPILoading,_defineProperty({},i,!1)),fullAPILoaded:_objectSpread({},e.fullAPILoaded,_defineProperty({},i,!0)),fullAPILoadResponse:_objectSpread({},e.fullAPI,_defineProperty({},i,t.response))});case"API_SAVING":var s=getKey(t.apiElement);return _objectSpread({},e,{fullAPISaving:_objectSpread({},e.fullAPISaving,_defineProperty({},s,!0)),fullAPISaveResponse:_objectSpread({},e.fullAPISaveResponse,_defineProperty({},s,null))});case"API_SAVED":var u=getKey(t.apiElement),d=getNameKey(t.apiElement);return _objectSpread({},e,{fullAPISaving:_objectSpread({},e.fullAPISaving,_defineProperty({},u,!1)),fullAPI:_objectSpread({},e.fullAPI,_defineProperty({},u,t.apiElement)),fullAPILoaded:_objectSpread({},e.fullAPILoaded,_defineProperty({},u,!0)),fullAPIVersions:_objectSpread({},e.fullAPIVersions,_defineProperty({},d,t.versions)),fullAPISaveResponse:_objectSpread({},e.fullAPISaveResponse,_defineProperty({},u,t.response))});case"API_ALIASED":var A,f=getKey(t.apiElement),P=getNameKey(t.apiElement),p=getKey(t.aliased),c=getNameKey(t.aliased);return _objectSpread({},e,{fullAPISaving:_objectSpread({},e.fullAPISaving,_defineProperty({},f,!1)),fullAPI:_objectSpread({},e.fullAPI,_defineProperty({},p,t.apiElement)),fullAPIAliased:_objectSpread({},e.fullAPIAliased,(A={},_defineProperty(A,P,t.aliased),_defineProperty(A,c,t.aliased),A)),fullAPILoaded:_objectSpread({},e.fullAPILoaded,_defineProperty({},p,!0)),fullAPIVersions:_objectSpread({},e.fullAPIVersions,_defineProperty({},p,t.versions)),fullAPISaveResponse:_objectSpread({},e.fullAPISaveResponse,_defineProperty({},f,t.response))});case"API_SAVE_ERROR":var I=getKey(t.apiElement);return _objectSpread({},e,{fullAPISaving:_objectSpread({},e.fullAPISaving,_defineProperty({},I,!1)),fullAPISaveResponse:_objectSpread({},e.fullAPISaveResponse,_defineProperty({},I,t.response))})}return e}exports.Actions=Actions;var refreshAPIElements=_lodash.default.memoize(function(e){return function(){e(Actions.startUpdateAPIElements()),_APIStorage.default.getAll().then(function(t){e(Actions.updateAPIElements(t))}).catch(function(e){console.error("Error when trying to get API elements"),console.error(e)})}}),loadAPIElement=_lodash.default.memoize(function(e){return function(t,n,r,l){var o={username:t,repository:n,name:r,version:l};return e(Actions.startLoadingAPIElement(o)),_APIStorage.default.get(t,n,r,l,!0).then(function(t){t.success?e(Actions.finishLoadingAPIElement(o,t.data,t.aliased,t.versions)):e(Actions.errorLoadingAPIElement(o,t))}).catch(function(t){e(Actions.errorLoadingAPIElement(o,{success:!1,messages:["An unexpected error has occurred. Please try again later."],error:t}))})}}),saveAPIElement=_lodash.default.memoize(function(e){return function(t,n,r,l){var o,a=!l&&n&&(n.username!==t.username||n.repository!==t.repository||n.name!==t.name);return o=n?l?_APIStorage.default.rename(n.repository,n.name,t):_APIStorage.default.setWithDiff(n,t):_APIStorage.default.set(t),e(Actions.startSavingAPIElement(t)),o.then(function(o){return o.success?(!a&&r||(r=[]),r=_Utility.default.sortVersions(_lodash.default.uniq(r.concat([t.version])),"DESC"),e(Actions.finishSavingAPIElement(t,o,r)),l&&e(Actions.removeAPIElement(n)),e(Actions.addAPIElement(t)),t):(e(Actions.errorSavingAPIElement(t,o)),null)})}}),aliasAPIElement=_lodash.default.memoize(function(e){return function(t,n){return e(Actions.startSavingAPIElement(t)),_APIStorage.default.alias(t,n).then(function(r){return r.success?e(Actions.finishAliasingAPIElement(t,n,r)):e(Actions.errorSavingAPIElement(t,r)),t})}}),addAPIElement=function(e){return function(t){e(Actions.addAPIElement(t))}},removeAPIElement=function(e){return function(t){e(Actions.removeAPIElement(t))}};function connect(e){return(0,_reactRedux.connect)(function(e){var t=e.apiElements;return{apiElementsLoaded:t.loaded,apiElementsLoadedAt:t.apiElementsLoadedAt,apiElementsLoading:t.loading,apiElements:t.apiElements,fullAPILoading:t.fullAPILoading,fullAPILoaded:t.fullAPILoaded,fullAPI:t.fullAPI,fullAPIAliased:t.fullAPIAliased,fullAPIVersions:t.fullAPIVersions,fullAPILoadResponse:t.fullAPILoadResponse,fullAPISaving:t.fullAPISaving,fullAPISaveResponse:t.fullAPISaveResponse}},function(e){return{refreshAPIElements:refreshAPIElements(e),addAPIElement:addAPIElement(e),removeAPIElement:removeAPIElement(e),loadAPIElement:loadAPIElement(e),saveAPIElement:saveAPIElement(e),aliasAPIElement:aliasAPIElement(e)}},null,e)}var _default={Actions:Actions,Reducer:Reducer,connect:connect,getKey:getKey,getNameKey:getNameKey};exports.default=_default;
},{"../APIStorage":1,"../Utility":15,"lodash":"lodash","moment":"moment","react-redux":"react-redux"}],18:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Reducer=Reducer,exports.login=login,exports.logout=logout,exports.connect=connect,exports.default=exports.Actions=void 0;var _reactRedux=require("react-redux"),_lodash=_interopRequireDefault(require("lodash")),_Tutorial=_interopRequireDefault(require("./Tutorial")),_Auth=_interopRequireDefault(require("../Auth")),_Token=_interopRequireDefault(require("../Token")),_APIStorage=_interopRequireDefault(require("../APIStorage")),_Chrome=_interopRequireDefault(require("../Chrome")),_Proxy=_interopRequireDefault(require("../Proxy"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,r)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach(function(t){_defineProperty(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var useToken=_Chrome.default.isChromeExtension(),Actions={startLogin:function(){return{type:"START_LOGIN"}},finishLogin:function(e){return{type:"FINISH_LOGIN",data:e}},updateLoginState:function(e){return{type:"UPDATE_LOGIN_STATE",data:e}},updateProxyAllocation:function(e){return{type:"UPDATE_PROXY_ALLOCATION",data:e}},startLogout:function(){return{type:"START_LOGOUT"}},finishLogout:function(){return{type:"FINISH_LOGOUT"}},startRegister:function(){return{type:"START_REGISTER"}},finishRegister:function(e){return{type:"FINISH_REGISTER",data:e}},setError:function(e){return{type:"SET_ERROR",error:e}},setTutorialCompleted:function(e,t){return{type:"SET_TUTORIAL_COMPLETED",tutorial:e,completed:t}}};function Reducer(e,t){switch(e||(e={loading:!1,loaded:!1,response:{success:!1,loggedIn:!1,username:null,activated:null,isAdmin:null,role:"Normal",name:null,email:null,company:null,tutorialStep:null,yukataTutorialCompleted:!1,extractorTutorialCompleted:!1,featureFlags:{},proxyAllocation:null,token:null,requestLimit:null,organization:null},error:null}),t.type){case"START_LOGIN":case"START_REGISTER":case"START_LOGOUT":return _objectSpread({},e,{loading:!0,error:null});case"FINISH_LOGIN":case"FINISH_REGISTER":case"UPDATE_LOGIN_STATE":if(useToken&&t.data.loggedIn){var o=t.data.token;_APIStorage.default.useToken(o),_Token.default.set(o)}return _objectSpread({},e,{loading:!1,loaded:!0,response:t.data});case"SET_TUTORIAL_COMPLETED":var r="yukata"===t.tutorial?"yukataTutorialCompleted":"extractorTutorialCompleted";return _objectSpread({},e,{response:_objectSpread({},e.response,_defineProperty({},r,t.completed))});case"UPDATE_PROXY_ALLOCATION":return _objectSpread({},e,{loading:!1,loaded:!0,response:_objectSpread({},e.response,{proxyAllocation:t.data})});case"SET_ERROR":return _objectSpread({},e,{loading:!1,error:t.error});case"FINISH_LOGOUT":return useToken&&(_APIStorage.default.useToken(null),_Token.default.set(null)),Object.assign({loading:!1,loaded:!1,response:{success:!1,loggedIn:!1,username:null,activated:null,isAdmin:null,role:"Normal",name:null,email:null,company:null,tutorialStep:null,yukataTutorialCompleted:!1,extractorTutorialCompleted:!1,featureFlags:{},proxyAllocation:null,token:null,requestLimit:null,organization:null},error:null},{loaded:!0})}return e}function login(e,t,o){return e(Actions.startLogin()),_Auth.default.login(t,o).then(function(t){return t.success?(e(Actions.finishLogin(t)),e(_Tutorial.default.Actions.updateLocalTutorialStep(t.tutorialStep))):e(Actions.setError(t)),mapResponseToProps(t)}).catch(function(t){console.error(t),e(Actions.setError(t))})}function logout(e){e(Actions.startLogout());var t=Promise.resolve(null);return useToken&&(t=_Token.default.get()),t.then(function(e){return _Auth.default.logout(e)}).then(function(t){return t.success&&e(Actions.finishLogout()),t}).catch(function(t){console.error(t),e(Actions.setError(t))})}function register(e,t,o){return e(Actions.startRegister()),_Auth.default.register(t,o).then(function(t){return t.success?(e(Actions.finishRegister(t)),e(_Tutorial.default.Actions.updateLocalTutorialStep(t.tutorialStep))):e(Actions.setError(t)),mapResponseToProps(t)}).catch(function(t){e(Actions.setError(t))})}function setTutorialCompleted(e,t,o){return _Auth.default.setTutorialCompleted(t,o).then(function(r){r.success&&e(Actions.setTutorialCompleted(t,o))})}function getLoginState(e,t){if(t&&_lodash.default.get(t,"auth.loaded"))return Promise.resolve(mapResponseToProps(t.auth.response));var o=Promise.resolve(null);useToken&&(o=_Token.default.get());var r=null;return o.then(function(e){return r=e,_Auth.default.isLoggedIn(r)}).then(function(t){if(t.success){var o=r?Object.assign(t,{token:r}):t;e(Actions.updateLoginState(o)),e(_Tutorial.default.Actions.updateLocalTutorialStep(t.tutorialStep)),t.loggedIn&&useToken&&_APIStorage.default.useToken(t.token)}else e(Actions.setError(t));return mapResponseToProps(t)}).catch(function(e){console.error("Error when trying to get login state"),console.error(e)})}function allocateProxy(e){return _Proxy.default.allocate().then(function(t){if(t.success){var o=t.proxyAllocation;e(Actions.updateProxyAllocation(o))}return t})}function mapResponseToProps(e){return{isLoggedIn:e.loggedIn,username:e.username,isActivated:e.activated,isAdmin:e.isAdmin,userRole:e.role,userName:e.name,userEmail:e.email,userCompany:e.company,yukataTutorialCompleted:e.yukataTutorialCompleted,extractorTutorialCompleted:e.extractorTutorialCompleted,proxyAllocation:e.proxyAllocation,featureFlags:e.featureFlags||{},requestLimit:e.requestLimit,organization:e.organization}}function getOrFetchLoginState(e){var t=e.authStateLoaded,o=e.getLoginState;return t?Promise.resolve(e):o()}function connect(e){return(0,_reactRedux.connect)(function(e){var t=e.auth;return _objectSpread({authStateLoaded:t.loaded,authLoading:t.loading,authError:t.error},mapResponseToProps(t.response))},function(e){return{login:login.bind(null,e),logout:logout.bind(null,e),registerUser:register.bind(null,e),getLoginState:getLoginState.bind(null,e),allocateProxy:allocateProxy.bind(null,e),setTutorialCompleted:setTutorialCompleted.bind(null,e)}},null,e)}exports.Actions=Actions;var _default={Actions:Actions,Reducer:Reducer,connect:connect,getOrFetchLoginState:getOrFetchLoginState,getLoginState:getLoginState};exports.default=_default;
},{"../APIStorage":1,"../Auth":3,"../Chrome":6,"../Proxy":10,"../Token":13,"./Tutorial":20,"lodash":"lodash","react-redux":"react-redux"}],19:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _redux=require("redux"),_Auth=require("./Auth"),_Tutorial=require("./Tutorial"),_APIElements=require("./APIElements"),MainReducer=(0,_redux.combineReducers)({tutorialStep:_Tutorial.Reducer,auth:_Auth.Reducer,apiElements:_APIElements.Reducer}),_default=MainReducer;exports.default=_default;
},{"./APIElements":17,"./Auth":18,"./Tutorial":20,"redux":"redux"}],20:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Reducer=Reducer,exports.connectTutorialStep=connectTutorialStep,exports.connectLocalTutorialStep=connectLocalTutorialStep,exports.default=exports.Actions=void 0;var _reactRedux=require("react-redux"),_Tutorial=_interopRequireDefault(require("../Tutorial")),_Auth=_interopRequireDefault(require("../Auth"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var Actions={updateLocalTutorialStep:function(t){return{type:"UPDATE_LOCAL_TUTORIAL_STEP",step:t}},advanceTutorialStep:function(t){return{type:"ADVANCE_TUTORIAL_STEP",curStep:t}}};function Reducer(t,e){if(void 0===t)return null;if("ADVANCE_TUTORIAL_STEP"===e.type){var r=t,u=_Tutorial.default.steps.indexOf(r),n=e.curStep,o=_Tutorial.default.steps.indexOf(n);if(-1===o)throw new Error("Can't find step with name ".concat(n));var a=Math.max(u,o+1);a>=_Tutorial.default.steps.length&&(a=_Tutorial.default.steps.length-1);var c=_Tutorial.default.steps[a];return console.log("Advancing to ".concat(c)),_Auth.default.setTutorialStep(c),c}return"UPDATE_LOCAL_TUTORIAL_STEP"===e.type?e.step:t}function connectTutorialStep(t){return(0,_reactRedux.connect)(function(t){return{tutorialStep:t.tutorialStep}},function(t){return{advanceTutorialStep:function(e){t(Actions.advanceTutorialStep(e))}}},null,t)}function connectLocalTutorialStep(t){return(0,_reactRedux.connect)(null,function(t){return{updateLocalTutorialStep:function(e){t(Actions.updateLocalTutorialStep(e))}}},null,t)}exports.Actions=Actions;var _default={Actions:Actions,Reducer:Reducer,connectTutorialStep:connectTutorialStep,connectLocalTutorialStep:connectLocalTutorialStep};exports.default=_default;
},{"../Auth":3,"../Tutorial":14,"react-redux":"react-redux"}],21:[function(require,module,exports){
"use strict";
},{}],22:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_OverlayTrigger=_interopRequireDefault(require("react-bootstrap/lib/OverlayTrigger")),_Tooltip=_interopRequireDefault(require("react-bootstrap/lib/Tooltip")),_DropdownSelect=_interopRequireDefault(require("./DropdownSelect"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var APIElementSelect=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n)))).props=void 0,r}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"render",value:function(){var e=this.props,t=e.apiElements,r=e.username,o=t.filter(function(e){return!r||e.username===r}),n=t.filter(function(e){return r&&e.username!==r}),a=o.map(function(e){var t=e.username,r=e.repository,o=e.name;return{value:{username:t,repository:r,name:o},label:"".concat(t,"/").concat(r,"/").concat(o)}}),i=n.map(function(e){var t=e.username,r=e.repository,o=e.name;return{value:{username:t,repository:r,name:o},textLabel:"".concat(t,"/").concat(r,"/").concat(o),label:_react.default.createElement("span",null,t,"/",r,"/",o," ",_react.default.createElement(_OverlayTrigger.default,{overlay:_react.default.createElement(_Tooltip.default,{id:"organization"},"Owned by someone in your organization")},_react.default.createElement("i",{className:"fa fa-users"})))}}),u=a.concat(i),l=_lodash.default.omit(this.props,["apiElements","username"]);return _react.default.createElement(_DropdownSelect.default,_extends({},l,{options:u}))}}]),t}();exports.default=APIElementSelect;
},{"./DropdownSelect":27,"lodash":"lodash","react":"react","react-bootstrap/lib/OverlayTrigger":"react-bootstrap/lib/OverlayTrigger","react-bootstrap/lib/Tooltip":"react-bootstrap/lib/Tooltip"}],23:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_Collapse=_interopRequireDefault(require("react-bootstrap/lib/Collapse")),_Capture=_interopRequireDefault(require("../js/Capture")),_NewUtils=_interopRequireDefault(require("./NewUtils")),_RequestList=_interopRequireDefault(require("./RequestList")),_RequestPanel=_interopRequireDefault(require("./RequestPanel")),_DebouncedInput=_interopRequireDefault(require("./DebouncedInput")),_Checkbox=_interopRequireDefault(require("./Checkbox"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var PropTypes=_react.default.PropTypes,CapturesView=function(e){function t(){var e,r;_classCallCheck(this,t);for(var a=arguments.length,l=new Array(a),n=0;n<a;n++)l[n]=arguments[n];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(l)))).state={reqIndex:null,filters:{shortMimes:{doc:!0,json:!0,img:!1,js:!1,css:!1,other:!1},textSearchPlaces:_lodash.default.clone(_Capture.default.allTextSearchPlacesFilter),text:""},expandTextSearchFilters:!1},r.handleNewAPIElement=function(e){var t=_lodash.default.chain(r.props.existingAPIElements).map(function(e,t){return[t,e]}).concat([["".concat(e.repository,"/").concat(e.name),e]]).sortBy(0).fromPairs().value();r.props.onExistingAPIElementsChange(t)},r.getGroupChecked=function(e){var t=r.state.filters.textSearchPlaces,a=_Capture.default.groupedTextSearchPlaces[e],l=function(e){return t[e]},n=a.every(l),s=a.some(l);return n?"all":s?"some":"none"},r.toggleGroup=function(e){var t=_Capture.default.groupedTextSearchPlaces[e],a=!("all"===r.getGroupChecked(e)),l=r.state.filters,n=_lodash.default.clone(l.textSearchPlaces);t.forEach(function(e){n[e]=a}),r.setState({filters:_NewUtils.default.setMixed(l,"textSearchPlaces",n)})},r}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.reqIndex;e.requests===this.props.requests||e.requests[t]||this.setState({reqIndex:null})}},{key:"render",value:function(){var e=this,t=this.props.requests,r=this.props.existingAPIElements,a=this.props.showTutorial,l=this.props.isRecording,n=this.state.reqIndex,s=this.state.filters,o=this.state.expandTextSearchFilters,i=_lodash.default.fromPairs(_lodash.default.map(_Capture.default.groupedTextSearchPlaces,function(t,r){return[r,e.getGroupChecked(r)]})),u=null!=n?t[n]:null,c=u&&s.text?_Capture.default.searchInCapture(u,s.text):null;return _react.default.createElement("div",null,_react.default.createElement("div",{className:"wa-primary-panel wa-left-panel wa-animate-width ".concat(null!=n?"col-xs-4":"col-xs-12")},this.props.children,_react.default.createElement("div",{className:"panel panel-primary wa-bottom10"},_react.default.createElement("div",{className:"panel-body wa-pad-vertical10"},_react.default.createElement("div",{className:"form-inline"},_react.default.createElement("label",{htmlFor:"textFilter"},"Filter by keyword in URL, request, or response:")," ",_react.default.createElement(_DebouncedInput.default,{type:"text",id:"textFilter",className:"form-control",value:s.text,onChange:_NewUtils.default.update(this,"filters.text"),wait:200})),_react.default.createElement(_Collapse.default,{in:!!s.text},_react.default.createElement("div",null,_react.default.createElement("div",{className:"wa-top10"},_react.default.createElement("strong",null,"Search in: "),o?_lodash.default.map(_Capture.default.textSearchPlaces,function(t,r){return _react.default.createElement("label",{key:r,className:"checkbox-inline",style:{marginLeft:10}},_react.default.createElement("input",{type:"checkbox",checked:s.textSearchPlaces[r],style:{marginLeft:-15},onChange:_NewUtils.default.toggle(e,["filters","textSearchPlaces",r])})," ",t[0].toUpperCase(),t.substr(1))}):_react.default.createElement("span",null,_lodash.default.map(_Capture.default.groupedTextSearchPlaces,function(t,r){return _react.default.createElement("label",{key:r,className:"checkbox-inline",style:{marginLeft:10}},_react.default.createElement(_Checkbox.default,{checked:"all"===i[r],indeterminate:"some"===i[r],style:{marginLeft:-15},onChange:_NewUtils.default.call(e,"toggleGroup",[r])})," ",r[0].toUpperCase(),r.substr(1))})),_react.default.createElement("a",{href:"#expandTextSearchFilters",className:"wa-left10",onClick:_NewUtils.default.toggle(this,"expandTextSearchFilters",!0)},"(",o?"Hide":"Show"," finer-grained controls)")))))),_react.default.createElement("div",{className:"panel panel-primary wa-bottom10"},_react.default.createElement("div",{className:"panel-body wa-pad-vertical10"},_react.default.createElement("strong",null,"Filter by response type: "),_lodash.default.map(_Capture.default.shortMimes,function(t,r){return _react.default.createElement("label",{key:r,className:"checkbox-inline",style:{marginLeft:10}},_react.default.createElement("input",{type:"checkbox",checked:s.shortMimes[r],style:{marginLeft:-15},onChange:_NewUtils.default.toggle(e,["filters","shortMimes",r])})," ",t)}))),_react.default.createElement(_RequestList.default,{showTutorial:a,requests:t,isRecording:l,updateSelectedRequest:_NewUtils.default.update(this,"reqIndex"),selectedIndex:n,onSelect:_NewUtils.default.update(this,"reqIndex"),filters:s,onFiltersChange:_NewUtils.default.update(this,"filters")})),_react.default.createElement("div",{className:"wa-primary-panel wa-right-panel wa-animate-width ".concat(u?"col-xs-8":"wa-zero-width")},u&&_react.default.createElement(_RequestPanel.default,{allowSave:!0,onNewAPIElement:this.handleNewAPIElement,data:u,updateSelectedRequest:_NewUtils.default.update(this,"reqIndex"),existingAPIElements:r,requests:t,setSearch:_NewUtils.default.update(this,"filters.text"),searchFoundIn:c})))}}]),t}();CapturesView.propTypes={requests:PropTypes.array.isRequired,existingAPIElements:PropTypes.object.isRequired,onExistingAPIElementsChange:PropTypes.func.isRequired,showTutorial:PropTypes.bool,isRecording:PropTypes.bool,children:PropTypes.node};var _default=CapturesView;exports.default=_default;
},{"../js/Capture":5,"./Checkbox":24,"./DebouncedInput":26,"./NewUtils":33,"./RequestList":42,"./RequestPanel":43,"lodash":"lodash","react":"react","react-bootstrap/lib/Collapse":"react-bootstrap/lib/Collapse"}],24:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Checkbox;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Checkbox(e){var t=e.indeterminate,r=_lodash.default.omit(e,"indeterminate");return _react.default.createElement("input",_extends({},r,{type:"checkbox",ref:function(e){e&&(e.indeterminate=t)}}))}Checkbox.propTypes={indeterminate:_react.default.PropTypes.bool};
},{"lodash":"lodash","react":"react"}],25:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_Config=_interopRequireDefault(require("../js/Config")),_Chrome=_interopRequireDefault(require("../js/Chrome")),_VideoContainer=_interopRequireDefault(require("./VideoContainer")),_withChrome=_interopRequireDefault(require("./hocs/withChrome"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ChromePluginPrompt=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"render",value:function(){var e=this.props,t=e.isChrome,r=e.isExtensionInstalled;return _react.default.createElement("div",{className:"row"},_react.default.createElement("div",{className:"col-sm-6 col-md-7 col-lg-8"},_react.default.createElement("h2",null,"Installing the WrapAPI Chrome extension"),_react.default.createElement(_VideoContainer.default,{youtubeId:"VeSDsfy4Ue8",imageSrc:"/assets/homepage/video2-thumb.png"})),_react.default.createElement("div",{className:"col-sm-6 col-md-5 col-lg-4"},_react.default.createElement("div",{className:"panel panel-primary wa-top20"},_react.default.createElement("div",{className:"panel-body"},_Config.default.pluginURL?_react.default.createElement("div",{className:"text-center wa-bottom20"},_react.default.createElement("div",{className:"wa-bottom10"},_react.default.createElement("button",{className:"btn btn-lg btn-primary",type:"button",onClick:_Chrome.default.installExtension,disabled:!1===t||r},_react.default.createElement("i",{className:"fa fa-chrome"})," Install WrapAPI Chrome extension")),_react.default.createElement("div",null,_react.default.createElement("a",{href:_Config.default.pluginURL,target:"_blank"},"See it in the Chrome web store"))):_react.default.createElement("div",{className:"wa-bottom20"},_react.default.createElement("div",{className:"text-center wa-bottom10"},_react.default.createElement("a",{className:"btn btn-lg btn-primary",download:!0,href:"/extension.zip"},_react.default.createElement("i",{className:"fa fa-chrome"})," Download WrapAPI Chrome extension")),_react.default.createElement("div",{className:"alert alert-info"},"To install it:",_react.default.createElement("ol",null,_react.default.createElement("li",null,"Extract the contents of the downloaded extensions.zip file to a folder."),_react.default.createElement("li",null,"Open a new tab, and type"," ",_react.default.createElement("strong",null,"chrome://extensions")," into the address bar to manage your Chrome extensions."),_react.default.createElement("li",null,"Check the ",_react.default.createElement("strong",null,"Developer mode")," checkbox in the right top corner."),_react.default.createElement("li",null,"Click the ",_react.default.createElement("strong",null,"Load unpacked extension...")," ","button and select the folder you extracted extensions.zip to.")))),!1===t&&_react.default.createElement("div",{className:"alert alert-danger"},"WrapAPI's request capture plugin is currently only compatible with Chrome, though the rest of the site will work with any browser."," ",_react.default.createElement("a",{href:"https://www.google.com/chrome/browser/"},"Get Chrome to start using capturing requests.")),_react.default.createElement("p",null,_react.default.createElement("strong",null,"Installing the WrapAPI Chrome extension lets you capture requests you make in Chrome")," ","and quickly turn them into API endpoints."),_react.default.createElement("p",null,"For example, it's especially useful for:"),_react.default.createElement("ul",null,_react.default.createElement("li",null,_react.default.createElement("strong",null,"Sites that use AJAX requests")," to load data in the background;"),_react.default.createElement("li",null,_react.default.createElement("strong",null,"Multi-step forms"),", where each step depends on the previous; and"),_react.default.createElement("li",null,_react.default.createElement("strong",null,"Pages behind logins"),"; the Chrome extension lets you start building an API with the cookies of a logged-in session."))))))}}]),t}(),_default=(0,_withChrome.default)(ChromePluginPrompt);exports.default=_default;
},{"../js/Chrome":6,"../js/Config":7,"./VideoContainer":50,"./hocs/withChrome":51,"react":"react"}],26:[function(require,module,exports){
"use strict";var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var DebouncedInput=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).props=void 0,e.state=void 0,e.handleChangeDebounced=void 0,e.handleChange=function(t){var n=t.target.value;e.setState({value:n,loading:!0}),e.handleChangeDebounced(n)},e.state={value:"",loading:!1},e.handleChangeDebounced=function(){},e}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"loadData",value:function(e){this.setState({value:e.value})}},{key:"updateDebouncedFunction",value:function(e){var t=this;this.handleChangeDebounced=_lodash.default.debounce(function(e){t.setState({loading:!1}),t.props.onChange(e)},e.wait)}},{key:"componentWillMount",value:function(){this.loadData(this.props),this.updateDebouncedFunction(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.value!==this.props.value&&this.loadData(e),e.wait!==this.props.wait&&this.updateDebouncedFunction(e)}},{key:"render",value:function(){var e=this.state,t=e.value,n=e.loading,o=_lodash.default.omit(this.props,["wait"]);return _react.default.createElement("span",null,_react.default.createElement("input",_extends({},o,{value:t,onChange:this.handleChange}))," ",n&&_react.default.createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-fw"}))}}]),t}();module.exports=DebouncedInput;
},{"lodash":"lodash","react":"react"}],27:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_NavDropdown=_interopRequireDefault(require("react-bootstrap/lib/NavDropdown")),_DropdownButton=_interopRequireDefault(require("react-bootstrap/lib/DropdownButton")),_Dropdown=_interopRequireDefault(require("react-bootstrap/lib/Dropdown")),_MenuItem=_interopRequireDefault(require("react-bootstrap/lib/MenuItem")),_Utility=_interopRequireDefault(require("../js/Utility")),_NewUtils=require("./NewUtils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function defaultTextRenderer(e){return e.label}var UnselectableMenuItem=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"render",value:function(){return _react.default.createElement("li",{onClick:_NewUtils.preventDefault},this.props.children)}}]),t}(),propTypes={value:_react.default.PropTypes.oneOfType([_react.default.PropTypes.string,_react.default.PropTypes.number]),options:_react.default.PropTypes.oneOfType([_react.default.PropTypes.array,_react.default.PropTypes.object]),getOptions:_react.default.PropTypes.func,onChange:_react.default.PropTypes.func.isRequired,nav:_react.default.PropTypes.bool,button:_react.default.PropTypes.bool,searchable:_react.default.PropTypes.bool,onToggle:_react.default.PropTypes.func,id:_react.default.PropTypes.string,selectedTextRenderer:_react.default.PropTypes.func,defaultLabel:_react.default.PropTypes.node,pullRight:_react.default.PropTypes.bool},DropdownSelect=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n)))).state={dropdownId:"dropdown".concat(Math.floor(1e9*Math.random())),options:[],open:!1,textFilter:"",selectedMatchIndex:0},r._searchBox=null,r.handleToggle=function(e){var t=r.props.getOptions;r.setState({open:e}),e?(t&&r.setState({options:t()}),r._searchBox&&setTimeout(function(){return r._searchBox.focus()},1)):r.setState({textFilter:"",selectedMatchIndex:0})},r.handleTextFilterChange=function(e){r.setState({textFilter:e.target.value,selectedMatchIndex:0})},r.handleSearchBoxKeyDown=function(e){var t=r.state.selectedMatchIndex,o=r.getDisplayedOptions();if(0!==o.length){var n=null;38===e.keyCode?n=t-1:40===e.keyCode&&(n=t+1),null!=n&&(n=(n+o.length)%o.length,r.setState({selectedMatchIndex:n}))}},r.handleSearchSelect=function(){var e=r.getDisplayedOptions()[r.state.selectedMatchIndex];r.setState({open:!1}),r.props.onChange&&r.props.onChange(e&&e.value)},r}return _inherits(t,_react.default.Component),_createClass(t,[{key:"getDisplayedOptions",value:function(){var e=this.state.textFilter;return _Utility.default.normalizeOptions(this.props.options||this.state.options).filter(function(t){return!e||-1!==(t.textLabel||t.label).indexOf(e)})}},{key:"render",value:function(){var e=this.props,t=e.value,r=e.onChange,o=e.nav,n=e.button,a=e.pullRight,l=e.searchable,i=this.props.selectedTextRenderer||defaultTextRenderer,s=this.props.defaultLabel||"(Select one)",u=_lodash.default.omit(this.props,Object.keys(propTypes)),p=this.state,c=p.dropdownId,f=p.open,d=p.textFilter,_=p.selectedMatchIndex,h=_Utility.default.normalizeOptions(this.props.options||this.state.options),y=this.getDisplayedOptions(),b=null;if(null!=t){var g=h.filter(function(e){return e.value===t});b=0!==g.length?g[0]:{label:null,value:t}}var v=b?i(b):s,m=y.map(function(e,r){if(e.divider)return _react.default.createElement(_MenuItem.default,{key:"divider".concat(r),divider:!0});var o=e.value;return _react.default.createElement(_MenuItem.default,{key:JSON.stringify(o),eventKey:o,active:!!l&&r===_},e.label," ",o===t&&_react.default.createElement("i",{className:"fa fa-check"}))});if(l&&m.unshift(_react.default.createElement(UnselectableMenuItem,null,_react.default.createElement("form",{className:"wa-bs-searchbox",onSubmit:(0,_NewUtils.call)(this,"handleSearchSelect",[],!0)},_react.default.createElement("input",{type:"text",className:"form-control",value:d,onChange:this.handleTextFilterChange,ref:(0,_NewUtils.registerRef)(this,"_searchBox"),onKeyDown:this.handleSearchBoxKeyDown})))),o||n){var T=o?_NavDropdown.default:_DropdownButton.default;return _react.default.createElement(T,_extends({},u,{open:f,title:v||"",onSelect:r,id:this.props.id||c,pullRight:a,onToggle:this.handleToggle}),m)}return _react.default.createElement(_Dropdown.default,_extends({onSelect:r,id:this.props.id||c,onToggle:this.handleToggle,open:f},u),_react.default.createElement(_Dropdown.default.Toggle,{useAnchor:!0,className:"btn-link"},v),_react.default.createElement(_Dropdown.default.Menu,null,m))}}]),t}();DropdownSelect.propTypes=propTypes;var _default=DropdownSelect;exports.default=_default;
},{"../js/Utility":15,"./NewUtils":33,"lodash":"lodash","react":"react","react-bootstrap/lib/Dropdown":"react-bootstrap/lib/Dropdown","react-bootstrap/lib/DropdownButton":"react-bootstrap/lib/DropdownButton","react-bootstrap/lib/MenuItem":"react-bootstrap/lib/MenuItem","react-bootstrap/lib/NavDropdown":"react-bootstrap/lib/NavDropdown"}],28:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Iframe=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n)))).setIframeHtml=function(e,t){if(r._iframeElement&&r._iframeDocument){var o=r._iframeDocument,n=o;"undefined"!=typeof chrome&&(n=r._iframeDocument.implementation.createHTMLDocument());var a=r._getAdjustedHtmlForIframe(n,e,t);o.open(),o.write(a),o.close(),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&r._iframeElement.contentWindow.location.reload(!0)}},r._iframeElement=null,r._iframeWindow=null,r._iframeDocument=null,r._iframeMounted=function(e){e&&e.contentDocument&&(r._iframeElement=e,r._iframeDocument=e.contentDocument,r._iframeWindow=e.contentWindow,r.props.useUrl||r.setIframeHtml(r.props.iframeHtml,r.props.requestUrl))},r._getAdjustedHtmlForIframe=function(e,t,r){if(!r)return t;e.open(),e.write(t),e.close();var o=e.getElementsByTagName("base"),n="";o.length>0&&(n=(o=o[0]).getAttribute("href"),o.parentNode.removeChild(o));var a=r;n&&(a=new URL(n,r).href);var i=e.getElementsByTagName("head");if(i.length>=1){i=i[0];var l=e.createElement("base");l.setAttribute("href",a),i.appendChild(l);var s=e.createElement("style");s.type="text/css";var f="body { opacity: 1 !important; display: block !important; }";s.styleSheet?s.styleSheet.cssText=f:s.appendChild(e.createTextNode(f)),i.appendChild(s)}return Array.prototype.slice.call(e.getElementsByTagName("link")).forEach(function(e){var t=e.getAttribute("href");if(t){var o=new URL(t,r).href;e.setAttribute("href",o)}}),e.documentElement.outerHTML},r._removeWholePageOverlays=function(e,t){var r=e.body.style.cssText;e.body.style.cssText+="; display: none !important",_lodash.default.forEach(e.body.children,function(e){var r=t.getComputedStyle(e);if("fixed"===r.getPropertyValue("position")){var o=r.getPropertyValue("width"),n=r.getPropertyValue("height");"100%"===o&&"100%"===n&&(e.style.cssText+="; display: none !important")}}),e.body.style.cssText=r},r._onLoad=function(e){var t=r._iframeElement;r._iframeDocument=t.contentDocument,r._iframeWindow=t.contentWindow,r._removeWholePageOverlays(r._iframeDocument,r._iframeWindow),r.props.onLoad&&r.props.onLoad(e,r._iframeDocument,r._iframeWindow)},r}return _inherits(t,_react.default.Component),_createClass(t,[{key:"componentWillReceiveProps",value:function(e){e.iframeHtml!==this.props.iframeHtml&&this.setIframeHtml(e.iframeHtml,e.requestUrl)}},{key:"render",value:function(){var e={position:"absolute",width:"100%",height:"100%",border:0};return _react.default.createElement("div",{style:e},_react.default.createElement("iframe",{title:"Website contents",key:"iframe",src:this.props.useUrl?this.props.iframeUrl:null,style:e,sandbox:"allow-same-origin",ref:this._iframeMounted,onLoad:this._onLoad}))}}]),t}();Iframe.propTypes={useUrl:_react.default.PropTypes.bool.isRequired,iframeUrl:_react.default.PropTypes.string,iframeHtml:_react.default.PropTypes.string,requestUrl:_react.default.PropTypes.string,onLoad:_react.default.PropTypes.func};var _default=Iframe;exports.default=_default;
},{"lodash":"lodash","react":"react"}],29:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_ReactUtils=_interopRequireDefault(require("./ReactUtils")),_NewUtils=_interopRequireDefault(require("./NewUtils")),_Tabs=_interopRequireDefault(require("./Tabs")),_Auth=_interopRequireDefault(require("../js/redux/Auth")),_Auth2=_interopRequireDefault(require("../js/Auth")),_Validate=_interopRequireDefault(require("../js/Validate"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tabOptions={login:"Sign in",register:"Register"},LoginForm=function(e){function t(){var e,a;_classCallCheck(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(a=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(l)))).props=void 0,a.state={form:{email:"",username:"",password:"",name:"",title:"",company:"",intendedUse:"",shouldContact:null},blurred:{},hasSubmitErrors:!1,loading:!1,response:null},a.login=function(){a.setState({loading:!1,response:null}),a.props.login(a.state.form.email,a.state.form.password).then(function(e){e.isLoggedIn&&a.props.onLogin()})},a.register=function(){var e=_Validate.default.user(a.state.form);_lodash.default.isEmpty(e)?(a.setState({hasSubmitErrors:!1,loading:!1,response:null}),a.props.registerUser(a.state.form,a.props.inviteKey).then(function(e){e.isLoggedIn&&a.props.onRegister()})):a.setState({hasSubmitErrors:!0,loading:!1})},a.resetPassword=function(){_Auth2.default.startResetPassword(a.state.form.username,a.state.form.email).then(_NewUtils.default.getThen(_assertThisInitialized(a))).catch(_NewUtils.default.getCatch(_assertThisInitialized(a)))},a.submit=function(e){e&&e.preventDefault(),a.setState({loading:!0,response:null});var t=a.props.tab;"login"===t?a.login():"register"===t?a.register():"resetPassword"===t&&a.resetPassword()},a}return _inherits(t,_react.default.Component),_createClass(t,[{key:"render",value:function(){var e=this.props.tab,t=this.state.loading||this.props.authLoading,a=this.state.response||this.props.authError,r=this.state.form,l=this.state.blurred,o=this.state.hasSubmitErrors,s=null;switch(e){case"login":s="Sign in";break;case"register":s="Register";break;case"resetPassword":s="Reset password"}var n=_Validate.default.user(r),i={};return"register"===e&&(i=_lodash.default.clone(n),o||_lodash.default.forEach(n,function(e,t){l[t]||delete i[t]})),_react.default.createElement("div",null,this.props.showLogo&&_react.default.createElement("div",{className:"text-center wa-top20 wa-bottom20"},_react.default.createElement("img",{src:"/assets/logo-large.png",alt:"WrapAPI logo",style:{maxWidth:"100%",maxHeight:"75px"}})),_react.default.createElement("h1",{className:"wa-top0"},s),_react.default.createElement("div",{className:"wa-bottom20"},_react.default.createElement(_Tabs.default,{tabs:tabOptions,value:e,onChange:_NewUtils.default.callProp(this,"onTabChange")})),_react.default.createElement("div",{className:"row"},"register"===e&&_react.default.createElement("div",{className:"col-sm-6 col-sm-push-6"},_react.default.createElement("div",{className:"panel panel-primary"},_react.default.createElement("div",{className:"panel-body"},_react.default.createElement("p",null,_react.default.createElement("strong",null,"WrapAPI is free to use!")," By registering, you"," ",_react.default.createElement("a",{href:"/terms",target:"_blank"},"agree to our Terms of Service"),", and can:"),_react.default.createElement("ul",null,_react.default.createElement("li",null,"Build and use public APIs, running on our servers"),_react.default.createElement("li",null,"Make 30,000 requests per month"),_react.default.createElement("li",null,"Enjoy the full range of WrapAPI functionality")),_react.default.createElement("h3",null,"Need more?"),_react.default.createElement("div",{className:i.shouldContact?"has-error":""},_react.default.createElement("div",{className:"checkbox"},_react.default.createElement("label",{htmlFor:"shouldContactTrue"},_react.default.createElement("input",{type:"radio",id:"shouldContactTrue",onClick:_NewUtils.default.setState(this,"form.shouldContact",!0),checked:!0===r.shouldContact})," ",_react.default.createElement("strong",null,"Yes; I'm interested")," in more API requests, a self-hosted solution, or private API endpoints.")),_react.default.createElement("div",{className:"checkbox"},_react.default.createElement("label",{htmlFor:"shouldContactFalse"},_react.default.createElement("input",{type:"radio",id:"shouldContactFalse",onClick:_NewUtils.default.setState(this,"form.shouldContact",!1),checked:!1===r.shouldContact})," ","No; the above should be enough.")),i.shouldContact&&_react.default.createElement("p",{className:"help-block"},_react.default.createElement("strong",null,i.shouldContact)))))),_react.default.createElement("div",{className:"register"===e?"col-sm-6 col-sm-pull-6":"col-sm-12"},_NewUtils.default.renderResponse(a),_react.default.createElement("form",{onSubmit:this.submit},_react.default.createElement("div",{className:"form-group ".concat(i.email?"has-error":"")},_react.default.createElement("label",{htmlFor:"email"},"Email","login"===e&&" or username"),_react.default.createElement("input",{type:"text",id:"email",className:"form-control",maxLength:"128",value:r.email,onChange:_NewUtils.default.update(this,"form.email"),onBlur:_NewUtils.default.setState(this,"blurred.email",!0)}),"register"===e&&_react.default.createElement("p",{className:"help-block"},i.email||"We will send an email here with an activation link.")),("register"===e||"resetPassword"===e)&&_react.default.createElement("div",{className:"form-group ".concat(i.username?"has-error":"")},_react.default.createElement("label",{htmlFor:"username"},"Username"),_react.default.createElement("input",{type:"username",id:"username",className:"form-control",value:r.username,onChange:_NewUtils.default.update(this,"form.username"),onBlur:_NewUtils.default.setState(this,"blurred.username",!0)}),"register"===e&&_react.default.createElement("p",{className:"help-block"},i.username||_react.default.createElement("span",null,"APIs you publish will be accessible at"," ",_react.default.createElement("code",null,"(your username)/(repository)/(API name)")))),("register"===e||"login"===e)&&_react.default.createElement("div",{className:"form-group ".concat(i.password?"has-error":"")},_react.default.createElement("label",{htmlFor:"password"},"Password"),_react.default.createElement("input",{type:"password",id:"password",className:"form-control",value:r.password,onChange:_NewUtils.default.update(this,"form.password"),onBlur:_NewUtils.default.setState(this,"blurred.password",!0)}),"register"===e&&_react.default.createElement("p",{className:"help-block"},i.password||"Choose a long, hard-to-guess password that you don't use anywhere else.")),"register"===e&&_react.default.createElement("div",null,_react.default.createElement("div",{className:"form-group ".concat(i.name?"has-error":"")},_react.default.createElement("label",{htmlFor:"name"},"Name"),_react.default.createElement("input",{type:"text",id:"name",className:"form-control",value:r.name,onChange:_NewUtils.default.update(this,"form.name"),onBlur:_NewUtils.default.setState(this,"blurred.name",!0)}),i.name&&_react.default.createElement("p",{className:"help-block"},i.name)),_react.default.createElement("div",{className:"form-group"},_react.default.createElement("label",{htmlFor:"company"},"Company (if applicable)"),_react.default.createElement("input",{type:"text",id:"company",className:"form-control",value:r.company,onChange:_NewUtils.default.update(this,"form.company")})),_react.default.createElement("div",{className:"form-group"},_react.default.createElement("label",{htmlFor:"intendedUse"},"How are you thinking of using WrapAPI? (optional)"),_react.default.createElement("textarea",{id:"intendedUse",className:"form-control",value:r.intendedUse,onChange:_NewUtils.default.update(this,"form.intendedUse"),style:{height:"100px"}}),_react.default.createElement("div",{className:"help-block"},"No worries if you don't know yet, but if you do, we might be able to help with some extra tips!"))),o&&_react.default.createElement("div",{className:"alert alert-danger"},"Some fields don't seem to be filled in correctly! Take a look at the error messages above."),_react.default.createElement("button",{className:"btn btn-primary",type:"submit",disabled:t},s),"login"===e&&_react.default.createElement("a",{href:"#",className:"pull-right",onClick:_NewUtils.default.callProp(this,"onTabChange",["resetPassword"],!0)},"Forgot password")))))}}]),t}(),_default=_Auth.default.connect()(_ReactUtils.default.connectLocalTutorialStep()(LoginForm));exports.default=_default;
},{"../js/Auth":3,"../js/Validate":16,"../js/redux/Auth":18,"./NewUtils":33,"./ReactUtils":37,"./Tabs":48,"lodash":"lodash","react":"react"}],30:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_Fade=_interopRequireDefault(require("react-bootstrap/lib/Fade")),_Auth=_interopRequireDefault(require("../js/redux/Auth")),_ReactUtils=_interopRequireDefault(require("./ReactUtils")),_LoginPage=_interopRequireDefault(require("./LoginPage")),_NewUtils=_interopRequireDefault(require("./NewUtils"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var LoginGate=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,a=new Array(o),n=0;n<o;n++)a[n]=arguments[n];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(a)))).state={isExiting:!1},r}return _inherits(t,_react.default.Component),_createClass(t,[{key:"componentWillMount",value:function(){_Auth.default.getOrFetchLoginState(this.props)}},{key:"render",value:function(){var e=this,t=this.props.componentOnceLoggedIn,r=this.props.logout,o=this.props.username,a=this.props.authStateLoaded,n=this.props.isLoggedIn,i=function(t,r){var o=e.state.isExiting;return{in:r&&(!o||o===t),onExit:_NewUtils.default.setState(e,"isExiting",t),onExited:_NewUtils.default.setState(e,"isExiting",!1),unmountOnExit:!0}};return _react.default.createElement("div",null,_react.default.createElement(_Fade.default,i("notLoaded",!a),_react.default.createElement("div",null,_react.default.createElement("div",{key:"notLoaded",className:"text-center wa-pad20 wa-not-loaded"},_react.default.createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-fw fa-3x"}),_react.default.createElement("div",{className:"wa-top10"},"Please wait... loading your account")))),_react.default.createElement(_Fade.default,i("loginPage",a&&!n),_react.default.createElement("div",{key:"loginPage",className:"wa-login-page"},_react.default.createElement(_LoginPage.default,{openRegisterInNewWindow:!0,showLogo:this.props.showLogo}))),_react.default.createElement(_Fade.default,i("loggedIn",a&&n),_react.default.createElement("div",null,a&&n&&_react.default.createElement(t,{key:"component",username:o,logout:r}))))}}]),t}();LoginGate.propTypes={updateLocalTutorialStep:_react.default.PropTypes.func.isRequired,componentOnceLoggedIn:_react.default.PropTypes.any.isRequired,showLogo:_react.default.PropTypes.bool,logout:_react.default.PropTypes.func.isRequired,username:_react.default.PropTypes.string,authStateLoaded:_react.default.PropTypes.bool.isRequired,isLoggedIn:_react.default.PropTypes.bool.isRequired};var _default=_Auth.default.connect()(_ReactUtils.default.connectLocalTutorialStep()(LoginGate));exports.default=_default;
},{"../js/redux/Auth":18,"./LoginPage":31,"./NewUtils":33,"./ReactUtils":37,"react":"react","react-bootstrap/lib/Fade":"react-bootstrap/lib/Fade"}],31:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_reactRouter=require("react-router"),_Config=_interopRequireDefault(require("../js/Config")),_NewUtils=_interopRequireDefault(require("./NewUtils")),_ChromePluginPrompt=_interopRequireDefault(require("./ChromePluginPrompt")),_LoginForm=_interopRequireDefault(require("./LoginForm"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var LoginPage=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n)))).props=void 0,r.state={tab:"login",registrationResponse:null},r.setTabFromUrl=function(e){"/register"===_lodash.default.get(e,"location.pathname")?r.setState({tab:"register"}):r.setState({tab:"login"})},r.onLogin=function(){var e=_lodash.default.get(r.props,"location.query.redirect");e&&r.props.router.push(e)},r.onRegister=function(e){r.setState({registrationResponse:e})},r.handleTabChange=function(e){r.props.openRegisterInNewWindow&&"register"===e?window.open("".concat(_Config.default.host,"/register")):r.setState({tab:e})},r}return _inherits(t,_react.default.Component),_createClass(t,[{key:"componentWillMount",value:function(){this.setTabFromUrl(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.setTabFromUrl(e)}},{key:"render",value:function(){var e=this.props.showLogo,t=this.props.location&&this.props.location.query||{},r=this.state.registrationResponse,o=this.state.tab;return r&&r.success?_react.default.createElement("div",{className:"container"},_react.default.createElement("h1",null,"Register"),_NewUtils.default.renderResponse(r),_react.default.createElement(_ChromePluginPrompt.default,null)):_react.default.createElement("div",{className:"container"},_react.default.createElement("div",{className:"row"},_react.default.createElement("div",{className:"register"===o?"col-sm-12":"col-sm-6 col-sm-offset-3"},_react.default.createElement("div",{className:"wa-top20 wa-bottom20"},_react.default.createElement(_LoginForm.default,{onLogin:this.onLogin,onRegister:this.onRegister,inviteKey:t.key,showLogo:e,tab:o,onTabChange:this.handleTabChange})))))}}]),t}(),_default=(0,_reactRouter.withRouter)(LoginPage);exports.default=_default;
},{"../js/Config":7,"./ChromePluginPrompt":25,"./LoginForm":29,"./NewUtils":33,"lodash":"lodash","react":"react","react-router":"react-router"}],32:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_reactRouterBootstrap=require("react-router-bootstrap"),_reactRouter=require("react-router"),_Navbar=_interopRequireDefault(require("react-bootstrap/lib/Navbar")),_Nav=_interopRequireDefault(require("react-bootstrap/lib/Nav")),_NavItem=_interopRequireDefault(require("react-bootstrap/lib/NavItem")),_Auth=_interopRequireDefault(require("../js/redux/Auth"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var NavbarUser=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,a=new Array(o),n=0;n<o;n++)a[n]=arguments[n];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(a)))).logout=function(){r.props.logout().then(function(){r.props.router.push("/")})},r}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"render",value:function(){var e=this.props,t=e.isLoggedIn,r=e.username,o=e.logoutLoading,a=e.hideUsername,n="/";return this.props.location&&this.props.location.pathname&&(n=this.props.location.pathname),t?_react.default.createElement(_Nav.default,{pullRight:!0},!a&&_react.default.createElement(_Navbar.default.Text,null,_react.default.createElement("strong",null,r)),_react.default.createElement(_NavItem.default,{href:"#",onClick:this.logout,disabled:o},o?"Loading":"Sign out")):_react.default.createElement(_Nav.default,{pullRight:!0},_react.default.createElement(_reactRouterBootstrap.LinkContainer,{to:{pathname:"/login",query:{redirect:n}}},_react.default.createElement(_NavItem.default,null,"Register or sign in")))}}]),t}();NavbarUser.propTypes={router:_react.default.PropTypes.object,hideUsername:_react.default.PropTypes.bool,isLoggedIn:_react.default.PropTypes.bool,username:_react.default.PropTypes.string,authLoading:_react.default.PropTypes.bool.isRequired,logout:_react.default.PropTypes.func};var _default=_Auth.default.connect()((0,_reactRouter.withRouter)(NavbarUser));exports.default=_default;
},{"../js/redux/Auth":18,"react":"react","react-bootstrap/lib/Nav":"react-bootstrap/lib/Nav","react-bootstrap/lib/NavItem":"react-bootstrap/lib/NavItem","react-bootstrap/lib/Navbar":"react-bootstrap/lib/Navbar","react-router":"react-router","react-router-bootstrap":"react-router-bootstrap"}],33:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.preventDefault=preventDefault,exports.stopPropagation=stopPropagation,exports.toggle=toggle,exports.toggleProp=toggleProp,exports.toggleValue=toggleValue,exports.togglePropValue=togglePropValue,exports.toggleFromEvent=toggleFromEvent,exports.togglePropFromEvent=togglePropFromEvent,exports.setProp=setProp,exports.setPropNumber=setPropNumber,exports.setPropValue=setPropValue,exports.deleteProp=deleteProp,exports.update=update,exports.updateNumber=updateNumber,exports.setState=setState,exports.deleteState=deleteState,exports.getThen=getThen,exports.getCatch=getCatch,exports.renderResponse=renderResponse,exports.memoizeLocal=memoizeLocal,exports.all=all,exports.fromEvent=fromEvent,exports.numberFromEvent=numberFromEvent,exports.constant=constant,exports.negate=negate,exports.toggleConstant=toggleConstant,exports.changeProp=changeProp,exports.changeState=changeState,exports.call=call,exports.callProp=callProp,exports.registerRef=registerRef,exports.debounce=debounce,exports.default=exports.deleteMixed=exports.getMixed=exports.setMixed=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_Immutable=_interopRequireDefault(require("../js/Immutable"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var setMixed=_Immutable.default.setMixed;exports.setMixed=setMixed;var getMixed=_Immutable.default.getMixed;exports.getMixed=getMixed;var deleteMixed=_Immutable.default.deleteMixed;function preventDefault(e){e&&e.preventDefault()}function stopPropagation(e){e&&e.stopPropagation()}function preventDefaultAndBlur(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation(),e.target&&e.target.blur())}function toggle(e,t,r){return changeState(e,t,negate,r,"negate")}function toggleProp(e,t,r,n,a){return changeProp(e,t,r,n,negate,a,"negate")}function toggleValue(e,t,r,n){return changeState(e,t,toggleConstant(r),n,["toggleConstant",r])}function togglePropValue(e,t,r,n,a,o){return changeProp(e,t,r,n,toggleConstant(a),o,["toggleConstant",a])}function toggleFromEvent(e,t,r){return changeState(e,t,setOrNull,r,"setOrNull")}function togglePropFromEvent(e,t,r,n,a,o){return changeProp(e,t,r,n,setOrNull,o,"setOrNull")}function setProp(e,t,r,n,a){return changeProp(e,t,r,n,fromEvent,a,"fromEvent")}function setPropNumber(e,t,r,n,a){return changeProp(e,t,r,n,numberFromEvent,a,"numberFromEvent")}function setPropValue(e,t,r,n,a,o){return changeProp(e,t,r,n,constant(a),o,["constant",a])}function deleteProp(e,t,r,n,a){return changeProp(e,t,r,null,remove(n),a,["remove",n])}function update(e,t,r){return changeState(e,t,fromEvent,r,"fromEvent")}function updateNumber(e,t,r){return changeState(e,t,numberFromEvent,r,"numberFromEvent")}function setState(e,t,r,n){return changeState(e,t,constant(r),n,["constant",r])}function deleteState(e,t,r){return changeState(e,t[0],remove(t.slice(1)),r,["remove",t])}function getChanged(e,t){var r={};return _lodash.default.forEach(t,function(n,a){e[a]!==t[a]&&(r[a]=n)}),r}function getThen(e,t,r,n){var a=["__cache",JSON.stringify(["getThen",t,r])];t=t||"response",r=r||"loading",n=n||"data";var o=_lodash.default.get(e,a);if(o)return o;var l=function(a){var o={};o[r]=!1,o[t]=a,a.success&&n&&a.data&&(o[n]=a.data),e.setState(o)};return _lodash.default.setWith(e,a,l,Object),l}function getCatch(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"response",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"loading",n=["__cache",JSON.stringify(["getCatch",t,r])],a=_lodash.default.get(e,n);if(a)return a;var o=function(n){console.error(n.stack);var a={};r&&(a[r]=!1),t&&(a[t]={success:!1,messages:["An unexpected error has occurred. Please try again later."],error:n}),e.setState(a)};return _lodash.default.setWith(e,n,o,Object),o}function renderResponse(e,t){var r=(t=t||{}).type||"alert",n=t.additionalClasses||"",a=t.onClick,o=!!t.errorsOnly;return e?e.success&&o?null:e&&e.messages&&_react.default.createElement("div",{className:"".concat(r," ").concat(r,"-")+(e.success?"success":"danger")+(n?" ".concat(n):"")+(a?" wa-link":""),onClick:a},e.messages.map(function(e,t){return _react.default.createElement("p",{key:t},e)})):null}function memoizeLocal(e,t,r,n){var a=["__cache","memoizeLocal",t],o=_lodash.default.get(e,a)||[],l=o.find(function(e){return e[0]===r});return l?l[1]:(o.push([r,n]),_lodash.default.set(e,a,o),n)}function all(e,t,r){var n=["__cache","all"],a=_lodash.default.get(e,n)||[],o=null,l=!0,u=!1,s=void 0;try{for(var g,c=a[Symbol.iterator]();!(l=(g=c.next()).done);l=!0){for(var i=g.value,p=i.args[0],d=0!==p.length,f=0;f!==p.length;f++)if(p[f]!==t[f]){d=!1;break}if(i.args[1]!==r&&(d=!1),d){o=i;break}}}catch(e){u=!0,s=e}finally{try{l||null==c.return||c.return()}finally{if(u)throw s}}if(o)return o.func;var h=function(n){r&&preventDefaultAndBlur(n);for(var a=e.state,o=0;o!==t.length;o++)e.state=t[o](n);e.state=a};return o={args:[t,r],func:h},a.push(o),_lodash.default.set(e,n,a),h}function fromEvent(e,t){return t&&t.target?t.target.value:t}function numberFromEvent(e,t){var r=parseFloat(t&&t.target?t.target.value:t);return isNaN(r)?null:r}function constant(e){return function(){return e}}function remove(e){return function(t){return deleteMixed(t,e)}}function negate(e){return!e}function toggleConstant(e){return function(t){return t===e?null:e}}function setOrNull(e,t){var r=t&&t.target?t.target.value:t;return e===r?null:r}function changeProp(e,t,r,n,a,o,l){var u=["__cache",JSON.stringify(["changeProp",t,r,n,o,l])],s=_lodash.default.get(e,u);if(s)return s;var g=function(l){o&&preventDefaultAndBlur(l);var u=null;if(r){var s=getMixed(e.props,r);if(n){var g=getMixed(s,n),c=a(g,l);u=setMixed(s,n,c)}else u=a(s,l)}else u=a(null,l);return e.props[t](u),u};return _lodash.default.setWith(e,u,g,Object),g}function changeState(e,t,r,n,a){var o=["__cache",JSON.stringify(["changeState",t,n,a])],l=_lodash.default.get(e,o);if(l)return l;var u=function(a){n&&preventDefaultAndBlur(a);var o=getMixed(e.state,t),l=r(o,a),u=setMixed(e.state,t,l);return e.setState(getChanged(e.state,u)),u};return _lodash.default.setWith(e,o,u,Object),u}function call(e,t,r,n,a){var o=["__cache",JSON.stringify(["call",t,r,n,a])],l=_lodash.default.get(e,o);if(l)return l;var u=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];n&&o[0]&&preventDefaultAndBlur(o[0]);var u=[].concat(r).concat(o),s=_lodash.default.get(e,t);return s?s.apply(e,u):null};return _lodash.default.setWith(e,o,u,Object),u}function callProp(e,t,r,n,a){var o=["__cache",JSON.stringify(["callProp",t,r,n,a])],l=_lodash.default.get(e,o);if(l)return l;var u=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];n&&o[0]&&preventDefaultAndBlur(o[0]);var u=[].concat(r||[]).concat(o),s=_lodash.default.get(e.props,t);return s?s.apply(e,u):null};return _lodash.default.setWith(e,o,u,Object),u}function registerRef(e,t){var r=["__cache",JSON.stringify(["registerRef",t])],n=_lodash.default.get(e,r);if(n)return n;var a=function(r){_lodash.default.setWith(e,t,r,Object)};return _lodash.default.setWith(e,r,a,Object),a}function debounce(e,t,r,n){var a=["__cache",JSON.stringify(["debounce",n])];if(!_lodash.default.get(e,a)){var o=_lodash.default.debounce(t,r);_lodash.default.setWith(e,a,o)}return _lodash.default.get(e,a)}exports.deleteMixed=deleteMixed;var _default={preventDefault:preventDefault,stopPropagation:stopPropagation,toggle:toggle,toggleValue:toggleValue,toggleFromEvent:toggleFromEvent,toggleProp:toggleProp,togglePropValue:togglePropValue,togglePropFromEvent:togglePropFromEvent,setProp:setProp,setPropNumber:setPropNumber,setPropValue:setPropValue,deleteProp:deleteProp,callProp:callProp,call:call,update:update,updateNumber:updateNumber,setState:setState,deleteState:deleteState,registerRef:registerRef,getThen:getThen,getCatch:getCatch,renderResponse:renderResponse,fromEvent:fromEvent,numberFromEvent:numberFromEvent,constant:constant,negate:negate,toggleConstant:toggleConstant,memoizeLocal:memoizeLocal,all:all,changeState:changeState,changeProp:changeProp,debounce:debounce,setMixed:setMixed,getMixed:getMixed,deleteMixed:deleteMixed};exports.default=_default;
},{"../js/Immutable":8,"lodash":"lodash","react":"react"}],34:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_Tooltip=_interopRequireDefault(require("react-bootstrap/lib/Tooltip")),_OverlayWrapper=_interopRequireDefault(require("./OverlayWrapper"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var OverlayTooltip=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n)))).state={id:null},r}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"componentWillMount",value:function(){this.setState({id:Math.floor(1e6*Math.random())})}},{key:"render",value:function(){var e=_react.default.createElement(_Tooltip.default,{id:this.state.id,className:"wa-tutorial-tooltip",style:{maxWidth:300}},this.props.onXClick&&_react.default.createElement("div",{style:{float:"right",marginLeft:5}},_react.default.createElement("a",{style:{color:"#fff"},onClick:this.props.onXClick},_react.default.createElement("i",{className:"fa fa-times"}))),this.props.contents);return _react.default.createElement(_OverlayWrapper.default,_extends({},this.props,{overlay:e}),this.props.children)}}]),t}();OverlayTooltip.propTypes={contents:_react.default.PropTypes.node.isRequired,placement:_react.default.PropTypes.oneOf(["bottom","top","left","right"]),show:_react.default.PropTypes.bool,onXClick:_react.default.PropTypes.func,children:_react.default.PropTypes.node};var _default=OverlayTooltip;exports.default=_default;
},{"./OverlayWrapper":35,"react":"react","react-bootstrap/lib/Tooltip":"react-bootstrap/lib/Tooltip"}],35:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_reactDom=_interopRequireDefault(require("react-dom")),_lodash=_interopRequireDefault(require("lodash")),_Overlay=_interopRequireDefault(require("react-bootstrap/lib/Overlay"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var OverlayWrapper=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n)))).getOverlayTarget=function(){return _reactDom.default.findDOMNode(_assertThisInitialized(r))},r.getOverlay=function(){var e=_lodash.default.clone(r.props);e.target=r.getOverlayTarget;var t=_react.default.cloneElement(r.props.overlay,{placement:e.placement,container:e.container});return _react.default.createElement(_Overlay.default,e,t)},r.renderOverlay=function(){_reactDom.default.unstable_renderSubtreeIntoContainer(_assertThisInitialized(r),r._overlay,r._mountNode)},r}return _inherits(t,_react.default.Component),_createClass(t,[{key:"componentDidMount",value:function(){this._mountNode=document.createElement("span"),this.renderOverlay()}},{key:"componentWillUnmount",value:function(){_reactDom.default.unmountComponentAtNode(this._mountNode),this._mountNode=null}},{key:"componentDidUpdate",value:function(){this._mountNode&&this.renderOverlay()}},{key:"render",value:function(){var e=_react.default.Children.only(this.props.children);return this._overlay=this.getOverlay(),_react.default.cloneElement(e,{})}}]),t}();OverlayWrapper.propTypes={overlay:_react.default.PropTypes.node.isRequired,placement:_react.default.PropTypes.oneOf(["bottom","top","left","right"]),show:_react.default.PropTypes.bool,children:_react.default.PropTypes.node};var _default=OverlayWrapper;exports.default=_default;
},{"lodash":"lodash","react":"react","react-bootstrap/lib/Overlay":"react-bootstrap/lib/Overlay","react-dom":"react-dom"}],36:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_classnames=_interopRequireDefault(require("classnames")),_OverlayTrigger=_interopRequireDefault(require("react-bootstrap/lib/OverlayTrigger")),_Tooltip=_interopRequireDefault(require("react-bootstrap/lib/Tooltip")),_NewUtils=require("./NewUtils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ParamsTable=function(e){function t(){var e,r;_classCallCheck(this,t);for(var a=arguments.length,l=new Array(a),n=0;n<a;n++)l[n]=arguments[n];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(l)))).onSelect=function(e,t,a){a.preventDefault(),r.props.onSelect&&r.props.onSelect(e,t)},r.onValueClick=function(e,t){t.preventDefault(),r.props.onValueClick&&r.props.onValueClick(e)},r}return _inherits(t,_react.default.Component),_createClass(t,[{key:"render",value:function(){var e=this,t=this.props.fields,r=this.props.emptyText,a=this.props.onSelect,l=this.props.selected,n=this.props.onValueClick,o=this.props.valueTooltip,u=this.props.fieldColumnLabel||"Key",c=_lodash.default.isArray(t)?t:_lodash.default.map(t,function(e,t){return{name:t,value:e}});return _react.default.createElement("table",{className:"table wa-break-all"},_react.default.createElement("thead",null,_react.default.createElement("tr",null,a?_react.default.createElement("th",null,_react.default.createElement("i",{className:"fa fa-check"}),_react.default.createElement("span",{className:"sr-only"},"Selected?")):null,_react.default.createElement("th",{style:{minWidth:100}},u),_react.default.createElement("th",null,"Value"))),_react.default.createElement("tbody",null,r&&0===c.length?_react.default.createElement("tr",null,_react.default.createElement("td",{colSpan:a?3:2,className:"text-center"},r)):null,c.map(function(t,r){var u="string"==typeof t.value?t.value:t.value.data,c=t.value&&"file"===t.value.type,s=_lodash.default.isNumber(l)&&l===r||l===t.name||l===t,i=_react.default.createElement("span",null,c?_react.default.createElement("span",null,u.fileName," ",_react.default.createElement("span",{className:"label label-primary"},"File")):u);return n&&(i=_react.default.createElement("a",{href:"#",onClick:(0,_NewUtils.call)(e,"onValueClick",[u])},i)),o&&(i=_react.default.createElement(_OverlayTrigger.default,{overlay:_react.default.createElement(_Tooltip.default,{id:"value".concat(r)},o),placement:"bottom"},i)),_react.default.createElement("tr",{key:r,className:(0,_classnames.default)({"wa-hover-row wa-link":a,info:s}),onClick:(0,_NewUtils.call)(e,"onSelect",[t,r])},a?_react.default.createElement("td",null,s?_react.default.createElement("span",{className:"text-success"},_react.default.createElement("i",{className:"fa fa-check-square-o"})):_react.default.createElement("i",{className:"fa fa-square-o"})):null,_react.default.createElement("td",null,_react.default.createElement("strong",null,t.name)),_react.default.createElement("td",null,i))},this)))}}]),t}();ParamsTable.propTypes={fields:_react.default.PropTypes.oneOfType([_react.default.PropTypes.array,_react.default.PropTypes.object]).isRequired,emptyText:_react.default.PropTypes.string,onSelect:_react.default.PropTypes.func,selected:_react.default.PropTypes.oneOfType([_react.default.PropTypes.number,_react.default.PropTypes.string]),onValueClick:_react.default.PropTypes.func,valueTooltip:_react.default.PropTypes.node,fieldColumnLabel:_react.default.PropTypes.string};var _default=ParamsTable;exports.default=_default;
},{"./NewUtils":33,"classnames":"classnames","lodash":"lodash","react":"react","react-bootstrap/lib/OverlayTrigger":"react-bootstrap/lib/OverlayTrigger","react-bootstrap/lib/Tooltip":"react-bootstrap/lib/Tooltip"}],37:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_Immutable=_interopRequireDefault(require("../js/Immutable")),_Utility=_interopRequireDefault(require("../js/Utility")),_Tutorial=_interopRequireDefault(require("../js/redux/Tutorial"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function preventDefault(e){e&&e.preventDefault()}function stopPropagation(e){e&&e.stopPropagation()}function joinPath(e,t){return"string"==typeof t?(e="string"==typeof e?e:e.join("."),"".concat(e,".").concat(t)):t instanceof Array?(e=e instanceof Array?e:e.split(".")).concat(t):null}function updateFormFieldWithPrefix(e,t){return function(a,l,r){return a=joinPath(t,a),updateFormField(e,a,l,r)}}function updateFormField(e,t,a,l){var r=e._updateFormFieldCache;r||(e._updateFormFieldCache={},r=e._updateFormFieldCache);var n=JSON.stringify([t,a,l]);if(r[n])return r[n];var o=function(r){var n=r&&r.target?r.target.value:r;try{"int"===a?n=parseInt(n,10):"float"===a&&(n=parseFloat(n))}catch(e){return r.preventDefault&&r.preventDefault(),e}var o=e.state;return o=setMixed(o,t,n),l&&(o=setMixed(o,l,!0)),e.setState(o),null};return r[n]=o,o}function toggle(e,t,a){a&&a.preventDefault();var l=_lodash.default.get(this.state,e)===t?null:t,r=_lodash.default.cloneDeep(this.state);_lodash.default.set(r,e,l),this.setState(r)}function toggleCheckbox(e,t){return toggleBoolTrackingChanges.call(this,e,t,null)}function toggleCheckboxWithPrefix(e,t,a){return toggleCheckbox.call(this,joinPath(e,t),a)}function toggleBool(e,t){return toggleBoolTrackingChanges.call(this,e,null,t)}function splitMutableImmutable(e,t){"string"==typeof t&&(t=t.split("."));for(var a=e,l=[],r=[],n=0;n!==t.length;n++){var o=t[n];if(r.push(o),_Immutable.default.Iterable.isIterable(a[o])){l=t.slice(n+1);break}}return{mutable:r,immutable:l}}function setMixed(e,t,a,l){var r=splitMutableImmutable(e,t),n=!!r.mutable.length,o=!!r.immutable.length,i=n?_lodash.default.get(e,r.mutable):e,u=o?i.setIn(r.immutable,a):a;if(n){var s=[];e=_lodash.default.clone(e);for(var d=0;d!==r.mutable.length-1;d++){var f=r.mutable[d];s.push(f),_lodash.default.set(e,s,_lodash.default.clone(_lodash.default.get(e,s)))}return l?_lodash.default.set(e,r.mutable,u):_lodash.default.setWith(e,r.mutable,u,l),e}return u}function getMixed(e,t){var a=splitMutableImmutable(e,t),l=!!a.mutable.length,r=!!a.immutable.length,n=l?_lodash.default.get(e,a.mutable):e;return r?n.getIn(a.immutable):n}function toggleBoolTrackingChanges(e,t,a){a&&a.preventDefault&&a.preventDefault();var l=this.state;l=setMixed(l,e,!getMixed(l,e)),t&&(t instanceof Array||"string"==typeof t)&&(l=setMixed(l,t,!0)),this.setState(l)}function setState(e,t,a){a&&a.preventDefault&&a.preventDefault();var l=setMixed(this.state,e,t);this.setState(l)}function setStateRadio(e,t){return setState.call(this,e,t.target.value)}function setStateCheckbox(e,t){return setState.call(this,e,t.target.checked)}function addBreaks(e,t){t=t||/[/&]/;var a=e.split(t),l=a.map(function(e,t){return t===a.length-1?_react.default.createElement("span",{key:t},e):_react.default.createElement("span",{key:t},e,"/",_react.default.createElement("wbr",null))});return _react.default.createElement("span",null,l)}function defaultDoneToVariable(e,t){var a={loading:_lodash.default.get(e,"loading")||"loading",response:_lodash.default.get(e,"response")||"response"},l={};_lodash.default.set(l,a.loading,!1),_lodash.default.set(l,a.response,t),this.setState(l)}function defaultDone(e){defaultDoneToVariable.call(this,null,e)}function defaultFailToVariable(e,t){var a=_Utility.default.getDefaultError(t),l={loading:_lodash.default.get(e,"loading")||"loading",response:_lodash.default.get(e,"response")||"response"},r={};_lodash.default.set(r,l.loading,!1),_lodash.default.set(r,l.response,_lodash.default.isEmpty(t)?a:t),this.setState(r)}function defaultFail(e){defaultFailToVariable.call(this,null,e)}function defaultRenderMessages(e,t){return e&&e.messages&&_react.default.createElement("div",{className:"alert alert-".concat(e.success?"success":"danger").concat(t?" ".concat(t):"")},e.messages.map(function(e){return _react.default.createElement("p",{key:e},e)}))}function memoize(e){return e._memoizedCache={},function(){for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];var r=JSON.stringify(a),n=e._memoizedCache;return n[r]||(n[r]=e.apply(this,a)),n[r]}}Function.prototype.bindMemoized=function(e){this._bindMemoizedCache||(this._bindMemoizedCache={});for(var t=arguments.length,a=new Array(t>1?t-1:0),l=1;l<t;l++)a[l-1]=arguments[l];var r=JSON.stringify(a);return this._bindMemoizedCache[r]||(this._bindMemoizedCache[r]=this.bind.apply(this,_toConsumableArray([e].concat(a||[])))),this._bindMemoizedCache[r]};var ReactUtils={preventDefault:preventDefault,stopPropagation:stopPropagation,updateFormField:updateFormField,updateFormFieldWithPrefix:updateFormFieldWithPrefix,addBreaks:addBreaks,toggle:toggle,setMixed:setMixed,setState:setState,setStateRadio:setStateRadio,setStateCheckbox:setStateCheckbox,toggleCheckbox:toggleCheckbox,toggleCheckboxWithPrefix:toggleCheckboxWithPrefix,toggleBool:toggleBool,defaultDoneToVariable:defaultDoneToVariable,defaultFailToVariable:defaultFailToVariable,defaultDone:defaultDone,defaultFail:defaultFail,defaultRenderMessages:defaultRenderMessages,connectTutorialStep:_Tutorial.default.connectTutorialStep,connectLocalTutorialStep:_Tutorial.default.connectLocalTutorialStep,memoize:memoize},_default=ReactUtils;exports.default=_default;
},{"../js/Immutable":8,"../js/Utility":15,"../js/redux/Tutorial":20,"lodash":"lodash","react":"react"}],38:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_NewUtils=_interopRequireDefault(require("./NewUtils"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var RecordingButton=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"render",value:function(){var e=this.props.isRecording,t=this.props.loading;return e?_react.default.createElement("button",{className:"btn btn-danger",type:"button",onClick:_NewUtils.default.callProp(this,"onRecordingChange",[!1]),disabled:t},_react.default.createElement("i",{className:"fa fa-circle"})," Recording"," ",t&&_react.default.createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-fw"})):_react.default.createElement("button",{className:"btn btn-warning",type:"button",onClick:_NewUtils.default.callProp(this,"onRecordingChange",[!0]),disabled:t},_react.default.createElement("i",{className:"fa fa-circle"})," Start capturing requests"," ",t&&_react.default.createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-fw"}))}}]),t}();RecordingButton.propTypes={isRecording:_react.default.PropTypes.bool.isRequired,onRecordingChange:_react.default.PropTypes.func.isRequired,loading:_react.default.PropTypes.bool};var _default=RecordingButton;exports.default=_default;
},{"./NewUtils":33,"react":"react"}],39:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_reactRedux=require("react-redux"),_redux=require("redux"),_MainReducer=_interopRequireDefault(require("../js/redux/MainReducer")),_LoginGate=_interopRequireDefault(require("./LoginGate")),_RequestCapturePage=_interopRequireDefault(require("./RequestCapturePage"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var store=(0,_redux.createStore)(_MainReducer.default),RequestCaptureMainPage=function(e){function t(){var e,r;_classCallCheck(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(o)))).state={showExpandDialog:!1},r.updateSize=function(){var e=window.innerWidth,t=window.innerHeight;e&&t&&(e<560||t<400)?r.setState({showExpandDialog:!0}):r.setState({showExpandDialog:!1})},r}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"componentWillMount",value:function(){this.updateSize(),this._onResize=window.addEventListener("resize",this.updateSize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener(this._onResize)}},{key:"render",value:function(){var e=this.state.showExpandDialog;return _react.default.createElement("div",null,e&&_react.default.createElement("div",{className:"container"},_react.default.createElement("div",{className:"alert alert-info wa-top10"},_react.default.createElement("p",null,_react.default.createElement("strong",null,"To use WrapAPI, undock the Chrome DevTools into a separate window, and make sure it's at least somewhat big.")),_react.default.createElement("ol",{className:"wa-top10"},_react.default.createElement("li",null,"Click the"," ",_react.default.createElement("strong",null,_react.default.createElement("i",{className:"fa fa-ellipsis-v"})," three dots")," ","at the top right of the DevTools panel."),_react.default.createElement("li",null,"Select"," ",_react.default.createElement("strong",null,_react.default.createElement("i",{className:"fa fa-window-restore"})," Undock into separate window."))))),_react.default.createElement("div",{style:{display:e?"none":"block"}},_react.default.createElement(_reactRedux.Provider,{store:store},_react.default.createElement(_LoginGate.default,{componentOnceLoggedIn:_RequestCapturePage.default,showLogo:!0}))))}}]),t}(),_default=RequestCaptureMainPage;exports.default=_default;
},{"../js/redux/MainReducer":19,"./LoginGate":30,"./RequestCapturePage":40,"react":"react","react-redux":"react-redux","redux":"redux"}],40:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_reactRouter=require("react-router"),_lodash=_interopRequireDefault(require("lodash")),_urijs=_interopRequireDefault(require("urijs")),_Navbar=_interopRequireDefault(require("react-bootstrap/lib/Navbar")),_OverlayTrigger=_interopRequireDefault(require("react-bootstrap/lib/OverlayTrigger")),_Tooltip=_interopRequireDefault(require("react-bootstrap/lib/Tooltip")),_RequestCapture=require("../js/RequestCapture"),_Ajax=require("../js/Ajax"),_Capture=_interopRequireDefault(require("../js/Capture")),_Config=_interopRequireDefault(require("../js/Config")),_Auth=require("../js/redux/Auth"),_APIElements=require("../js/redux/APIElements"),_NewUtils=require("./NewUtils"),_ReactUtils=_interopRequireDefault(require("./ReactUtils")),_OverlayTooltip=_interopRequireDefault(require("./OverlayTooltip")),_NavbarUser=_interopRequireDefault(require("./NavbarUser")),_RecordingButton=_interopRequireDefault(require("./RecordingButton")),_CapturesView=_interopRequireDefault(require("./CapturesView")),_RequestCaptureSaveModal=_interopRequireDefault(require("./RequestCaptureSaveModal")),_DropdownSelect=_interopRequireDefault(require("./DropdownSelect"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep(e,t,r,a,n,s,o){try{var u=e[s](o),i=u.value}catch(e){return void r(e)}u.done?t(i):Promise.resolve(i).then(a,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(a,n){var s=e.apply(t,r);function o(e){asyncGeneratorStep(s,a,n,o,u,"next",e)}function u(e){asyncGeneratorStep(s,a,n,o,u,"throw",e)}o(void 0)})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function removeHash(e){var t=(0,_urijs.default)(e).normalize().toString(),r=t.indexOf("#");return-1!==r?t.substr(0,r):t}var RequestCapturePage=function(e){function t(){var e,r;_classCallCheck(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n)))).props=void 0,r.state={isRecording:!1,requests:[],pageURL:"",showSaveModal:!1,savedCaptures:[],isSaving:!1,saveResponse:null,isCaptureLoading:!1,getCapturesResponse:null},r.requestsAwaitingRedirect={},r.seqNum=0,r.allRequests=[],r.requestListener=function(e){var t=_Capture.default.parseURL(e.request.url);if(e.custom={},e.custom.pageURL=r.state.pageURL,"http:"===t.protocol||"https:"===t.protocol){e.custom.xhr=e.request.url!==e.custom.pageURL;var a=e.response.redirectURL,n=""!==a&&e.response.status>=300&&e.response.status<400;a&&(a=(0,_urijs.default)(a).absoluteTo(e.request.url).normalize().toString()),e.custom.isRedirect=n;var s=t.pathname.split("/").pop(),o=s.indexOf("."),u=-1===o?"":s.substring(o+1),i=_Capture.default.getShortMime(e.response.content.mimeType,u);e.custom.shortMime=i,e.request.postData&&(e.custom.postData=_Capture.default.parsePostData(e.request.postData)),e.request.queryString&&(e.custom.queryString=_lodash.default.cloneDeep(e.request.queryString).map(function(e){return e.value=decodeURIComponent(e.value).replace(/\+/g," "),e}));var l=function(e){r.allRequests=r.allRequests.concat([e]),e.custom.base64=_Capture.default.extractBase64(e),_Config.default.debug(e),r.updateRequestsThrottled()};if(e.custom.seqNum=r.seqNum++,n){var c=removeHash(a);r.requestsAwaitingRedirect[c]=e,e.custom.finalData=null,l(e)}else e.getContent(function(t,a){e.responseBody={content:t,encoding:a};var n=_lodash.default.clone(e);n.custom=_lodash.default.clone(e.custom),delete n.custom.finalData,e.custom.finalData=n;for(var s=removeHash(e.request.url),o=(s in r.requestsAwaitingRedirect),u=e;o;){var i=r.requestsAwaitingRedirect[s];delete r.requestsAwaitingRedirect[s],i.custom.finalData=e.custom.finalData,i.custom.base64=_Capture.default.extractBase64(i),i.custom.redirectReqNum=e.custom.seqNum,i.custom.redirectReq=e,i.custom.nextReq=u,o=(s=(0,_urijs.default)(i.request.url).normalize().toString())in r.requestsAwaitingRedirect,u=i}l(e)})}},r.updateRequestsThrottled=void 0,r.updateRequests=function(){r.setState({requests:r.allRequests})},r.navigatedListener=function(e){r.setState({pageURL:e})},r.clear=function(){r.allRequests=[],r.setState({requests:[]}),r.seqNum=0},r.handleRecordingChange=function(e){r.setState({isRecording:e}),e?(chrome.devtools.network.onRequestFinished.addListener(r.requestListener),chrome.devtools.network.onNavigated.addListener(r.navigatedListener),r.props.advanceTutorialStep("pressToRecord")):(chrome.devtools.network.onRequestFinished.removeListener(r.requestListener),chrome.devtools.network.onNavigated.removeListener(r.navigatedListener))},r.handleSave=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,n,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({isSaving:!0,saveResponse:null}),a=r.state.requests,e.prev=2,e.next=5,(0,_RequestCapture.setCapture)(t,a);case 5:n=e.sent,s=r.state.savedCaptures,r.setState({isSaving:!1,showSaveModal:!1,savedCaptures:s.concat(n)}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),(0,_Ajax.getCatch)(_assertThisInitialized(r),"saveResponse","isSaving");case 13:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t){return e.apply(this,arguments)}}(),r.handleLoadCapture=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({isCaptureLoading:!0}),e.prev=1,e.next=4,(0,_RequestCapture.getCapture)(t);case 4:a=e.sent,n=a.data,r.allRequests=n,r.setState({requests:n,isCaptureLoading:!1}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(0,_Ajax.getCatch)(_assertThisInitialized(r),"getCapturesResponse","isCaptureLoading");case 13:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t){return e.apply(this,arguments)}}(),r}return _inherits(t,_react.default.Component),_createClass(t,[{key:"componentWillMount",value:function(){var e=this;chrome.runtime.sendMessage({type:"chrome.tabs.get",args:chrome.devtools.inspectedWindow.tabId},function(t){e.setState({pageURL:t.url})}),this.updateRequestsThrottled=_lodash.default.throttle(this.updateRequests,200),this.props.refreshAPIElements(),this.loadCaptures()}},{key:"loadCaptures",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.featureFlags.saveCaptures){e.next=12;break}return e.prev=2,e.next=5,(0,_RequestCapture.getCaptures)();case 5:t=e.sent,this.setState({savedCaptures:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),(0,_Ajax.getCatch)(this,"getCapturesResponse")(e.t0);case 12:case"end":return e.stop()}},e,this,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.handleRecordingChange(!1)}},{key:"render",value:function(){var e=this.state,t=e.isRecording,r=e.requests,a=e.showSaveModal,n=e.isSaving,s=e.savedCaptures,o=e.saveResponse,u=e.getCapturesResponse,i=e.isCaptureLoading,l=this.props,c=l.apiElements,p=l.featureFlags;return _react.default.createElement("div",null,_react.default.createElement(_Navbar.default,{fluid:!0,fixed:!0,className:"wa-navbar-no-collapse"},_react.default.createElement(_Navbar.default.Header,null,_react.default.createElement(_Navbar.default.Brand,null,_react.default.createElement(_reactRouter.Link,{to:"/"},_react.default.createElement("img",{src:"/assets/logo-v2.png",alt:"WrapAPI v2",className:"wa-extension-logo"}),_react.default.createElement("img",{src:"/assets/logo-icon.png",alt:"WrapAPI",className:"wa-extension-icon"})))),_react.default.createElement(_Navbar.default.Collapse,{style:{flexGrow:1}},_react.default.createElement(_Navbar.default.Form,{pullLeft:!0},_react.default.createElement(_OverlayTooltip.default,{placement:"bottom",show:"pressToRecord"===this.props.tutorialStep,contents:_react.default.createElement("span",null,"Click here to start capturing the HTTP requests",_react.default.createElement("br",null),"you'll use to build your API"),onXClick:(0,_NewUtils.callProp)(this,"advanceTutorialStep",["pressToRecord"])},_react.default.createElement(_RecordingButton.default,{isRecording:t,onRecordingChange:this.handleRecordingChange}))," ",_react.default.createElement("button",{className:"btn btn-default",onClick:this.clear,disabled:0===this.seqNum,type:"button"},"Clear")," ",p.saveCaptures&&_react.default.createElement("div",{className:"btn-group"},_react.default.createElement(_OverlayTrigger.default,{overlay:_react.default.createElement(_Tooltip.default,{id:"saveRecording"},"Save recording: save the currently-recorded request to reference later"),placement:"bottom"},_react.default.createElement("button",{className:"btn btn-default",type:"button",onClick:(0,_NewUtils.setState)(this,"showSaveModal",!0),disabled:0===r.length},_react.default.createElement("i",{className:"fa fa-floppy-o"}))),_react.default.createElement(_OverlayTrigger.default,{overlay:_react.default.createElement(_Tooltip.default,{id:"saveRecording"},"Load recording: load a previously-saved list of recordings"),placement:"right"},_react.default.createElement(_DropdownSelect.default,{button:!0,options:s.map(function(e){return{label:e.name,value:e.id}}),disabled:0===s.length,onChange:this.handleLoadCapture,defaultLabel:_react.default.createElement("span",null,_react.default.createElement("i",{className:"fa fa-folder-open-o"})," ",i&&_react.default.createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-fw"}))})))),_react.default.createElement(_NavbarUser.default,{hideUsername:!0}))),_react.default.createElement(_CapturesView.default,{showTutorial:!0,requests:r,existingAPIElements:c,onExistingAPIElementsChange:(0,_NewUtils.callProp)(this,"refreshAPIElements"),isRecording:t},(0,_NewUtils.renderResponse)(u)),_react.default.createElement(_RequestCaptureSaveModal.default,{show:a,onHide:(0,_NewUtils.setState)(this,"showSaveModal",!1),onSave:this.handleSave,isSaving:n,saveResponse:o}))}}]),t}(),_default=_ReactUtils.default.connectTutorialStep()((0,_Auth.connect)()((0,_APIElements.connect)()(RequestCapturePage)));exports.default=_default;
},{"../js/Ajax":2,"../js/Capture":5,"../js/Config":7,"../js/RequestCapture":12,"../js/redux/APIElements":17,"../js/redux/Auth":18,"./CapturesView":23,"./DropdownSelect":27,"./NavbarUser":32,"./NewUtils":33,"./OverlayTooltip":34,"./ReactUtils":37,"./RecordingButton":38,"./RequestCaptureSaveModal":41,"lodash":"lodash","react":"react","react-bootstrap/lib/Navbar":"react-bootstrap/lib/Navbar","react-bootstrap/lib/OverlayTrigger":"react-bootstrap/lib/OverlayTrigger","react-bootstrap/lib/Tooltip":"react-bootstrap/lib/Tooltip","react-router":"react-router","urijs":"urijs"}],41:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_moment=_interopRequireDefault(require("moment")),_Modal=_interopRequireDefault(require("react-bootstrap/lib/Modal")),_NewUtils=require("./NewUtils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var RequestCaptureSaveModal=function(e){function t(){var e,r;_classCallCheck(this,t);for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(o)))).props=void 0,r.state={name:""},r.handleHide=function(){r.setState({name:""}),r.props.onHide()},r.handleSubmit=function(e){e.preventDefault();var t=r.state.name;r.props.onSave(t)},r}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"componentWillReceiveProps",value:function(e){e.show&&!this.props.show&&this.setState({name:"Rec: ".concat((0,_moment.default)().format("M/D h:mma"))})}},{key:"render",value:function(){var e=this.props,t=e.show,r=e.isSaving,a=e.saveResponse,o=this.state.name;return _react.default.createElement(_Modal.default,{show:t,onHide:this.handleHide},_react.default.createElement("form",{onSubmit:this.handleSubmit},_react.default.createElement(_Modal.default.Header,{closeButton:!0},_react.default.createElement(_Modal.default.Title,null,"Save request log to WrapAPI")),_react.default.createElement(_Modal.default.Body,null,_react.default.createElement("p",null,"Do you need to reference these same requests in the future? Save these recorded requests to WrapAPI, and load them again for reference any time in the future."),_react.default.createElement("div",{className:"form-group"},_react.default.createElement("label",{htmlFor:"name"},"Name of recorded captures"),_react.default.createElement("input",{type:"text",className:"form-control",placeholder:"My recording",onChange:(0,_NewUtils.update)(this,"name"),value:o}),_react.default.createElement("p",{className:"help-block"},"A name for the capture, just so its easier to find in the future.")),(0,_NewUtils.renderResponse)(a)),_react.default.createElement(_Modal.default.Footer,null,_react.default.createElement("button",{className:"btn btn-default",type:"button",onClick:this.handleHide},"Cancel")," ",_react.default.createElement("button",{className:"btn btn-primary",type:"submit",disabled:r||!o},r?_react.default.createElement("span",null,"Saving ",_react.default.createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-fw"})):"Save"))))}}]),t}();exports.default=RequestCaptureSaveModal;
},{"./NewUtils":33,"moment":"moment","react":"react","react-bootstrap/lib/Modal":"react-bootstrap/lib/Modal"}],42:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_Tooltip=_interopRequireDefault(require("react-bootstrap/lib/Tooltip")),_OverlayTrigger=_interopRequireDefault(require("react-bootstrap/lib/OverlayTrigger")),_Capture=_interopRequireDefault(require("../js/Capture")),_Utility=_interopRequireDefault(require("../js/Utility")),_ReactUtils=_interopRequireDefault(require("./ReactUtils")),_NewUtils=_interopRequireDefault(require("./NewUtils")),_OverlayTooltip=_interopRequireDefault(require("./OverlayTooltip"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var RequestList=function(e){function t(){var e,r;_classCallCheck(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(l)))).toggleReq=function(e){var t=r.props.selectedIndex;r.props.onSelect&&(t!==e?r.props.onSelect(e):r.props.onSelect(null)),r.props.showTutorial&&r.props.advanceTutorialStep("chooseCapture")},r}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"render",value:function(){var e=this,t=this.props.requests,r=this.props.isRecording,a=this.props.filters,l=this.props.showTutorial,o=this.props.selectedIndex,n=this.props.tutorialStep,u=null!=o;function c(e){return!a.text||!!_Capture.default.searchInCapture(e,a.text,a.textSearchPlaces)}function s(e){return!(!e.custom.finalData||!a.shortMimes[e.custom.finalData.custom.shortMime])}var i=a.text?t.filter(c):t,p=i.filter(s);return _react.default.createElement("div",null,_react.default.createElement("table",{className:"table table-striped wa-request-list wa-table-fixed"},_react.default.createElement("colgroup",null,_react.default.createElement("col",{style:{width:"30px"}}),_react.default.createElement("col",{style:{width:u?"100%":"60%"}}),!u&&[_react.default.createElement("col",{key:0,style:{width:"45px"}}),_react.default.createElement("col",{key:1,style:{width:"60px"}}),_react.default.createElement("col",{key:2,style:{width:"45px"}}),_react.default.createElement("col",{key:3})]),_react.default.createElement("thead",null,_react.default.createElement("tr",null,_react.default.createElement("th",null,"#"),_react.default.createElement("th",null,"URL"),!u&&[_react.default.createElement("th",{key:0},"Method"),_react.default.createElement("th",{key:1},"Size"),_react.default.createElement("th",{key:2},"Status"),_react.default.createElement("th",{key:3},"Type")])),_react.default.createElement("tbody",null,0===t.length?r?_react.default.createElement("tr",{className:"success"},_react.default.createElement("td",{colSpan:"6",className:"text-center"},_react.default.createElement("strong",null,"Interact with your main tab!")," Requests will appear here")):_react.default.createElement("tr",null,_react.default.createElement("td",{colSpan:"6",className:"text-center"},_react.default.createElement("strong",null,"No requests captured.")," Start capturing to see something here")):null,0!==t.length&&0===p.length?_react.default.createElement("tr",{className:"warning"},_react.default.createElement("td",{colSpan:"6",className:"text-center"},_react.default.createElement("strong",null,"No requests match your filters.")," ",0!==i.length&&a.text?_react.default.createElement("span",null,"However, we found matching requests of other response types:"," ",_react.default.createElement("a",{href:"#broadenTypes",onClick:_NewUtils.default.setPropValue(this,"onFiltersChange","filters","shortMimes",_Capture.default.allShortMimesFilter,!0)},"try searching among all response types.")):"Consider broadening your search terms or request types")):null,t.map(function(t,r){if(!c(a=t)||!s(a))return null;var a,i,p=_Capture.default.parseURL(t.request.url),f=_Capture.default.parseURL(t.custom.pageURL||""),d=_react.default.createElement(_Tooltip.default,{id:"url-tooltip"},t.request.url);i=t.custom.isRedirect?"redir".concat(t.custom.finalData?" (".concat(t.custom.finalData.custom.shortMime,")  ").concat(t.custom.redirectReqNum):""):t.custom.xhr?"xhr (".concat(t.custom.finalData.custom.shortMime,")"):t.custom.finalData.custom.shortMime;var _=[_react.default.createElement("td",{key:"1"},t.request.method),_react.default.createElement("td",{key:"2"},_Utility.default.sizeToText(t.response.content.size)),_react.default.createElement("td",{key:"3"},t.response.status),_react.default.createElement("td",{key:"4"},i)],m=_react.default.createElement("tr",{key:r,className:"wa-hover-row wa-link ".concat(o===r?"info":""),onClick:_NewUtils.default.call(e,"toggleReq",[r],!0)},_react.default.createElement("td",null,_react.default.createElement("strong",null,t.custom.seqNum)),_react.default.createElement("td",{className:"wa-url-column ".concat(p.host===f.host?"text-primary":"")},_react.default.createElement(_OverlayTrigger.default,{overlay:d,placement:"bottom"},_react.default.createElement("a",{href:"#"},_react.default.createElement("strong",null,p.pathname,p.search)))),!u&&_);return 0===r&&l?_react.default.createElement(_OverlayTooltip.default,{key:t.custom.seqNum,placement:"top",show:"chooseCapture"===n,contents:"Find the request you want to make into an API, and click to inspect it",onXClick:_NewUtils.default.callProp(e,"advanceTutorialStep",["chooseCapture"])},m):m}))))}}]),t}();RequestList.propTypes={requests:_react.default.PropTypes.array.isRequired,isRecording:_react.default.PropTypes.bool,selectedIndex:_react.default.PropTypes.number,onSelect:_react.default.PropTypes.func,showTutorial:_react.default.PropTypes.bool,tutorialStep:_react.default.PropTypes.string,advanceTutorialStep:_react.default.PropTypes.func.isRequired,filters:_react.default.PropTypes.object.isRequired,onFiltersChange:_react.default.PropTypes.func.isRequired};var _default=_ReactUtils.default.connectTutorialStep({pure:!1})(RequestList);exports.default=_default;
},{"../js/Capture":5,"../js/Utility":15,"./NewUtils":33,"./OverlayTooltip":34,"./ReactUtils":37,"react":"react","react-bootstrap/lib/OverlayTrigger":"react-bootstrap/lib/OverlayTrigger","react-bootstrap/lib/Tooltip":"react-bootstrap/lib/Tooltip"}],43:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_arrayJoinConjunction=_interopRequireDefault(require("array-join-conjunction")),_Collapse=_interopRequireDefault(require("react-bootstrap/lib/Collapse")),_Config=_interopRequireDefault(require("../js/Config")),_APIStorage=_interopRequireDefault(require("../js/APIStorage")),_Capture=_interopRequireDefault(require("../js/Capture")),_Chrome=_interopRequireDefault(require("../js/Chrome")),Auth=_interopRequireWildcard(require("../js/redux/Auth")),_NewUtils=require("./NewUtils"),_ReactUtils=_interopRequireDefault(require("./ReactUtils")),_ParamsTable=_interopRequireDefault(require("./ParamsTable")),_ResponseViewer=_interopRequireDefault(require("./ResponseViewer")),_OverlayTooltip=_interopRequireDefault(require("./OverlayTooltip")),_SimpleAce=_interopRequireDefault(require("./SimpleAce")),_RequestPanelSaveModal=_interopRequireDefault(require("./RequestPanelSaveModal")),_APIElementSelect=_interopRequireDefault(require("./APIElementSelect"));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var n=r?Object.getOwnPropertyDescriptor(e,l):null;n&&(n.get||n.set)?Object.defineProperty(a,l,n):a[l]=e[l]}return a.default=e,t&&t.set(e,a),a}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function getDefaultState(){return{loading:!1,showModal:!1,selectedAPIElement:null,response:null,show:{postData:!0,queryString:!0,requestCookies:!1,requestHeaders:!1,responseCookies:!1,responseHeaders:!1}}}var RequestPanel=function(e){function t(){var e,a;_classCallCheck(this,t);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return(a=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(l)))).props=void 0,a.state=void 0,a.state=getDefaultState(),a.updateSelectedRequest=function(e){a.props.updateSelectedRequest&&a.props.updateSelectedRequest(e)},a.openAPIElement=function(e){var t=e.target;return _Chrome.default.openLink(t.href).then(function(){a.setState({response:_objectSpread({},a.state.response,{messages:[_react.default.createElement("span",{key:0},_react.default.createElement("strong",null,"We have opened the API endpoint in a new tab.")," ","Close or switch away from Chrome Developer Tools to start editing it.")]})})})},a.addNewToAPIElement=function(e){var t=a.props.username;a.addToAPIElement(_objectSpread({username:t},e))},a.addToAPIElement=function(e){var t=_lodash.default.clone(a.props.data),r=e.username,l=e.repository,n=e.name;return t.label=e.label,a.setState({showModal:!1,loading:!0,response:null}),_APIStorage.default.addCapture(r,l,n,t).then(function(e){if(e.success){var t={username:r,repository:l,name:n,main:!0};a.setState({loading:!1,response:{success:!0,messages:[_react.default.createElement("span",{key:0},"This captured request has been saved to the API endpoint"," ",l,"/",n,".",_react.default.createElement("br",null),_react.default.createElement("a",{href:"".concat(_Config.default.host,"/api/").concat(r,"/").concat(l,"/").concat(n,"/0.0.0"),onClick:a.openAPIElement,target:"_blank"},"Click here to use it to define this API endpoint's inputs and outputs,")," ","or select another captured request you would like to save.")]}}),e.isNew&&a.props.onNewAPIElement&&a.props.onNewAPIElement(t)}else(0,_NewUtils.getThen)(_assertThisInitialized(a))(e)}).catch((0,_NewUtils.getCatch)(_assertThisInitialized(a)))},a.addToSelectedAPIElement=function(e){a.setState({showModal:!0,selectedAPIElement:e||null})},a}return _inherits(t,_react.default.Component),_createClass(t,[{key:"componentWillReceiveProps",value:function(e){e.data!==this.props.data&&(_Config.default.debug(e.data),this.setState(getDefaultState()))}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,r=t.existingAPIElements,l=t.allowSave,n=t.hideHeader,o=t.tutorialStep,s=t.searchFoundIn,u=t.username,c=this.state,i=c.show,d=c.loading,f=c.response,p="saveCapture"===o,_=_ReactUtils.default.defaultRenderMessages(f,"wa-bottom0"),m=_Capture.default.parseURL(a.request.url),h=_ReactUtils.default.addBreaks(m.pathname),y=a.custom.postData,b=a.custom.finalData,E=_Capture.default.omitParam(a.request.headers,"cookie"),P=a.request.cookies,g=_Capture.default.omitParam(a.response.headers,"set-cookie"),q=a.response.cookies,v=this.props.setSearch?{onValueClick:this.props.setSearch,valueTooltip:"Click to search for this value in other requests"}:null,w=function(e){var t=a.custom.base64[e];return t?_react.default.createElement("div",null,_react.default.createElement("p",null,_react.default.createElement("strong",null,"Base64-encoded values")),_react.default.createElement(_ParamsTable.default,_extends({fields:t},v,{fieldColumnLabel:"Base64-encoded"}))):null},R=function(t,a,r,l){return r&&0!==r.length?_react.default.createElement("tr",null,_react.default.createElement("td",null,_react.default.createElement("a",{href:"#",onClick:(0,_NewUtils.toggle)(e,["show",t],!0)},_react.default.createElement("i",{className:"fa ".concat(i[t]?"fa-minus-square-o":"fa-plus-square-o")})," ",_react.default.createElement("strong",null,a)),_react.default.createElement(_Collapse.default,{in:i[t]},_react.default.createElement("div",null,_react.default.createElement(_ParamsTable.default,_extends({fields:r},v,{fieldColumnLabel:l})),w(t))))):null};return _react.default.createElement("div",{className:"panel panel-default"},l&&_react.default.createElement(_RequestPanelSaveModal.default,{show:this.state.showModal,onHide:(0,_NewUtils.setState)(this,"showModal",!1),onSubmit:this.addNewToAPIElement,existingAPIElements:r,apiElement:this.state.selectedAPIElement}),!n&&_react.default.createElement("div",{className:"panel-heading wa-header-valign-mid"},_react.default.createElement("h4",{className:"left"},"Request details"),_react.default.createElement("div",{className:"right"},l&&_react.default.createElement(_OverlayTooltip.default,{placement:"bottom",show:p,contents:"If this is the HTTP request you're looking for, click to save it as the template for an API endpoint",onXClick:(0,_NewUtils.callProp)(this,"advanceTutorialStep",["saveCapture"])},_react.default.createElement("span",null,_react.default.createElement("div",{className:"wa-btn-container"},_react.default.createElement("button",{className:"btn btn-primary",type:"button",disabled:d,onClick:(0,_NewUtils.call)(this,"addToSelectedAPIElement",[null])},_react.default.createElement("i",{className:"fa fa-plus"})," Create new API")," ",r&&0!==Object.keys(r).length&&_react.default.createElement(_APIElementSelect.default,{button:!0,searchable:!0,pullRight:!0,bsStyle:"primary",defaultLabel:"Add to existing...",username:u,apiElements:_lodash.default.values(r).filter(function(e){return e.main&&"normal"===e.type}),onChange:this.addToSelectedAPIElement,disabled:d})))))),_react.default.createElement("table",{className:"table"},_react.default.createElement("colgroup",null,_react.default.createElement("col",{style:{minWidth:100}})),_react.default.createElement("tbody",null,d&&_react.default.createElement("tr",null,_react.default.createElement("td",null,_react.default.createElement("div",{className:"alert alert-info wa-bottom0"},"Saving your sample request... this may take up to 10 seconds"))),_&&_react.default.createElement("tr",null,_react.default.createElement("td",null,_)),s&&_react.default.createElement("tr",null,_react.default.createElement("td",null,_react.default.createElement("div",{className:"alert alert-info wa-bottom0"},"Your search terms were found in the"," ",_react.default.createElement("strong",null,(0,_arrayJoinConjunction.default)(s.map(function(e){return _Capture.default.textSearchPlaces[e]}))),"."))),_react.default.createElement("tr",null,_react.default.createElement("td",null,_react.default.createElement("strong",null,"HTTP method:")," ",a.request.method)),_react.default.createElement("tr",null,_react.default.createElement("td",null,_react.default.createElement("strong",null,"URL:")," ",m.protocol,"//",m.host,h)),a.custom.finalData?_react.default.createElement("tr",null,_react.default.createElement("td",null,_react.default.createElement("strong",null,"Response MIME type:")," ",a.custom.finalData.response.content.mimeType)):null,a.response.redirectURL?_react.default.createElement("tr",null,_react.default.createElement("td",null,_react.default.createElement("strong",null,"Redirected to: "),this.props.updateSelectedRequest?_react.default.createElement("a",{href:"#",onClick:this.updateSelectedRequest.bindMemoized(this,a.custom.redirectReqNum)},_ReactUtils.default.addBreaks(a.response.redirectURL)):_ReactUtils.default.addBreaks(a.response.redirectURL))):null,R("queryString","Query string",a.custom.queryString),y?_react.default.createElement("tr",null,_react.default.createElement("td",null,_react.default.createElement("a",{href:"#",onClick:(0,_NewUtils.toggle)(this,"show.postData",!0)},_react.default.createElement("i",{className:"fa ".concat(i.postData?"fa-minus-square-o":"fa-plus-square-o")})," ",_react.default.createElement("strong",null,"Post data"))," ","(",y.mimeType,")",_react.default.createElement(_Collapse.default,{in:i.postData},_react.default.createElement("div",null,"params"===y.type&&_react.default.createElement(_ParamsTable.default,_extends({fields:y.data},v)),"json"===y.type&&_react.default.createElement(_SimpleAce.default,{mode:"javascript",value:JSON.stringify(y.data,null,2),className:"wa-full-width-forced",readOnly:!0}),"text"===y.type&&_react.default.createElement(_SimpleAce.default,{value:y.data,className:"wa-full-width-forced",readOnly:!0}),w("postData"))))):null,R("requestHeaders","Request headers",E,"Header"),R("requestCookies","Request cookies",P,"Cookie"),R("responseHeaders","Response headers",g,"Header"),R("responseCookies","Response cookies",q,"Cookie"),b&&b.responseBody?_react.default.createElement("tr",null,_react.default.createElement("td",null,_react.default.createElement("p",null,_react.default.createElement("strong",null,"Response:")),_react.default.createElement(_ResponseViewer.default,{mimeType:b.response.content.mimeType,body:b.responseBody.content,baseUrl:a.request.url}),_lodash.default.get(a,"custom.base64.responseBody")&&_react.default.createElement("div",{className:"panel panel-default wa-top10"},_react.default.createElement("div",{className:"panel-heading"},"Base64-encoded values"),_react.default.createElement("div",{className:"panel-body"},_react.default.createElement(_ParamsTable.default,_extends({fields:a.custom.base64.responseBody},v,{fieldColumnLabel:"Base64-encoded"})))))):null)))}}]),t}();RequestPanel.propTypes={allowSave:_react.default.PropTypes.bool,onNewAPIElement:_react.default.PropTypes.func,data:_react.default.PropTypes.object.isRequired,updateSelectedRequest:_react.default.PropTypes.func,existingAPIElements:_react.default.PropTypes.object,hideHeader:_react.default.PropTypes.bool,setSearch:_react.default.PropTypes.func,searchFoundIn:_react.default.PropTypes.arrayOf(_react.default.PropTypes.string),tutorialStep:_react.default.PropTypes.string,advanceTutorialStep:_react.default.PropTypes.func,username:_react.default.PropTypes.string};var _default=Auth.connect()(_ReactUtils.default.connectTutorialStep()(RequestPanel));exports.default=_default;
},{"../js/APIStorage":1,"../js/Capture":5,"../js/Chrome":6,"../js/Config":7,"../js/redux/Auth":18,"./APIElementSelect":22,"./NewUtils":33,"./OverlayTooltip":34,"./ParamsTable":36,"./ReactUtils":37,"./RequestPanelSaveModal":44,"./ResponseViewer":45,"./SimpleAce":47,"array-join-conjunction":"array-join-conjunction","lodash":"lodash","react":"react","react-bootstrap/lib/Collapse":"react-bootstrap/lib/Collapse"}],44:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_lodash=_interopRequireDefault(require("lodash")),_moment=_interopRequireDefault(require("moment")),_Modal=_interopRequireDefault(require("react-bootstrap/lib/Modal")),_Utility=_interopRequireDefault(require("../js/Utility")),_Auth=_interopRequireDefault(require("../js/redux/Auth")),_ReactUtils=_interopRequireDefault(require("./ReactUtils")),_SelectWithAdd=_interopRequireDefault(require("./SelectWithAdd"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function getDefaultState(){return{form:{repository:"",name:"",label:""},errors:{}}}var RequestPanelSaveModal=function(e){function t(){var e,r;_classCallCheck(this,t);for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(o)))).state=getDefaultState(),r.initialize=function(){r.setState({form:_objectSpread({},r.state.form,{label:"Rec: ".concat((0,_moment.default)().format("M/D h:mma"))})})},r.createAndAddToAPIElement=function(e){e&&e.preventDefault();var t=_lodash.default.assign({},r.state.form,r.props.apiElement),a={};if(t.repository?-1===t.repository.search(/^[-\w]{1,64}$/)&&(a.repository="The repository name must consist of only letters and hyphens (-) and be up to 64 characters in length"):a.repository="Please enter the repository for the API endpoint",t.name?-1===t.name.search(/^[-\w]{1,64}$/)&&(a.name="The endpoint name must consist of only letters and hyphens (-)"):a.name="Please enter a name for the API endpoint",t.label||(a.label="Please enter a label for this captured request"),_lodash.default.isEmpty(a)){var o=r.props.onSubmit(t);o&&o.then&&o.then(function(){r.setState(getDefaultState())})}else r.setState({errors:a})},r.onRepositoryChange=function(e){var t=_lodash.default.clone(r.state.form);t.repository=e?e.value:null,r.setState({form:t})},r}return _inherits(t,_react.default.Component),_createClass(t,[{key:"componentWillMount",value:function(){this.initialize()}},{key:"componentWillReceiveProps",value:function(e){!this.props.show&&e.show&&this.initialize()}},{key:"render",value:function(){var e=this.props.username,t=this.state.form,r=this.state.errors,a=!this.props.apiElement,o=_Utility.default.getFullName(t),n=a&&this.props.existingAPIElements&&o in this.props.existingAPIElements,l=this.props.existingAPIElements||{},i=_lodash.default.chain(l).filter("main").map("repository").uniq().value();t.repository&&-1===i.indexOf(t.repository)&&i.push(t.repository);var s=i.map(function(e){return{label:e,value:e}});return _react.default.createElement(_Modal.default,{show:this.props.show,onHide:this.props.onHide},_react.default.createElement(_Modal.default.Header,{closeButton:!0},_react.default.createElement(_Modal.default.Title,null,a?"Create a new API endpoint":"Add to existing API endpoint")),_react.default.createElement("form",{onSubmit:this.createAndAddToAPIElement},_react.default.createElement(_Modal.default.Body,null,a&&_react.default.createElement("div",null,_react.default.createElement("div",{className:"form-group".concat(r.repository?" has-error":"")},_react.default.createElement("label",{htmlFor:"repository"},"Repository"),_react.default.createElement(_SelectWithAdd.default,{options:s,onChange:this.onRepositoryChange,value:t.repository,placeholder:"Select or add a repository"}),r.repository&&_react.default.createElement("p",{className:"help-block"},r.repository)),_react.default.createElement("div",{className:"form-group".concat(r.name?" has-error":"")},_react.default.createElement("label",{htmlFor:"name"},"Endpoint name"),_react.default.createElement("input",{type:"text",id:"name",className:"form-control",value:t.name,maxLength:"64",onChange:_ReactUtils.default.updateFormField(this,"form.name")}),_react.default.createElement("p",{className:"help-block"},r.name||_react.default.createElement("span",null,"Your API endpoint will be accessible at",_react.default.createElement("code",null,e,"/",t.repository||"(repository)","/",t.name||"(name)"))))),_react.default.createElement("div",{className:"form-group".concat(r.label?" has-error":"")},_react.default.createElement("label",{htmlFor:"label"},"Label for captured request"),_react.default.createElement("input",{type:"text",id:"label",className:"form-control",value:t.label,onChange:_ReactUtils.default.updateFormField(this,"form.label")}),_react.default.createElement("p",{className:"help-block"},r.label||'Give this captured request a short descriptive label so that you can easily reference it later (e.g., "successful login" or "searchToday")'))),_react.default.createElement(_Modal.default.Footer,null,_react.default.createElement("div",{className:"btn-group"},_react.default.createElement("button",{className:"btn btn-default",type:"button",onClick:this.props.onHide},"Cancel"),_react.default.createElement("button",{type:"submit",className:"btn btn-primary",disabled:n},n?"Name already taken":"Save")))))}}]),t}();RequestPanelSaveModal.propTypes={show:_react.default.PropTypes.bool,onHide:_react.default.PropTypes.func.isRequired,onSubmit:_react.default.PropTypes.func.isRequired,existingAPIElements:_react.default.PropTypes.object.isRequired,apiElement:_react.default.PropTypes.object,username:_react.default.PropTypes.string};var _default=_Auth.default.connect()(RequestPanelSaveModal);exports.default=_default;
},{"../js/Utility":15,"../js/redux/Auth":18,"./ReactUtils":37,"./SelectWithAdd":46,"lodash":"lodash","moment":"moment","react":"react","react-bootstrap/lib/Modal":"react-bootstrap/lib/Modal"}],45:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_Request=_interopRequireDefault(require("../js/Request")),_SimpleAce=_interopRequireDefault(require("./SimpleAce")),_Iframe=_interopRequireDefault(require("./Iframe")),_Tabs=_interopRequireDefault(require("./Tabs")),_ToggleButton=_interopRequireDefault(require("./ToggleButton")),_NewUtils=require("./NewUtils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ResponseViewer=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).onIframeLoad=function(t,r){var o=r.documentElement;e.setState({fullHeight:o.scrollHeight+30})},e.state={openTab:null,wrap:!1},e}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"getTabs",value:function(e){var t=[];return"html"===e&&t.push("Preview"),"html"!==e&&"xml"!==e&&"json"!==e&&"jsonp"!==e||t.push("Pretty"),t.push("Raw"),t}},{key:"render",value:function(){var e=this.props,t=e.mimeType,r=e.body,o=e.baseUrl,a=this.state.wrap,n=_Request.default.getContentType(t,r),i=this.getTabs(n),u=_SimpleAce.default.getHighlightMode(n),l=this.state.openTab||this.props.defaultTab||i[0];return _react.default.createElement("div",null,_react.default.createElement("div",{className:"pull-right"},("Pretty"===l||"Raw"===l)&&_react.default.createElement(_ToggleButton.default,{value:a,onChange:(0,_NewUtils.update)(this,"wrap")},_react.default.createElement("i",{className:"fa fa-align-left"})," Wrap text")),_react.default.createElement(_Tabs.default,{tabs:i,value:l,onChange:(0,_NewUtils.update)(this,"openTab")}),"Raw"===l&&_react.default.createElement("div",null,_react.default.createElement(_SimpleAce.default,{onChange:this.onBodyChange,mode:u,value:r,readOnly:!0,wrapEnabled:a})),"Pretty"===l&&_react.default.createElement(_SimpleAce.default,{mode:u,value:_Request.default.getPretty(n,r),readOnly:!0,wrapEnabled:a}),"Preview"===l&&_react.default.createElement("div",{style:{position:"relative",width:"100%",height:this.state.fullHeight}},_react.default.createElement(_Iframe.default,{key:"iframe",useUrl:!1,iframeHtml:r,requestUrl:o,onLoad:this.onIframeLoad})))}}]),t}();exports.default=ResponseViewer,ResponseViewer.propTypes={body:_propTypes.default.string.isRequired,mimeType:_propTypes.default.string.isRequired,baseUrl:_propTypes.default.string,defaultTab:_propTypes.default.string};
},{"../js/Request":11,"./Iframe":28,"./NewUtils":33,"./SimpleAce":47,"./Tabs":48,"./ToggleButton":49,"prop-types":"prop-types","react":"react"}],46:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_reactSelect=_interopRequireDefault(require("react-select")),_lodash=_interopRequireDefault(require("lodash")),_Utility=_interopRequireDefault(require("../js/Utility"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ReactSelectWithAdd=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n)))).state={addableValue:null},r._onInputChange=function(e){var t=e.trim().toLowerCase();!_Utility.default.normalizeOptions(r.props.options).some(function(e){return e.value===t})&&t?r.setState({addableValue:t}):r.setState({addableValue:null}),r.props.onInputChange&&r.props.onInputChange(e)},r.onChange=function(e){var t=r.props.onChange;t&&t({label:e&&e.label,value:e&&e.value});var o=r.props.onValueChange;o&&o(e instanceof Array?_lodash.default.map(e,"value"):e.value)},r}return _inherits(t,_react.default.Component),_createClass(t,[{key:"render",value:function(){var e=_lodash.default.clone(this.props);delete e.options,delete e.onInputChange;var t=_lodash.default.cloneDeep(_Utility.default.normalizeOptions(this.props.options)),r=this.state.addableValue;if(null!==r){var o=this.props.multi?"Add":"Use";o+=' "'.concat(r,'"'),t.push({label:o,value:r})}return _react.default.createElement(_reactSelect.default,_extends({},e,{options:t,onInputChange:this._onInputChange,onChange:this.onChange}))}}]),t}();ReactSelectWithAdd.propTypes={options:_react.default.PropTypes.oneOfType([_react.default.PropTypes.array,_react.default.PropTypes.object]).isRequired,onInputChange:_react.default.PropTypes.func,onChange:_react.default.PropTypes.func,onValueChange:_react.default.PropTypes.func,multi:_react.default.PropTypes.bool};var _default=ReactSelectWithAdd;exports.default=_default;
},{"../js/Utility":15,"lodash":"lodash","react":"react","react-select":"react-select"}],47:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var AceEditor,_react=_interopRequireDefault(require("react")),_reactMeasure=_interopRequireDefault(require("react-measure")),_lodash=_interopRequireDefault(require("lodash")),_NewUtils=_interopRequireDefault(require("./NewUtils"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}"undefined"!=typeof window&&(AceEditor=require("react-ace").default,require("brace/mode/php"),require("brace/mode/json"),require("brace/mode/javascript"),require("brace/mode/html"),require("brace/mode/xml"),require("brace/mode/markdown"),require("brace/mode/text"),require("brace/mode/sh"),require("brace/mode/ruby"),require("brace/mode/python"),require("brace/mode/java"),require("brace/theme/chrome"),require("brace/ext/searchbox"));var SimpleAce=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n)))).state={name:null},r.onChange=function(e){r.props.onChange&&r.props.onChange({target:{value:e}}),r.props.onValueChange&&r.props.onValueChange(e)},r.getAce=function(){return r._editor.editor},r.onMeasure=function(e){var t=r._prevDimensions;t&&t.width===e.width&&t.height===e.height||r._editor&&r._editor.editor.resize(!0),r._prevDimensions=e},r}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"componentWillMount",value:function(){this.setState({name:"simpleAce".concat(Math.floor(1e6*Math.random()))}),this.debouncedOnMeasure=_lodash.default.debounce(this.onMeasure,200)}},{key:"render",value:function(){var e=this.props.name||this.state.name,t=this.props.className||"",r=_lodash.default.clone(this.props);return r.contentType&&(r.mode=getHighlightMode(r.contentType),delete r.contentType),AceEditor?_react.default.createElement(_reactMeasure.default,{onMeasure:this.debouncedOnMeasure},_react.default.createElement(AceEditor,_extends({ref:_NewUtils.default.registerRef(this,"_editor"),width:"auto",fontSize:14},r,{name:e,theme:"chrome",className:"wa-full-width-forced ".concat(t),editorProps:{$blockScrolling:!0},showPrintMargin:!1,tabSize:2,useSoftTabs:!0,onChange:this.onChange}))):null}}]),t}();function getHighlightMode(e){return"json"===e||"jsonp"===e?"javascript":"html"===e?"html":"xml"===e?"xml":"text"}SimpleAce.propTypes={mode:_react.default.PropTypes.string,contentType:_react.default.PropTypes.string,name:_react.default.PropTypes.string,value:_react.default.PropTypes.string,readOnly:_react.default.PropTypes.bool,onChange:_react.default.PropTypes.func,onValueChange:_react.default.PropTypes.func,wrapEnabled:_react.default.PropTypes.bool,className:_react.default.PropTypes.string},SimpleAce.getHighlightMode=getHighlightMode;var _default=SimpleAce;exports.default=_default;
},{"./NewUtils":33,"brace/ext/searchbox":"brace/ext/searchbox","brace/mode/html":"brace/mode/html","brace/mode/java":"brace/mode/java","brace/mode/javascript":"brace/mode/javascript","brace/mode/json":"brace/mode/json","brace/mode/markdown":"brace/mode/markdown","brace/mode/php":"brace/mode/php","brace/mode/python":"brace/mode/python","brace/mode/ruby":"brace/mode/ruby","brace/mode/sh":"brace/mode/sh","brace/mode/text":"brace/mode/text","brace/mode/xml":"brace/mode/xml","brace/theme/chrome":"brace/theme/chrome","lodash":"lodash","react":"react","react-ace":"react-ace","react-measure":"react-measure"}],48:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_Utility=_interopRequireDefault(require("../js/Utility"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tabs=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n)))).onChange=function(e,t){t.preventDefault(),r.props.onChange(e)},r.doNothingCallback=function(e){e.preventDefault(),e.stopPropagation()},r}return _inherits(t,_react.default.Component),_createClass(t,[{key:"render",value:function(){var e=this,t=_Utility.default.normalizeOptions(this.props.tabs),r=this.props.value,o=this.props.className||"nav nav-tabs",n=this.props.disabledTabs;return _react.default.createElement("ul",{className:o,role:"navigation"},t.map(function(t){var o=t.value,a=t.label,i=null,s=e.onChange.bindMemoized(e,o);return r===o?i="active":n&&-1!==n.indexOf(o)&&(i="disabled",s=e.doNothingCallback),_react.default.createElement("li",{key:o,className:i,"data-tab":o},_react.default.createElement("a",{href:"#",onClick:s},a))}))}}]),t}();Tabs.propTypes={tabs:_react.default.PropTypes.oneOfType([_react.default.PropTypes.object,_react.default.PropTypes.array]).isRequired,value:_react.default.PropTypes.oneOfType([_react.default.PropTypes.string,_react.default.PropTypes.number,_react.default.PropTypes.bool]),onChange:_react.default.PropTypes.func.isRequired,disabledTabs:_react.default.PropTypes.oneOfType([_react.default.PropTypes.array,_react.default.PropTypes.object]),className:_react.default.PropTypes.string};var _default=Tabs;exports.default=_default;
},{"../js/Utility":15,"react":"react"}],49:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_NewUtils=_interopRequireDefault(require("./NewUtils"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var PropTypes=_react.default.PropTypes,ToggleButton=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"render",value:function(){var e=this.props.value,t=this.props.className,r=this.props.children;return _react.default.createElement("button",{onClick:_NewUtils.default.toggleProp(this,"onChange","value",null,!0),className:(t||"btn btn-default")+(e?" active":""),type:"button"},r)}}]),t}();ToggleButton.propTypes={value:PropTypes.bool,onChange:PropTypes.func.isRequired,className:PropTypes.string,children:PropTypes.node};var _default=ToggleButton;exports.default=_default;
},{"./NewUtils":33,"react":"react"}],50:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_NewUtils=_interopRequireDefault(require("./NewUtils"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var PropTypes=_react.default.PropTypes,VideoContainer=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n)))).state={showVideo:!1},r.play=function(){r.setState({showVideo:!0})},r}return _inherits(t,_react.default.PureComponent),_createClass(t,[{key:"render",value:function(){var e=this.props.youtubeId,t=this.props.imageSrc,r=this.state.showVideo;return _react.default.createElement("div",{className:"wa-pad20"},_react.default.createElement("div",{className:"wa-box-shadow20"},r?_react.default.createElement("div",{className:"wa-video-container"},_react.default.createElement("iframe",{title:"Youtube video",width:"560",height:"315",src:"https://www.youtube.com/embed/".concat(e,"?rel=0&autoplay=1"),frameBorder:"0",allowFullScreen:!0})):_react.default.createElement("a",{href:"#playVideo",onClick:_NewUtils.default.setState(this,"showVideo",!0,!0)},_react.default.createElement("img",{src:t,alt:"Click to play WrapAPI + Reddit video",className:"wa-full-width"}))))}}]),t}();VideoContainer.propTypes={youtubeId:PropTypes.string.isRequired,imageSrc:PropTypes.string.isRequired};var _default=VideoContainer;exports.default=_default;
},{"./NewUtils":33,"react":"react"}],51:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=withChrome;var _react=_interopRequireDefault(require("react")),_Chrome=require("../../js/Chrome");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function withChrome(e){return function(t){function r(){var e,t;_classCallCheck(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=_possibleConstructorReturn(this,(e=_getPrototypeOf(r)).call.apply(e,[this].concat(o)))).state={isChrome:!1,isExtensionInstalled:!1},t}return _inherits(r,_react.default.PureComponent),_createClass(r,[{key:"componentDidMount",value:function(){this.setState({isChrome:(0,_Chrome.isChrome)(),isExtensionInstalled:(0,_Chrome.isExtensionInstalled)()})}},{key:"render",value:function(){var t=this.state,r=t.isChrome,n=t.isExtensionInstalled;return _react.default.createElement(e,_extends({},this.props,{isChrome:r,isExtensionInstalled:n}))}}]),r}()}
},{"../../js/Chrome":6,"react":"react"}],52:[function(require,module,exports){
(function (Buffer){
"use strict";function base64Encode(e){return"function"==typeof btoa?btoa(e):Buffer.from(e,"utf8").toString("base64")}function base64Decode(e){return"function"==typeof atob?atob(e):Buffer.from(e,"base64").toString("utf8")}module.exports={encode:base64Encode,decode:base64Decode};
}).call(this,require("buffer").Buffer)

},{"buffer":54}],53:[function(require,module,exports){
(function (Buffer){
"use strict";var _lodash=_interopRequireDefault(require("lodash")),_jsBeautify=require("js-beautify"),_jsonPointer=_interopRequireDefault(require("json-pointer")),_jsonpath=_interopRequireDefault(require("jsonpath")),_jsep=_interopRequireDefault(require("jsep")),_urijs=_interopRequireDefault(require("urijs")),_cheerio=_interopRequireDefault(require("cheerio")),_moment=_interopRequireDefault(require("moment")),_ntlm=_interopRequireDefault(require("ntlm"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function memoizeMRU(e,t){t=t||1;var r=[];return function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];for(var u=Array.prototype.slice.call(a),i=0;i!==r.length;i++){var s=r[i];if(_lodash.default.isEqual(s.args,u))return s.result}var l=e.apply(void 0,a);return r.length>=t&&r.shift(),r.push({args:u,result:l}),l}}module.exports=function(e){var t="undefined"!=typeof window;function r(e,t){var r;if(!(e instanceof RegExp)&&"object"===_typeof(e)){if(!e.pattern)return[];try{e=new RegExp(e.pattern,e.modifiers)}catch(e){return[]}}if(e.global){for(var n=[],a=0;null!==(r=e.exec(t))&&a++<1e4;)n.push(r);return n}return null!=(r=e.exec(t))?[r]:[]}var n={body:"",cheerio:null},a={};function o(e,r){var o=a[e];o||(o=_cheerio.default.load(e),t&&(a[e]=o)),n.body=e,n.cheerio=o;var u=[];return o(r).each(function(){var e,t=o(this);u.push({html:o.html(t),text:t.text(),attribs:t[0].attribs,tagName:t.get(0).tagName,index:(e=t[0],function e(t){if(!t)return[];for(var r=0;t.previousSibling;)t=t.previousSibling,r++;var n=e(t.parent);return n.push(r),n}(e).join("."))})}),u}function u(e,t){var r=t.outputs,n=[];if(_lodash.default.forOwn(r,function(t,r){for(var a=t.data.cssSelector,u=_objectSpread({},t,{data:_objectSpread({},t.data,{numToSelect:"all"})}),i=h(e,u),s=_lodash.default.map(o(e,a),"index"),l=0;l!==s.length;l++)n.push({name:r,value:i[l],index:s[l]})}),0===n.length)return null;n.sort(function(e,t){return function(e,t){for(var r=e.split(".").map(function(e){return parseInt(e,10)}),n=t.split(".").map(function(e){return parseInt(e,10)}),a=Math.min(r.length,n.length),o=0;o!==a;o++)if(r[o]!==n[o])return r[o]-n[o];return r.length-n.length}(e.index,t.index)});for(var a=[],u={},i=0;i!==n.length;i++){var s=n[i];u[s.name]&&(a.push(u),u={}),u[s.name]=s.value}return _lodash.default.isEmpty(u)||a.push(u),a}function i(e){return(new _urijs.default).query(e).query()}function s(e,t){var r=t.cssSelector,n=[],a=_cheerio.default.load(e);try{n=a(r)}catch(e){return null}if(0===n.length||"form"!==n.first().prop("tagName").toLowerCase())return null;var o=n.first(),u=o.attr("method");u=_lodash.default.isString(u)?u.toLowerCase().trim():"get";var i=o.attr("action");_lodash.default.isString(i)||(i="");var s=o.serializeArray(),l=_lodash.default.zipObject(_lodash.default.map(s,"name"),_lodash.default.map(s,"value")),c={};return"post"===u||"put"===u||"delete"===u||"options"===u?(c.post=l,c.get=new _urijs.default(i).query(!0)):c.get=s,c}function l(e,t){var r=s(e,t);if(!r)return null;var n,a={postParams:r.post?i(r.post):"",getParams:r.get?i(r.get):""};return n=JSON.stringify(a),"function"==typeof btoa?btoa(n):Buffer.from(n,"utf8").toString("base64")}function c(e,t){return _lodash.default.isString(e)||(e=JSON.stringify(e)),"regex"===t.matchEngine?function(e,t){var n=t,a=n.regex,o=a.pattern,u=a.modifiers,i=new RegExp(o,u),s=-1!==u.indexOf("g"),l=[],c=e;return"pretty"===n.matchOn&&(c=I(null,e)),o&&(l=r(i,c).map(function(e){return e[n.group]})),0===l.length?null:s&&!n.allMatches?l[n.match]:s?l:l[0]}(e,t.data):"css"===t.matchEngine?function(e,t){var r=t,n=r.cssSelector,a=[];try{a=o(e,n)}catch(e){return null}"first"===r.numToSelect&&(a=a.slice(0,1));var u=a.map(function(e){if("text"===r.captureType)return e.text;if("html"===r.captureType)return e.html;if("attribute"===r.captureType)return e.attribs[r.attrsToSelect[0]];var t={};return r.attrsToSelect.forEach(function(r){t[r]=e.attribs[r]}),r.objectIncludeText&&(t.innerText=e.text),r.objectIncludeHtml&&(t.innerHTML=e.html),t});return 0===u.length?null:"first"===r.numToSelect?u[0]:u}(e,t.data):"collection"===t.matchEngine?u(e,t.data):"json"===t.matchEngine?function(e,t){var r;if(L(null,e))r=M(e);else{if(!D(null,e))return null;r=JSON.parse(e)}var n=t,a=n.selectorType,o=n.jsonSelector;if("jsonPointer"===a)try{return _jsonPointer.default.get(r,o)}catch(e){return null}else if("jsonPath"===a||"jsonPathFirstOnly"===a){var u=[];try{u=_jsonpath.default.query(r,o)}catch(e){return null}return 0===u.length?null:"jsonPath"===a?u:u[0]}return null}(e,t.data):"form"===t.matchEngine?l(e,t.data):null}function f(e,t,r){var n={};return _lodash.default.forEach(e,function(e,a){var o=h(r,e,t);"requiredMatch"!==e.type&&(n[a]=o)}),n}function p(e,t){if(null==e)return e;if(t&&t.type){var r=function(e){var r=t.type,n=t.options;switch(r){case"trim":return"string"==typeof e?_lodash.default.trim(e):e;case"extractNumber":if("string"==typeof e){var a=e.match(/\d+(\.\d+)?/);return null===a?null:parseFloat(a[0])}return e;case"date":var o;return(o=n&&n.format?(0,_moment.default)(e,n.format):(0,_moment.default)(e)).isValid()?o:null;case"bool":return!!e}return e};return _lodash.default.isArray(e)?e.map(r):r(e)}return e}function d(e,t,r){var n;if(r&&("requiredOutput"===(n=t.type)||"requiredMatch"===n)&&null==e&&r.push("The required "+("requiredOutput"===t.type?"output":"match")+' "'+t.name+'" did not match within the response'),null!=e&&(e=p(e,t.cleanup),!_lodash.default.isEmpty(t.children))){var a=t.children;return _lodash.default.isArray(e)?e.map(f.bind(this,a,r)):f(a,r,e)}return e}function h(e,t,r){return d(c(e,t),t,r)}function m(e,t){return"header"===t.matchEngine?function(e,t){var r=t,n=r.response,a=r.key.toLowerCase(),o=null!=n?e[n]:e[e.length-1];return o?V(o.headers)[a]:null}(e,t.data):"cookie"===t.matchEngine?function(e,t){var r,n=t,a=n.response,o=n.allResponses,u=n.key;if(o){for(var i=e.length-1;i>=0;i--)if((r=V(F(_lodash.default.get(e[i],["headers","set-cookie"]))))[u])return r[u].data}else if((r=V(F(_lodash.default.get(e[a],["headers","set-cookie"]))))[u])return r[u].data;return null}(e,t.data):c(e&&0!==e.length&&e[e.length-1].body||"",t)}function y(e,t){var r={success:!0,messages:[],data:{}},n=t.outputs;return _lodash.default.forEach(n,function(t){var n=function(e,t,r){return d(m(e,t),t,r)}(e,t,r.messages);"requiredMatch"!==t.type&&(r.data[t.name]=n)}),0!==r.messages.length?(r.success=!1,r):r}function v(e,t,r){var n={success:!1,outputScenario:null,data:null};if(t)for(var a=0;a!==t.length;a++){var o=t[a],u=y(e.responses,o);if(u.success&&(n.success=!0,n.data=u.data,n.stateToken=e.stateToken,n.cookies=e.cookies,n.outputScenario=o.name,!r))break;r&&r.push(u)}return n.success||(n.messages=["None of the output scenarios matched. See the raw data received in rawData"],n.errTypes=["noMatchedOutputScenario"],n.rawData=e),n}function g(r,n,a){return t?function(e,t,r){var n=["XMLHTTPRequest = null;",t+";","onmessage = function(e) {","  var data = e.data;","  var processed = "+r+";","  postMessage(processed);","};"].join("\n");return new Promise(function(t,r){var a=new Worker(URL.createObjectURL(new Blob([n],{type:"application/javascript"})));a.onerror=function(e){r({message:e.message,lineno:e.lineno,colno:e.colno,stack:null,name:null})},a.onmessage=function(e){t(e.data)},a.postMessage(e)})}(r,n,a):e.runSandboxed(r,n,a)}function _(e,t){return"string"==typeof t&&(t={script:t,enabled:!0}),t&&t.enabled?g(e,t.script,"postProcess(data.output, data.input)"):Promise.resolve(e.output)}function b(e,t){var r=["data.expressions.map(function(expr) {","  var input = data.input;","  return eval(expr);","})"].join("\n");return g(e,t,r).then(function(t){return _lodash.default.fromPairs(t.map(function(t,r){return[e.expressions[r],t]}))})}function x(e,t){return e.postProcessError=_lodash.default.omit(t,"stack"),e.success=!1,e.message="The script returned an error: "+t.message,e.origData=e.data,delete e.data,e}function w(e){var t={};return function e(r,n){_lodash.default.forEach(r,function(r,a){var o=(n?n+".":"")+a;"object"===_typeof(r)?e(r,o):t[o]=r})}(e,""),t}function E(e){return e instanceof Array&&0!==e.length&&e.every(_lodash.default.isObject)}function j(e,t){return function e(t,r){switch(t.type){case"Literal":return t.value;case"Identifier":if(void 0===r[t.name])throw new Error(t.name+" is not defined");return r[t.name];case"MemberExpression":var n;n=t.computed?e(t.property,r):t.property.name;var a=e(t.object,r);if(null==a)throw new Error("Cannot read property "+n+" of "+a);return a[n];case"BinaryExpression":var o=e(t.left,r),u=e(t.right,r);switch(t.operator){case"+":return o+u;case"-":return o-u;case"/":return o/u;case"%":return o%u;case"*":return o*u;case"&&":return o&&u;case"||":return o||u;case"&":return o&u;case"|":return o|u;case"^":return o^u;case"<<":return o<<u;case">>":return o>>u;case">>>":return o>>>u;default:throw new Error("Unexpected operator symbol: "+t.operator)}default:throw new Error("Unexpected expression of type "+t.type)}}((0,_jsep.default)(e),t)}function S(e,t){t=t||{};try{"object"!==_typeof(e)&&(e=(0,_jsep.default)(e))}catch(e){return e.message}switch(e.type){case"Identifier":case"Literal":return null;case"MemberExpression":return S(e.object,t)||S(e.property,t);case"CallExpression":return t.allowFunctionCall?null:"You can't call functions";case"BinaryExpression":return t.allowBinaryExpression?S(e.left,t)||S(e.right,t):"You can't use the operator \""+e.operator+'"';default:return"Unexpected expression of type "+e.type}}function O(e,t){var r=(t=t||{}).allowFunctionCall,n=t.allowBinaryExpression;function a(e){return(e.main?[e.main]:[]).concat(e.additional)}var o=function e(t,o){switch(t.type){case"Identifier":return{main:[t.name],additional:[]};case"Literal":return{main:o?null:[t.value],additional:[]};case"MemberExpression":var u=e(t.object),i=e(t.property);if(t.computed&&"Literal"!==t.property.type){var s=[u.main];return i.main&&s.push(i.main),{main:null,additional:s=s.concat(i.additional)}}return{main:u.main?u.main.concat(i.main):null,additional:u.additional.concat(i.additional)};case"CallExpression":if(!r)throw new Error("Unexpected expression of type "+t.type);var l=t.arguments?_lodash.default.flatten(t.arguments.map(function(t){return a(e(t))})):[],c=a(e(t.callee));return{main:null,additional:l.concat(c)};case"BinaryExpression":if(!n)throw new Error("Unexpected expression of type "+t.type);var f=a(e(t.left,!0)),p=a(e(t.right,!0));return{main:null,additional:f.concat(p)};default:throw new Error("Unexpected expression of type "+t.type)}}((0,_jsep.default)(e),!0);return o.additional.concat(o.main?[o.main]:[])}function q(e){return encodeURIComponent(e).replace(/%20/g,"+")}function P(e){var t={};function r(e){e instanceof Array&&e.forEach(function(e){"expression"===e.type&&(t[e.expression]=null)})}return e.postData&&"params"===e.postData.type&&r(e.postData.data),r(e.headers),r(e.queryString),_lodash.default.keys(t)}function T(e){for(var t=/\{\{([^}]+?)\}\}/g,r=[],n=0,a=null;a=t.exec(e);)a.index>n&&r.push({type:"string",data:e.substr(n,a.index-n),start:n}),r.push({type:"expression",data:a[1],start:a.index}),n=a.index+a[0].length;return n!==e.length&&r.push({type:"string",data:e.substr(n),start:n}),r}function N(e,t,r){return("string"==typeof e?T(e):e).map(function(e){if("string"===e.type)return e.data;try{var n=j(e.data,t);return r?r(n):n}catch(e){return""}}).join("")}function C(e,t){(t=t||{}).allowBinaryExpression=null==t.allowBinaryExpression||t.allowBinaryExpression;var r="string"==typeof e?T(e):e;return _lodash.default.uniqWith(_lodash.default.flatten(r.map(function(e){return"expression"===e.type?O(e.data,t):[]})),_lodash.default.isEqual)}function R(e){return"constant"===e.type||"new"===e.type&&0===T(e.value).filter(function(e){return"expression"===e.type}).length}function k(e){var t,r={post:{},get:{}};if(e)try{var n=JSON.parse((t=e,"function"==typeof atob?atob(t):Buffer.from(t,"base64").toString("utf8")));r.post=(0,_urijs.default)().query(n.postParams).query(!0),r.get=(0,_urijs.default)().query(n.getParams).query(!0)}catch(e){}return r}function D(e,t){try{return JSON.parse(t),!0}catch(e){return!1}}function L(e,t){var r=t.match(/^\s*(?:[A-Za-z_$][\w_$]*)?\s*\(([\s\S]*)\)\s*;?\s*$/);try{return JSON.parse(r[1]),!0}catch(e){return!1}}function M(e){var t=e.match(/^\s*(?:[A-Za-z_$][\w_$]*)?\s*\(([\s\S]*)\)\s*;?\s*$/);return JSON.parse(t[1])}function B(e,t){return e&&-1!==e.indexOf("html")||-1!==t.search(/<(body|br|div|em|form|h[1-6]|head|html|iframe|img|input|li|link|ol|script|select|span|strong|style|table|textarea|ul)/)}function A(e,t){return e&&-1!==e.indexOf("xml")||-1!==t.indexOf("<?xml")}function J(e,t){return D(0,t)?"json":L(0,t)?"jsonp":B(e,t)?"html":A(e,t)?"xml":null}var z={},U=null,H=null;function I(e,r){var n=z[r];if(n)return n;if(r===U)return H;var a=r;switch("json"===e||"html"===e||"xml"===e||"jsonp"===e?e:J(e,r)){case"jsonp":a=JSON.stringify(M(r),null,2);break;case"json":a=JSON.stringify(JSON.parse(r),null,2);break;case"html":case"xml":a=(a=(0,_jsBeautify.html)(r,{indent_size:2})).replace(/\n\s+\n/g,"\n")}return t?z[r]=a:(U=r,H=a),a}function $(e){return _lodash.default.chain(e.split(";")).map(_lodash.default.trim).map(function(e){var t=e.split("=");return[t[0],t[1]]}).fromPairs().value()}function F(e){return e?_lodash.default.fromPairs(e.map(function(e){var t=$(e),r=_lodash.default.keys(t)[0];return[r,_lodash.default.set(t,"data",t[r])]})):{}}function V(e){return _lodash.default.fromPairs(_lodash.default.map(e,function(e,t){return[t.toLowerCase(),e]}))}return{matchRegex:r,matchFormOutputRaw:s,matchOutput:c,matchTopLevelOutput:m,runCleanup:p,runOutput:h,runOutputScenario:y,runOutputScenarios:v,runOutputScenariosAndPostProcess:function(e,t,r,n,a){var o=v(e,t,a);if(o.success&&r){var u={output:o,input:n};return new Promise(function(e){_(u,r).then(function(t){e(t)}).catch(function(t){e(x(o,t))})})}return Promise.resolve(o)},applyPostProcess:_,isCollection:E,hasCollection:function(e){return e&&_lodash.default.some(e,E)},collectionToTable:function(e,t){var r="default"in(t=t||{})?t.default:"",n=!("includeHeaders"in t&&!t.includeHeaders),a=e.map(w),o=_lodash.default.chain(a).map(_lodash.default.keys).flatten().uniq().value(),u=_lodash.default.fromPairs(o.map(function(e,t){return[e,t]})),i=a.map(function(e){var t=_lodash.default.fill(Array(o.length),r);return _lodash.default.forEach(e,function(e,r){t[u[r]]=e}),t});return n?[o].concat(i):i},tableToCSV:function(e){return e.map(function(e){return e.map(function(e){return'"'+e.replace(/"/g,'""')+'"'}).join(",")}).join("\r\n")},applyBranchingFunction:function(e,t){return g(e,t,"branch(data.output, data.input)")},applyVertexPostProcess:function(e,t){return g(e,t,"postProcess(data.output, data.input)")},applyInputHelperScript:b,addSandboxedScriptError:x,evalVariableExpression:j,getExpressionTokens:O,getExpressionGlobals:function(e,t){var r=O(e,t);return _lodash.default.uniq(_lodash.default.map(r,0))},getInputExpressions:P,parseCurlyExpression:T,getCurlyExpressionError:function(e,t){(t=t||{}).allowBinaryExpression=null==t.allowBinaryExpression||t.allowBinaryExpression;for(var r="string"==typeof e?T(e):e,n=0;n!==r.length;n++){var a=r[n];if("expression"===a.type){var o=S(a.data);if(o)return"{{"+a.data+"}} is invalid: "+o}}return null},getCurlyExpressionTokens:C,evalCurlyExpression:N,makeReqParams:function(e,r,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=e.url,i=e.method,s=e.postData,l=e.queryString,c=e.headers,f=e.script,p=e.authorization,d={},h=[],m={},y={};if(e.inputs&&r){var v=_lodash.default.chain(e.inputs).map(function(e,t){if(void 0!==r[t]){if("file"===e.type){var n=r[t];if(!(n&&n.content&&n.fileName&&n.mimeType))return e.required&&(y[t]=!0),null;if(!/^[A-Za-z0-9+/=]*$/.test(n.content))return h.push("The file input "+t+" had non-Base64-encoded content"),null}return[t,r[t]]}return!e.required&&e.defaultEnabled?[t,e.default]:(e.required&&(m[t]=!0,"file"===e.type&&(y[t]=!0)),null)}).filter().value();d=_lodash.default.fromPairs(v)}var g=k(a);y=_lodash.default.assign(y,function(e,t,r){if(_lodash.default.isEmpty(e.post)&&_lodash.default.isEmpty(e.get))return t;function n(e){switch(e.type){case"variable":return[e.varName];case"new":return _lodash.default.uniq(_lodash.default.map(C(e.value),0));case"file":return[e.varName]}return[]}var a={post:{},get:{}};"params"===r.postData.type&&r.postData.data.forEach(function(e){a.post[e.name]=n(e).filter(function(e){return t[e]})}),r.queryString.forEach(function(e){a.get[e.name]=n(e).filter(function(e){return t[e]})}),_lodash.default.forEach(e.get,function(e,t){delete a.get[t]}),_lodash.default.forEach(e.post,function(e,t){delete a.post[t]});var o={};function u(e){o[e]=!0}return _lodash.default.forEach(a.get,function(e){e.forEach(u)}),_lodash.default.forEach(a.post,function(e){e.forEach(function(e){o[e]=!0})}),o}(g,m,e)),_lodash.default.forEach(y,function(e,t){h.push('The input "'+t+'" is required.')});var _={method:i.toUpperCase(),headers:{},jar:n,followRedirect:!1},x=P(e),w=f?f.code:"",E=Promise.resolve({});return 0!==x.length&&(E=b({expressions:x,input:_lodash.default.cloneDeep(d)},w)),E.then(function(r){function n(e){switch(e.type){case"constant":return e.data;case"variable":return d[e.varName];case"expression":return r[e.expression];case"new":return i(e.value);case"file":var t=d[e.varName];return t&&t.content&&t.mimeType&&t.fileName?{value:Buffer.from(t.content,"base64"),options:{filename:t.fileName,contentType:t.mimeType}}:void 0}return null}var a=Object.assign(d,{wrapAPIInputs:d});function i(e,t){return N(e,a,t)}u=i(u),_.url=u;var f=_lodash.default.map(e.inputs,"type").some(function(e){return"file"===e});if(s)if("params"!==s.type||_lodash.default.isEmpty(s.data)){if("json"===s.type||"text"===s.type){var m="json"===s.type||"text"===s.type?s.data:"";"json"===s.type?(_.headers["Content-Type"]="application/json; charset=utf-8",m=i(m,JSON.stringify)):"text"===s.type&&(_.headers["Content-Type"]="text/plain",m=i(m)),_.body=m}}else{_.headers["Content-Type"]=f?"multipart/form-data":"application/x-www-form-urlencoded";var y={};s.data.forEach(function(e){R(e)&&(y[i(e.name)]=n(e))}),_lodash.default.forEach(g.post,function(e,t){!e&&y[t]||(y[t]=e)}),s.data.forEach(function(e){R(e)||(y[i(e.name)]=n(e))}),f?(_lodash.default.forEach(y,function(e,t){void 0===e&&delete y[t]}),_.formData=y):_.form=(0,_urijs.default)().query(y).normalizeQuery().query()}var v={};if(p)if("ntlm"===p.mode&&p.ntlm){var b=p.ntlm,x=b.username,w=b.password,E=b.domain;if(o.ntlmResponse){if(!_.url)throw new Error("We cannot create a NTLM response without a URL");v.Authorization=t?"NTLM PlaceholderResponseHeader==":_ntlm.default.responseHeader(o.ntlmResponse,_.url,E?i(E):"wrapapi.com",i(x),i(w))}else v.Authorization=t?"NTLM PlaceholderChallengeHeader==":_ntlm.default.challengeHeader("wrapapi",E?i(E):"wrapapi.com")}else if("basic"===p.mode&&p.basic){var j=p.basic,S=j.username,O=j.password;v.Authorization=Buffer.from("".concat(i(S),":").concat(i(O)),"utf8").toString("base64")}if(c&&c.forEach(function(e){if(":"!==e.name[0]){var t=i(e.name);"content-type"===t.toLowerCase()&&delete _.headers["Content-Type"],"authorization"===t.toLowerCase()&&v.Authorization||(v[t]=n(e))}}),_.headers=Object.assign(_.headers,v),l){var P={};l.forEach(function(e){R(e)&&(P[q(i(e.name))]=q(n(e)))}),_lodash.default.forEach(g.get,function(e,t){var r=q(t);!e&&P[r]||(P[r]=q(e))}),l.forEach(function(e){R(e)||(P[q(i(e.name))]=q(n(e)))}),_.qs=P,_.qsStringifyOptions={encode:!1}}var T={success:0===h.length,reqParams:_};return h&&(T.errors=h),T}).catch(function(e){return console.error(e.stack),{success:!1,reqParams:null,errors:["We encountered an error when evaluating input expressions: "+e.message]}})},querySelectorAllOnString:o,parseHeaderString:$,parseCookies:F,isHTML:B,isXML:A,isJSON:D,isJSONP:L,getJSONP:M,isJSONable:function(e,t){return D(0,t)||L(0,t)},getJSONable:memoizeMRU(function(e){return L(0,e)?M(e):JSON.parse(e)}),getContentType:J,getPretty:I}};
}).call(this,require("buffer").Buffer)

},{"buffer":54,"cheerio":"cheerio","js-beautify":"js-beautify","jsep":"jsep","json-pointer":"json-pointer","jsonpath":"jsonpath","lodash":"lodash","moment":"moment","ntlm":54,"urijs":"urijs"}],54:[function(require,module,exports){

},{}]},{},[9])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjbGllbnQvanMvQVBJU3RvcmFnZS5qcyIsImNsaWVudC9qcy9BamF4LmpzIiwiY2xpZW50L2pzL0F1dGguanMiLCJjbGllbnQvanMvQXhpb3MuanMiLCJjbGllbnQvanMvQ2FwdHVyZS5qcyIsImNsaWVudC9qcy9DaHJvbWUuanMiLCJjbGllbnQvanMvQ29uZmlnLmpzIiwiY2xpZW50L2pzL0ltbXV0YWJsZS5qcyIsImNsaWVudC9qcy9Jbml0RXh0ZW5zaW9uLmpzIiwiY2xpZW50L2pzL1Byb3h5LmpzIiwiY2xpZW50L2pzL1JlcXVlc3QuanMiLCJjbGllbnQvanMvUmVxdWVzdENhcHR1cmUuanMiLCJjbGllbnQvanMvVG9rZW4uanMiLCJjbGllbnQvanMvVHV0b3JpYWwuanMiLCJjbGllbnQvanMvVXRpbGl0eS5qcyIsImNsaWVudC9qcy9WYWxpZGF0ZS5qcyIsImNsaWVudC9qcy9yZWR1eC9BUElFbGVtZW50cy5qcyIsImNsaWVudC9qcy9yZWR1eC9BdXRoLmpzIiwiY2xpZW50L2pzL3JlZHV4L01haW5SZWR1Y2VyLmpzIiwiY2xpZW50L2pzL3JlZHV4L1R1dG9yaWFsLmpzIiwiY2xpZW50L2pzL3NhbmRib3guanMiLCJjbGllbnQvdGVtcGxhdGVzL0FQSUVsZW1lbnRTZWxlY3QuanMiLCJjbGllbnQvdGVtcGxhdGVzL0NhcHR1cmVzVmlldy5qcyIsImNsaWVudC90ZW1wbGF0ZXMvQ2hlY2tib3guanMiLCJjbGllbnQvdGVtcGxhdGVzL0Nocm9tZVBsdWdpblByb21wdC5qcyIsImNsaWVudC90ZW1wbGF0ZXMvRGVib3VuY2VkSW5wdXQuanMiLCJjbGllbnQvdGVtcGxhdGVzL0Ryb3Bkb3duU2VsZWN0LmpzIiwiY2xpZW50L3RlbXBsYXRlcy9JZnJhbWUuanMiLCJjbGllbnQvdGVtcGxhdGVzL0xvZ2luRm9ybS5qcyIsImNsaWVudC90ZW1wbGF0ZXMvTG9naW5HYXRlLmpzIiwiY2xpZW50L3RlbXBsYXRlcy9Mb2dpblBhZ2UuanMiLCJjbGllbnQvdGVtcGxhdGVzL05hdmJhclVzZXIuanMiLCJjbGllbnQvdGVtcGxhdGVzL05ld1V0aWxzLmpzIiwiY2xpZW50L3RlbXBsYXRlcy9PdmVybGF5VG9vbHRpcC5qcyIsImNsaWVudC90ZW1wbGF0ZXMvT3ZlcmxheVdyYXBwZXIuanMiLCJjbGllbnQvdGVtcGxhdGVzL1BhcmFtc1RhYmxlLmpzIiwiY2xpZW50L3RlbXBsYXRlcy9SZWFjdFV0aWxzLmpzIiwiY2xpZW50L3RlbXBsYXRlcy9SZWNvcmRpbmdCdXR0b24uanMiLCJjbGllbnQvdGVtcGxhdGVzL1JlcXVlc3RDYXB0dXJlTWFpblBhZ2UuanMiLCJjbGllbnQvdGVtcGxhdGVzL1JlcXVlc3RDYXB0dXJlUGFnZS5qcyIsImNsaWVudC90ZW1wbGF0ZXMvUmVxdWVzdENhcHR1cmVTYXZlTW9kYWwuanMiLCJjbGllbnQvdGVtcGxhdGVzL1JlcXVlc3RMaXN0LmpzIiwiY2xpZW50L3RlbXBsYXRlcy9SZXF1ZXN0UGFuZWwuanMiLCJjbGllbnQvdGVtcGxhdGVzL1JlcXVlc3RQYW5lbFNhdmVNb2RhbC5qcyIsImNsaWVudC90ZW1wbGF0ZXMvUmVzcG9uc2VWaWV3ZXIuanMiLCJjbGllbnQvdGVtcGxhdGVzL1NlbGVjdFdpdGhBZGQuanMiLCJjbGllbnQvdGVtcGxhdGVzL1NpbXBsZUFjZS5qcyIsImNsaWVudC90ZW1wbGF0ZXMvVGFicy5qcyIsImNsaWVudC90ZW1wbGF0ZXMvVG9nZ2xlQnV0dG9uLmpzIiwiY2xpZW50L3RlbXBsYXRlcy9WaWRlb0NvbnRhaW5lci5qcyIsImNsaWVudC90ZW1wbGF0ZXMvaG9jcy93aXRoQ2hyb21lLmpzIiwiY29tbW9uL0Jhc2U2NC5qcyIsImNvbW1vbi9SZXF1ZXN0LmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbGliL19lbXB0eS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOzs7QUNBQTs7Ozs7QUNBQTs7OztBQ0FBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5kZWZhdWx0PXZvaWQgMDt2YXIgX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpLF9lczZQcm9taXNlPXJlcXVpcmUoXCJlczYtcHJvbWlzZVwiKSxfZGVlcERpZmY9cmVxdWlyZShcImRlZXAtZGlmZlwiKSxfQXhpb3M9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9BeGlvc1wiKSksX0NvbmZpZz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0NvbmZpZ1wiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19dmFyIEFQSVN0b3JhZ2U9e19zdG9yYWdlVG9rZW46bnVsbCxfc3RvcmFnZVRva2VuUXVlcnlTdHJpbmc6XCJcIixfZGVmYXVsdEFQSVN0b3JhZ2VEb25lOmZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtlKHQuZGF0YSx0KX19LF9kZWZhdWx0QVBJU3RvcmFnZUZhaWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2NvbnNvbGUuZXJyb3IodC5zdGFjayk7dmFyIGE9X2xvZGFzaC5kZWZhdWx0LmdldCh0LFwicmVzcG9uc2UuZGF0YVwiKTtlKGEse3N1Y2Nlc3M6ITEsbWVzc2FnZXM6W1wiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC4gQ2hlY2sgeW91ciBpbnRlcm5ldCBjb25uZWN0aW9uXCJdLHJlc3BvbnNlOmF9KX19LF9kZWZhdWx0QVBJU3RvcmFnZVRoZW46ZnVuY3Rpb24oZSl7aWYoZSYmZS5zdWNjZXNzKXJldHVybiBlLmRhdGE7dGhyb3cgbmV3IEVycm9yKGUubWVzc2FnZXM/ZS5tZXNzYWdlcy5qb2luKFwiOyBcIik6XCJBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLiBDaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb25cIil9LF9kZWZhdWx0QVBJU3RvcmFnZVRoZW5XaXRoRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gZX0sX2RlZmF1bHRQcm9taXNlT3JDYWxsYmFjazpmdW5jdGlvbihlLHQsYSl7cmV0dXJuIHQ/KGUudGhlbihBUElTdG9yYWdlLl9kZWZhdWx0QVBJU3RvcmFnZURvbmUodCkpLmNhdGNoKEFQSVN0b3JhZ2UuX2RlZmF1bHRBUElTdG9yYWdlRmFpbCh0KSksbnVsbCk6ZS50aGVuKGE/QVBJU3RvcmFnZS5fZGVmYXVsdEFQSVN0b3JhZ2VUaGVuV2l0aERhdGE6QVBJU3RvcmFnZS5fZGVmYXVsdEFQSVN0b3JhZ2VUaGVuKX0sX3ByZXBhcmVBUElFbGVtZW50OmZ1bmN0aW9uKGUpe3ZhciB0PV9sb2Rhc2guZGVmYXVsdC5jbG9uZURlZXAoZSk7cmV0dXJuIHQuZ3JhcGgmJl9sb2Rhc2guZGVmYXVsdC5mb3JFYWNoKHQuZ3JhcGgudmVydGljZXMsZnVuY3Rpb24oZSl7ZS5kYXRhPWUuZGF0YT9fbG9kYXNoLmRlZmF1bHQucGljayhlLmRhdGEsW1widXNlcm5hbWVcIixcInJlcG9zaXRvcnlcIixcIm5hbWVcIixcInZlcnNpb25cIl0pOm51bGx9KSx0fSx1c2VUb2tlbjpmdW5jdGlvbihlKXtBUElTdG9yYWdlLl9zdG9yYWdlVG9rZW49ZSxBUElTdG9yYWdlLl9zdG9yYWdlVG9rZW5RdWVyeVN0cmluZz1cInRva2VuPVwiLmNvbmNhdChlKX0sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIGE9ZS51c2VybmFtZSxvPWUucmVwb3NpdG9yeSxuPWUubmFtZSxyPWUudmVyc2lvbnx8XCIwLjAuMFwiO3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvYXBpL1wiKS5jb25jYXQoYSxcIi9cIikuY29uY2F0KG8sXCIvXCIpLmNvbmNhdChuLFwiL1wiKS5jb25jYXQocixcIj9cIikuY29uY2F0KEFQSVN0b3JhZ2UuX3N0b3JhZ2VUb2tlblF1ZXJ5U3RyaW5nKSxtZXRob2Q6XCJwb3N0XCIsZGF0YTp7YXBpRWxlbWVudDpBUElTdG9yYWdlLl9wcmVwYXJlQVBJRWxlbWVudChlKSxvcmlnOnQmJl9sb2Rhc2guZGVmYXVsdC5waWNrKHQsW1widXNlcm5hbWVcIixcInJlcG9zaXRvcnlcIixcIm5hbWVcIl0pfSx3aXRoQ3JlZGVudGlhbHM6ITB9KX0sc2V0V2l0aERpZmY6ZnVuY3Rpb24oZSx0KXtpZighZXx8ZS51c2VybmFtZSE9PXQudXNlcm5hbWV8fGUucmVwb3NpdG9yeSE9PXQucmVwb3NpdG9yeXx8ZS5uYW1lIT09dC5uYW1lfHxlLnZlcnNpb24hPT10LnZlcnNpb24pcmV0dXJuIEFQSVN0b3JhZ2Uuc2V0KHQsZSk7dmFyIGE9dC51c2VybmFtZSxvPXQucmVwb3NpdG9yeSxuPXQubmFtZSxyPXQudmVyc2lvbnx8XCIwLjAuMFwiLGk9KDAsX2RlZXBEaWZmLmRpZmYpKGUsdCk7cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5pc0VtcHR5KGkpJiYoaT1bXSksKDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC9hcGkvXCIpLmNvbmNhdChhLFwiL1wiKS5jb25jYXQobyxcIi9cIikuY29uY2F0KG4sXCIvXCIpLmNvbmNhdChyLFwiP1wiKS5jb25jYXQoQVBJU3RvcmFnZS5fc3RvcmFnZVRva2VuUXVlcnlTdHJpbmcpLG1ldGhvZDpcIlBPU1RcIixkYXRhOntkaWZmOml9LHdpdGhDcmVkZW50aWFsczohMH0pfSxhbGlhczpmdW5jdGlvbihlLHQpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvYXBpL2FsaWFzL1wiKS5jb25jYXQoW2UudXNlcm5hbWUsZS5yZXBvc2l0b3J5LGUubmFtZSx0LnJlcG9zaXRvcnksdC5uYW1lXS5qb2luKFwiL1wiKSxcIj9cIikuY29uY2F0KEFQSVN0b3JhZ2UuX3N0b3JhZ2VUb2tlblF1ZXJ5U3RyaW5nKSxtZXRob2Q6XCJwb3N0XCIsd2l0aENyZWRlbnRpYWxzOiEwfSl9LHJlbmFtZTpmdW5jdGlvbihlLHQsYSl7cmV0dXJuKDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC9hcGkvXCIpLmNvbmNhdChlLFwiL1wiKS5jb25jYXQodCxcIi9yZW5hbWU/XCIpLmNvbmNhdChBUElTdG9yYWdlLl9zdG9yYWdlVG9rZW5RdWVyeVN0cmluZyksbWV0aG9kOlwicG9zdFwiLGRhdGE6e2FwaUVsZW1lbnQ6QVBJU3RvcmFnZS5fcHJlcGFyZUFQSUVsZW1lbnQoYSl9LGNvbnRlbnRUeXBlOlwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiLHdpdGhDcmVkZW50aWFsczohMH0pfSxhcGlFbGVtZW50Q2FjaGU6e30sZ2V0Q2FjaGVkOmZ1bmN0aW9uKGUsdCxhLG8pe3ZhciBuPUpTT04uc3RyaW5naWZ5KFtlLHQsYSxvXSkscj10aGlzLmFwaUVsZW1lbnRDYWNoZTtyZXR1cm4gcltuXT9fZXM2UHJvbWlzZS5Qcm9taXNlLnJlc29sdmUodGhpcy5hcGlFbGVtZW50Q2FjaGVbbl0pOnRoaXMuZ2V0KGUsdCxhLG8pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHJbbl09ZSxlfSl9LGdldDpmdW5jdGlvbihlLHQsYSxvLG4scil7bz1vfHxcIjAuMC4wXCI7dmFyIGk9KDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC9hcGkvXCIpLmNvbmNhdChlLFwiL1wiKS5jb25jYXQodCxcIi9cIikuY29uY2F0KGEsXCIvXCIpLmNvbmNhdChvLFwiP1wiKS5jb25jYXQoQVBJU3RvcmFnZS5fc3RvcmFnZVRva2VuUXVlcnlTdHJpbmcpLmNvbmNhdChuP1wiJmluY2x1ZGVWZXJzaW9ucz10cnVlXCI6XCJcIiksbWV0aG9kOlwiZ2V0XCIsd2l0aENyZWRlbnRpYWxzOiEwfSk7cmV0dXJuIEFQSVN0b3JhZ2UuX2RlZmF1bHRQcm9taXNlT3JDYWxsYmFjayhpLHIsITApfSxnZXRCeUlkOmZ1bmN0aW9uKGUsdCl7dmFyIGE9KDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC9hcGkvaWQvXCIpLmNvbmNhdChlKS5jb25jYXQoQVBJU3RvcmFnZS5fc3RvcmFnZVRva2VuUXVlcnlTdHJpbmcpLG1ldGhvZDpcImdldFwiLHdpdGhDcmVkZW50aWFsczohMH0pO3JldHVybiBBUElTdG9yYWdlLl9kZWZhdWx0UHJvbWlzZU9yQ2FsbGJhY2soYSx0KX0sZ2V0QWxsOmZ1bmN0aW9uKGUpe3ZhciB0PSgwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvYXBpP1wiKS5jb25jYXQoQVBJU3RvcmFnZS5fc3RvcmFnZVRva2VuUXVlcnlTdHJpbmcpLG1ldGhvZDpcImdldFwiLHdpdGhDcmVkZW50aWFsczohMH0pO3JldHVybiBBUElTdG9yYWdlLl9kZWZhdWx0UHJvbWlzZU9yQ2FsbGJhY2sodCxlKX0sZ2V0VmVyc2lvbnM6ZnVuY3Rpb24oZSx0LGEsbyl7dmFyIG49KDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC9hcGkvXCIpLmNvbmNhdChlLFwiL1wiKS5jb25jYXQodCxcIi9cIikuY29uY2F0KGEsXCIvdmVyc2lvbnNcIiksbWV0aG9kOlwiZ2V0XCIsd2l0aENyZWRlbnRpYWxzOiEwfSk7cmV0dXJuIG8/KG4udGhlbihmdW5jdGlvbihlKXtvKGUudmVyc2lvbnMsZSl9KS5jYXRjaChmdW5jdGlvbihlKXtvKG51bGwsZSl9KSxudWxsKTpuLnRoZW4oQVBJU3RvcmFnZS5fZGVmYXVsdEFQSVN0b3JhZ2VUaGVuKX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCxhLG8pe3ZhciBuPSgwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvYXBpL1wiKS5jb25jYXQoZSxcIi9cIikuY29uY2F0KHQsXCIvXCIpLmNvbmNhdChhLFwiP1wiKS5jb25jYXQoQVBJU3RvcmFnZS5fc3RvcmFnZVRva2VuUXVlcnlTdHJpbmcpLG1ldGhvZDpcIkRFTEVURVwiLHdpdGhDcmVkZW50aWFsczohMH0pO3JldHVybiBvJiZuLnRoZW4obyksbn0sZ2V0VHlwZTpmdW5jdGlvbihlKXtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L2FwaS90eXBlXCIpLHBhcmFtczp7dXNlcm5hbWU6ZS51c2VybmFtZSxyZXBvc2l0b3J5OmUucmVwb3NpdG9yeSxuYW1lOmUubmFtZX19KX0sYWRkQ2FwdHVyZTpmdW5jdGlvbihlLHQsYSxvKXtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L2FwaS9cIikuY29uY2F0KGUsXCIvXCIpLmNvbmNhdCh0LFwiL1wiKS5jb25jYXQoYSxcIi9hZGRDYXB0dXJlP1wiKS5jb25jYXQoQVBJU3RvcmFnZS5fc3RvcmFnZVRva2VuUXVlcnlTdHJpbmcpLG1ldGhvZDpcInBvc3RcIixkYXRhOntjYXB0dXJlOm99fSl9LGdldFJlc3BvbnNlVGVzdENhc2VzOmZ1bmN0aW9uKGUpe3ZhciB0PWUudXNlcm5hbWUsYT1lLnJlcG9zaXRvcnksbz1lLm5hbWU7cmV0dXJuKDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC90ZXN0Q2FzZS9cIikuY29uY2F0KHQsXCIvXCIpLmNvbmNhdChhLFwiL1wiKS5jb25jYXQobyxcIj9cIikuY29uY2F0KEFQSVN0b3JhZ2UuX3N0b3JhZ2VUb2tlblF1ZXJ5U3RyaW5nKSxtZXRob2Q6XCJwb3N0XCIsZGF0YTp7b3V0cHV0OmUub3V0cHV0fX0pfSxnZXRSZXNwb25zZVRlc3RDYXNlOmZ1bmN0aW9uKGUpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdGVzdENhc2UvXCIpLmNvbmNhdChlLFwiP1wiKS5jb25jYXQoQVBJU3RvcmFnZS5fc3RvcmFnZVRva2VuUXVlcnlTdHJpbmcpLG1ldGhvZDpcImdldFwifSl9LGRlbGV0ZVJlc3BvbnNlVGVzdENhc2VzOmZ1bmN0aW9uKGUpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdGVzdENhc2UvZGVsZXRlP1wiKS5jb25jYXQoQVBJU3RvcmFnZS5fc3RvcmFnZVRva2VuUXVlcnlTdHJpbmcpLG1ldGhvZDpcInBvc3RcIixkYXRhOntpZHM6ZX19KX19LF9kZWZhdWx0PUFQSVN0b3JhZ2U7ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO2Z1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuQXBwbGljYXRpb25FcnJvcj1BcHBsaWNhdGlvbkVycm9yLGV4cG9ydHMucHJvY2Vzc1Jlc3BvbnNlPXByb2Nlc3NSZXNwb25zZSxleHBvcnRzLmdldENhdGNoPWdldENhdGNoLGV4cG9ydHMuZ2V0VW5leHBlY3RlZEVycm9yUmVzcG9uc2U9Z2V0VW5leHBlY3RlZEVycm9yUmVzcG9uc2UsZXhwb3J0cy5nZXRSZXNwb25zZUZyb21FcnJvcj1nZXRSZXNwb25zZUZyb21FcnJvcixleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBSZWFjdD1faW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKFwicmVhY3RcIikpLF9sb2Rhc2g9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoXCIpKSxfTmV3VXRpbHM9cmVxdWlyZShcIi4uL3RlbXBsYXRlcy9OZXdVdGlsc1wiKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciBlPW5ldyBXZWFrTWFwO3JldHVybiBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGU9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX1mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPT1fdHlwZW9mKGUpJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXJldHVybntkZWZhdWx0OmV9O3ZhciByPV9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpO2lmKHImJnIuaGFzKGUpKXJldHVybiByLmdldChlKTt2YXIgdD17fSxvPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIHMgaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSl7dmFyIG49bz9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUscyk6bnVsbDtuJiYobi5nZXR8fG4uc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkodCxzLG4pOnRbc109ZVtzXX1yZXR1cm4gdC5kZWZhdWx0PWUsciYmci5zZXQoZSx0KSx0fWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShlLHIsdCl7cmV0dXJuIHIgaW4gZT9PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLHt2YWx1ZTp0LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVtyXT10LGV9ZnVuY3Rpb24gQXBwbGljYXRpb25FcnJvcihlKXt0aGlzLm5hbWU9XCJBcHBsaWNhdGlvbkVycm9yXCIsdGhpcy5tZXNzYWdlcz1lLm1lc3NhZ2VzLHRoaXMuZXJyVHlwZXM9ZS5lcnJUeXBlcyx0aGlzLm1lc3NhZ2U9ZS5tZXNzYWdlcyBpbnN0YW5jZW9mIEFycmF5P2UubWVzc2FnZXMuam9pbihcIlxcblwiKTpcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWRcIix0aGlzLnN0YWNrPShuZXcgRXJyb3IpLnN0YWNrfWZ1bmN0aW9uIHByb2Nlc3NSZXNwb25zZShlKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06XCJkYXRhXCI7aWYoIWUuc3VjY2Vzcyl0aHJvdyBuZXcgQXBwbGljYXRpb25FcnJvcihlKTtyZXR1cm4gciBpbnN0YW5jZW9mIEFycmF5P19sb2Rhc2guZGVmYXVsdC5waWNrKGUscik6ZVtyXX1mdW5jdGlvbiBnZXRDYXRjaChlLHIsdCl7cmV0dXJuIGZ1bmN0aW9uKG8pe3ZhciBzOyhyPXJ8fFwicmVzcG9uc2VcIix0PXR8fFwibG9hZGluZ1wiLG8gaW5zdGFuY2VvZiBBcHBsaWNhdGlvbkVycm9yKT9lLnNldFN0YXRlKChfZGVmaW5lUHJvcGVydHkocz17fSxyLHtzdWNjZXNzOiExLG1lc3NhZ2VzOm8ubWVzc2FnZXMsZXJyVHlwZXM6by5lcnJUeXBlc30pLF9kZWZpbmVQcm9wZXJ0eShzLHQsITEpLHMpKTooMCxfTmV3VXRpbHMuZ2V0Q2F0Y2gpKGUscix0KShvKX19ZnVuY3Rpb24gZ2V0VW5leHBlY3RlZEVycm9yUmVzcG9uc2UoKXtyZXR1cm57c3VjY2VzczohMSxtZXNzYWdlczpbXCJTb3JyeSwgYnV0IHdlIHJhbiBpbnRvIGFuIHVuZXhwZWN0ZWQgZXJyb3IuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXJcIl0sZXJyVHlwZXM6W1widW5leHBlY3RlZEVycm9yXCJdfX1mdW5jdGlvbiBnZXRSZXNwb25zZUZyb21FcnJvcihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEFwcGxpY2F0aW9uRXJyb3I/e3N1Y2Nlc3M6ITEsbWVzc2FnZXM6ZS5tZXNzYWdlcyxlcnJUeXBlczplLmVyclR5cGVzfTooY29uc29sZS5lcnJvcihlKSxnZXRVbmV4cGVjdGVkRXJyb3JSZXNwb25zZSgpKX12YXIgX2RlZmF1bHQ9e0FwcGxpY2F0aW9uRXJyb3I6QXBwbGljYXRpb25FcnJvcixwcm9jZXNzUmVzcG9uc2U6cHJvY2Vzc1Jlc3BvbnNlLGdldFVuZXhwZWN0ZWRFcnJvclJlc3BvbnNlOmdldFVuZXhwZWN0ZWRFcnJvclJlc3BvbnNlLGdldFJlc3BvbnNlRnJvbUVycm9yOmdldFJlc3BvbnNlRnJvbUVycm9yfTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zZXRUdXRvcmlhbENvbXBsZXRlZD1zZXRUdXRvcmlhbENvbXBsZXRlZCxleHBvcnRzLmdldEludml0ZXM9Z2V0SW52aXRlcyxleHBvcnRzLmludml0ZT1pbnZpdGUsZXhwb3J0cy5kZWxldGVJbnZpdGU9ZGVsZXRlSW52aXRlLGV4cG9ydHMuZ2V0T3JnYW5pemF0aW9uVXNlcnM9Z2V0T3JnYW5pemF0aW9uVXNlcnMsZXhwb3J0cy5yZW1vdmVVc2VyRnJvbU9yZ2FuaXphdGlvbj1yZW1vdmVVc2VyRnJvbU9yZ2FuaXphdGlvbixleHBvcnRzLmdldFBheW1lbnRNZXRob2Q9Z2V0UGF5bWVudE1ldGhvZCxleHBvcnRzLnNldFBheW1lbnRNZXRob2Q9c2V0UGF5bWVudE1ldGhvZCxleHBvcnRzLmRlZmF1bHQ9ZXhwb3J0cy5Vc2VyUm9sZXM9ZXhwb3J0cy5jaGFuZ2VQYXNzd29yZD1leHBvcnRzLnJlc2V0UGFzc3dvcmQ9ZXhwb3J0cy5pc1ZhbGlkUGFzc3dvcmRSZXNldFRva2VuPWV4cG9ydHMuYWN0aXZhdGU9ZXhwb3J0cy5zdGFydFJlc2V0UGFzc3dvcmQ9ZXhwb3J0cy5zZXRUdXRvcmlhbFN0ZXA9ZXhwb3J0cy5yZWdpc3Rlcj1leHBvcnRzLmxvZ291dD1leHBvcnRzLmlzTG9nZ2VkSW49ZXhwb3J0cy5sb2dpbj12b2lkIDA7dmFyIF9BeGlvcz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0F4aW9zXCIpKSxfQ29uZmlnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQ29uZmlnXCIpKSxfVXRpbGl0eT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL1V0aWxpdHlcIikpLF9Ub2tlbj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL1Rva2VuXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBvd25LZXlzKHQsZSl7dmFyIG89T2JqZWN0LmtleXModCk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0KTtlJiYocj1yLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGUpLmVudW1lcmFibGV9KSksby5wdXNoLmFwcGx5KG8scil9cmV0dXJuIG99ZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgbz1udWxsIT1hcmd1bWVudHNbZV0/YXJndW1lbnRzW2VdOnt9O2UlMj9vd25LZXlzKE9iamVjdChvKSwhMCkuZm9yRWFjaChmdW5jdGlvbihlKXtfZGVmaW5lUHJvcGVydHkodCxlLG9bZV0pfSk6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM/T2JqZWN0LmRlZmluZVByb3BlcnRpZXModCxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhvKSk6b3duS2V5cyhPYmplY3QobykpLmZvckVhY2goZnVuY3Rpb24oZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8sZSkpfSl9cmV0dXJuIHR9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KHQsZSxvKXtyZXR1cm4gZSBpbiB0P09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOm8sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTp0W2VdPW8sdH12YXIgbG9naW49ZnVuY3Rpb24odCxlKXtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L3VzZXIvbG9naW5cIiksbWV0aG9kOlwicG9zdFwiLGRhdGE6e2VtYWlsOnQscGFzc3dvcmQ6ZX0sd2l0aENyZWRlbnRpYWxzOiEwfSkuY2F0Y2goZnVuY3Rpb24odCl7dGhyb3cgX1V0aWxpdHkuZGVmYXVsdC5nZXREZWZhdWx0RXJyb3IodCl9KX07ZXhwb3J0cy5sb2dpbj1sb2dpbjt2YXIgaXNMb2dnZWRJbj1mdW5jdGlvbih0KXt2YXIgZT10P1wiP3Rva2VuPVwiLmNvbmNhdCh0KTpcIlwiO3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdXNlci9pc0xvZ2dlZGluXCIpLmNvbmNhdChlKX0pLmNhdGNoKGZ1bmN0aW9uKHQpe3Rocm93IF9VdGlsaXR5LmRlZmF1bHQuZ2V0RGVmYXVsdEVycm9yKHQpfSl9O2V4cG9ydHMuaXNMb2dnZWRJbj1pc0xvZ2dlZEluO3ZhciBsb2dvdXQ9ZnVuY3Rpb24odCl7dmFyIGU9dD9cIj90b2tlbj1cIi5jb25jYXQodCk6XCJcIjtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L3VzZXIvbG9nb3V0XCIpLmNvbmNhdChlKSxtZXRob2Q6XCJwb3N0XCJ9KS5jYXRjaChmdW5jdGlvbih0KXt0aHJvdyBfVXRpbGl0eS5kZWZhdWx0LmdldERlZmF1bHRFcnJvcih0KX0pfTtleHBvcnRzLmxvZ291dD1sb2dvdXQ7dmFyIHJlZ2lzdGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC91c2VyL3JlZ2lzdGVyXCIpLGRhdGE6X29iamVjdFNwcmVhZCh7fSx0LHtpbnZpdGVLZXk6ZX0pLG1ldGhvZDpcInBvc3RcIn0pLmNhdGNoKGZ1bmN0aW9uKHQpe3Rocm93IF9VdGlsaXR5LmRlZmF1bHQuZ2V0RGVmYXVsdEVycm9yKHQpfSl9O2V4cG9ydHMucmVnaXN0ZXI9cmVnaXN0ZXI7dmFyIHNldFR1dG9yaWFsU3RlcD1mdW5jdGlvbih0LGUpeyhlP1Byb21pc2UucmVzb2x2ZShlKTpfVG9rZW4uZGVmYXVsdC5nZXQoKSkudGhlbihmdW5jdGlvbihlKXt2YXIgbz1lP1wiP3Rva2VuPVwiLmNvbmNhdChlKTpcIlwiO3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdXNlci90dXRvcmlhbFN0ZXBcIikuY29uY2F0KG8pLGRhdGE6e3N0ZXA6dH0sbWV0aG9kOlwicG9zdFwifSl9KS5jYXRjaChmdW5jdGlvbih0KXt0aHJvdyBfVXRpbGl0eS5kZWZhdWx0LmdldERlZmF1bHRFcnJvcih0KX0pfTtmdW5jdGlvbiBzZXRUdXRvcmlhbENvbXBsZXRlZCh0LGUpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdXNlci90dXRvcmlhbENvbXBsZXRlZFwiKSxkYXRhOnt0dXRvcmlhbDp0LGNvbXBsZXRlZDplfSxtZXRob2Q6XCJwb3N0XCJ9KX1leHBvcnRzLnNldFR1dG9yaWFsU3RlcD1zZXRUdXRvcmlhbFN0ZXA7dmFyIHN0YXJ0UmVzZXRQYXNzd29yZD1mdW5jdGlvbih0LGUpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdXNlci9zdGFydFJlc2V0UGFzc3dvcmRcIiksZGF0YTp7dXNlcm5hbWU6dCxlbWFpbDplfSxtZXRob2Q6XCJwb3N0XCJ9KS5jYXRjaChmdW5jdGlvbih0KXt0aHJvdyBfVXRpbGl0eS5kZWZhdWx0LmdldERlZmF1bHRFcnJvcih0KX0pfTtleHBvcnRzLnN0YXJ0UmVzZXRQYXNzd29yZD1zdGFydFJlc2V0UGFzc3dvcmQ7dmFyIGFjdGl2YXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC91c2VyL2FjdGl2YXRlL1wiKS5jb25jYXQodCxcIi9cIikuY29uY2F0KGUpLG1ldGhvZDpcInBvc3RcIn0pfTtleHBvcnRzLmFjdGl2YXRlPWFjdGl2YXRlO3ZhciBpc1ZhbGlkUGFzc3dvcmRSZXNldFRva2VuPWZ1bmN0aW9uKHQpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdXNlci9pc1ZhbGlkUGFzc3dvcmRSZXNldFRva2VuXCIpLG1ldGhvZDpcImdldFwiLHBhcmFtczp7dG9rZW46dH19KX07ZXhwb3J0cy5pc1ZhbGlkUGFzc3dvcmRSZXNldFRva2VuPWlzVmFsaWRQYXNzd29yZFJlc2V0VG9rZW47dmFyIHJlc2V0UGFzc3dvcmQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L3VzZXIvcmVzZXRQYXNzd29yZFwiKSxtZXRob2Q6XCJwb3N0XCIsZGF0YTp7dG9rZW46dCxwYXNzd29yZDplfX0pfTtleHBvcnRzLnJlc2V0UGFzc3dvcmQ9cmVzZXRQYXNzd29yZDt2YXIgY2hhbmdlUGFzc3dvcmQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L3VzZXIvY2hhbmdlUGFzc3dvcmRcIiksbWV0aG9kOlwicG9zdFwiLGRhdGE6e2N1clBhc3N3b3JkOnQscGFzc3dvcmQ6ZX19KX07ZnVuY3Rpb24gZ2V0SW52aXRlcygpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdXNlci9pbnZpdGVzXCIpLG1ldGhvZDpcImdldFwifSl9ZnVuY3Rpb24gaW52aXRlKHQpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdXNlci9pbnZpdGVzXCIpLG1ldGhvZDpcInBvc3RcIixkYXRhOnR9KX1mdW5jdGlvbiBkZWxldGVJbnZpdGUodCl7cmV0dXJuKDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC91c2VyL2ludml0ZXMvXCIpLmNvbmNhdCh0KSxtZXRob2Q6XCJkZWxldGVcIn0pfWV4cG9ydHMuY2hhbmdlUGFzc3dvcmQ9Y2hhbmdlUGFzc3dvcmQ7dmFyIFVzZXJSb2xlcz17Tm9ybWFsOlwiTm9ybWFsIHVzZXJcIixcIk9yZyBhZG1pbmlzdHJhdG9yXCI6XCJPcmcgYWRtaW5pc3RyYXRvclwifTtmdW5jdGlvbiBnZXRPcmdhbml6YXRpb25Vc2Vycygpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvdXNlci9vcmdhbml6YXRpb25cIiksbWV0aG9kOlwiZ2V0XCJ9KX1mdW5jdGlvbiByZW1vdmVVc2VyRnJvbU9yZ2FuaXphdGlvbih0KXtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L3VzZXIvb3JnYW5pemF0aW9uL1wiKS5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHQpKSxtZXRob2Q6XCJkZWxldGVcIn0pfWZ1bmN0aW9uIGdldFBheW1lbnRNZXRob2QoKXtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L3VzZXIvcGF5bWVudFwiKX0pfWZ1bmN0aW9uIHNldFBheW1lbnRNZXRob2QodCl7cmV0dXJuKDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC91c2VyL3BheW1lbnRcIiksbWV0aG9kOlwiUE9TVFwiLGRhdGE6e3Rva2VuOnR9fSl9ZXhwb3J0cy5Vc2VyUm9sZXM9VXNlclJvbGVzO3ZhciBfZGVmYXVsdD17bG9naW46bG9naW4saXNMb2dnZWRJbjppc0xvZ2dlZEluLGxvZ291dDpsb2dvdXQscmVnaXN0ZXI6cmVnaXN0ZXIsYWN0aXZhdGU6YWN0aXZhdGUsc2V0VHV0b3JpYWxTdGVwOnNldFR1dG9yaWFsU3RlcCxzZXRUdXRvcmlhbENvbXBsZXRlZDpzZXRUdXRvcmlhbENvbXBsZXRlZCxzdGFydFJlc2V0UGFzc3dvcmQ6c3RhcnRSZXNldFBhc3N3b3JkLGlzVmFsaWRQYXNzd29yZFJlc2V0VG9rZW46aXNWYWxpZFBhc3N3b3JkUmVzZXRUb2tlbixyZXNldFBhc3N3b3JkOnJlc2V0UGFzc3dvcmQsY2hhbmdlUGFzc3dvcmQ6Y2hhbmdlUGFzc3dvcmQsZ2V0SW52aXRlczpnZXRJbnZpdGVzLGludml0ZTppbnZpdGUsZGVsZXRlSW52aXRlOmRlbGV0ZUludml0ZSxVc2VyUm9sZXM6VXNlclJvbGVzLGdldE9yZ2FuaXphdGlvblVzZXJzOmdldE9yZ2FuaXphdGlvblVzZXJzLHJlbW92ZVVzZXJGcm9tT3JnYW5pemF0aW9uOnJlbW92ZVVzZXJGcm9tT3JnYW5pemF0aW9uLGdldFBheW1lbnRNZXRob2Q6Z2V0UGF5bWVudE1ldGhvZCxzZXRQYXltZW50TWV0aG9kOnNldFBheW1lbnRNZXRob2R9O2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfYXhpb3M9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiYXhpb3NcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fXZhciBfZGVmYXVsdD1mdW5jdGlvbihlKXtyZXR1cm4oMCxfYXhpb3MuZGVmYXVsdCkoZSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZS5kYXRhfSl9O2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmdldFNob3J0TWltZT1nZXRTaG9ydE1pbWUsZXhwb3J0cy5wYXJzZUhlYWRlclZhbHVlPXBhcnNlSGVhZGVyVmFsdWUsZXhwb3J0cy5wYXJzZVBvc3REYXRhPXBhcnNlUG9zdERhdGEsZXhwb3J0cy5wYXJzZVVSTD1wYXJzZVVSTCxleHBvcnRzLm9taXRQYXJhbT1vbWl0UGFyYW0sZXhwb3J0cy5nZXRCYXNlNjQ9Z2V0QmFzZTY0LGV4cG9ydHMuZXh0cmFjdEJhc2U2ND1leHRyYWN0QmFzZTY0LGV4cG9ydHMuc2VhcmNoSW5DYXB0dXJlPXNlYXJjaEluQ2FwdHVyZSxleHBvcnRzLmRlZmF1bHQ9ZXhwb3J0cy5ncm91cGVkVGV4dFNlYXJjaFBsYWNlcz1leHBvcnRzLmFsbFRleHRTZWFyY2hQbGFjZXNGaWx0ZXI9ZXhwb3J0cy50ZXh0U2VhcmNoUGxhY2VzPWV4cG9ydHMuYWxsU2hvcnRNaW1lc0ZpbHRlcj1leHBvcnRzLnNob3J0TWltZXM9dm9pZCAwO3ZhciBfdXJpanM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwidXJpanNcIikpLF9sb2Rhc2g9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoXCIpKSxfQmFzZT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi8uLi9jb21tb24vQmFzZTY0XCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX12YXIgc2hvcnRNaW1lcz17ZG9jOlwiRG9jdW1lbnQgKEhUTUwsIFhNTCwgZXRjLilcIixqc29uOlwiSlNPTlwiLGltZzpcIkltYWdlc1wiLGNzczpcIkNTU1wiLGpzOlwiSlNcIixvdGhlcjpcIk90aGVyc1wifTtleHBvcnRzLnNob3J0TWltZXM9c2hvcnRNaW1lczt2YXIgYWxsU2hvcnRNaW1lc0ZpbHRlcj17ZG9jOiEwLGpzb246ITAsaW1nOiEwLGNzczohMCxqczohMCxvdGhlcjohMH07ZXhwb3J0cy5hbGxTaG9ydE1pbWVzRmlsdGVyPWFsbFNob3J0TWltZXNGaWx0ZXI7dmFyIHRleHRTZWFyY2hQbGFjZXM9e3VybDpcInJlcXVlc3QgVVJMXCIscXVlcnlTdHJpbmc6XCJyZXF1ZXN0IHF1ZXJ5IHN0cmluZ3NcIixwb3N0RGF0YTpcInJlcXVlc3QgYm9keSAoUE9TVCBkYXRhKVwiLHJlcXVlc3RIZWFkZXJzOlwicmVxdWVzdCBoZWFkZXJzXCIscmVxdWVzdENvb2tpZXM6XCJyZXF1ZXN0IGNvb2tpZXNcIixyZXNwb25zZUhlYWRlcnM6XCJyZXNwb25zZSBoZWFkZXJzXCIscmVzcG9uc2VDb29raWVzOlwicmVzcG9uc2UgY29va2llc1wiLHJlc3BvbnNlQm9keTpcInJlc3BvbnNlIGJvZHlcIn07ZXhwb3J0cy50ZXh0U2VhcmNoUGxhY2VzPXRleHRTZWFyY2hQbGFjZXM7dmFyIGFsbFRleHRTZWFyY2hQbGFjZXNGaWx0ZXI9e3VybDohMCxxdWVyeVN0cmluZzohMCxwb3N0RGF0YTohMCxyZXF1ZXN0SGVhZGVyczohMCxyZXF1ZXN0Q29va2llczohMCxyZXNwb25zZUhlYWRlcnM6ITAscmVzcG9uc2VDb29raWVzOiEwLHJlc3BvbnNlQm9keTohMH07ZXhwb3J0cy5hbGxUZXh0U2VhcmNoUGxhY2VzRmlsdGVyPWFsbFRleHRTZWFyY2hQbGFjZXNGaWx0ZXI7dmFyIGdyb3VwZWRUZXh0U2VhcmNoUGxhY2VzPXtyZXF1ZXN0OltcInVybFwiLFwicXVlcnlTdHJpbmdcIixcInBvc3REYXRhXCIsXCJyZXF1ZXN0SGVhZGVyc1wiLFwicmVxdWVzdENvb2tpZXNcIl0scmVzcG9uc2U6W1wicmVzcG9uc2VIZWFkZXJzXCIsXCJyZXNwb25zZUNvb2tpZXNcIixcInJlc3BvbnNlQm9keVwiXX07ZnVuY3Rpb24gZ2V0U2hvcnRNaW1lKGUscil7cmV0dXJuXCJ0ZXh0L2Nzc1wiPT09KGU9ZS50b0xvd2VyQ2FzZSgpKT9cImNzc1wiOi0xIT09ZS5pbmRleE9mKFwiamF2YXNjcmlwdFwiKXx8XCJqc1wiPT09cj9cImpzXCI6XCJpbWFnZS9cIj09PWUuc3Vic3RyKDAsNik/XCJpbWdcIjpcImFwcGxpY2F0aW9uL2pzb25cIj09PWV8fFwianNvblwiPT09cj9cImpzb25cIjpcInRleHQvXCI9PT1lLnN1YnN0cigwLDUpP1wiZG9jXCI6XCJvdGhlclwifWZ1bmN0aW9uIHBhcnNlSGVhZGVyVmFsdWUoZSl7dmFyIHI9e30sdD1lLnNwbGl0KFwiO1wiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJpbSgpfSksYT0hMCxzPSExLG89dm9pZCAwO3RyeXtmb3IodmFyIG4sdT10W1N5bWJvbC5pdGVyYXRvcl0oKTshKGE9KG49dS5uZXh0KCkpLmRvbmUpO2E9ITApe3ZhciBpPW4udmFsdWUsbD1pLmluZGV4T2YoXCI9XCIpO2lmKC0xIT09bCl7dmFyIHA9aS5zdWJzdHIoMCxsKS50cmltKCksYz1pLnN1YnN0cihsKzEpLnRyaW0oKTtjLmxlbmd0aCYmJ1wiJz09PWNbMF0mJihjPUpTT04ucGFyc2UoYykpLHJbcC50b0xvd2VyQ2FzZSgpXT1jfX19Y2F0Y2goZSl7cz0hMCxvPWV9ZmluYWxseXt0cnl7YXx8bnVsbD09dS5yZXR1cm58fHUucmV0dXJuKCl9ZmluYWxseXtpZihzKXRocm93IG99fXJldHVybntrZXlWYWx1ZTpyLHBhcnRzOnQscmF3OmV9fWZ1bmN0aW9uIHBhcnNlSGVhZGVycyhlKXt2YXIgcj17fSx0PWUuc3BsaXQoXCJcXHJcXG5cIiksYT0hMCxzPSExLG89dm9pZCAwO3RyeXtmb3IodmFyIG4sdT10W1N5bWJvbC5pdGVyYXRvcl0oKTshKGE9KG49dS5uZXh0KCkpLmRvbmUpO2E9ITApe3ZhciBpPW4udmFsdWUsbD1pLmluZGV4T2YoXCI6XCIpLHA9aS5zdWJzdHIoMCxsKS50cmltKCksYz1wYXJzZUhlYWRlclZhbHVlKGkuc3Vic3RyKGwrMSkudHJpbSgpKTtyW3AudG9Mb3dlckNhc2UoKV09Y319Y2F0Y2goZSl7cz0hMCxvPWV9ZmluYWxseXt0cnl7YXx8bnVsbD09dS5yZXR1cm58fHUucmV0dXJuKCl9ZmluYWxseXtpZihzKXRocm93IG99fXJldHVybiByfWZ1bmN0aW9uIHBhcnNlUG9zdERhdGEoZSl7dmFyIHI9ZS5taW1lVHlwZS50b0xvd2VyQ2FzZSgpLHQ9e21pbWVUeXBlOnJ9O3RyeXt2YXIgYT1KU09OLnBhcnNlKGUudGV4dCk7cmV0dXJuIHQudHlwZT1cImpzb25cIix0LmRhdGE9YSx0LnRleHQ9ZS50ZXh0LHR9Y2F0Y2goZSl7fWlmKGUucGFyYW1zKXQudHlwZT1cInBhcmFtc1wiLHQuZGF0YT1lLnBhcmFtcy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6ZGVjb2RlVVJJQ29tcG9uZW50KGUubmFtZSkucmVwbGFjZSgvXFwrL2csXCIgXCIpLHZhbHVlOnt0eXBlOlwidGV4dFwiLGRhdGE6ZGVjb2RlVVJJQ29tcG9uZW50KGUudmFsdWUpLnJlcGxhY2UoL1xcKy9nLFwiIFwiKX19fSk7ZWxzZSBpZigwPT09ci5pbmRleE9mKFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiKSl7dD1wYXJzZUhlYWRlclZhbHVlKGUubWltZVR5cGUpO3ZhciBzPVwiLS1cIi5jb25jYXQodC5rZXlWYWx1ZS5ib3VuZGFyeSksbz1lLnRleHQuc3BsaXQocykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN1YnN0cigyLGUubGVuZ3RoLTQpfSk7by5zaGlmdCgpLG8ucG9wKCk7dmFyIG49W10sdT1bXSxpPSEwLGw9ITEscD12b2lkIDA7dHJ5e2Zvcih2YXIgYyxkPW9bU3ltYm9sLml0ZXJhdG9yXSgpOyEoaT0oYz1kLm5leHQoKSkuZG9uZSk7aT0hMCl7dmFyIG09Yy52YWx1ZSxoPW0uaW5kZXhPZihcIlxcclxcblxcclxcblwiKSxmPW0uc3Vic3RyKDAsaCkseD1wYXJzZUhlYWRlcnMoZikseT14W1wiY29udGVudC1kaXNwb3NpdGlvblwiXTtpZih5KXt2YXIgdj15LmtleVZhbHVlLm5hbWUsUz1tLnN1YnN0cihoK1wiXFxyXFxuXFxyXFxuXCIubGVuZ3RoKSxxPXZvaWQgMCxnPXZvaWQgMDt5LmtleVZhbHVlLmZpbGVuYW1lPyhxPVwiZmlsZVwiLGc9e2ZpbGVOYW1lOnkua2V5VmFsdWUuZmlsZW5hbWUsbWltZVR5cGU6eFtcImNvbnRlbnQtdHlwZVwiXS5yYXcsY29udGVudDpcIlwifSk6KHE9XCJ0ZXh0XCIsZz1TKSxuLnB1c2goe25hbWU6dix2YWx1ZTp7dHlwZTpxLGRhdGE6Z319KSx1LnB1c2goe3JhdzptLHJhd0hlYWQ6ZixoZWFkOngsY29udGVudDpTfSl9fX1jYXRjaChlKXtsPSEwLHA9ZX1maW5hbGx5e3RyeXtpfHxudWxsPT1kLnJldHVybnx8ZC5yZXR1cm4oKX1maW5hbGx5e2lmKGwpdGhyb3cgcH19dC50eXBlPVwicGFyYW1zXCIsdC5kYXRhPW4sdC5wYXJ0cz11fWVsc2UgdC50eXBlPVwidGV4dFwiLHQuZGF0YT1lLnRleHQ7cmV0dXJuIHR9ZnVuY3Rpb24gcGFyc2VVUkwoZSl7dmFyIHI9X3VyaWpzLmRlZmF1bHQucGFyc2UoZSk7ci5wcm90b2NvbCYmKHIucHJvdG9jb2wrPVwiOlwiKSxyLmhvc3Q9ci5ob3N0bmFtZSsoci5wb3J0P1wiOlwiLmNvbmNhdChyLnBvcnQpOlwiXCIpLHIucGF0aG5hbWU9ci5wYXRoLGRlbGV0ZSByLnBhdGgsZGVsZXRlIHIudXNlcm5hbWUsZGVsZXRlIHIucGFzc3dvcmQ7Zm9yKHZhciB0PTAsYT1bXCJwcm90b2NvbFwiLFwiaG9zdG5hbWVcIixcInBvcnRcIixcInBhdGhuYW1lXCIsXCJzZWFyY2hcIixcImhhc2hcIl07dDxhLmxlbmd0aDt0Kyspe3ZhciBzPWFbdF07cltzXT1yW3NdfHxcIlwifXJldHVybiByfWZ1bmN0aW9uIG9taXRQYXJhbShlLHIpe3JldHVybiBlLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5uYW1lLnRvVXBwZXJDYXNlKCkhPT1yLnRvVXBwZXJDYXNlKCl9KX1mdW5jdGlvbiBnZXRCYXNlNjQoZSl7Zm9yKHZhciByLHQ9L1tBLVphLXowLTkrLy1fXXsxMCx9PXswLDJ9L2csYT0vXlsgLX5cXHJcXG5dKiQvLHM9W107cj10LmV4ZWMoZSk7KXt2YXIgbz1yWzBdO3RyeXt2YXIgbj1fQmFzZS5kZWZhdWx0LmRlY29kZShvKTthLnRlc3QobikmJnMucHVzaCh7bmFtZTpvLHZhbHVlOm59KX1jYXRjaChlKXt9fXJldHVybiBzfWZ1bmN0aW9uIGV4dHJhY3RCYXNlNjQoZSl7dmFyIHI9e307ZnVuY3Rpb24gdChlLHQpe2lmKGUpe3ZhciBhPWdldEJhc2U2NChlKTswIT09T2JqZWN0LmtleXMoYSkubGVuZ3RoJiYoclt0XT1hKX19ZnVuY3Rpb24gYShlLHQpe2lmKGUpe3ZhciBhPVtdO2UuZm9yRWFjaChmdW5jdGlvbihlKXthPShhPWEuY29uY2F0KGdldEJhc2U2NChlLm5hbWUpKSkuY29uY2F0KGdldEJhc2U2NChlLnZhbHVlKSl9KSwwIT09T2JqZWN0LmtleXMoYSkubGVuZ3RoJiYoclt0XT1hKX19cmV0dXJuIGEoKDAsX3VyaWpzLmRlZmF1bHQpKGUucmVxdWVzdC51cmwpLnF1ZXJ5KFwiXCIpLnRvU3RyaW5nKCkuc3BsaXQoXCIvXCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm57bmFtZTpcIlwiLHZhbHVlOmV9fSksXCJ1cmxcIiksYShlLmN1c3RvbS5xdWVyeVN0cmluZyxcInF1ZXJ5U3RyaW5nXCIpLGUucmVxdWVzdC5wb3N0RGF0YSYmdChlLnJlcXVlc3QucG9zdERhdGEudGV4dCxcInBvc3REYXRhXCIpLGEob21pdFBhcmFtKGUucmVxdWVzdC5oZWFkZXJzLFwiY29va2llXCIpLFwicmVxdWVzdEhlYWRlcnNcIiksYShlLnJlcXVlc3QuY29va2llcyxcInJlcXVlc3RDb29raWVzXCIpLGEoZS5yZXNwb25zZS5oZWFkZXJzLFwicmVzcG9uc2VIZWFkZXJzXCIpLGEoZS5yZXNwb25zZS5jb29raWVzLFwicmVzcG9uc2VDb29raWVzXCIpLHQoZS5jdXN0b20uZmluYWxEYXRhJiZlLmN1c3RvbS5maW5hbERhdGEucmVzcG9uc2VCb2R5LmNvbnRlbnQsXCJyZXNwb25zZUJvZHlcIiksMCE9PXIubGVuZ3RoP3I6bnVsbH1mdW5jdGlvbiBzZWFyY2hJbkNhcHR1cmUoZSxyLHQpe3Q9dHx8YWxsVGV4dFNlYXJjaFBsYWNlc0ZpbHRlcjt2YXIgYT1yLnRvTG93ZXJDYXNlKCkscz1bXTtmdW5jdGlvbiBvKGUpe3JldHVybiBfbG9kYXNoLmRlZmF1bHQuc29tZShfbG9kYXNoLmRlZmF1bHQubWFwKGUsZnVuY3Rpb24oZSl7cmV0dXJuLTEhPT1lLm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKGEpfHwtMSE9PWUudmFsdWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKGEpfSkpfWZ1bmN0aW9uIG4oZSxyLHQpe2UmJigoLTEhPT1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihhKXx8byhyKSkmJnMucHVzaCh0KSl9ZnVuY3Rpb24gdShlLHIsdCl7ZSYmKG8oZSl8fG8ocikpJiZzLnB1c2godCl9dmFyIGk9ZS5jdXN0b20uYmFzZTY0LGw9KDAsX3VyaWpzLmRlZmF1bHQpKGUucmVxdWVzdC51cmwpLnF1ZXJ5KFwiXCIpLnRvU3RyaW5nKCk7aWYodC51cmwmJm4obCxpLnVybCxcInVybFwiKSx0LnF1ZXJ5U3RyaW5nJiZ1KGUuY3VzdG9tLnF1ZXJ5U3RyaW5nLGkucXVlcnlTdHJpbmcsXCJxdWVyeVN0cmluZ1wiKSx0LnBvc3REYXRhJiZlLnJlcXVlc3QucG9zdERhdGEmJm4oZS5yZXF1ZXN0LnBvc3REYXRhLnRleHQsaS5wb3N0RGF0YSxcInBvc3REYXRhXCIpLHQucmVxdWVzdEhlYWRlcnMmJnUob21pdFBhcmFtKGUucmVxdWVzdC5oZWFkZXJzLFwiY29va2llXCIpLGkucmVxdWVzdEhlYWRlcnMsXCJyZXF1ZXN0SGVhZGVyc1wiKSx0LnJlcXVlc3RDb29raWVzJiZ1KGUucmVxdWVzdC5jb29raWVzLGkucmVxdWVzdENvb2tpZXMsXCJyZXF1ZXN0Q29va2llc1wiKSx0LnJlc3BvbnNlSGVhZGVycyYmdShlLnJlc3BvbnNlLmhlYWRlcnMsaS5yZXNwb25zZUhlYWRlcnMsXCJyZXNwb25zZUhlYWRlcnNcIiksdC5yZXNwb25zZUNvb2tpZXMmJnUoZS5yZXNwb25zZS5jb29raWVzLGkucmVzcG9uc2VDb29raWVzLFwicmVzcG9uc2VDb29raWVzXCIpLHQucmVzcG9uc2VCb2R5KXt2YXIgcD1lLmN1c3RvbS5maW5hbERhdGEmJmUuY3VzdG9tLmZpbmFsRGF0YS5yZXNwb25zZUJvZHkuY29udGVudDtwJiZuKHAsaS5yZXNwb25zZUJvZHksXCJyZXNwb25zZUJvZHlcIil9cmV0dXJuIDAhPT1zLmxlbmd0aD9zOm51bGx9ZXhwb3J0cy5ncm91cGVkVGV4dFNlYXJjaFBsYWNlcz1ncm91cGVkVGV4dFNlYXJjaFBsYWNlczt2YXIgX2RlZmF1bHQ9e3Nob3J0TWltZXM6c2hvcnRNaW1lcyxhbGxTaG9ydE1pbWVzRmlsdGVyOmFsbFNob3J0TWltZXNGaWx0ZXIsZ2V0U2hvcnRNaW1lOmdldFNob3J0TWltZSxwYXJzZUhlYWRlclZhbHVlOnBhcnNlSGVhZGVyVmFsdWUscGFyc2VQb3N0RGF0YTpwYXJzZVBvc3REYXRhLHBhcnNlVVJMOnBhcnNlVVJMLGdldEJhc2U2NDpnZXRCYXNlNjQsZXh0cmFjdEJhc2U2NDpleHRyYWN0QmFzZTY0LG9taXRQYXJhbTpvbWl0UGFyYW0sc2VhcmNoSW5DYXB0dXJlOnNlYXJjaEluQ2FwdHVyZSx0ZXh0U2VhcmNoUGxhY2VzOnRleHRTZWFyY2hQbGFjZXMsZ3JvdXBlZFRleHRTZWFyY2hQbGFjZXM6Z3JvdXBlZFRleHRTZWFyY2hQbGFjZXMsYWxsVGV4dFNlYXJjaFBsYWNlc0ZpbHRlcjphbGxUZXh0U2VhcmNoUGxhY2VzRmlsdGVyfTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5pc0Nocm9tZT1pc0Nocm9tZSxleHBvcnRzLmdldEV4dGVuc2lvblZlcnNpb249Z2V0RXh0ZW5zaW9uVmVyc2lvbixleHBvcnRzLmlzRXh0ZW5zaW9uSW5zdGFsbGVkPWlzRXh0ZW5zaW9uSW5zdGFsbGVkLGV4cG9ydHMuaXNDaHJvbWVFeHRlbnNpb249aXNDaHJvbWVFeHRlbnNpb24sZXhwb3J0cy5vcGVuTGluaz1vcGVuTGluayxleHBvcnRzLmluc3RhbGxFeHRlbnNpb249aW5zdGFsbEV4dGVuc2lvbixleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfQ29uZmlnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQ29uZmlnXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBpc0Nocm9tZSgpe3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3c/bnVsbDpcInVuZGVmaW5lZFwiIT10eXBlb2YgY2hyb21lfWZ1bmN0aW9uIGdldEV4dGVuc2lvblZlcnNpb24oKXt2YXIgZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQmJmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid3JhcGFwaS1leHRlbnNpb24taXMtaW5zdGFsbGVkXCIpO3JldHVybiBlP2UuZ2V0QXR0cmlidXRlKFwiZGF0YS12ZXJzaW9uXCIpOm51bGx9ZnVuY3Rpb24gaXNFeHRlbnNpb25JbnN0YWxsZWQoKXtyZXR1cm4hIWdldEV4dGVuc2lvblZlcnNpb24oKX1mdW5jdGlvbiBpc0Nocm9tZUV4dGVuc2lvbigpe3RyeXtyZXR1cm4gY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe3R5cGU6XCJkdW1teVwifSksITB9Y2F0Y2goZSl7cmV0dXJuITF9fWZ1bmN0aW9uIG9wZW5MaW5rKGUpe2lmKGlzQ2hyb21lRXh0ZW5zaW9uKCkpe2UucHJldmVudERlZmF1bHQoKTt2YXIgbj1lLnRhcmdldC5ocmVmO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXtjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZSh7dHlwZTpcImNocm9tZS50YWJzLmNyZWF0ZVwiLGFyZ3M6e3VybDpufX0sZSl9KX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9ZnVuY3Rpb24gaW5zdGFsbEV4dGVuc2lvbihlKXtlJiZlLnByZXZlbnREZWZhdWx0JiZlLnByZXZlbnREZWZhdWx0KCksY2hyb21lLndlYnN0b3JlLmluc3RhbGwoX0NvbmZpZy5kZWZhdWx0LnBsdWdpblVybCxmdW5jdGlvbigpe2NvbnNvbGUubG9nKFwiU3VjY2Vzc2Z1bCBpbnN0YWxsXCIpfSxmdW5jdGlvbihlKXtjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGluc3RhbGwgQ2hyb21lIGV4dGVuc2lvblwiKSxjb25zb2xlLmVycm9yKGUpfSl9dmFyIF9kZWZhdWx0PXtpc0Nocm9tZTppc0Nocm9tZSxnZXRFeHRlbnNpb25WZXJzaW9uOmdldEV4dGVuc2lvblZlcnNpb24saXNFeHRlbnNpb25JbnN0YWxsZWQ6aXNFeHRlbnNpb25JbnN0YWxsZWQsaXNDaHJvbWVFeHRlbnNpb246aXNDaHJvbWVFeHRlbnNpb24sb3Blbkxpbms6b3BlbkxpbmssaW5zdGFsbEV4dGVuc2lvbjppbnN0YWxsRXh0ZW5zaW9ufTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5kZWJ1Zz1kZWJ1ZyxleHBvcnRzLmRlZmF1bHQ9ZXhwb3J0cy5zdHJpcGVLZXk9ZXhwb3J0cy5wcm94eUFsaXZlUGluZ0ludGVydmFsPWV4cG9ydHMucGx1Z2luVVJMPWV4cG9ydHMud3NIb3N0PWV4cG9ydHMuaG9zdD1leHBvcnRzLmVudmlyb25tZW50PXZvaWQgMDt2YXIgc2hvdWxkSW5mZXJIb3N0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJlwiY2hyb21lLWV4dGVuc2lvbjpcIiE9PXdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCxlbnZpcm9ubWVudD1cInByb2R1Y3Rpb25cIjtleHBvcnRzLmVudmlyb25tZW50PWVudmlyb25tZW50O3ZhciBob3N0PXNob3VsZEluZmVySG9zdD9cIlwiLmNvbmNhdCh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wsXCIvL1wiKS5jb25jYXQod2luZG93LmxvY2F0aW9uLmhvc3QpOlwiaHR0cHM6Ly93cmFwYXBpLmNvbVwiO2V4cG9ydHMuaG9zdD1ob3N0O3ZhciB3c0hvc3Q9XCJ3c3M6Ly93cmFwYXBpLmNvbVwiO2V4cG9ydHMud3NIb3N0PXdzSG9zdDt2YXIgcGx1Z2luVVJMPVwiaHR0cHM6Ly9jaHJvbWUuZ29vZ2xlLmNvbS93ZWJzdG9yZS9kZXRhaWwvZm1uZGRrZm1sb2VuY2NhaGZpYWZsbmtwbmduZGthZm1cIjtleHBvcnRzLnBsdWdpblVSTD1wbHVnaW5VUkw7dmFyIHByb3h5QWxpdmVQaW5nSW50ZXJ2YWw9MWU0O2Z1bmN0aW9uIGRlYnVnKCl7fWV4cG9ydHMucHJveHlBbGl2ZVBpbmdJbnRlcnZhbD1wcm94eUFsaXZlUGluZ0ludGVydmFsO3ZhciBzdHJpcGVLZXk9XCJwa19saXZlX1htSDhua0xIcWk1QUhSQ1pJVWlxcVFiYVwiO2V4cG9ydHMuc3RyaXBlS2V5PXN0cmlwZUtleTt2YXIgX2RlZmF1bHQ9e2Vudmlyb25tZW50OmVudmlyb25tZW50LGhvc3Q6aG9zdCx3c0hvc3Q6d3NIb3N0LHBsdWdpblVSTDpwbHVnaW5VUkwscHJveHlBbGl2ZVBpbmdJbnRlcnZhbDpwcm94eUFsaXZlUGluZ0ludGVydmFsLGRlYnVnOmRlYnVnLHN0cmlwZUtleTpzdHJpcGVLZXl9O2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfaW1tdXRhYmxlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImltbXV0YWJsZVwiKSksX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIGRvdEZ1bmMoZSl7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsbD1uZXcgQXJyYXkodCksYT0wO2E8dDthKyspbFthXT1hcmd1bWVudHNbYV07cmV0dXJuIGxbMF09bFswXS5zcGxpdChcIi5cIiksdGhpc1tlXS5hcHBseSh0aGlzLGwpfX1mdW5jdGlvbiBhdXRvRnVuYyhlLHQpe3JldHVybiBmdW5jdGlvbihsKXtmb3IodmFyIGE9YXJndW1lbnRzLmxlbmd0aCx1PW5ldyBBcnJheShhPjE/YS0xOjApLHI9MTtyPGE7cisrKXVbci0xXT1hcmd1bWVudHNbcl07cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGw/dGhpc1t0XS5hcHBseSh0aGlzLFtsXS5jb25jYXQodSkpOnRoaXNbZV0uYXBwbHkodGhpcyxbbF0uY29uY2F0KHUpKX19ZnVuY3Rpb24gc3BsaXRNdXRhYmxlSW1tdXRhYmxlKGUsdCl7XCJzdHJpbmdcIj09dHlwZW9mIHQ/dD10LnNwbGl0KFwiLlwiKTpcIm51bWJlclwiPT10eXBlb2YgdCYmKHQ9W3RdKTtmb3IodmFyIGw9ZSxhPVtdLHU9W10scj0wO3IhPT10Lmxlbmd0aDtyKyspe2lmKF9pbW11dGFibGUuZGVmYXVsdC5JdGVyYWJsZS5pc0l0ZXJhYmxlKGwpKXthPXQuc2xpY2Uocik7YnJlYWt9dmFyIGk9dFtyXTt1LnB1c2goaSksbD1lW2ldfXJldHVybnttdXRhYmxlOnUsaW1tdXRhYmxlOmF9fWZ1bmN0aW9uIHNldE1peGVkKGUsdCxsLGEpe3ZhciB1PXNwbGl0TXV0YWJsZUltbXV0YWJsZShlLHQpLHI9ISF1Lm11dGFibGUubGVuZ3RoLGk9ISF1LmltbXV0YWJsZS5sZW5ndGgsbj1yP19sb2Rhc2guZGVmYXVsdC5nZXQoZSx1Lm11dGFibGUpOmU7aWYoKGk/bi5nZXRJbih1LmltbXV0YWJsZSk6bik9PT1sKXJldHVybiBlO3ZhciBtPWk/bi5zZXRJbih1LmltbXV0YWJsZSxsKTpsO2lmKHIpe3ZhciBvPVtdO2U9X2xvZGFzaC5kZWZhdWx0LmNsb25lKGUpO2Zvcih2YXIgZD0wO2QhPT11Lm11dGFibGUubGVuZ3RoLTE7ZCsrKXt2YXIgcz11Lm11dGFibGVbZF07by5wdXNoKHMpLF9sb2Rhc2guZGVmYXVsdC5zZXQoZSxvLF9sb2Rhc2guZGVmYXVsdC5jbG9uZShfbG9kYXNoLmRlZmF1bHQuZ2V0KGUsbykpKX1yZXR1cm4gYT9fbG9kYXNoLmRlZmF1bHQuc2V0V2l0aChlLHUubXV0YWJsZSxtLGEpOl9sb2Rhc2guZGVmYXVsdC5zZXQoZSx1Lm11dGFibGUsbSksZX1yZXR1cm4gbX1mdW5jdGlvbiBnZXRNaXhlZChlLHQpe3ZhciBsPXNwbGl0TXV0YWJsZUltbXV0YWJsZShlLHQpLGE9ISFsLm11dGFibGUubGVuZ3RoLHU9ISFsLmltbXV0YWJsZS5sZW5ndGgscj1hP19sb2Rhc2guZGVmYXVsdC5nZXQoZSxsLm11dGFibGUpOmU7cmV0dXJuIHU/ci5nZXRJbihsLmltbXV0YWJsZSk6cn1mdW5jdGlvbiBkZWxldGVNaXhlZChlLHQpe3ZhciBsPXNwbGl0TXV0YWJsZUltbXV0YWJsZShlLHQpLGE9ISFsLm11dGFibGUubGVuZ3RoLHU9ISFsLmltbXV0YWJsZS5sZW5ndGgscj1hP19sb2Rhc2guZGVmYXVsdC5nZXQoZSxsLm11dGFibGUpOmUsaT11P3IuZGVsZXRlSW4obC5pbW11dGFibGUpOnI7aWYoYSl7dmFyIG49W107ZT1fbG9kYXNoLmRlZmF1bHQuY2xvbmUoZSk7Zm9yKHZhciBtPTA7bSE9PWwubXV0YWJsZS5sZW5ndGgtMTttKyspe3ZhciBvPWwubXV0YWJsZVttXTtuLnB1c2gobyksX2xvZGFzaC5kZWZhdWx0LnNldChlLG4sX2xvZGFzaC5kZWZhdWx0LmNsb25lKF9sb2Rhc2guZGVmYXVsdC5nZXQoZSxuKSkpfWlmKHUpX2xvZGFzaC5kZWZhdWx0LnNldChlLGwubXV0YWJsZSxpKTtlbHNle3ZhciBkPWwubXV0YWJsZS5zbGljZSgwLC0xKSxzPTAhPT1kLmxlbmd0aD9fbG9kYXNoLmRlZmF1bHQuZ2V0KGUsZCk6ZSxiPWwubXV0YWJsZVtsLm11dGFibGUubGVuZ3RoLTFdO3MgaW5zdGFuY2VvZiBBcnJheT9zLnNwbGljZShiLDEpOmRlbGV0ZSBzW2JdfXJldHVybiBlfXJldHVybiBpfV9pbW11dGFibGUuZGVmYXVsdC5JdGVyYWJsZS5wcm90b3R5cGUuZ2V0RG90PWRvdEZ1bmMoXCJnZXRJblwiKSxfaW1tdXRhYmxlLmRlZmF1bHQuSXRlcmFibGUucHJvdG90eXBlLnNldERvdD1kb3RGdW5jKFwic2V0SW5cIiksX2ltbXV0YWJsZS5kZWZhdWx0Lkl0ZXJhYmxlLnByb3RvdHlwZS5nZXRBdXRvPWF1dG9GdW5jKFwiZ2V0SW5cIixcImdldERvdFwiKSxfaW1tdXRhYmxlLmRlZmF1bHQuSXRlcmFibGUucHJvdG90eXBlLnNldEF1dG89YXV0b0Z1bmMoXCJzZXRJblwiLFwic2V0RG90XCIpLF9pbW11dGFibGUuZGVmYXVsdC5pc0ltbXV0YWJsZT1faW1tdXRhYmxlLmRlZmF1bHQuSXRlcmFibGUuaXNJdGVyYWJsZSxfaW1tdXRhYmxlLmRlZmF1bHQudG9KUz1mdW5jdGlvbihlKXtyZXR1cm4gX2ltbXV0YWJsZS5kZWZhdWx0LmlzSW1tdXRhYmxlKGUpP2UudG9KUygpOmV9LF9pbW11dGFibGUuZGVmYXVsdC5zZXRNaXhlZD1zZXRNaXhlZCxfaW1tdXRhYmxlLmRlZmF1bHQuZ2V0TWl4ZWQ9Z2V0TWl4ZWQsX2ltbXV0YWJsZS5kZWZhdWx0LmRlbGV0ZU1peGVkPWRlbGV0ZU1peGVkO3ZhciBfZGVmYXVsdD1faW1tdXRhYmxlLmRlZmF1bHQ7ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO3JlcXVpcmUoXCJiYWJlbC1wb2x5ZmlsbFwiKTt2YXIgX3JlYWN0PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKSxfcmVhY3REb209X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3QtZG9tXCIpKSxfUmVxdWVzdENhcHR1cmVNYWluUGFnZT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi90ZW1wbGF0ZXMvUmVxdWVzdENhcHR1cmVNYWluUGFnZVwiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19cmVxdWlyZShcImVzNi1wcm9taXNlXCIpLnBvbHlmaWxsKCkscmVxdWlyZShcImVzNi1vYmplY3QtYXNzaWduXCIpLnBvbHlmaWxsKCksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixmdW5jdGlvbigpe2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVxdWVzdC1jYXB0dXJlLW1haW5cIikmJl9yZWFjdERvbS5kZWZhdWx0LnJlbmRlcihfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9SZXF1ZXN0Q2FwdHVyZU1haW5QYWdlLmRlZmF1bHQpLGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVxdWVzdC1jYXB0dXJlLW1haW5cIikpfSk7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5jb25uZWN0PWNvbm5lY3QsZXhwb3J0cy5hbGxvY2F0ZT1hbGxvY2F0ZSxleHBvcnRzLnVwZGF0ZUxhc3RQcm94eUludGVyYWN0aW9uPXVwZGF0ZUxhc3RQcm94eUludGVyYWN0aW9uLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9Db25maWc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9Db25maWdcIikpLF9BeGlvcz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0F4aW9zXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBjb25uZWN0KGUsdCxvLGEpe3ZhciByPW5ldyBXZWJTb2NrZXQoXCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0LndzSG9zdCxcIi9yZXF1ZXN0cy9cIikuY29uY2F0KGUpKTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSxuKXtyLm9ubWVzc2FnZT1mdW5jdGlvbihhKXt0cnl7dmFyIHI9YS5kYXRhLGM9SlNPTi5wYXJzZShyKTtpZihcImNhcHR1cmVcIj09PWMudHlwZSl7dmFyIHU9Yy5kYXRhO3QodSl9ZWxzZSBpZihcInN0b3BcIj09PWMudHlwZSlvKCk7ZWxzZXtpZihcInN0YXR1c1wiIT09Yy50eXBlKXRocm93IG5ldyBFcnJvcihcIldlIHJlY2VpdmVkIGFuIHVucmVjb2duaXplZCByZXNwb25zZSB0eXBlIGZyb20gdGhlIFdlYlNvY2tldCBzZXJ2ZXJcIik7ZShjLmRhdGEpfX1jYXRjaChlKXtlLnJlc3BvbnNlPWEsbihlKX19LHIub25jbG9zZT1hLHIub25lcnJvcj1hfSl9ZnVuY3Rpb24gYWxsb2NhdGUoKXtyZXR1cm4oMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L3Byb3h5QWxsb2NhdGlvblwiKSxtZXRob2Q6XCJQT1NUXCJ9KX1mdW5jdGlvbiB1cGRhdGVMYXN0UHJveHlJbnRlcmFjdGlvbigpe3JldHVybigwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvcHJveHlBbGxvY2F0aW9uL3VwZGF0ZUxhc3RQcm94eUludGVyYWN0aW9uXCIpLG1ldGhvZDpcIlBPU1RcIn0pfXZhciBfZGVmYXVsdD17Y29ubmVjdDpjb25uZWN0LGFsbG9jYXRlOmFsbG9jYXRlLHVwZGF0ZUxhc3RQcm94eUludGVyYWN0aW9uOnVwZGF0ZUxhc3RQcm94eUludGVyYWN0aW9ufTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5kZWZhdWx0PXZvaWQgMDt2YXIgX1JlcXVlc3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vLi4vY29tbW9uL1JlcXVlc3RcIikpLF9zYW5kYm94PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vc2FuZGJveFwiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19dmFyIF9kZWZhdWx0PSgwLF9SZXF1ZXN0LmRlZmF1bHQpKF9zYW5kYm94LmRlZmF1bHQpO2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNldENhcHR1cmU9c2V0Q2FwdHVyZSxleHBvcnRzLmdldENhcHR1cmU9Z2V0Q2FwdHVyZSxleHBvcnRzLmdldENhcHR1cmVzPWdldENhcHR1cmVzLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9BeGlvcz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0F4aW9zXCIpKSxfQ29uZmlnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQ29uZmlnXCIpKSxfVG9rZW49X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9Ub2tlblwiKSksX0FqYXg9cmVxdWlyZShcIi4vQWpheFwiKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZSx0LHIsbixhLHUsbyl7dHJ5e3ZhciBzPWVbdV0obykscD1zLnZhbHVlfWNhdGNoKGUpe3JldHVybiB2b2lkIHIoZSl9cy5kb25lP3QocCk6UHJvbWlzZS5yZXNvbHZlKHApLnRoZW4obixhKX1mdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihlKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD10aGlzLHI9YXJndW1lbnRzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuLGEpe3ZhciB1PWUuYXBwbHkodCxyKTtmdW5jdGlvbiBvKGUpe2FzeW5jR2VuZXJhdG9yU3RlcCh1LG4sYSxvLHMsXCJuZXh0XCIsZSl9ZnVuY3Rpb24gcyhlKXthc3luY0dlbmVyYXRvclN0ZXAodSxuLGEsbyxzLFwidGhyb3dcIixlKX1vKHZvaWQgMCl9KX19ZnVuY3Rpb24gc2V0Q2FwdHVyZShlLHQpe3JldHVybiBfc2V0Q2FwdHVyZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gX3NldENhcHR1cmUoKXtyZXR1cm4oX3NldENhcHR1cmU9X2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gZSh0LHIpe3ZhciBuLGE7cmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiBlLm5leHQ9MixfVG9rZW4uZGVmYXVsdC5nZXQoKTtjYXNlIDI6cmV0dXJuIG49ZS5zZW50LGE9bj9cIj90b2tlbj1cIi5jb25jYXQobik6XCJcIixlLmFicnVwdChcInJldHVyblwiLCgwLF9BeGlvcy5kZWZhdWx0KSh7dXJsOlwiXCIuY29uY2F0KF9Db25maWcuZGVmYXVsdC5ob3N0LFwiL2FqYXgvY2FwdHVyZXNcIikuY29uY2F0KGEpLG1ldGhvZDpcIlBPU1RcIixkYXRhOntuYW1lOnQsZGF0YTpyfX0pLnRoZW4oX0FqYXgucHJvY2Vzc1Jlc3BvbnNlKSk7Y2FzZSA1OmNhc2VcImVuZFwiOnJldHVybiBlLnN0b3AoKX19LGUpfSkpKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gZ2V0Q2FwdHVyZShlKXtyZXR1cm4gX2dldENhcHR1cmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIF9nZXRDYXB0dXJlKCl7cmV0dXJuKF9nZXRDYXB0dXJlPV9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIGUodCl7dmFyIHIsbjtyZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6cmV0dXJuIGUubmV4dD0yLF9Ub2tlbi5kZWZhdWx0LmdldCgpO2Nhc2UgMjpyZXR1cm4gcj1lLnNlbnQsbj1yP1wiP3Rva2VuPVwiLmNvbmNhdChyKTpcIlwiLGUuYWJydXB0KFwicmV0dXJuXCIsKDAsX0F4aW9zLmRlZmF1bHQpKHt1cmw6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYWpheC9jYXB0dXJlcy9cIikuY29uY2F0KHQpLmNvbmNhdChuKSxtZXRob2Q6XCJHRVRcIn0pLnRoZW4oX0FqYXgucHJvY2Vzc1Jlc3BvbnNlKSk7Y2FzZSA1OmNhc2VcImVuZFwiOnJldHVybiBlLnN0b3AoKX19LGUpfSkpKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gZ2V0Q2FwdHVyZXMoKXtyZXR1cm4gX2dldENhcHR1cmVzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBfZ2V0Q2FwdHVyZXMoKXtyZXR1cm4oX2dldENhcHR1cmVzPV9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIGUoKXt2YXIgdCxyO3JldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDpyZXR1cm4gZS5uZXh0PTIsX1Rva2VuLmRlZmF1bHQuZ2V0KCk7Y2FzZSAyOnJldHVybiB0PWUuc2VudCxyPXQ/XCI/dG9rZW49XCIuY29uY2F0KHQpOlwiXCIsZS5hYnJ1cHQoXCJyZXR1cm5cIiwoMCxfQXhpb3MuZGVmYXVsdCkoe3VybDpcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9hamF4L2NhcHR1cmVzXCIpLmNvbmNhdChyKSxtZXRob2Q6XCJHRVRcIn0pLnRoZW4oX0FqYXgucHJvY2Vzc1Jlc3BvbnNlKSk7Y2FzZSA1OmNhc2VcImVuZFwiOnJldHVybiBlLnN0b3AoKX19LGUpfSkpKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dmFyIF9kZWZhdWx0PXtzZXRDYXB0dXJlOnNldENhcHR1cmUsZ2V0Q2FwdHVyZTpnZXRDYXB0dXJlLGdldENhcHR1cmVzOmdldENhcHR1cmVzfTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zZXQ9c2V0LGV4cG9ydHMuZ2V0PWdldCxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfQ2hyb21lPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQ2hyb21lXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBzZXQoZSl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe19DaHJvbWUuZGVmYXVsdC5pc0Nocm9tZUV4dGVuc2lvbigpP2Nocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHt0eXBlOlwiY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0XCIsYXJnczp7dG9rZW46ZX19LHQpOnQobnVsbCl9KX1mdW5jdGlvbiBnZXQoKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSl7X0Nocm9tZS5kZWZhdWx0LmlzQ2hyb21lRXh0ZW5zaW9uKCk/Y2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe3R5cGU6XCJjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXRcIixhcmdzOlwidG9rZW5cIn0sZnVuY3Rpb24odCl7dCYmdC50b2tlbj9lKHQudG9rZW4pOmUobnVsbCl9KTplKG51bGwpfSl9dmFyIF9kZWZhdWx0PXtzZXQ6c2V0LGdldDpnZXR9O2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9ZXhwb3J0cy5uZXh0U3RlcD1leHBvcnRzLnN0ZXBzPXZvaWQgMDt2YXIgc3RlcHM9W1wicHJlc3NUb1JlY29yZFwiLFwiY2hvb3NlQ2FwdHVyZVwiLFwic2F2ZUNhcHR1cmVcIixcImdvVG9JbnB1dHNUYWJcIixcImVkaXRRdWVyeUFuZFBvc3RcIixcImVkaXRTYXZlSW5wdXRcIixcIndhaXRpbmdGb3JTYXZlSW5wdXRcIixcImdvVG9PdXRwdXRzVGFiXCIsXCJhZGRUZXN0Q2FzZVwiLFwiZWRpdFRlc3RDYXNlSW5wdXRzXCIsXCJlZGl0VGVzdENhc2VTdGF0ZVRva2VuXCIsXCJydW5UZXN0XCIsXCJzYXZlVGVzdENhc2VcIixcInNlbGVjdFRlc3RDYXNlXCIsXCJhZGRPdXRwdXRTY2VuYXJpb1wiLFwibmFtZU91dHB1dFNjZW5hcmlvXCIsXCJjcmVhdGVPdXRwdXRcIixcInNhdmVPdXRwdXRTY2VuYXJpb1wiLFwiZ29Ub1ZpZXdUYWJcIixcImRvbmVcIl07ZXhwb3J0cy5zdGVwcz1zdGVwczt2YXIgbmV4dFN0ZXA9e307ZXhwb3J0cy5uZXh0U3RlcD1uZXh0U3RlcDtmb3IodmFyIGk9MDtpIT09c3RlcHMubGVuZ3RoLTE7aSsrKW5leHRTdGVwW3N0ZXBzW2ldXT1zdGVwc1tpKzFdO3ZhciBfZGVmYXVsdD17c3RlcHM6c3RlcHMsbmV4dFN0ZXA6bmV4dFN0ZXB9O2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNvcnRBUElFbGVtZW50cz1zb3J0QVBJRWxlbWVudHMsZXhwb3J0cy5hcnJheUJ1ZmZlclRvQmFzZTY0PWFycmF5QnVmZmVyVG9CYXNlNjQsZXhwb3J0cy5nZXREZWZhdWx0QmFzZUFQSUVsZW1lbnQ9Z2V0RGVmYXVsdEJhc2VBUElFbGVtZW50LGV4cG9ydHMuZ2V0RGVmYXVsdEFQSUVsZW1lbnQ9Z2V0RGVmYXVsdEFQSUVsZW1lbnQsZXhwb3J0cy5nZXRJbml0aWFsQVBJRWxlbWVudD1nZXRJbml0aWFsQVBJRWxlbWVudCxleHBvcnRzLmdldERlZmF1bHRFeHRyYWN0b3I9Z2V0RGVmYXVsdEV4dHJhY3RvcixleHBvcnRzLmdldERlZmF1bHRGaWxlSW5wdXRWYWx1ZT1nZXREZWZhdWx0RmlsZUlucHV0VmFsdWUsZXhwb3J0cy5nZXREZWZhdWx0SW5wdXRTcGVjPWdldERlZmF1bHRJbnB1dFNwZWMsZXhwb3J0cy5nZXREZWZhdWx0UG9zdERhdGE9Z2V0RGVmYXVsdFBvc3REYXRhLGV4cG9ydHMuZ2V0RGVmYXVsdE5ld1BhcmFtPWdldERlZmF1bHROZXdQYXJhbSxleHBvcnRzLnNvcnRWZXJzaW9ucz1zb3J0VmVyc2lvbnMsZXhwb3J0cy5nZXREZWZhdWx0T3V0cHV0U2NlbmFyaW89Z2V0RGVmYXVsdE91dHB1dFNjZW5hcmlvLGV4cG9ydHMuZ2V0RGVmYXVsdFRlc3RDYXNlPWdldERlZmF1bHRUZXN0Q2FzZSxleHBvcnRzLmdldERlZmF1bHRFeHRyYWN0b3JUZXN0Q2FzZT1nZXREZWZhdWx0RXh0cmFjdG9yVGVzdENhc2UsZXhwb3J0cy5nZXREZWZhdWx0Q2xlYW51cD1nZXREZWZhdWx0Q2xlYW51cCxleHBvcnRzLmdldERlZmF1bHRQb3N0UHJvY2Vzcz1nZXREZWZhdWx0UG9zdFByb2Nlc3MsZXhwb3J0cy5nZXREZWZhdWx0RXh0cmFjdG9yUG9zdFByb2Nlc3M9Z2V0RGVmYXVsdEV4dHJhY3RvclBvc3RQcm9jZXNzLGV4cG9ydHMudXBncmFkZUFQSUVsZW1lbnQ9dXBncmFkZUFQSUVsZW1lbnQsZXhwb3J0cy5nZXREZWZhdWx0RWRnZUlucHV0PWdldERlZmF1bHRFZGdlSW5wdXQsZXhwb3J0cy5nZXREZWZhdWx0RWRnZVNlcmlhbGl6ZWRGb3JtPWdldERlZmF1bHRFZGdlU2VyaWFsaXplZEZvcm0sZXhwb3J0cy5maW5kVW51c2VkTmFtZT1maW5kVW51c2VkTmFtZSxleHBvcnRzLm5vcm1hbGl6ZU9wdGlvbnM9bm9ybWFsaXplT3B0aW9ucyxleHBvcnRzLmRlZmF1bHQ9ZXhwb3J0cy5nZXREZWZhdWx0RXJyb3I9ZXhwb3J0cy5nZXREZWZhdWx0Q29tcG9zaXRlQVBJRWxlbWVudD1leHBvcnRzLkNvbXBvc2l0ZUdyYXBoPWV4cG9ydHMuZ2V0RGVmYXVsdENvbXBvc2l0ZUdyYXBoPWV4cG9ydHMuQ29tcG9zaXRlSW5wdXQ9ZXhwb3J0cy5nZXREZWZhdWx0Q29tcG9zaXRlSW5wdXQ9ZXhwb3J0cy5Db21wb3NpdGVFZGdlPWV4cG9ydHMuZ2V0RGVmYXVsdENvbXBvc2l0ZUVkZ2U9ZXhwb3J0cy5FZGdlSW5wdXQ9ZXhwb3J0cy5Db21wb3NpdGVWZXJ0ZXg9ZXhwb3J0cy5nZXREZWZhdWx0Q29tcG9zaXRlVmVydGV4PWV4cG9ydHMuZ2V0RGVmYXVsdFZlcnRleFBvc3RQcm9jZXNzPWV4cG9ydHMuZ2V0RGVmYXVsdEJyYW5jaGluZ0Z1bmN0aW9uPWV4cG9ydHMuZGVmYXVsdEV4dHJhY3RvclBvc3RQcm9jZXNzU2NyaXB0PWV4cG9ydHMuZGVmYXVsdFBvc3RQcm9jZXNzU2NyaXB0PWV4cG9ydHMuZ2V0RGVmYXVsdElucHV0SGVscGVyU2NyaXB0Q29kZT1leHBvcnRzLklucHV0SGVscGVyU2NyaXB0PWV4cG9ydHMuZ2V0RGVmYXVsdElucHV0SGVscGVyU2NyaXB0PWV4cG9ydHMuSW5wdXQ9ZXhwb3J0cy5nZXREZWZhdWx0SW5wdXQ9ZXhwb3J0cy5Qb3N0RGF0YT1leHBvcnRzLklucHV0U3BlYz1leHBvcnRzLkZpbGVJbnB1dFZhbHVlPWV4cG9ydHMuZ2V0RnVsbE5hbWVXaXRoVXNlcm5hbWU9ZXhwb3J0cy5nZXRGdWxsTmFtZT1leHBvcnRzLmRvTm90aGluZz1leHBvcnRzLmFwaUlucHV0VHlwZXM9ZXhwb3J0cy5zaXplVG9UZXh0PXZvaWQgMDt2YXIgX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpLF91cmlqcz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJ1cmlqc1wiKSksX0ltbXV0YWJsZT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0ltbXV0YWJsZVwiKSksX1JlcXVlc3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9SZXF1ZXN0XCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBfdHlwZW9mKGUpe3JldHVybihfdHlwZW9mPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBvd25LZXlzKGUsdCl7dmFyIGE9T2JqZWN0LmtleXMoZSk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTt0JiYocj1yLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpLmVudW1lcmFibGV9KSksYS5wdXNoLmFwcGx5KGEscil9cmV0dXJuIGF9ZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgYT1udWxsIT1hcmd1bWVudHNbdF0/YXJndW1lbnRzW3RdOnt9O3QlMj9vd25LZXlzKE9iamVjdChhKSwhMCkuZm9yRWFjaChmdW5jdGlvbih0KXtfZGVmaW5lUHJvcGVydHkoZSx0LGFbdF0pfSk6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM/T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhhKSk6b3duS2V5cyhPYmplY3QoYSkpLmZvckVhY2goZnVuY3Rpb24odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsdCkpfSl9cmV0dXJuIGV9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KGUsdCxhKXtyZXR1cm4gdCBpbiBlP09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3ZhbHVlOmEsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTplW3RdPWEsZX12YXIgc2l6ZVRvVGV4dD1mdW5jdGlvbihlKXt2YXIgdCxhPVwiXCI7cmV0dXJuIGU+MWU2Pyh0PU1hdGgucm91bmQoZS8xZTYqMTApLzEwLGE9XCIgTVwiKTplPjFlMz8odD1NYXRoLnJvdW5kKGUvMWUzKjEwKS8xMCxhPVwiIEtcIik6KHQ9ZSxhPVwiIEJcIiksdC50b1N0cmluZygpK2F9O2V4cG9ydHMuc2l6ZVRvVGV4dD1zaXplVG9UZXh0O3ZhciBhcGlJbnB1dFR5cGVzPXtjb25zdGFudDpcIkNvbnN0YW50XCIsdmFyaWFibGU6XCJUZXh0IEFQSSBpbnB1dFwiLGZpbGU6XCJGaWxlIEFQSSBpbnB1dFwifTtleHBvcnRzLmFwaUlucHV0VHlwZXM9YXBpSW5wdXRUeXBlczt2YXIgZG9Ob3RoaW5nPWZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX07ZXhwb3J0cy5kb05vdGhpbmc9ZG9Ob3RoaW5nO3ZhciBnZXRGdWxsTmFtZT1mdW5jdGlvbihlKXtyZXR1cm5cIlwiLmNvbmNhdChlLnJlcG9zaXRvcnksXCIvXCIpLmNvbmNhdChlLm5hbWUpfTtleHBvcnRzLmdldEZ1bGxOYW1lPWdldEZ1bGxOYW1lO3ZhciBnZXRGdWxsTmFtZVdpdGhVc2VybmFtZT1mdW5jdGlvbihlKXtyZXR1cm5cIlwiLmNvbmNhdChlLnVzZXJuYW1lLFwiL1wiKS5jb25jYXQoZS5yZXBvc2l0b3J5LFwiL1wiKS5jb25jYXQoZS5uYW1lKX07ZnVuY3Rpb24gY29tcGFyZUFQSUVsZW1lbnRzKGUsdCl7cmV0dXJuIGUucmVwb3NpdG9yeT09PXQucmVwb3NpdG9yeT9lLm5hbWU8dC5uYW1lPy0xOjE6ZS5yZXBvc2l0b3J5PHQucmVwb3NpdG9yeT8tMToxfWZ1bmN0aW9uIHNvcnRBUElFbGVtZW50cyhlKXtyZXR1cm4gZS5zb3J0KGNvbXBhcmVBUElFbGVtZW50cyl9ZnVuY3Rpb24gYXJyYXlCdWZmZXJUb0Jhc2U2NChlKXtmb3IodmFyIHQ9XCJcIixhPW5ldyBVaW50OEFycmF5KGUpLHI9YS5ieXRlTGVuZ3RoLG89MDtvPHI7bysrKXQrPVN0cmluZy5mcm9tQ2hhckNvZGUoYVtvXSk7cmV0dXJuIGJ0b2EodCl9ZnVuY3Rpb24gZ2V0RGVmYXVsdEJhc2VBUElFbGVtZW50KCl7cmV0dXJue3VzZXJuYW1lOlwiXCIscmVwb3NpdG9yeTpcIlwiLG5hbWU6XCJcIixkZXNjcmlwdGlvbjpcIlwiLHJlYWRtZTpcIlwiLHZlcnNpb246XCIwLjAuMFwiLG1ham9yVmVyc2lvbjowLG1pbm9yVmVyc2lvbjowLGRvdFZlcnNpb246MCxwdWJsaXNoZWQ6ITEsbWFpbjohMCxpc093bjohMCx1cGRhdGVkQXQ6bnVsbCxzdG9yZWRSZXNwb25zZUNvdW50OjB9fWZ1bmN0aW9uIGdldERlZmF1bHRBUElFbGVtZW50KCl7cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5hc3NpZ24oZ2V0RGVmYXVsdEJhc2VBUElFbGVtZW50KCkse3R5cGU6XCJub3JtYWxcIixpbnB1dDpnZXREZWZhdWx0SW5wdXRTcGVjKCksb3V0cHV0OntzY2VuYXJpb3M6W119LHRlc3RDYXNlczpbXSxwb3N0UHJvY2VzczpnZXREZWZhdWx0UG9zdFByb2Nlc3MoKX0pfWV4cG9ydHMuZ2V0RnVsbE5hbWVXaXRoVXNlcm5hbWU9Z2V0RnVsbE5hbWVXaXRoVXNlcm5hbWU7dmFyIERFRkFVTFRfVVNFUl9BR0VOVD1cIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS82MS4wLjMxNjMuMTAwIFNhZmFyaS81MzcuMzZcIjtmdW5jdGlvbiBnZXRJbml0aWFsQVBJRWxlbWVudCgpe3ZhciBlPWdldERlZmF1bHRBUElFbGVtZW50KCk7ZS5pbnB1dC51cmw9XCJodHRwczovL25ld3MueWNvbWJpbmF0b3IuY29tL1wiLGUuaW5wdXQuaGVhZGVycy5wdXNoKGdldERlZmF1bHROZXdQYXJhbShcIlVzZXItQWdlbnRcIixcInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yP25hdmlnYXRvci51c2VyQWdlbnQ6REVGQVVMVF9VU0VSX0FHRU5UKSk7dmFyIHQ9Z2V0RGVmYXVsdE91dHB1dFNjZW5hcmlvKCk7cmV0dXJuIHQubmFtZT1cIkRlZmF1bHRcIixlLm91dHB1dC5zY2VuYXJpb3M9W3RdLGV9dmFyIGluaXRpYWxUZXN0Q2FzZVJlc3BvbnNlPSc8IURPQ1RZUEUgaHRtbD5cXG48aHRtbD5cXG4gIDxoZWFkPlxcbiAgICA8dGl0bGU+V2VsY29tZSB0byB0aGUgV3JhcEFQSSBleHRyYWN0b3I8L3RpdGxlPlxcbiAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIj5cXG5cXG4gICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIHR5cGU9XCJ0ZXh0L2Nzc1wiIGhyZWY9XCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9Um9ib3RvXCI+XFxuICAgIDxzdHlsZT5cXG4gICAgICBoMSB7IGZvbnQtZmFtaWx5OiBSb2JvdG8sXCJHaWxsIFNhbnNcIixcIkdpbGwgU2FucyBNVFwiLENhbGlicmksc2Fucy1zZXJpZjsgfVxcbiAgICAgIGJvZHkgeyBwYWRkaW5nLWxlZnQ6IDEwcHg7IHBhZGRpbmctcmlnaHQ6IDEwcHg7IGZvbnQtZmFtaWx5OiBSb2JvdG8sSGVsdmV0aWNhLHNhbnMtc2VyaWY7IH1cXG4gICAgPC9zdHlsZT5cXG4gIDwvaGVhZD5cXG4gIDxib2R5PlxcbiAgICA8aDE+V2VsY29tZSB0byB0aGUgV3JhcEFQSSBFeHRyYWN0b3IhPC9oMT5cXG4gICAgPHA+VG8gc3RhcnQgdXNpbmcgdGhlIFdyYXBBUEkgRXh0cmFjdG9yOjwvcD5cXG4gICAgPG9sPlxcbiAgICAgIDxsaT5Td2l0Y2ggb3ZlciB0byBcIkNvZGUgdmlld1wiLCBhbmQgcGFzdGUgdGhlIEhUTUwgb2YgYSBwYWdlIHlvdVxcJ2QgbGlrZSB0byBleHRyYWN0IGRhdGEgZnJvbS48L2xpPlxcbiAgICAgIDxsaT5FZGl0IHRoZSBVUkwgYmFyIHRvIGJlIHRoZSBwYWdlIHdoZXJlIHlvdSBnb3QgdGhlIEhUTUwgZnJvbSAoc28gdGhhdCB3ZSBnaXZlIHlvdSB0aGUgZnVsbCBwcmV0dHkgcGFnZSBieSBsb2FkaW5nIGl0cyBzdHlsZXNoZWV0cykuPC9saT5cXG4gICAgICA8bGk+QWRkIFwiT3V0cHV0c1wiIGJ5IGNsaWNraW5nIG9uIHRoZSBwYXJ0cyBvZiB0aGUgcGFnZSB5b3VcXCdkIGxpa2UgdG8gZXh0cmFjdC48L2xpPlxcbiAgICA8L29sPlxcbiAgICA8cD5Zb3UgY2FuIHBhc3RlIGluIG11bHRpcGxlIHN1Y2ggXCJ0ZXN0IGNhc2VzXCIgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGV4dHJhY3Rpb24gcnVsZXMgeW91IGRlZmluZWQgd29yayBmb3IgYWxsIHRoZSBkaWZmZXJlbnQgcGFnZXMgeW91IG1pZ2h0IHNlZS48L3A+XFxuICA8L2JvZHk+XFxuPC9odG1sPlxcbic7ZnVuY3Rpb24gZ2V0RGVmYXVsdEV4dHJhY3Rvcigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmFzc2lnbihnZXREZWZhdWx0QmFzZUFQSUVsZW1lbnQoKSx7dHlwZTpcImV4dHJhY3RvclwiLG91dHB1dDp7c2NlbmFyaW9zOltnZXREZWZhdWx0T3V0cHV0U2NlbmFyaW8oe25hbWU6XCJEZWZhdWx0XCJ9KV19LHRlc3RDYXNlczpbZ2V0RGVmYXVsdEV4dHJhY3RvclRlc3RDYXNlKHtuYW1lOlwiTmV3IHRlc3QgY2FzZVwiLGJvZHk6ZS5ib2R5fHxpbml0aWFsVGVzdENhc2VSZXNwb25zZSx1cmw6ZS51cmx9KV0scG9zdFByb2Nlc3M6Z2V0RGVmYXVsdEV4dHJhY3RvclBvc3RQcm9jZXNzKCl9KX1mdW5jdGlvbiBnZXREZWZhdWx0RmlsZUlucHV0VmFsdWUoKXtyZXR1cm57Y29udGVudDpudWxsLG1pbWVUeXBlOm51bGwsZmlsZU5hbWU6XCJcIn19dmFyIEZpbGVJbnB1dFZhbHVlPV9JbW11dGFibGUuZGVmYXVsdC5SZWNvcmQoZ2V0RGVmYXVsdEZpbGVJbnB1dFZhbHVlKCkpO2Z1bmN0aW9uIGdldERlZmF1bHRBdXRob3JpemF0aW9uKCl7cmV0dXJue21vZGU6bnVsbCxiYXNpYzp7dXNlcm5hbWU6XCJcIixwYXNzd29yZDpcIlwifSxudGxtOnt1c2VybmFtZTpcIlwiLHBhc3N3b3JkOlwiXCIsZG9tYWluOlwiXCJ9fX1mdW5jdGlvbiBnZXREZWZhdWx0SW5wdXRTcGVjKCl7cmV0dXJue3VybDpcIlwiLGhlYWRlcnM6W10sbWV0aG9kOlwiR0VUXCIscG9zdERhdGE6Z2V0RGVmYXVsdFBvc3REYXRhKCkscXVlcnlTdHJpbmc6W10sYXV0aG9yaXphdGlvbjpnZXREZWZhdWx0QXV0aG9yaXphdGlvbigpLGlucHV0czp7fSxzY3JpcHQ6bnVsbH19ZXhwb3J0cy5GaWxlSW5wdXRWYWx1ZT1GaWxlSW5wdXRWYWx1ZTt2YXIgSW5wdXRTcGVjPV9JbW11dGFibGUuZGVmYXVsdC5SZWNvcmQoZ2V0RGVmYXVsdElucHV0U3BlYygpKTtmdW5jdGlvbiBnZXREZWZhdWx0UG9zdERhdGEoKXtyZXR1cm57dHlwZTpcInBhcmFtc1wiLGRhdGE6W10saW5wdXREYXRhOm51bGx9fWV4cG9ydHMuSW5wdXRTcGVjPUlucHV0U3BlYzt2YXIgUG9zdERhdGE9X0ltbXV0YWJsZS5kZWZhdWx0LlJlY29yZChnZXREZWZhdWx0UG9zdERhdGEoKSk7ZnVuY3Rpb24gZ2V0RGVmYXVsdE5ld1BhcmFtKGUsdCl7cmV0dXJue3R5cGU6XCJuZXdcIixuYW1lOmV8fFwiXCIsdmFsdWU6dHx8XCJcIix2YXJOYW1lOlwiZmlsZVwifX1leHBvcnRzLlBvc3REYXRhPVBvc3REYXRhO3ZhciBnZXREZWZhdWx0SW5wdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5hc3NpZ24oe25hbWU6bnVsbCx0eXBlOlwidmFyaWFibGVcIixyZXF1aXJlZDohMCxkZWZhdWx0RW5hYmxlZDohMSxkZWZhdWx0OlwiXCIsZG9jdW1lbnRhdGlvbjpcIlwifSxlKX07ZXhwb3J0cy5nZXREZWZhdWx0SW5wdXQ9Z2V0RGVmYXVsdElucHV0O3ZhciBJbnB1dD1fSW1tdXRhYmxlLmRlZmF1bHQuUmVjb3JkKGdldERlZmF1bHRJbnB1dCgpKTtleHBvcnRzLklucHV0PUlucHV0O3ZhciBnZXREZWZhdWx0SW5wdXRIZWxwZXJTY3JpcHQ9ZnVuY3Rpb24oKXtyZXR1cm57Y29kZTpcIlwiLGdsb2JhbHM6W119fTtleHBvcnRzLmdldERlZmF1bHRJbnB1dEhlbHBlclNjcmlwdD1nZXREZWZhdWx0SW5wdXRIZWxwZXJTY3JpcHQ7dmFyIElucHV0SGVscGVyU2NyaXB0PV9JbW11dGFibGUuZGVmYXVsdC5SZWNvcmQoZ2V0RGVmYXVsdElucHV0SGVscGVyU2NyaXB0KCkpO2V4cG9ydHMuSW5wdXRIZWxwZXJTY3JpcHQ9SW5wdXRIZWxwZXJTY3JpcHQ7dmFyIGdldERlZmF1bHRJbnB1dEhlbHBlclNjcmlwdENvZGU9ZnVuY3Rpb24oKXtyZXR1cm5cIi8vIERlZmluZSB5b3VyIGhlbHBlciBmdW5jdGlvbnMgYmVsb3c6XFxuLy8gZS5nLiwgZnVuY3Rpb24gcGFkKGlucHV0KSB7IHJldHVybiBpbnB1dCArICcgJzsgfVxcbi8vIHdoaWNoIGNhbiB0aGVuIGJlIHVzZWQgaW4gYSBKUyBleHByZXNzaW9uIHN1Y2ggYXNcXG4vLyAgIHBhZChpbnB1dC5teUlucHV0TmFtZSlcXG5cIn07ZnVuY3Rpb24gc29ydFZlcnNpb25zKGUsdCl7dmFyIGE9XCJERVNDXCI9PT0odD10fHxcIkRFU0NcIik/LTE6MTtyZXR1cm4gZS5zb3J0KGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPVwic3RyaW5nXCI9PXR5cGVvZiBlP2U6ZS52ZXJzaW9uLG89XCJzdHJpbmdcIj09dHlwZW9mIHQ/dDp0LnZlcnNpb24sbj1mdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VJbnQoZSwxMCl9LHU9ci5zcGxpdChcIi5cIikubWFwKG4pLHM9by5zcGxpdChcIi5cIikubWFwKG4pLHA9MDtwIT09dS5sZW5ndGg7cCsrKWlmKHVbcF0hPT1zW3BdKXJldHVybiBhKih1W3BdLXNbcF0pO3JldHVybiAwfSl9ZnVuY3Rpb24gZ2V0RGVmYXVsdE91dHB1dFNjZW5hcmlvKGUpe3JldHVybiBfb2JqZWN0U3ByZWFkKHtuYW1lOlwiXCIsb3V0cHV0czp7fX0sZSl9ZnVuY3Rpb24gZ2V0RGVmYXVsdFRlc3RDYXNlKCl7cmV0dXJue25hbWU6XCJcIixpbnB1dHM6e30sb3B0aW9uczp7fSxyZXNwb25zZURhdGE6e3Jlc3BvbnNlczpbXSxzdGF0ZVRva2VuOlwiXCIsY29va2llczpcIlwifSxzZWNyZXQ6e319fWV4cG9ydHMuZ2V0RGVmYXVsdElucHV0SGVscGVyU2NyaXB0Q29kZT1nZXREZWZhdWx0SW5wdXRIZWxwZXJTY3JpcHRDb2RlO3ZhciBkZWZhdWx0VGVzdENhc2VSZXNwb25zZT0nPCFET0NUWVBFIGh0bWw+XFxuPGh0bWw+XFxuICA8aGVhZD5cXG4gICAgPHRpdGxlPk5ldyB0ZXN0IGNhc2U8L3RpdGxlPlxcbiAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIj5cXG5cXG4gICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIHR5cGU9XCJ0ZXh0L2Nzc1wiIGhyZWY9XCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9Um9ib3RvXCI+XFxuICAgIDxzdHlsZT5cXG4gICAgICBoMSB7IGZvbnQtZmFtaWx5OiBSb2JvdG8sXCJHaWxsIFNhbnNcIixcIkdpbGwgU2FucyBNVFwiLENhbGlicmksc2Fucy1zZXJpZjsgfVxcbiAgICAgIGJvZHkgeyBwYWRkaW5nLWxlZnQ6IDEwcHg7IHBhZGRpbmctcmlnaHQ6IDEwcHg7IGZvbnQtZmFtaWx5OiBSb2JvdG8sSGVsdmV0aWNhLHNhbnMtc2VyaWY7IH1cXG4gICAgPC9zdHlsZT5cXG4gIDwvaGVhZD5cXG4gIDxib2R5PlxcbiAgICA8aDE+TmV3IHRlc3QgY2FzZTwvaDE+XFxuICAgIDxwPjxzdHJvbmc+U3dpdGNoIHRvIHRoZSBcIkNvZGUgdmlld1wiIHRhYjwvc3Ryb25nPiBhbmQgcGFzdGUgaW4gdGhlIHRlc3QgZGF0YSB5b3VcXCdkIGxpa2UgdG8gdHJ5IFdyYXBBUEkgRXh0cmFjdG9yIG9uLjwvcD5cXG4gIDwvYm9keT5cXG48L2h0bWw+XFxuJztmdW5jdGlvbiBnZXREZWZhdWx0RXh0cmFjdG9yVGVzdENhc2UoKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cmV0dXJue25hbWU6ZS5uYW1lfHxcIlwiLHJlc3BvbnNlRGF0YTp7cmVzcG9uc2VzOlt7Ym9keTplLmJvZHl8fGRlZmF1bHRUZXN0Q2FzZVJlc3BvbnNlLHJlcXVlc3Q6e3VyaTp7aHJlZjplLnVybHx8XCJodHRwczovL3dyYXBhcGkuY29tXCJ9fX1dfX19ZnVuY3Rpb24gZ2V0RGVmYXVsdENsZWFudXAoKXtyZXR1cm57dHlwZTpudWxsLG9wdGlvbnM6e319fWZ1bmN0aW9uIGdldERlZmF1bHRCYXNlT3V0cHV0KCl7cmV0dXJue25hbWU6XCJcIixtYXRjaEVuZ2luZTpudWxsLHR5cGU6XCJyZXF1aXJlZE91dHB1dFwiLGNoaWxkcmVuOnt9LGNsZWFudXA6Z2V0RGVmYXVsdENsZWFudXAoKSxkYXRhOnt9fX1mdW5jdGlvbiBnZXREZWZhdWx0T3V0cHV0KGUpe3ZhciB0PWdldERlZmF1bHRCYXNlT3V0cHV0KCk7c3dpdGNoKGUpe2Nhc2VcInJlZ2V4XCI6cmV0dXJuIE9iamVjdC5hc3NpZ24odCx7bWF0Y2hFbmdpbmU6XCJyZWdleFwiLGRhdGE6e2dyb3VwOjAsbWF0Y2g6bnVsbCxhbGxNYXRjaGVzOiEwLHJlZ2V4OntwYXR0ZXJuOlwiXCIsbW9kaWZpZXJzOlwiZ1wifSxtYXRjaE9uOlwicHJldHR5XCJ9fSk7Y2FzZVwiY3NzXCI6cmV0dXJuIE9iamVjdC5hc3NpZ24odCx7bWF0Y2hFbmdpbmU6XCJjc3NcIixkYXRhOntjc3NTZWxlY3RvcjpcIlwiLG51bVRvU2VsZWN0OlwiZmlyc3RcIixjYXB0dXJlVHlwZTpcInRleHRcIixhdHRyc1RvU2VsZWN0OltdLG9iamVjdEluY2x1ZGVUZXh0OiExLG9iamVjdEluY2x1ZGVIdG1sOiExfSxjbGVhbnVwOnt0eXBlOlwidHJpbVwiLG9wdGlvbnM6e319fSk7Y2FzZVwiY29sbGVjdGlvblwiOnJldHVybiBPYmplY3QuYXNzaWduKHQse21hdGNoRW5naW5lOlwiY29sbGVjdGlvblwiLGRhdGE6e291dHB1dHM6e319fSk7Y2FzZVwianNvblwiOnJldHVybiBPYmplY3QuYXNzaWduKHQse21hdGNoRW5naW5lOlwianNvblwiLGRhdGE6e2pzb25TZWxlY3RvcjpcIiRcIixzZWxlY3RvclR5cGU6XCJqc29uUGF0aEZpcnN0T25seVwifX0pO2Nhc2VcImZvcm1cIjpyZXR1cm4gT2JqZWN0LmFzc2lnbih0LHttYXRjaEVuZ2luZTpcImZvcm1cIixkYXRhOntjc3NTZWxlY3RvcjpcIlwifX0pO2Nhc2VcImhlYWRlclwiOnJldHVybiBPYmplY3QuYXNzaWduKHQse21hdGNoRW5naW5lOlwiaGVhZGVyXCIsZGF0YTp7cmVzcG9uc2U6MCxrZXk6XCJcIn19KTtjYXNlXCJjb29raWVcIjpkZWZhdWx0OnJldHVybiBPYmplY3QuYXNzaWduKHQse21hdGNoRW5naW5lOlwiY29va2llXCIsZGF0YTp7cmVzcG9uc2U6MCxhbGxSZXNwb25zZXM6ITAsa2V5OlwiXCJ9fSl9fXZhciBkZWZhdWx0UG9zdFByb2Nlc3NTY3JpcHQ9J2Z1bmN0aW9uIHBvc3RQcm9jZXNzKG91dHB1dCwgaW5wdXQpIHtcXG4gIC8vIFwib3V0cHV0XCIgaGFzIHRoZSByYXcgcHJlLXByb2Nlc3Npbmcgb3V0cHV0XFxuICAvLyBcImlucHV0XCIgaGFzIHRoZSBzcGVjaWZpZWQgaW5wdXRzLCBpbmNsdWRpbmcgZGVmYXVsdHNcXG4gIHJldHVybiBvdXRwdXQ7XFxufVxcbic7ZXhwb3J0cy5kZWZhdWx0UG9zdFByb2Nlc3NTY3JpcHQ9ZGVmYXVsdFBvc3RQcm9jZXNzU2NyaXB0O3ZhciBkZWZhdWx0RXh0cmFjdG9yUG9zdFByb2Nlc3NTY3JpcHQ9J2Z1bmN0aW9uIHBvc3RQcm9jZXNzKG91dHB1dCkge1xcbiAgLy8gXCJvdXRwdXRcIiBoYXMgdGhlIHJhdyBwcmUtcHJvY2Vzc2luZyBvdXRwdXRcXG59XFxuJztmdW5jdGlvbiBnZXREZWZhdWx0UG9zdFByb2Nlc3MoKXtyZXR1cm57c2NyaXB0OmRlZmF1bHRQb3N0UHJvY2Vzc1NjcmlwdCxlbmFibGVkOiExfX1mdW5jdGlvbiBnZXREZWZhdWx0RXh0cmFjdG9yUG9zdFByb2Nlc3MoKXtyZXR1cm57c2NyaXB0OmRlZmF1bHRFeHRyYWN0b3JQb3N0UHJvY2Vzc1NjcmlwdCxlbmFibGVkOiExfX1mdW5jdGlvbiB1cGdyYWRlQVBJRWxlbWVudChlKXtpZihcImNvbXBvc2l0ZVwiPT09ZS50eXBlKXJldHVybiBlO2UudHlwZXx8KGUudHlwZT1cIm5vcm1hbFwiKTt2YXIgdD1lLnBvc3RQcm9jZXNzO2Z1bmN0aW9uIGEoZSl7aWYoXCJmaWxlXCI9PT1lLnR5cGV8fFwibmV3XCI9PT1lLnR5cGUpcmV0dXJuIGU7dmFyIHQ9Z2V0RGVmYXVsdE5ld1BhcmFtKCk7aWYodC5uYW1lPWUubmFtZSxcInZhcmlhYmxlXCI9PT1lLnR5cGUpe3ZhciBhPWUudmFyTmFtZTsvXlskQS1aX11bMC05QS1aXyRdKiQvaS50ZXN0KGEpP3QudmFsdWU9XCJ7e1wiLmNvbmNhdChhLFwifX1cIik6dC52YWx1ZT1cInt7d3JhcEFQSUlucHV0c1tcIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkoYSksXCJdfX1cIil9ZWxzZVwiZXhwcmVzc2lvblwiPT09ZS50eXBlP3QudmFsdWU9XCJ7e1wiLmNvbmNhdChlLmV4cHJlc3Npb24ucmVwbGFjZSgvaW5wdXRcXC4vZyxcIlwiKSxcIn19XCIpOlwiY29uc3RhbnRcIj09PWUudHlwZSYmKHQudmFsdWU9ZS5kYXRhKTtyZXR1cm4gdH1cInN0cmluZ1wiPT10eXBlb2YgdD9lLnBvc3RQcm9jZXNzPXtzY3JpcHQ6dCxlbmFibGVkOiEwfTp0fHwoZS5wb3N0UHJvY2Vzcz17c2NyaXB0OmRlZmF1bHRQb3N0UHJvY2Vzc1NjcmlwdCxlbmFibGVkOiExfSksZS50ZXN0Q2FzZXMmJihlLnRlc3RDYXNlcz1fbG9kYXNoLmRlZmF1bHQuZmlsdGVyKGUudGVzdENhc2VzKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUub3B0aW9uc3x8KGUub3B0aW9ucz17fSxlLnN0YXRlVG9rZW4mJihlLm9wdGlvbnMuc3RhdGVUb2tlbj1lLnN0YXRlVG9rZW4sZGVsZXRlIGUuc3RhdGVUb2tlbiksZS5zZXJpYWxpemVkRm9ybSYmKGUub3B0aW9ucy5zZXJpYWxpemVkRm9ybT1lLnNlcmlhbGl6ZWRGb3JtLGRlbGV0ZSBlLnNlcmlhbGl6ZWRGb3JtKSksZX0pKTt2YXIgcj1lLmlucHV0O3IucG9zdERhdGEmJihcInBhcmFtc1wiPT09ci5wb3N0RGF0YS50eXBlP3IucG9zdERhdGEuZGF0YT1yLnBvc3REYXRhLmRhdGEubWFwKGEpOlwianNvblwiIT09ci5wb3N0RGF0YS50eXBlJiZcInRleHRcIiE9PXIucG9zdERhdGEudHlwZXx8KHIucG9zdERhdGEuZGF0YT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9X1JlcXVlc3QuZGVmYXVsdC5wYXJzZUN1cmx5RXhwcmVzc2lvbihlKSxhPTA7YSE9PXQubGVuZ3RoO2ErKyl7dmFyIHI9dFthXTtpZihcImV4cHJlc3Npb25cIj09PXIudHlwZSl7dmFyIG89L15bJEEtWl9dWzAtOUEtWl8kXSokL2kudGVzdChyLmRhdGEpO3IuZGF0YT1vP3IuZGF0YTpcIndyYXBBUElJbnB1dHNbXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KHIuZGF0YSksXCJdXCIpfX1yZXR1cm4gdC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuXCJleHByZXNzaW9uXCI9PT1lLnR5cGU/XCJ7e1wiLmNvbmNhdChlLmRhdGEsXCJ9fVwiKTplLmRhdGF9KS5qb2luKFwiXCIpfShyLnBvc3REYXRhLmRhdGF8fFwiXCIpKSksci5xdWVyeVN0cmluZyYmKHIucXVlcnlTdHJpbmc9ci5xdWVyeVN0cmluZy5tYXAoYSkpLHIuaGVhZGVycyYmKHIuaGVhZGVycz1yLmhlYWRlcnMubWFwKGEpKTt2YXIgbz1fbG9kYXNoLmRlZmF1bHQubWFwKHIucXVlcnlTdHJpbmcsXCJuYW1lXCIpLG49KDAsX3VyaWpzLmRlZmF1bHQpKHIudXJsKS5xdWVyeSghMCk7cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5mb3JFYWNoKG4sZnVuY3Rpb24oZSx0KXstMT09PW8uaW5kZXhPZih0KSYmci5xdWVyeVN0cmluZy5wdXNoKGdldERlZmF1bHROZXdQYXJhbSh0LGUpKX0pLHIudXJsPSgwLF91cmlqcy5kZWZhdWx0KShyLnVybCkucXVlcnkoe30pLm5vcm1hbGl6ZVF1ZXJ5KCkudG9TdHJpbmcoKSxlLmlucHV0LmF1dGhvcml6YXRpb258fChlLmlucHV0LmF1dGhvcml6YXRpb249Z2V0RGVmYXVsdEF1dGhvcml6YXRpb24oKSksZS5pbnB1dC5tZXRob2Q9ZS5pbnB1dC5tZXRob2QudG9VcHBlckNhc2UoKSxlfWV4cG9ydHMuZGVmYXVsdEV4dHJhY3RvclBvc3RQcm9jZXNzU2NyaXB0PWRlZmF1bHRFeHRyYWN0b3JQb3N0UHJvY2Vzc1NjcmlwdDt2YXIgZ2V0RGVmYXVsdEJyYW5jaGluZ0Z1bmN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuXCIvLyBEZWZpbmUgd2hpY2ggb3V0cHV0IHNjZW5hcmlvIHdlIHNob3VsZCBydW4gbmV4dFxcbi8vIGJ5IHJldHVybmluZyBhIHN0cmluZyBjb3JyZXNwb25kaW5nIHRvIGl0cyBuYW1lLlxcbi8vIChlLmcuLCByZXR1cm4gJ215U2NlbmFyaW8nIGluIHRoZSBjb2RlIHRvXFxuLy8gZ28gdG8gdGhlIHNjZW5hcmlvIG5hbWVkIG15U2NlbmFyaW8pXFxuZnVuY3Rpb24gYnJhbmNoKG91dHB1dCwgaW5wdXQpIHtcXG4gIC8vIG91dHB1dCBoYXMgdGhlIG91dHB1dCBmcm9tIHRoaXMgY29tcG9uZW50IEFQSSBlbGVtZW50XFxuICAvLyBpbnB1dCBoYXMgdGhlIGlucHV0cyBmcm9tIHRoZSBvdmVyYWxsIGNvbXBvc2l0ZSBBUEkgZWxlbWVudFxcbiAgcmV0dXJuIG91dHB1dC5vdXRwdXRTY2VuYXJpbztcXG59XFxuXCJ9O2V4cG9ydHMuZ2V0RGVmYXVsdEJyYW5jaGluZ0Z1bmN0aW9uPWdldERlZmF1bHRCcmFuY2hpbmdGdW5jdGlvbjt2YXIgZ2V0RGVmYXVsdFZlcnRleFBvc3RQcm9jZXNzPWZ1bmN0aW9uKCl7cmV0dXJuXCIvLyBNb2RpZnkgYW5kIHJldHVybiB3aGF0IHlvdSB3YW50IGFzIHRoZSBvdXRwdXRcXG5mdW5jdGlvbiBwb3N0UHJvY2VzcyhvdXRwdXQsIGlucHV0KSB7XFxuICAvLyBvdXRwdXQgaGFzIHRoZSBvdXRwdXQgZnJvbSB0aGlzIGNvbXBvbmVudCBBUEkgZWxlbWVudFxcbiAgLy8gaW5wdXQgaGFzIHRoZSBpbnB1dHMgZnJvbSB0aGUgb3ZlcmFsbCBjb21wb3NpdGUgQVBJIGVsZW1lbnRcXG4gIHJldHVybiBvdXRwdXQ7XFxufVxcblwifTtleHBvcnRzLmdldERlZmF1bHRWZXJ0ZXhQb3N0UHJvY2Vzcz1nZXREZWZhdWx0VmVydGV4UG9zdFByb2Nlc3M7dmFyIGdldERlZmF1bHRDb21wb3NpdGVWZXJ0ZXg9ZnVuY3Rpb24oKXtyZXR1cm57aWQ6bnVsbCx0eXBlOlwiYXBpRWxlbWVudFwiLG5hbWU6bnVsbCxkYXRhOm51bGwsYnJhbmNoaW5nTW9kZTpcIm91dHB1dFNjZW5hcmlvXCIsYnJhbmNoaW5nRnVuY3Rpb246Z2V0RGVmYXVsdEJyYW5jaGluZ0Z1bmN0aW9uKCkscG9zdFByb2Nlc3NFbmFibGVkOiExLHBvc3RQcm9jZXNzOmdldERlZmF1bHRWZXJ0ZXhQb3N0UHJvY2VzcygpfX07ZXhwb3J0cy5nZXREZWZhdWx0Q29tcG9zaXRlVmVydGV4PWdldERlZmF1bHRDb21wb3NpdGVWZXJ0ZXg7dmFyIENvbXBvc2l0ZVZlcnRleD1fSW1tdXRhYmxlLmRlZmF1bHQuUmVjb3JkKGdldERlZmF1bHRDb21wb3NpdGVWZXJ0ZXgoKSk7ZnVuY3Rpb24gZ2V0RGVmYXVsdEVkZ2VJbnB1dCgpe3JldHVybntiYXNlVHlwZTpcInZhcmlhYmxlXCIsdHlwZTpcImlucHV0XCIsZGF0YTpcIlwiLHZhck5hbWU6XCJcIixleHByZXNzaW9uOlwiXCJ9fWZ1bmN0aW9uIGdldERlZmF1bHRFZGdlU2VyaWFsaXplZEZvcm0oKXtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmFzc2lnbihnZXREZWZhdWx0RWRnZUlucHV0KCkse3R5cGU6XCJub25lXCJ9KX1leHBvcnRzLkNvbXBvc2l0ZVZlcnRleD1Db21wb3NpdGVWZXJ0ZXg7dmFyIEVkZ2VJbnB1dD1fSW1tdXRhYmxlLmRlZmF1bHQuUmVjb3JkKGdldERlZmF1bHRFZGdlSW5wdXQoKSk7ZXhwb3J0cy5FZGdlSW5wdXQ9RWRnZUlucHV0O3ZhciBnZXREZWZhdWx0Q29tcG9zaXRlRWRnZT1mdW5jdGlvbigpe3JldHVybnt0YXJnZXRJZDpudWxsLGlucHV0czp7fSxzZXJpYWxpemVkRm9ybTpnZXREZWZhdWx0RWRnZVNlcmlhbGl6ZWRGb3JtKCl9fTtleHBvcnRzLmdldERlZmF1bHRDb21wb3NpdGVFZGdlPWdldERlZmF1bHRDb21wb3NpdGVFZGdlO3ZhciBDb21wb3NpdGVFZGdlPV9JbW11dGFibGUuZGVmYXVsdC5SZWNvcmQoe3RhcmdldElkOm51bGwsaW5wdXRzOm5ldyBfSW1tdXRhYmxlLmRlZmF1bHQuTWFwLHNlcmlhbGl6ZWRGb3JtOm5ldyBFZGdlSW5wdXQoZ2V0RGVmYXVsdEVkZ2VTZXJpYWxpemVkRm9ybSgpKX0pO2Z1bmN0aW9uIGJ1aWxkQ29tcG9zaXRlRWRnZUlucHV0cyhlKXt2YXIgdD1fbG9kYXNoLmRlZmF1bHQuY2hhaW4oZSkubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWUubmFtZSxhPS0xIT09dC5zZWFyY2goL15bQS1aYS16XyRdW1xcd19dKiQvKTtyZXR1cm5bZS5uYW1lLG5ldyBFZGdlSW5wdXQoe2Jhc2VUeXBlOmUudHlwZSx2YXJOYW1lOnQsZXhwcmVzc2lvbjphP1wiaW5wdXQuXCIuY29uY2F0KHQpOlwiaW5wdXRbXCIuY29uY2F0KHQucmVwbGFjZSgvJy9nLFwiXFxcXCdcIiksXCJdXCIpfSldfSkuZnJvbVBhaXJzKCkudmFsdWUoKTtyZXR1cm4gX0ltbXV0YWJsZS5kZWZhdWx0LmZyb21KUyh0KX1leHBvcnRzLkNvbXBvc2l0ZUVkZ2U9Q29tcG9zaXRlRWRnZTt2YXIgZ2V0RGVmYXVsdENvbXBvc2l0ZUlucHV0PWZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmVkOiEwLHR5cGU6XCJ2YXJpYWJsZVwifX07ZXhwb3J0cy5nZXREZWZhdWx0Q29tcG9zaXRlSW5wdXQ9Z2V0RGVmYXVsdENvbXBvc2l0ZUlucHV0O3ZhciBDb21wb3NpdGVJbnB1dD1fSW1tdXRhYmxlLmRlZmF1bHQuUmVjb3JkKGdldERlZmF1bHRDb21wb3NpdGVJbnB1dCgpKTtleHBvcnRzLkNvbXBvc2l0ZUlucHV0PUNvbXBvc2l0ZUlucHV0LENvbXBvc2l0ZUlucHV0LmZyb21KUz1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IENvbXBvc2l0ZUlucHV0KFwiYm9vbGVhblwiPT10eXBlb2YgZT97cmVxdWlyZWQ6ZSx0eXBlOlwidmFyaWFibGVcIn06ZSl9O3ZhciBnZXREZWZhdWx0Q29tcG9zaXRlR3JhcGg9ZnVuY3Rpb24oKXtyZXR1cm57dmVydGljZXM6ezA6e2lkOlwiMFwiLHR5cGU6XCJzdGFydFwiLG5hbWU6XCJzdGFydFwiLGRhdGE6bnVsbH19LGVkZ2VzOnswOntzdGFydDpudWxsfX0saW5wdXQ6e2lucHV0czp7fX19fTtleHBvcnRzLmdldERlZmF1bHRDb21wb3NpdGVHcmFwaD1nZXREZWZhdWx0Q29tcG9zaXRlR3JhcGg7dmFyIENvbXBvc2l0ZUdyYXBoPV9JbW11dGFibGUuZGVmYXVsdC5SZWNvcmQoZ2V0RGVmYXVsdENvbXBvc2l0ZUdyYXBoKCkpO2V4cG9ydHMuQ29tcG9zaXRlR3JhcGg9Q29tcG9zaXRlR3JhcGg7dmFyIGdldERlZmF1bHRDb21wb3NpdGVBUElFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5hc3NpZ24oZ2V0RGVmYXVsdEJhc2VBUElFbGVtZW50KCkse3R5cGU6XCJjb21wb3NpdGVcIixncmFwaDpnZXREZWZhdWx0Q29tcG9zaXRlR3JhcGgoKSxpbnB1dDp7dXJsOlwiXCIsaW5wdXRzOnt9fX0pfTtleHBvcnRzLmdldERlZmF1bHRDb21wb3NpdGVBUElFbGVtZW50PWdldERlZmF1bHRDb21wb3NpdGVBUElFbGVtZW50O3ZhciBnZXREZWZhdWx0RXJyb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9e3N1Y2Nlc3M6ITEsbWVzc2FnZXM6W1wiVGhlcmUgd2FzIGFuIHVua25vd24gZXJyb3I7IHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXJcIl0sZXJyb3I6e319O3JldHVybiBlJiYodC5lcnJvcj1lKSx0fTtmdW5jdGlvbiBmaW5kVW51c2VkTmFtZShlLHQsYSl7Zm9yKHZhciByPSEhKGE9YXx8e30pLmluY2x1ZGVTcGFjZSxvPXQgaW5zdGFuY2VvZiBBcnJheT9fbG9kYXNoLmRlZmF1bHQuemlwT2JqZWN0KHQsdCk6dCxuPWUsdT0yO24gaW4gbzspbj1lKyhyP1wiIFwiOlwiXCIpK3UrKztyZXR1cm4gbn1mdW5jdGlvbiBub3JtYWxpemVPcHRpb25zKGUpe2lmKGUgaW5zdGFuY2VvZiBBcnJheSl7aWYoZVswXSYmXCJvYmplY3RcIiE9PV90eXBlb2YoZVswXSkpcmV0dXJuIGUubWFwKGZ1bmN0aW9uKGUpe3JldHVybnt2YWx1ZTplLGxhYmVsOmV9fSl9ZWxzZSBpZihcIm9iamVjdFwiPT09X3R5cGVvZihlKSlyZXR1cm4gX2xvZGFzaC5kZWZhdWx0Lm1hcChlLGZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsbGFiZWw6ZX19KTtyZXR1cm4gZX1leHBvcnRzLmdldERlZmF1bHRFcnJvcj1nZXREZWZhdWx0RXJyb3I7dmFyIF9kZWZhdWx0PXtzaXplVG9UZXh0OnNpemVUb1RleHQsYXBpSW5wdXRUeXBlczphcGlJbnB1dFR5cGVzLGRvTm90aGluZzpkb05vdGhpbmcsZ2V0RnVsbE5hbWU6Z2V0RnVsbE5hbWUsZ2V0RnVsbE5hbWVXaXRoVXNlcm5hbWU6Z2V0RnVsbE5hbWVXaXRoVXNlcm5hbWUsc29ydEFQSUVsZW1lbnRzOnNvcnRBUElFbGVtZW50cyxzb3J0VmVyc2lvbnM6c29ydFZlcnNpb25zLGFycmF5QnVmZmVyVG9CYXNlNjQ6YXJyYXlCdWZmZXJUb0Jhc2U2NCxnZXREZWZhdWx0QVBJRWxlbWVudDpnZXREZWZhdWx0QVBJRWxlbWVudCxnZXRJbml0aWFsQVBJRWxlbWVudDpnZXRJbml0aWFsQVBJRWxlbWVudCxnZXREZWZhdWx0RXh0cmFjdG9yOmdldERlZmF1bHRFeHRyYWN0b3IsZ2V0RGVmYXVsdElucHV0U3BlYzpnZXREZWZhdWx0SW5wdXRTcGVjLElucHV0U3BlYzpJbnB1dFNwZWMsZ2V0RGVmYXVsdElucHV0SGVscGVyU2NyaXB0OmdldERlZmF1bHRJbnB1dEhlbHBlclNjcmlwdCxJbnB1dEhlbHBlclNjcmlwdDpJbnB1dEhlbHBlclNjcmlwdCxnZXREZWZhdWx0SW5wdXRIZWxwZXJTY3JpcHRDb2RlOmdldERlZmF1bHRJbnB1dEhlbHBlclNjcmlwdENvZGUsZ2V0RGVmYXVsdFBvc3REYXRhOmdldERlZmF1bHRQb3N0RGF0YSxQb3N0RGF0YTpQb3N0RGF0YSxnZXREZWZhdWx0TmV3UGFyYW06Z2V0RGVmYXVsdE5ld1BhcmFtLGdldERlZmF1bHRJbnB1dDpnZXREZWZhdWx0SW5wdXQsSW5wdXQ6SW5wdXQsZ2V0RGVmYXVsdEZpbGVJbnB1dFZhbHVlOmdldERlZmF1bHRGaWxlSW5wdXRWYWx1ZSxGaWxlSW5wdXRWYWx1ZTpGaWxlSW5wdXRWYWx1ZSxnZXREZWZhdWx0T3V0cHV0U2NlbmFyaW86Z2V0RGVmYXVsdE91dHB1dFNjZW5hcmlvLGdldERlZmF1bHRUZXN0Q2FzZTpnZXREZWZhdWx0VGVzdENhc2UsZ2V0RGVmYXVsdEV4dHJhY3RvclRlc3RDYXNlOmdldERlZmF1bHRFeHRyYWN0b3JUZXN0Q2FzZSxnZXREZWZhdWx0T3V0cHV0OmdldERlZmF1bHRPdXRwdXQsZ2V0RGVmYXVsdENsZWFudXA6Z2V0RGVmYXVsdENsZWFudXAsZGVmYXVsdFBvc3RQcm9jZXNzU2NyaXB0OmRlZmF1bHRQb3N0UHJvY2Vzc1NjcmlwdCxnZXREZWZhdWx0UG9zdFByb2Nlc3M6Z2V0RGVmYXVsdFBvc3RQcm9jZXNzLHVwZ3JhZGVBUElFbGVtZW50OnVwZ3JhZGVBUElFbGVtZW50LGdldERlZmF1bHRCcmFuY2hpbmdGdW5jdGlvbjpnZXREZWZhdWx0QnJhbmNoaW5nRnVuY3Rpb24sZ2V0RGVmYXVsdFZlcnRleFBvc3RQcm9jZXNzOmdldERlZmF1bHRWZXJ0ZXhQb3N0UHJvY2VzcyxnZXREZWZhdWx0Q29tcG9zaXRlVmVydGV4OmdldERlZmF1bHRDb21wb3NpdGVWZXJ0ZXgsQ29tcG9zaXRlVmVydGV4OkNvbXBvc2l0ZVZlcnRleCxnZXREZWZhdWx0Q29tcG9zaXRlRWRnZTpnZXREZWZhdWx0Q29tcG9zaXRlRWRnZSxDb21wb3NpdGVFZGdlOkNvbXBvc2l0ZUVkZ2UsYnVpbGRDb21wb3NpdGVFZGdlSW5wdXRzOmJ1aWxkQ29tcG9zaXRlRWRnZUlucHV0cyxnZXREZWZhdWx0RWRnZVNlcmlhbGl6ZWRGb3JtOmdldERlZmF1bHRFZGdlU2VyaWFsaXplZEZvcm0sZ2V0RGVmYXVsdEVkZ2VJbnB1dDpnZXREZWZhdWx0RWRnZUlucHV0LEVkZ2VJbnB1dDpFZGdlSW5wdXQsZ2V0RGVmYXVsdENvbXBvc2l0ZUlucHV0OmdldERlZmF1bHRDb21wb3NpdGVJbnB1dCxDb21wb3NpdGVJbnB1dDpDb21wb3NpdGVJbnB1dCxnZXREZWZhdWx0Q29tcG9zaXRlR3JhcGg6Z2V0RGVmYXVsdENvbXBvc2l0ZUdyYXBoLENvbXBvc2l0ZUdyYXBoOkNvbXBvc2l0ZUdyYXBoLGdldERlZmF1bHRDb21wb3NpdGVBUElFbGVtZW50OmdldERlZmF1bHRDb21wb3NpdGVBUElFbGVtZW50LGdldERlZmF1bHRFcnJvcjpnZXREZWZhdWx0RXJyb3IsZmluZFVudXNlZE5hbWU6ZmluZFVudXNlZE5hbWUsbm9ybWFsaXplT3B0aW9uczpub3JtYWxpemVPcHRpb25zfTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy51c2VyPXVzZXIsZXhwb3J0cy5jb250YWN0Rm9ybT1jb250YWN0Rm9ybSxleHBvcnRzLmRlZmF1bHQ9ZXhwb3J0cy5lbWFpbFJlZ2V4PXZvaWQgMDt2YXIgdXNlcm5hbWVSZWdleD0vXlxcd1tcXHctXSpcXHckLyxlbWFpbFJlZ2V4PS9eW2EtekEtWjAtOS4hIyQlJuKAmSorLz0/Xl9ge3x9fi1dK0BbYS16QS1aMC05LV0rKD86XFwuW2EtekEtWjAtOS1dKykqJC87ZnVuY3Rpb24gdXNlcihlKXt2YXIgYT17fTtyZXR1cm4gZS51c2VybmFtZT91c2VybmFtZVJlZ2V4LnRlc3QoZS51c2VybmFtZSl8fChhLnVzZXJuYW1lPVwiWW91ciB1c2VybmFtZSBtdXN0IG9ubHkgY29udGFpbiBudW1iZXJzLCBsZXR0ZXJzLCBhbmQgZGFzaGVzICgtKSBhbmQgYmUgYXQgbGVhc3QgMiBjaGFyYWN0ZXJzIGxvbmdcIik6YS51c2VybmFtZT1cIlBsZWFzZSBlbnRlciBhIHVzZXJuYW1lLlwiLGUucGFzc3dvcmR8fChhLnBhc3N3b3JkPVwiUGxlYXNlIGVudGVyIGEgcGFzc3dvcmQuXCIpLGUuZW1haWw/ZW1haWxSZWdleC50ZXN0KGUuZW1haWwpfHwoYS5lbWFpbD1cIlRoZSBlbWFpbCBhZGRyZXNzIGRvZXNuJ3QgbG9vayB2YWxpZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik6YS5lbWFpbD1cIlBsZWFzZSBlbnRlciB5b3VyIGVtYWlsIGFkZHJlc3MuXCIsZS5uYW1lfHwoYS5uYW1lPVwiUGxlYXNlIGVudGVyIHlvdXIgbmFtZS5cIiksXCJib29sZWFuXCIhPXR5cGVvZiBlLnNob3VsZENvbnRhY3QmJihhLnNob3VsZENvbnRhY3Q9XCJQbGVhc2UgY2hvb3NlIHdoZXRoZXIgeW91J3JlIHBvdGVudGlhbGx5IGludGVyZXN0ZWQgaW4gYSBoaWdoZXIgdXNhZ2UgbGltaXQgb3IgYSBzZWxmLWhvc3RlZC9wcml2YXRlIGluc3RhbmNlXCIpLGF9ZnVuY3Rpb24gY29udGFjdEZvcm0oZSl7dmFyIGE9e307cmV0dXJuIGUubmFtZXx8KGEubmFtZT1cIlBsZWFzZSBlbnRlciB5b3VyIG5hbWUuXCIpLGUuZW1haWw/ZW1haWxSZWdleC50ZXN0KGUuZW1haWwpfHwoYS5lbWFpbD1cIlRoZSBlbWFpbCBhZGRyZXNzIGRvZXNuJ3QgbG9vayB2YWxpZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik6YS5lbWFpbD1cIlBsZWFzZSBlbnRlciB5b3VyIGVtYWlsLlwiLGUuY29tcGFueXx8KGEuY29tcGFueT1cIlBsZWFzZSBlbnRlciB5b3VyIGNvbXBhbnkncyBuYW1lLlwiKSxhfWV4cG9ydHMuZW1haWxSZWdleD1lbWFpbFJlZ2V4O3ZhciBfZGVmYXVsdD17dXNlcjp1c2VyLGNvbnRhY3RGb3JtOmNvbnRhY3RGb3JtfTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5nZXRLZXk9Z2V0S2V5LGV4cG9ydHMuZ2V0TmFtZUtleT1nZXROYW1lS2V5LGV4cG9ydHMuUmVkdWNlcj1SZWR1Y2VyLGV4cG9ydHMuY29ubmVjdD1jb25uZWN0LGV4cG9ydHMuZGVmYXVsdD1leHBvcnRzLkFjdGlvbnM9dm9pZCAwO3ZhciBfcmVhY3RSZWR1eD1yZXF1aXJlKFwicmVhY3QtcmVkdXhcIiksX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpLF9tb21lbnQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibW9tZW50XCIpKSxfVXRpbGl0eT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9VdGlsaXR5XCIpKSxfQVBJU3RvcmFnZT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9BUElTdG9yYWdlXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBvd25LZXlzKGUsdCl7dmFyIG49T2JqZWN0LmtleXMoZSk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTt0JiYocj1yLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpLmVudW1lcmFibGV9KSksbi5wdXNoLmFwcGx5KG4scil9cmV0dXJuIG59ZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgbj1udWxsIT1hcmd1bWVudHNbdF0/YXJndW1lbnRzW3RdOnt9O3QlMj9vd25LZXlzKE9iamVjdChuKSwhMCkuZm9yRWFjaChmdW5jdGlvbih0KXtfZGVmaW5lUHJvcGVydHkoZSx0LG5bdF0pfSk6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM/T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSk6b3duS2V5cyhPYmplY3QobikpLmZvckVhY2goZnVuY3Rpb24odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sdCkpfSl9cmV0dXJuIGV9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KGUsdCxuKXtyZXR1cm4gdCBpbiBlP09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3ZhbHVlOm4sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTplW3RdPW4sZX12YXIgQWN0aW9ucz17c3RhcnRVcGRhdGVBUElFbGVtZW50czpmdW5jdGlvbigpe3JldHVybnt0eXBlOlwiQVBJU19VUERBVEVfU1RBUlRcIn19LHVwZGF0ZUFQSUVsZW1lbnRzOmZ1bmN0aW9uKGUpe3JldHVybnt0eXBlOlwiQVBJU19VUERBVEVcIixhcGlFbGVtZW50czplfX0sYWRkQVBJRWxlbWVudDpmdW5jdGlvbihlKXtyZXR1cm57dHlwZTpcIkFQSV9BRERcIixhcGlFbGVtZW50OmV9fSxyZW1vdmVBUElFbGVtZW50OmZ1bmN0aW9uKGUpe3JldHVybnt0eXBlOlwiQVBJX1JFTU9WRVwiLGFwaUVsZW1lbnQ6ZX19LHN0YXJ0TG9hZGluZ0FQSUVsZW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJue3R5cGU6XCJBUElfTE9BRElOR1wiLG5hbWVWZXJzaW9uOmV9fSxmaW5pc2hMb2FkaW5nQVBJRWxlbWVudDpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm57dHlwZTpcIkFQSV9MT0FERURcIixuYW1lVmVyc2lvbjplLGFwaUVsZW1lbnQ6dCxhbGlhc2VkOm4sdmVyc2lvbnM6cn19LGVycm9yTG9hZGluZ0FQSUVsZW1lbnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm57dHlwZTpcIkFQSV9FUlJPUlwiLG5hbWVWZXJzaW9uOmUscmVzcG9uc2U6dH19LHN0YXJ0U2F2aW5nQVBJRWxlbWVudDpmdW5jdGlvbihlKXtyZXR1cm57dHlwZTpcIkFQSV9TQVZJTkdcIixhcGlFbGVtZW50OmV9fSxmaW5pc2hTYXZpbmdBUElFbGVtZW50OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm57dHlwZTpcIkFQSV9TQVZFRFwiLGFwaUVsZW1lbnQ6ZSxyZXNwb25zZTp0LHZlcnNpb25zOm59fSxlcnJvclNhdmluZ0FQSUVsZW1lbnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm57dHlwZTpcIkFQSV9TQVZFX0VSUk9SXCIsYXBpRWxlbWVudDplLHJlc3BvbnNlOnR9fSxmaW5pc2hBbGlhc2luZ0FQSUVsZW1lbnQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybnt0eXBlOlwiQVBJX0FMSUFTRURcIixhcGlFbGVtZW50OmUsYWxpYXNlZDp0LHJlc3BvbnNlOm59fX07ZnVuY3Rpb24gcmVrZXlBUElFbGVtZW50c0J5TmFtZShlKXtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmZyb21QYWlycyhlLm1hcChmdW5jdGlvbihlKXtyZXR1cm5bX1V0aWxpdHkuZGVmYXVsdC5nZXRGdWxsTmFtZShlKSxlXX0pKX1mdW5jdGlvbiBnZXRLZXkoZSl7cmV0dXJuW2UudXNlcm5hbWUsZS5yZXBvc2l0b3J5LGUubmFtZSxlLnZlcnNpb25dLmpvaW4oXCIvXCIpfWZ1bmN0aW9uIGdldE5hbWVLZXkoZSl7cmV0dXJuW2UudXNlcm5hbWUsZS5yZXBvc2l0b3J5LGUubmFtZV0uam9pbihcIi9cIil9ZnVuY3Rpb24gUmVkdWNlcihlLHQpe2lmKGV8fChlPXtsb2FkaW5nOiExLGxvYWRlZDohMSxhcGlFbGVtZW50czp7fSxhcGlFbGVtZW50c0xvYWRlZEF0Om51bGwsZXJyb3I6bnVsbCxmdWxsQVBJTG9hZGluZzp7fSxmdWxsQVBJTG9hZGVkOnt9LGZ1bGxBUEk6e30sZnVsbEFQSUFsaWFzZWQ6e30sZnVsbEFQSVZlcnNpb25zOnt9LGZ1bGxBUElMb2FkUmVzcG9uc2U6e30sZnVsbEFQSVNhdmluZzp7fSxmdWxsQVBJU2F2ZVJlc3BvbnNlOnt9fSksdClzd2l0Y2godC50eXBlKXtjYXNlXCJBUElTX1VQREFURV9TVEFSVFwiOnJldHVybiBfb2JqZWN0U3ByZWFkKHt9LGUse2xvYWRpbmc6ITB9KTtjYXNlXCJBUElTX1VQREFURVwiOnJldHVybiBfb2JqZWN0U3ByZWFkKHt9LGUse2xvYWRpbmc6ITEsbG9hZGVkOiEwLGFwaUVsZW1lbnRzOnJla2V5QVBJRWxlbWVudHNCeU5hbWUodC5hcGlFbGVtZW50cyksYXBpRWxlbWVudHNMb2FkZWRBdDooMCxfbW9tZW50LmRlZmF1bHQpKCl9KTtjYXNlXCJBUElfQUREXCI6dmFyIG49ZS5hcGlFbGVtZW50cyxyPXQuYXBpRWxlbWVudDtyZXR1cm4gX29iamVjdFNwcmVhZCh7fSxlLHthcGlFbGVtZW50czpPYmplY3QuYXNzaWduKG4sX2RlZmluZVByb3BlcnR5KHt9LF9VdGlsaXR5LmRlZmF1bHQuZ2V0RnVsbE5hbWUocikscikpfSk7Y2FzZVwiQVBJX1JFTU9WRVwiOnJldHVybiBfb2JqZWN0U3ByZWFkKHt9LGUse2FwaUVsZW1lbnRzOl9sb2Rhc2guZGVmYXVsdC5vbWl0KGUuYXBpRWxlbWVudHMsX1V0aWxpdHkuZGVmYXVsdC5nZXRGdWxsTmFtZSh0LmFwaUVsZW1lbnQpKX0pO2Nhc2VcIkFQSV9MT0FESU5HXCI6cmV0dXJuIF9vYmplY3RTcHJlYWQoe30sZSx7ZnVsbEFQSUxvYWRpbmc6X29iamVjdFNwcmVhZCh7fSxlLmZ1bGxBUElMb2FkaW5nLF9kZWZpbmVQcm9wZXJ0eSh7fSxnZXRLZXkodC5uYW1lVmVyc2lvbiksITApKX0pO2Nhc2VcIkFQSV9MT0FERURcIjp2YXIgbD1nZXRLZXkodC5uYW1lVmVyc2lvbiksbz1nZXROYW1lS2V5KHQubmFtZVZlcnNpb24pLGE9dC5hcGlFbGVtZW50O3JldHVybiBhLnR5cGUmJlwibm9ybWFsXCIhPT1hLnR5cGV8fChhPV9VdGlsaXR5LmRlZmF1bHQudXBncmFkZUFQSUVsZW1lbnQoYSkpLF9vYmplY3RTcHJlYWQoe30sZSx7ZnVsbEFQSUxvYWRpbmc6X29iamVjdFNwcmVhZCh7fSxlLmZ1bGxBUElMb2FkaW5nLF9kZWZpbmVQcm9wZXJ0eSh7fSxsLCExKSksZnVsbEFQSUxvYWRlZDpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSUxvYWRlZCxfZGVmaW5lUHJvcGVydHkoe30sbCwhMCkpLGZ1bGxBUEk6X29iamVjdFNwcmVhZCh7fSxlLmZ1bGxBUEksX2RlZmluZVByb3BlcnR5KHt9LGwsYSkpLGZ1bGxBUElBbGlhc2VkOl9vYmplY3RTcHJlYWQoe30sZS5mdWxsQVBJQWxpYXNlZCxfZGVmaW5lUHJvcGVydHkoe30sbyx0LmFsaWFzZWQpKSxmdWxsQVBJVmVyc2lvbnM6X29iamVjdFNwcmVhZCh7fSxlLmZ1bGxBUElWZXJzaW9ucyxfZGVmaW5lUHJvcGVydHkoe30sbyxfbG9kYXNoLmRlZmF1bHQubWFwKHQudmVyc2lvbnMsXCJ2ZXJzaW9uXCIpKSl9KTtjYXNlXCJBUElfRVJST1JcIjp2YXIgaT1nZXRLZXkodC5uYW1lVmVyc2lvbik7cmV0dXJuIF9vYmplY3RTcHJlYWQoe30sZSx7ZnVsbEFQSUxvYWRpbmc6X29iamVjdFNwcmVhZCh7fSxlLmZ1bGxBUElMb2FkaW5nLF9kZWZpbmVQcm9wZXJ0eSh7fSxpLCExKSksZnVsbEFQSUxvYWRlZDpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSUxvYWRlZCxfZGVmaW5lUHJvcGVydHkoe30saSwhMCkpLGZ1bGxBUElMb2FkUmVzcG9uc2U6X29iamVjdFNwcmVhZCh7fSxlLmZ1bGxBUEksX2RlZmluZVByb3BlcnR5KHt9LGksdC5yZXNwb25zZSkpfSk7Y2FzZVwiQVBJX1NBVklOR1wiOnZhciBzPWdldEtleSh0LmFwaUVsZW1lbnQpO3JldHVybiBfb2JqZWN0U3ByZWFkKHt9LGUse2Z1bGxBUElTYXZpbmc6X29iamVjdFNwcmVhZCh7fSxlLmZ1bGxBUElTYXZpbmcsX2RlZmluZVByb3BlcnR5KHt9LHMsITApKSxmdWxsQVBJU2F2ZVJlc3BvbnNlOl9vYmplY3RTcHJlYWQoe30sZS5mdWxsQVBJU2F2ZVJlc3BvbnNlLF9kZWZpbmVQcm9wZXJ0eSh7fSxzLG51bGwpKX0pO2Nhc2VcIkFQSV9TQVZFRFwiOnZhciB1PWdldEtleSh0LmFwaUVsZW1lbnQpLGQ9Z2V0TmFtZUtleSh0LmFwaUVsZW1lbnQpO3JldHVybiBfb2JqZWN0U3ByZWFkKHt9LGUse2Z1bGxBUElTYXZpbmc6X29iamVjdFNwcmVhZCh7fSxlLmZ1bGxBUElTYXZpbmcsX2RlZmluZVByb3BlcnR5KHt9LHUsITEpKSxmdWxsQVBJOl9vYmplY3RTcHJlYWQoe30sZS5mdWxsQVBJLF9kZWZpbmVQcm9wZXJ0eSh7fSx1LHQuYXBpRWxlbWVudCkpLGZ1bGxBUElMb2FkZWQ6X29iamVjdFNwcmVhZCh7fSxlLmZ1bGxBUElMb2FkZWQsX2RlZmluZVByb3BlcnR5KHt9LHUsITApKSxmdWxsQVBJVmVyc2lvbnM6X29iamVjdFNwcmVhZCh7fSxlLmZ1bGxBUElWZXJzaW9ucyxfZGVmaW5lUHJvcGVydHkoe30sZCx0LnZlcnNpb25zKSksZnVsbEFQSVNhdmVSZXNwb25zZTpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSVNhdmVSZXNwb25zZSxfZGVmaW5lUHJvcGVydHkoe30sdSx0LnJlc3BvbnNlKSl9KTtjYXNlXCJBUElfQUxJQVNFRFwiOnZhciBBLGY9Z2V0S2V5KHQuYXBpRWxlbWVudCksUD1nZXROYW1lS2V5KHQuYXBpRWxlbWVudCkscD1nZXRLZXkodC5hbGlhc2VkKSxjPWdldE5hbWVLZXkodC5hbGlhc2VkKTtyZXR1cm4gX29iamVjdFNwcmVhZCh7fSxlLHtmdWxsQVBJU2F2aW5nOl9vYmplY3RTcHJlYWQoe30sZS5mdWxsQVBJU2F2aW5nLF9kZWZpbmVQcm9wZXJ0eSh7fSxmLCExKSksZnVsbEFQSTpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSSxfZGVmaW5lUHJvcGVydHkoe30scCx0LmFwaUVsZW1lbnQpKSxmdWxsQVBJQWxpYXNlZDpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSUFsaWFzZWQsKEE9e30sX2RlZmluZVByb3BlcnR5KEEsUCx0LmFsaWFzZWQpLF9kZWZpbmVQcm9wZXJ0eShBLGMsdC5hbGlhc2VkKSxBKSksZnVsbEFQSUxvYWRlZDpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSUxvYWRlZCxfZGVmaW5lUHJvcGVydHkoe30scCwhMCkpLGZ1bGxBUElWZXJzaW9uczpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSVZlcnNpb25zLF9kZWZpbmVQcm9wZXJ0eSh7fSxwLHQudmVyc2lvbnMpKSxmdWxsQVBJU2F2ZVJlc3BvbnNlOl9vYmplY3RTcHJlYWQoe30sZS5mdWxsQVBJU2F2ZVJlc3BvbnNlLF9kZWZpbmVQcm9wZXJ0eSh7fSxmLHQucmVzcG9uc2UpKX0pO2Nhc2VcIkFQSV9TQVZFX0VSUk9SXCI6dmFyIEk9Z2V0S2V5KHQuYXBpRWxlbWVudCk7cmV0dXJuIF9vYmplY3RTcHJlYWQoe30sZSx7ZnVsbEFQSVNhdmluZzpfb2JqZWN0U3ByZWFkKHt9LGUuZnVsbEFQSVNhdmluZyxfZGVmaW5lUHJvcGVydHkoe30sSSwhMSkpLGZ1bGxBUElTYXZlUmVzcG9uc2U6X29iamVjdFNwcmVhZCh7fSxlLmZ1bGxBUElTYXZlUmVzcG9uc2UsX2RlZmluZVByb3BlcnR5KHt9LEksdC5yZXNwb25zZSkpfSl9cmV0dXJuIGV9ZXhwb3J0cy5BY3Rpb25zPUFjdGlvbnM7dmFyIHJlZnJlc2hBUElFbGVtZW50cz1fbG9kYXNoLmRlZmF1bHQubWVtb2l6ZShmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtlKEFjdGlvbnMuc3RhcnRVcGRhdGVBUElFbGVtZW50cygpKSxfQVBJU3RvcmFnZS5kZWZhdWx0LmdldEFsbCgpLnRoZW4oZnVuY3Rpb24odCl7ZShBY3Rpb25zLnVwZGF0ZUFQSUVsZW1lbnRzKHQpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2NvbnNvbGUuZXJyb3IoXCJFcnJvciB3aGVuIHRyeWluZyB0byBnZXQgQVBJIGVsZW1lbnRzXCIpLGNvbnNvbGUuZXJyb3IoZSl9KX19KSxsb2FkQVBJRWxlbWVudD1fbG9kYXNoLmRlZmF1bHQubWVtb2l6ZShmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuLHIsbCl7dmFyIG89e3VzZXJuYW1lOnQscmVwb3NpdG9yeTpuLG5hbWU6cix2ZXJzaW9uOmx9O3JldHVybiBlKEFjdGlvbnMuc3RhcnRMb2FkaW5nQVBJRWxlbWVudChvKSksX0FQSVN0b3JhZ2UuZGVmYXVsdC5nZXQodCxuLHIsbCwhMCkudGhlbihmdW5jdGlvbih0KXt0LnN1Y2Nlc3M/ZShBY3Rpb25zLmZpbmlzaExvYWRpbmdBUElFbGVtZW50KG8sdC5kYXRhLHQuYWxpYXNlZCx0LnZlcnNpb25zKSk6ZShBY3Rpb25zLmVycm9yTG9hZGluZ0FQSUVsZW1lbnQobyx0KSl9KS5jYXRjaChmdW5jdGlvbih0KXtlKEFjdGlvbnMuZXJyb3JMb2FkaW5nQVBJRWxlbWVudChvLHtzdWNjZXNzOiExLG1lc3NhZ2VzOltcIkFuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiXSxlcnJvcjp0fSkpfSl9fSksc2F2ZUFQSUVsZW1lbnQ9X2xvZGFzaC5kZWZhdWx0Lm1lbW9pemUoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbixyLGwpe3ZhciBvLGE9IWwmJm4mJihuLnVzZXJuYW1lIT09dC51c2VybmFtZXx8bi5yZXBvc2l0b3J5IT09dC5yZXBvc2l0b3J5fHxuLm5hbWUhPT10Lm5hbWUpO3JldHVybiBvPW4/bD9fQVBJU3RvcmFnZS5kZWZhdWx0LnJlbmFtZShuLnJlcG9zaXRvcnksbi5uYW1lLHQpOl9BUElTdG9yYWdlLmRlZmF1bHQuc2V0V2l0aERpZmYobix0KTpfQVBJU3RvcmFnZS5kZWZhdWx0LnNldCh0KSxlKEFjdGlvbnMuc3RhcnRTYXZpbmdBUElFbGVtZW50KHQpKSxvLnRoZW4oZnVuY3Rpb24obyl7cmV0dXJuIG8uc3VjY2Vzcz8oIWEmJnJ8fChyPVtdKSxyPV9VdGlsaXR5LmRlZmF1bHQuc29ydFZlcnNpb25zKF9sb2Rhc2guZGVmYXVsdC51bmlxKHIuY29uY2F0KFt0LnZlcnNpb25dKSksXCJERVNDXCIpLGUoQWN0aW9ucy5maW5pc2hTYXZpbmdBUElFbGVtZW50KHQsbyxyKSksbCYmZShBY3Rpb25zLnJlbW92ZUFQSUVsZW1lbnQobikpLGUoQWN0aW9ucy5hZGRBUElFbGVtZW50KHQpKSx0KTooZShBY3Rpb25zLmVycm9yU2F2aW5nQVBJRWxlbWVudCh0LG8pKSxudWxsKX0pfX0pLGFsaWFzQVBJRWxlbWVudD1fbG9kYXNoLmRlZmF1bHQubWVtb2l6ZShmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXtyZXR1cm4gZShBY3Rpb25zLnN0YXJ0U2F2aW5nQVBJRWxlbWVudCh0KSksX0FQSVN0b3JhZ2UuZGVmYXVsdC5hbGlhcyh0LG4pLnRoZW4oZnVuY3Rpb24ocil7cmV0dXJuIHIuc3VjY2Vzcz9lKEFjdGlvbnMuZmluaXNoQWxpYXNpbmdBUElFbGVtZW50KHQsbixyKSk6ZShBY3Rpb25zLmVycm9yU2F2aW5nQVBJRWxlbWVudCh0LHIpKSx0fSl9fSksYWRkQVBJRWxlbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7ZShBY3Rpb25zLmFkZEFQSUVsZW1lbnQodCkpfX0scmVtb3ZlQVBJRWxlbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7ZShBY3Rpb25zLnJlbW92ZUFQSUVsZW1lbnQodCkpfX07ZnVuY3Rpb24gY29ubmVjdChlKXtyZXR1cm4oMCxfcmVhY3RSZWR1eC5jb25uZWN0KShmdW5jdGlvbihlKXt2YXIgdD1lLmFwaUVsZW1lbnRzO3JldHVybnthcGlFbGVtZW50c0xvYWRlZDp0LmxvYWRlZCxhcGlFbGVtZW50c0xvYWRlZEF0OnQuYXBpRWxlbWVudHNMb2FkZWRBdCxhcGlFbGVtZW50c0xvYWRpbmc6dC5sb2FkaW5nLGFwaUVsZW1lbnRzOnQuYXBpRWxlbWVudHMsZnVsbEFQSUxvYWRpbmc6dC5mdWxsQVBJTG9hZGluZyxmdWxsQVBJTG9hZGVkOnQuZnVsbEFQSUxvYWRlZCxmdWxsQVBJOnQuZnVsbEFQSSxmdWxsQVBJQWxpYXNlZDp0LmZ1bGxBUElBbGlhc2VkLGZ1bGxBUElWZXJzaW9uczp0LmZ1bGxBUElWZXJzaW9ucyxmdWxsQVBJTG9hZFJlc3BvbnNlOnQuZnVsbEFQSUxvYWRSZXNwb25zZSxmdWxsQVBJU2F2aW5nOnQuZnVsbEFQSVNhdmluZyxmdWxsQVBJU2F2ZVJlc3BvbnNlOnQuZnVsbEFQSVNhdmVSZXNwb25zZX19LGZ1bmN0aW9uKGUpe3JldHVybntyZWZyZXNoQVBJRWxlbWVudHM6cmVmcmVzaEFQSUVsZW1lbnRzKGUpLGFkZEFQSUVsZW1lbnQ6YWRkQVBJRWxlbWVudChlKSxyZW1vdmVBUElFbGVtZW50OnJlbW92ZUFQSUVsZW1lbnQoZSksbG9hZEFQSUVsZW1lbnQ6bG9hZEFQSUVsZW1lbnQoZSksc2F2ZUFQSUVsZW1lbnQ6c2F2ZUFQSUVsZW1lbnQoZSksYWxpYXNBUElFbGVtZW50OmFsaWFzQVBJRWxlbWVudChlKX19LG51bGwsZSl9dmFyIF9kZWZhdWx0PXtBY3Rpb25zOkFjdGlvbnMsUmVkdWNlcjpSZWR1Y2VyLGNvbm5lY3Q6Y29ubmVjdCxnZXRLZXk6Z2V0S2V5LGdldE5hbWVLZXk6Z2V0TmFtZUtleX07ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuUmVkdWNlcj1SZWR1Y2VyLGV4cG9ydHMubG9naW49bG9naW4sZXhwb3J0cy5sb2dvdXQ9bG9nb3V0LGV4cG9ydHMuY29ubmVjdD1jb25uZWN0LGV4cG9ydHMuZGVmYXVsdD1leHBvcnRzLkFjdGlvbnM9dm9pZCAwO3ZhciBfcmVhY3RSZWR1eD1yZXF1aXJlKFwicmVhY3QtcmVkdXhcIiksX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpLF9UdXRvcmlhbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL1R1dG9yaWFsXCIpKSxfQXV0aD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9BdXRoXCIpKSxfVG9rZW49X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vVG9rZW5cIikpLF9BUElTdG9yYWdlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL0FQSVN0b3JhZ2VcIikpLF9DaHJvbWU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vQ2hyb21lXCIpKSxfUHJveHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vUHJveHlcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIG93bktleXMoZSx0KXt2YXIgbz1PYmplY3Qua2V5cyhlKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3QmJihyPXIuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCkuZW51bWVyYWJsZX0pKSxvLnB1c2guYXBwbHkobyxyKX1yZXR1cm4gb31mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBvPW51bGwhPWFyZ3VtZW50c1t0XT9hcmd1bWVudHNbdF06e307dCUyP293bktleXMoT2JqZWN0KG8pLCEwKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe19kZWZpbmVQcm9wZXJ0eShlLHQsb1t0XSl9KTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG8pKTpvd25LZXlzKE9iamVjdChvKSkuZm9yRWFjaChmdW5jdGlvbih0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobyx0KSl9KX1yZXR1cm4gZX1mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkoZSx0LG8pe3JldHVybiB0IGluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6byxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09byxlfXZhciB1c2VUb2tlbj1fQ2hyb21lLmRlZmF1bHQuaXNDaHJvbWVFeHRlbnNpb24oKSxBY3Rpb25zPXtzdGFydExvZ2luOmZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6XCJTVEFSVF9MT0dJTlwifX0sZmluaXNoTG9naW46ZnVuY3Rpb24oZSl7cmV0dXJue3R5cGU6XCJGSU5JU0hfTE9HSU5cIixkYXRhOmV9fSx1cGRhdGVMb2dpblN0YXRlOmZ1bmN0aW9uKGUpe3JldHVybnt0eXBlOlwiVVBEQVRFX0xPR0lOX1NUQVRFXCIsZGF0YTplfX0sdXBkYXRlUHJveHlBbGxvY2F0aW9uOmZ1bmN0aW9uKGUpe3JldHVybnt0eXBlOlwiVVBEQVRFX1BST1hZX0FMTE9DQVRJT05cIixkYXRhOmV9fSxzdGFydExvZ291dDpmdW5jdGlvbigpe3JldHVybnt0eXBlOlwiU1RBUlRfTE9HT1VUXCJ9fSxmaW5pc2hMb2dvdXQ6ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpcIkZJTklTSF9MT0dPVVRcIn19LHN0YXJ0UmVnaXN0ZXI6ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpcIlNUQVJUX1JFR0lTVEVSXCJ9fSxmaW5pc2hSZWdpc3RlcjpmdW5jdGlvbihlKXtyZXR1cm57dHlwZTpcIkZJTklTSF9SRUdJU1RFUlwiLGRhdGE6ZX19LHNldEVycm9yOmZ1bmN0aW9uKGUpe3JldHVybnt0eXBlOlwiU0VUX0VSUk9SXCIsZXJyb3I6ZX19LHNldFR1dG9yaWFsQ29tcGxldGVkOmZ1bmN0aW9uKGUsdCl7cmV0dXJue3R5cGU6XCJTRVRfVFVUT1JJQUxfQ09NUExFVEVEXCIsdHV0b3JpYWw6ZSxjb21wbGV0ZWQ6dH19fTtmdW5jdGlvbiBSZWR1Y2VyKGUsdCl7c3dpdGNoKGV8fChlPXtsb2FkaW5nOiExLGxvYWRlZDohMSxyZXNwb25zZTp7c3VjY2VzczohMSxsb2dnZWRJbjohMSx1c2VybmFtZTpudWxsLGFjdGl2YXRlZDpudWxsLGlzQWRtaW46bnVsbCxyb2xlOlwiTm9ybWFsXCIsbmFtZTpudWxsLGVtYWlsOm51bGwsY29tcGFueTpudWxsLHR1dG9yaWFsU3RlcDpudWxsLHl1a2F0YVR1dG9yaWFsQ29tcGxldGVkOiExLGV4dHJhY3RvclR1dG9yaWFsQ29tcGxldGVkOiExLGZlYXR1cmVGbGFnczp7fSxwcm94eUFsbG9jYXRpb246bnVsbCx0b2tlbjpudWxsLHJlcXVlc3RMaW1pdDpudWxsLG9yZ2FuaXphdGlvbjpudWxsfSxlcnJvcjpudWxsfSksdC50eXBlKXtjYXNlXCJTVEFSVF9MT0dJTlwiOmNhc2VcIlNUQVJUX1JFR0lTVEVSXCI6Y2FzZVwiU1RBUlRfTE9HT1VUXCI6cmV0dXJuIF9vYmplY3RTcHJlYWQoe30sZSx7bG9hZGluZzohMCxlcnJvcjpudWxsfSk7Y2FzZVwiRklOSVNIX0xPR0lOXCI6Y2FzZVwiRklOSVNIX1JFR0lTVEVSXCI6Y2FzZVwiVVBEQVRFX0xPR0lOX1NUQVRFXCI6aWYodXNlVG9rZW4mJnQuZGF0YS5sb2dnZWRJbil7dmFyIG89dC5kYXRhLnRva2VuO19BUElTdG9yYWdlLmRlZmF1bHQudXNlVG9rZW4obyksX1Rva2VuLmRlZmF1bHQuc2V0KG8pfXJldHVybiBfb2JqZWN0U3ByZWFkKHt9LGUse2xvYWRpbmc6ITEsbG9hZGVkOiEwLHJlc3BvbnNlOnQuZGF0YX0pO2Nhc2VcIlNFVF9UVVRPUklBTF9DT01QTEVURURcIjp2YXIgcj1cInl1a2F0YVwiPT09dC50dXRvcmlhbD9cInl1a2F0YVR1dG9yaWFsQ29tcGxldGVkXCI6XCJleHRyYWN0b3JUdXRvcmlhbENvbXBsZXRlZFwiO3JldHVybiBfb2JqZWN0U3ByZWFkKHt9LGUse3Jlc3BvbnNlOl9vYmplY3RTcHJlYWQoe30sZS5yZXNwb25zZSxfZGVmaW5lUHJvcGVydHkoe30scix0LmNvbXBsZXRlZCkpfSk7Y2FzZVwiVVBEQVRFX1BST1hZX0FMTE9DQVRJT05cIjpyZXR1cm4gX29iamVjdFNwcmVhZCh7fSxlLHtsb2FkaW5nOiExLGxvYWRlZDohMCxyZXNwb25zZTpfb2JqZWN0U3ByZWFkKHt9LGUucmVzcG9uc2Use3Byb3h5QWxsb2NhdGlvbjp0LmRhdGF9KX0pO2Nhc2VcIlNFVF9FUlJPUlwiOnJldHVybiBfb2JqZWN0U3ByZWFkKHt9LGUse2xvYWRpbmc6ITEsZXJyb3I6dC5lcnJvcn0pO2Nhc2VcIkZJTklTSF9MT0dPVVRcIjpyZXR1cm4gdXNlVG9rZW4mJihfQVBJU3RvcmFnZS5kZWZhdWx0LnVzZVRva2VuKG51bGwpLF9Ub2tlbi5kZWZhdWx0LnNldChudWxsKSksT2JqZWN0LmFzc2lnbih7bG9hZGluZzohMSxsb2FkZWQ6ITEscmVzcG9uc2U6e3N1Y2Nlc3M6ITEsbG9nZ2VkSW46ITEsdXNlcm5hbWU6bnVsbCxhY3RpdmF0ZWQ6bnVsbCxpc0FkbWluOm51bGwscm9sZTpcIk5vcm1hbFwiLG5hbWU6bnVsbCxlbWFpbDpudWxsLGNvbXBhbnk6bnVsbCx0dXRvcmlhbFN0ZXA6bnVsbCx5dWthdGFUdXRvcmlhbENvbXBsZXRlZDohMSxleHRyYWN0b3JUdXRvcmlhbENvbXBsZXRlZDohMSxmZWF0dXJlRmxhZ3M6e30scHJveHlBbGxvY2F0aW9uOm51bGwsdG9rZW46bnVsbCxyZXF1ZXN0TGltaXQ6bnVsbCxvcmdhbml6YXRpb246bnVsbH0sZXJyb3I6bnVsbH0se2xvYWRlZDohMH0pfXJldHVybiBlfWZ1bmN0aW9uIGxvZ2luKGUsdCxvKXtyZXR1cm4gZShBY3Rpb25zLnN0YXJ0TG9naW4oKSksX0F1dGguZGVmYXVsdC5sb2dpbih0LG8pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQuc3VjY2Vzcz8oZShBY3Rpb25zLmZpbmlzaExvZ2luKHQpKSxlKF9UdXRvcmlhbC5kZWZhdWx0LkFjdGlvbnMudXBkYXRlTG9jYWxUdXRvcmlhbFN0ZXAodC50dXRvcmlhbFN0ZXApKSk6ZShBY3Rpb25zLnNldEVycm9yKHQpKSxtYXBSZXNwb25zZVRvUHJvcHModCl9KS5jYXRjaChmdW5jdGlvbih0KXtjb25zb2xlLmVycm9yKHQpLGUoQWN0aW9ucy5zZXRFcnJvcih0KSl9KX1mdW5jdGlvbiBsb2dvdXQoZSl7ZShBY3Rpb25zLnN0YXJ0TG9nb3V0KCkpO3ZhciB0PVByb21pc2UucmVzb2x2ZShudWxsKTtyZXR1cm4gdXNlVG9rZW4mJih0PV9Ub2tlbi5kZWZhdWx0LmdldCgpKSx0LnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIF9BdXRoLmRlZmF1bHQubG9nb3V0KGUpfSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdC5zdWNjZXNzJiZlKEFjdGlvbnMuZmluaXNoTG9nb3V0KCkpLHR9KS5jYXRjaChmdW5jdGlvbih0KXtjb25zb2xlLmVycm9yKHQpLGUoQWN0aW9ucy5zZXRFcnJvcih0KSl9KX1mdW5jdGlvbiByZWdpc3RlcihlLHQsbyl7cmV0dXJuIGUoQWN0aW9ucy5zdGFydFJlZ2lzdGVyKCkpLF9BdXRoLmRlZmF1bHQucmVnaXN0ZXIodCxvKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LnN1Y2Nlc3M/KGUoQWN0aW9ucy5maW5pc2hSZWdpc3Rlcih0KSksZShfVHV0b3JpYWwuZGVmYXVsdC5BY3Rpb25zLnVwZGF0ZUxvY2FsVHV0b3JpYWxTdGVwKHQudHV0b3JpYWxTdGVwKSkpOmUoQWN0aW9ucy5zZXRFcnJvcih0KSksbWFwUmVzcG9uc2VUb1Byb3BzKHQpfSkuY2F0Y2goZnVuY3Rpb24odCl7ZShBY3Rpb25zLnNldEVycm9yKHQpKX0pfWZ1bmN0aW9uIHNldFR1dG9yaWFsQ29tcGxldGVkKGUsdCxvKXtyZXR1cm4gX0F1dGguZGVmYXVsdC5zZXRUdXRvcmlhbENvbXBsZXRlZCh0LG8pLnRoZW4oZnVuY3Rpb24ocil7ci5zdWNjZXNzJiZlKEFjdGlvbnMuc2V0VHV0b3JpYWxDb21wbGV0ZWQodCxvKSl9KX1mdW5jdGlvbiBnZXRMb2dpblN0YXRlKGUsdCl7aWYodCYmX2xvZGFzaC5kZWZhdWx0LmdldCh0LFwiYXV0aC5sb2FkZWRcIikpcmV0dXJuIFByb21pc2UucmVzb2x2ZShtYXBSZXNwb25zZVRvUHJvcHModC5hdXRoLnJlc3BvbnNlKSk7dmFyIG89UHJvbWlzZS5yZXNvbHZlKG51bGwpO3VzZVRva2VuJiYobz1fVG9rZW4uZGVmYXVsdC5nZXQoKSk7dmFyIHI9bnVsbDtyZXR1cm4gby50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiByPWUsX0F1dGguZGVmYXVsdC5pc0xvZ2dlZEluKHIpfSkudGhlbihmdW5jdGlvbih0KXtpZih0LnN1Y2Nlc3Mpe3ZhciBvPXI/T2JqZWN0LmFzc2lnbih0LHt0b2tlbjpyfSk6dDtlKEFjdGlvbnMudXBkYXRlTG9naW5TdGF0ZShvKSksZShfVHV0b3JpYWwuZGVmYXVsdC5BY3Rpb25zLnVwZGF0ZUxvY2FsVHV0b3JpYWxTdGVwKHQudHV0b3JpYWxTdGVwKSksdC5sb2dnZWRJbiYmdXNlVG9rZW4mJl9BUElTdG9yYWdlLmRlZmF1bHQudXNlVG9rZW4odC50b2tlbil9ZWxzZSBlKEFjdGlvbnMuc2V0RXJyb3IodCkpO3JldHVybiBtYXBSZXNwb25zZVRvUHJvcHModCl9KS5jYXRjaChmdW5jdGlvbihlKXtjb25zb2xlLmVycm9yKFwiRXJyb3Igd2hlbiB0cnlpbmcgdG8gZ2V0IGxvZ2luIHN0YXRlXCIpLGNvbnNvbGUuZXJyb3IoZSl9KX1mdW5jdGlvbiBhbGxvY2F0ZVByb3h5KGUpe3JldHVybiBfUHJveHkuZGVmYXVsdC5hbGxvY2F0ZSgpLnRoZW4oZnVuY3Rpb24odCl7aWYodC5zdWNjZXNzKXt2YXIgbz10LnByb3h5QWxsb2NhdGlvbjtlKEFjdGlvbnMudXBkYXRlUHJveHlBbGxvY2F0aW9uKG8pKX1yZXR1cm4gdH0pfWZ1bmN0aW9uIG1hcFJlc3BvbnNlVG9Qcm9wcyhlKXtyZXR1cm57aXNMb2dnZWRJbjplLmxvZ2dlZEluLHVzZXJuYW1lOmUudXNlcm5hbWUsaXNBY3RpdmF0ZWQ6ZS5hY3RpdmF0ZWQsaXNBZG1pbjplLmlzQWRtaW4sdXNlclJvbGU6ZS5yb2xlLHVzZXJOYW1lOmUubmFtZSx1c2VyRW1haWw6ZS5lbWFpbCx1c2VyQ29tcGFueTplLmNvbXBhbnkseXVrYXRhVHV0b3JpYWxDb21wbGV0ZWQ6ZS55dWthdGFUdXRvcmlhbENvbXBsZXRlZCxleHRyYWN0b3JUdXRvcmlhbENvbXBsZXRlZDplLmV4dHJhY3RvclR1dG9yaWFsQ29tcGxldGVkLHByb3h5QWxsb2NhdGlvbjplLnByb3h5QWxsb2NhdGlvbixmZWF0dXJlRmxhZ3M6ZS5mZWF0dXJlRmxhZ3N8fHt9LHJlcXVlc3RMaW1pdDplLnJlcXVlc3RMaW1pdCxvcmdhbml6YXRpb246ZS5vcmdhbml6YXRpb259fWZ1bmN0aW9uIGdldE9yRmV0Y2hMb2dpblN0YXRlKGUpe3ZhciB0PWUuYXV0aFN0YXRlTG9hZGVkLG89ZS5nZXRMb2dpblN0YXRlO3JldHVybiB0P1Byb21pc2UucmVzb2x2ZShlKTpvKCl9ZnVuY3Rpb24gY29ubmVjdChlKXtyZXR1cm4oMCxfcmVhY3RSZWR1eC5jb25uZWN0KShmdW5jdGlvbihlKXt2YXIgdD1lLmF1dGg7cmV0dXJuIF9vYmplY3RTcHJlYWQoe2F1dGhTdGF0ZUxvYWRlZDp0LmxvYWRlZCxhdXRoTG9hZGluZzp0LmxvYWRpbmcsYXV0aEVycm9yOnQuZXJyb3J9LG1hcFJlc3BvbnNlVG9Qcm9wcyh0LnJlc3BvbnNlKSl9LGZ1bmN0aW9uKGUpe3JldHVybntsb2dpbjpsb2dpbi5iaW5kKG51bGwsZSksbG9nb3V0OmxvZ291dC5iaW5kKG51bGwsZSkscmVnaXN0ZXJVc2VyOnJlZ2lzdGVyLmJpbmQobnVsbCxlKSxnZXRMb2dpblN0YXRlOmdldExvZ2luU3RhdGUuYmluZChudWxsLGUpLGFsbG9jYXRlUHJveHk6YWxsb2NhdGVQcm94eS5iaW5kKG51bGwsZSksc2V0VHV0b3JpYWxDb21wbGV0ZWQ6c2V0VHV0b3JpYWxDb21wbGV0ZWQuYmluZChudWxsLGUpfX0sbnVsbCxlKX1leHBvcnRzLkFjdGlvbnM9QWN0aW9uczt2YXIgX2RlZmF1bHQ9e0FjdGlvbnM6QWN0aW9ucyxSZWR1Y2VyOlJlZHVjZXIsY29ubmVjdDpjb25uZWN0LGdldE9yRmV0Y2hMb2dpblN0YXRlOmdldE9yRmV0Y2hMb2dpblN0YXRlLGdldExvZ2luU3RhdGU6Z2V0TG9naW5TdGF0ZX07ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9yZWR1eD1yZXF1aXJlKFwicmVkdXhcIiksX0F1dGg9cmVxdWlyZShcIi4vQXV0aFwiKSxfVHV0b3JpYWw9cmVxdWlyZShcIi4vVHV0b3JpYWxcIiksX0FQSUVsZW1lbnRzPXJlcXVpcmUoXCIuL0FQSUVsZW1lbnRzXCIpLE1haW5SZWR1Y2VyPSgwLF9yZWR1eC5jb21iaW5lUmVkdWNlcnMpKHt0dXRvcmlhbFN0ZXA6X1R1dG9yaWFsLlJlZHVjZXIsYXV0aDpfQXV0aC5SZWR1Y2VyLGFwaUVsZW1lbnRzOl9BUElFbGVtZW50cy5SZWR1Y2VyfSksX2RlZmF1bHQ9TWFpblJlZHVjZXI7ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuUmVkdWNlcj1SZWR1Y2VyLGV4cG9ydHMuY29ubmVjdFR1dG9yaWFsU3RlcD1jb25uZWN0VHV0b3JpYWxTdGVwLGV4cG9ydHMuY29ubmVjdExvY2FsVHV0b3JpYWxTdGVwPWNvbm5lY3RMb2NhbFR1dG9yaWFsU3RlcCxleHBvcnRzLmRlZmF1bHQ9ZXhwb3J0cy5BY3Rpb25zPXZvaWQgMDt2YXIgX3JlYWN0UmVkdXg9cmVxdWlyZShcInJlYWN0LXJlZHV4XCIpLF9UdXRvcmlhbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9UdXRvcmlhbFwiKSksX0F1dGg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vQXV0aFwiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19dmFyIEFjdGlvbnM9e3VwZGF0ZUxvY2FsVHV0b3JpYWxTdGVwOmZ1bmN0aW9uKHQpe3JldHVybnt0eXBlOlwiVVBEQVRFX0xPQ0FMX1RVVE9SSUFMX1NURVBcIixzdGVwOnR9fSxhZHZhbmNlVHV0b3JpYWxTdGVwOmZ1bmN0aW9uKHQpe3JldHVybnt0eXBlOlwiQURWQU5DRV9UVVRPUklBTF9TVEVQXCIsY3VyU3RlcDp0fX19O2Z1bmN0aW9uIFJlZHVjZXIodCxlKXtpZih2b2lkIDA9PT10KXJldHVybiBudWxsO2lmKFwiQURWQU5DRV9UVVRPUklBTF9TVEVQXCI9PT1lLnR5cGUpe3ZhciByPXQsdT1fVHV0b3JpYWwuZGVmYXVsdC5zdGVwcy5pbmRleE9mKHIpLG49ZS5jdXJTdGVwLG89X1R1dG9yaWFsLmRlZmF1bHQuc3RlcHMuaW5kZXhPZihuKTtpZigtMT09PW8pdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgZmluZCBzdGVwIHdpdGggbmFtZSBcIi5jb25jYXQobikpO3ZhciBhPU1hdGgubWF4KHUsbysxKTthPj1fVHV0b3JpYWwuZGVmYXVsdC5zdGVwcy5sZW5ndGgmJihhPV9UdXRvcmlhbC5kZWZhdWx0LnN0ZXBzLmxlbmd0aC0xKTt2YXIgYz1fVHV0b3JpYWwuZGVmYXVsdC5zdGVwc1thXTtyZXR1cm4gY29uc29sZS5sb2coXCJBZHZhbmNpbmcgdG8gXCIuY29uY2F0KGMpKSxfQXV0aC5kZWZhdWx0LnNldFR1dG9yaWFsU3RlcChjKSxjfXJldHVyblwiVVBEQVRFX0xPQ0FMX1RVVE9SSUFMX1NURVBcIj09PWUudHlwZT9lLnN0ZXA6dH1mdW5jdGlvbiBjb25uZWN0VHV0b3JpYWxTdGVwKHQpe3JldHVybigwLF9yZWFjdFJlZHV4LmNvbm5lY3QpKGZ1bmN0aW9uKHQpe3JldHVybnt0dXRvcmlhbFN0ZXA6dC50dXRvcmlhbFN0ZXB9fSxmdW5jdGlvbih0KXtyZXR1cm57YWR2YW5jZVR1dG9yaWFsU3RlcDpmdW5jdGlvbihlKXt0KEFjdGlvbnMuYWR2YW5jZVR1dG9yaWFsU3RlcChlKSl9fX0sbnVsbCx0KX1mdW5jdGlvbiBjb25uZWN0TG9jYWxUdXRvcmlhbFN0ZXAodCl7cmV0dXJuKDAsX3JlYWN0UmVkdXguY29ubmVjdCkobnVsbCxmdW5jdGlvbih0KXtyZXR1cm57dXBkYXRlTG9jYWxUdXRvcmlhbFN0ZXA6ZnVuY3Rpb24oZSl7dChBY3Rpb25zLnVwZGF0ZUxvY2FsVHV0b3JpYWxTdGVwKGUpKX19fSxudWxsLHQpfWV4cG9ydHMuQWN0aW9ucz1BY3Rpb25zO3ZhciBfZGVmYXVsdD17QWN0aW9uczpBY3Rpb25zLFJlZHVjZXI6UmVkdWNlcixjb25uZWN0VHV0b3JpYWxTdGVwOmNvbm5lY3RUdXRvcmlhbFN0ZXAsY29ubmVjdExvY2FsVHV0b3JpYWxTdGVwOmNvbm5lY3RMb2NhbFR1dG9yaWFsU3RlcH07ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiOyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpLF9PdmVybGF5VHJpZ2dlcj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdC1ib290c3RyYXAvbGliL092ZXJsYXlUcmlnZ2VyXCIpKSxfVG9vbHRpcD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdC1ib290c3RyYXAvbGliL1Rvb2x0aXBcIikpLF9Ecm9wZG93blNlbGVjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0Ryb3Bkb3duU2VsZWN0XCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBfdHlwZW9mKGUpe3JldHVybihfdHlwZW9mPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBfZXh0ZW5kcygpe3JldHVybihfZXh0ZW5kcz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgcj1hcmd1bWVudHNbdF07Zm9yKHZhciBvIGluIHIpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIsbykmJihlW29dPXJbb10pfXJldHVybiBlfSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgQVBJRWxlbWVudFNlbGVjdD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIGUscjtfY2xhc3NDYWxsQ2hlY2sodGhpcyx0KTtmb3IodmFyIG89YXJndW1lbnRzLmxlbmd0aCxuPW5ldyBBcnJheShvKSxhPTA7YTxvO2ErKyluW2FdPWFyZ3VtZW50c1thXTtyZXR1cm4ocj1fcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLChlPV9nZXRQcm90b3R5cGVPZih0KSkuY2FsbC5hcHBseShlLFt0aGlzXS5jb25jYXQobikpKSkucHJvcHM9dm9pZCAwLHJ9cmV0dXJuIF9pbmhlcml0cyh0LF9yZWFjdC5kZWZhdWx0LlB1cmVDb21wb25lbnQpLF9jcmVhdGVDbGFzcyh0LFt7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnByb3BzLHQ9ZS5hcGlFbGVtZW50cyxyPWUudXNlcm5hbWUsbz10LmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hcnx8ZS51c2VybmFtZT09PXJ9KSxuPXQuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiByJiZlLnVzZXJuYW1lIT09cn0pLGE9by5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZS51c2VybmFtZSxyPWUucmVwb3NpdG9yeSxvPWUubmFtZTtyZXR1cm57dmFsdWU6e3VzZXJuYW1lOnQscmVwb3NpdG9yeTpyLG5hbWU6b30sbGFiZWw6XCJcIi5jb25jYXQodCxcIi9cIikuY29uY2F0KHIsXCIvXCIpLmNvbmNhdChvKX19KSxpPW4ubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWUudXNlcm5hbWUscj1lLnJlcG9zaXRvcnksbz1lLm5hbWU7cmV0dXJue3ZhbHVlOnt1c2VybmFtZTp0LHJlcG9zaXRvcnk6cixuYW1lOm99LHRleHRMYWJlbDpcIlwiLmNvbmNhdCh0LFwiL1wiKS5jb25jYXQocixcIi9cIikuY29uY2F0KG8pLGxhYmVsOl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsbnVsbCx0LFwiL1wiLHIsXCIvXCIsbyxcIiBcIixfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9PdmVybGF5VHJpZ2dlci5kZWZhdWx0LHtvdmVybGF5Ol9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1Rvb2x0aXAuZGVmYXVsdCx7aWQ6XCJvcmdhbml6YXRpb25cIn0sXCJPd25lZCBieSBzb21lb25lIGluIHlvdXIgb3JnYW5pemF0aW9uXCIpfSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaVwiLHtjbGFzc05hbWU6XCJmYSBmYS11c2Vyc1wifSkpKX19KSx1PWEuY29uY2F0KGkpLGw9X2xvZGFzaC5kZWZhdWx0Lm9taXQodGhpcy5wcm9wcyxbXCJhcGlFbGVtZW50c1wiLFwidXNlcm5hbWVcIl0pO3JldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Ecm9wZG93blNlbGVjdC5kZWZhdWx0LF9leHRlbmRzKHt9LGwse29wdGlvbnM6dX0pKX19XSksdH0oKTtleHBvcnRzLmRlZmF1bHQ9QVBJRWxlbWVudFNlbGVjdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9sb2Rhc2g9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoXCIpKSxfQ29sbGFwc2U9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3QtYm9vdHN0cmFwL2xpYi9Db2xsYXBzZVwiKSksX0NhcHR1cmU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanMvQ2FwdHVyZVwiKSksX05ld1V0aWxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vTmV3VXRpbHNcIikpLF9SZXF1ZXN0TGlzdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL1JlcXVlc3RMaXN0XCIpKSxfUmVxdWVzdFBhbmVsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vUmVxdWVzdFBhbmVsXCIpKSxfRGVib3VuY2VkSW5wdXQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9EZWJvdW5jZWRJbnB1dFwiKSksX0NoZWNrYm94PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQ2hlY2tib3hcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGE9dFtyXTthLmVudW1lcmFibGU9YS5lbnVtZXJhYmxlfHwhMSxhLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBhJiYoYS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsYS5rZXksYSl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgUHJvcFR5cGVzPV9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcyxDYXB0dXJlc1ZpZXc9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciBlLHI7X2NsYXNzQ2FsbENoZWNrKHRoaXMsdCk7Zm9yKHZhciBhPWFyZ3VtZW50cy5sZW5ndGgsbD1uZXcgQXJyYXkoYSksbj0wO248YTtuKyspbFtuXT1hcmd1bWVudHNbbl07cmV0dXJuKHI9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoZT1fZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwuYXBwbHkoZSxbdGhpc10uY29uY2F0KGwpKSkpLnN0YXRlPXtyZXFJbmRleDpudWxsLGZpbHRlcnM6e3Nob3J0TWltZXM6e2RvYzohMCxqc29uOiEwLGltZzohMSxqczohMSxjc3M6ITEsb3RoZXI6ITF9LHRleHRTZWFyY2hQbGFjZXM6X2xvZGFzaC5kZWZhdWx0LmNsb25lKF9DYXB0dXJlLmRlZmF1bHQuYWxsVGV4dFNlYXJjaFBsYWNlc0ZpbHRlciksdGV4dDpcIlwifSxleHBhbmRUZXh0U2VhcmNoRmlsdGVyczohMX0sci5oYW5kbGVOZXdBUElFbGVtZW50PWZ1bmN0aW9uKGUpe3ZhciB0PV9sb2Rhc2guZGVmYXVsdC5jaGFpbihyLnByb3BzLmV4aXN0aW5nQVBJRWxlbWVudHMpLm1hcChmdW5jdGlvbihlLHQpe3JldHVyblt0LGVdfSkuY29uY2F0KFtbXCJcIi5jb25jYXQoZS5yZXBvc2l0b3J5LFwiL1wiKS5jb25jYXQoZS5uYW1lKSxlXV0pLnNvcnRCeSgwKS5mcm9tUGFpcnMoKS52YWx1ZSgpO3IucHJvcHMub25FeGlzdGluZ0FQSUVsZW1lbnRzQ2hhbmdlKHQpfSxyLmdldEdyb3VwQ2hlY2tlZD1mdW5jdGlvbihlKXt2YXIgdD1yLnN0YXRlLmZpbHRlcnMudGV4dFNlYXJjaFBsYWNlcyxhPV9DYXB0dXJlLmRlZmF1bHQuZ3JvdXBlZFRleHRTZWFyY2hQbGFjZXNbZV0sbD1mdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0sbj1hLmV2ZXJ5KGwpLHM9YS5zb21lKGwpO3JldHVybiBuP1wiYWxsXCI6cz9cInNvbWVcIjpcIm5vbmVcIn0sci50b2dnbGVHcm91cD1mdW5jdGlvbihlKXt2YXIgdD1fQ2FwdHVyZS5kZWZhdWx0Lmdyb3VwZWRUZXh0U2VhcmNoUGxhY2VzW2VdLGE9IShcImFsbFwiPT09ci5nZXRHcm91cENoZWNrZWQoZSkpLGw9ci5zdGF0ZS5maWx0ZXJzLG49X2xvZGFzaC5kZWZhdWx0LmNsb25lKGwudGV4dFNlYXJjaFBsYWNlcyk7dC5mb3JFYWNoKGZ1bmN0aW9uKGUpe25bZV09YX0pLHIuc2V0U3RhdGUoe2ZpbHRlcnM6X05ld1V0aWxzLmRlZmF1bHQuc2V0TWl4ZWQobCxcInRleHRTZWFyY2hQbGFjZXNcIixuKX0pfSxyfXJldHVybiBfaW5oZXJpdHModCxfcmVhY3QuZGVmYXVsdC5QdXJlQ29tcG9uZW50KSxfY3JlYXRlQ2xhc3ModCxbe2tleTpcImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnN0YXRlLnJlcUluZGV4O2UucmVxdWVzdHM9PT10aGlzLnByb3BzLnJlcXVlc3RzfHxlLnJlcXVlc3RzW3RdfHx0aGlzLnNldFN0YXRlKHtyZXFJbmRleDpudWxsfSl9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5wcm9wcy5yZXF1ZXN0cyxyPXRoaXMucHJvcHMuZXhpc3RpbmdBUElFbGVtZW50cyxhPXRoaXMucHJvcHMuc2hvd1R1dG9yaWFsLGw9dGhpcy5wcm9wcy5pc1JlY29yZGluZyxuPXRoaXMuc3RhdGUucmVxSW5kZXgscz10aGlzLnN0YXRlLmZpbHRlcnMsbz10aGlzLnN0YXRlLmV4cGFuZFRleHRTZWFyY2hGaWx0ZXJzLGk9X2xvZGFzaC5kZWZhdWx0LmZyb21QYWlycyhfbG9kYXNoLmRlZmF1bHQubWFwKF9DYXB0dXJlLmRlZmF1bHQuZ3JvdXBlZFRleHRTZWFyY2hQbGFjZXMsZnVuY3Rpb24odCxyKXtyZXR1cm5bcixlLmdldEdyb3VwQ2hlY2tlZChyKV19KSksdT1udWxsIT1uP3Rbbl06bnVsbCxjPXUmJnMudGV4dD9fQ2FwdHVyZS5kZWZhdWx0LnNlYXJjaEluQ2FwdHVyZSh1LHMudGV4dCk6bnVsbDtyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJ3YS1wcmltYXJ5LXBhbmVsIHdhLWxlZnQtcGFuZWwgd2EtYW5pbWF0ZS13aWR0aCBcIi5jb25jYXQobnVsbCE9bj9cImNvbC14cy00XCI6XCJjb2wteHMtMTJcIil9LHRoaXMucHJvcHMuY2hpbGRyZW4sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJwYW5lbCBwYW5lbC1wcmltYXJ5IHdhLWJvdHRvbTEwXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwicGFuZWwtYm9keSB3YS1wYWQtdmVydGljYWwxMFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImZvcm0taW5saW5lXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLHtodG1sRm9yOlwidGV4dEZpbHRlclwifSxcIkZpbHRlciBieSBrZXl3b3JkIGluIFVSTCwgcmVxdWVzdCwgb3IgcmVzcG9uc2U6XCIpLFwiIFwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0RlYm91bmNlZElucHV0LmRlZmF1bHQse3R5cGU6XCJ0ZXh0XCIsaWQ6XCJ0ZXh0RmlsdGVyXCIsY2xhc3NOYW1lOlwiZm9ybS1jb250cm9sXCIsdmFsdWU6cy50ZXh0LG9uQ2hhbmdlOl9OZXdVdGlscy5kZWZhdWx0LnVwZGF0ZSh0aGlzLFwiZmlsdGVycy50ZXh0XCIpLHdhaXQ6MjAwfSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0NvbGxhcHNlLmRlZmF1bHQse2luOiEhcy50ZXh0fSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcIndhLXRvcDEwXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLFwiU2VhcmNoIGluOiBcIiksbz9fbG9kYXNoLmRlZmF1bHQubWFwKF9DYXB0dXJlLmRlZmF1bHQudGV4dFNlYXJjaFBsYWNlcyxmdW5jdGlvbih0LHIpe3JldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIix7a2V5OnIsY2xhc3NOYW1lOlwiY2hlY2tib3gtaW5saW5lXCIsc3R5bGU6e21hcmdpbkxlZnQ6MTB9fSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIix7dHlwZTpcImNoZWNrYm94XCIsY2hlY2tlZDpzLnRleHRTZWFyY2hQbGFjZXNbcl0sc3R5bGU6e21hcmdpbkxlZnQ6LTE1fSxvbkNoYW5nZTpfTmV3VXRpbHMuZGVmYXVsdC50b2dnbGUoZSxbXCJmaWx0ZXJzXCIsXCJ0ZXh0U2VhcmNoUGxhY2VzXCIscl0pfSksXCIgXCIsdFswXS50b1VwcGVyQ2FzZSgpLHQuc3Vic3RyKDEpKX0pOl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsbnVsbCxfbG9kYXNoLmRlZmF1bHQubWFwKF9DYXB0dXJlLmRlZmF1bHQuZ3JvdXBlZFRleHRTZWFyY2hQbGFjZXMsZnVuY3Rpb24odCxyKXtyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIse2tleTpyLGNsYXNzTmFtZTpcImNoZWNrYm94LWlubGluZVwiLHN0eWxlOnttYXJnaW5MZWZ0OjEwfX0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQ2hlY2tib3guZGVmYXVsdCx7Y2hlY2tlZDpcImFsbFwiPT09aVtyXSxpbmRldGVybWluYXRlOlwic29tZVwiPT09aVtyXSxzdHlsZTp7bWFyZ2luTGVmdDotMTV9LG9uQ2hhbmdlOl9OZXdVdGlscy5kZWZhdWx0LmNhbGwoZSxcInRvZ2dsZUdyb3VwXCIsW3JdKX0pLFwiIFwiLHJbMF0udG9VcHBlckNhc2UoKSxyLnN1YnN0cigxKSl9KSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImFcIix7aHJlZjpcIiNleHBhbmRUZXh0U2VhcmNoRmlsdGVyc1wiLGNsYXNzTmFtZTpcIndhLWxlZnQxMFwiLG9uQ2xpY2s6X05ld1V0aWxzLmRlZmF1bHQudG9nZ2xlKHRoaXMsXCJleHBhbmRUZXh0U2VhcmNoRmlsdGVyc1wiLCEwKX0sXCIoXCIsbz9cIkhpZGVcIjpcIlNob3dcIixcIiBmaW5lci1ncmFpbmVkIGNvbnRyb2xzKVwiKSkpKSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwicGFuZWwgcGFuZWwtcHJpbWFyeSB3YS1ib3R0b20xMFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInBhbmVsLWJvZHkgd2EtcGFkLXZlcnRpY2FsMTBcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInN0cm9uZ1wiLG51bGwsXCJGaWx0ZXIgYnkgcmVzcG9uc2UgdHlwZTogXCIpLF9sb2Rhc2guZGVmYXVsdC5tYXAoX0NhcHR1cmUuZGVmYXVsdC5zaG9ydE1pbWVzLGZ1bmN0aW9uKHQscil7cmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLHtrZXk6cixjbGFzc05hbWU6XCJjaGVja2JveC1pbmxpbmVcIixzdHlsZTp7bWFyZ2luTGVmdDoxMH19LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLHt0eXBlOlwiY2hlY2tib3hcIixjaGVja2VkOnMuc2hvcnRNaW1lc1tyXSxzdHlsZTp7bWFyZ2luTGVmdDotMTV9LG9uQ2hhbmdlOl9OZXdVdGlscy5kZWZhdWx0LnRvZ2dsZShlLFtcImZpbHRlcnNcIixcInNob3J0TWltZXNcIixyXSl9KSxcIiBcIix0KX0pKSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfUmVxdWVzdExpc3QuZGVmYXVsdCx7c2hvd1R1dG9yaWFsOmEscmVxdWVzdHM6dCxpc1JlY29yZGluZzpsLHVwZGF0ZVNlbGVjdGVkUmVxdWVzdDpfTmV3VXRpbHMuZGVmYXVsdC51cGRhdGUodGhpcyxcInJlcUluZGV4XCIpLHNlbGVjdGVkSW5kZXg6bixvblNlbGVjdDpfTmV3VXRpbHMuZGVmYXVsdC51cGRhdGUodGhpcyxcInJlcUluZGV4XCIpLGZpbHRlcnM6cyxvbkZpbHRlcnNDaGFuZ2U6X05ld1V0aWxzLmRlZmF1bHQudXBkYXRlKHRoaXMsXCJmaWx0ZXJzXCIpfSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwid2EtcHJpbWFyeS1wYW5lbCB3YS1yaWdodC1wYW5lbCB3YS1hbmltYXRlLXdpZHRoIFwiLmNvbmNhdCh1P1wiY29sLXhzLThcIjpcIndhLXplcm8td2lkdGhcIil9LHUmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1JlcXVlc3RQYW5lbC5kZWZhdWx0LHthbGxvd1NhdmU6ITAsb25OZXdBUElFbGVtZW50OnRoaXMuaGFuZGxlTmV3QVBJRWxlbWVudCxkYXRhOnUsdXBkYXRlU2VsZWN0ZWRSZXF1ZXN0Ol9OZXdVdGlscy5kZWZhdWx0LnVwZGF0ZSh0aGlzLFwicmVxSW5kZXhcIiksZXhpc3RpbmdBUElFbGVtZW50czpyLHJlcXVlc3RzOnQsc2V0U2VhcmNoOl9OZXdVdGlscy5kZWZhdWx0LnVwZGF0ZSh0aGlzLFwiZmlsdGVycy50ZXh0XCIpLHNlYXJjaEZvdW5kSW46Y30pKSl9fV0pLHR9KCk7Q2FwdHVyZXNWaWV3LnByb3BUeXBlcz17cmVxdWVzdHM6UHJvcFR5cGVzLmFycmF5LmlzUmVxdWlyZWQsZXhpc3RpbmdBUElFbGVtZW50czpQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsb25FeGlzdGluZ0FQSUVsZW1lbnRzQ2hhbmdlOlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsc2hvd1R1dG9yaWFsOlByb3BUeXBlcy5ib29sLGlzUmVjb3JkaW5nOlByb3BUeXBlcy5ib29sLGNoaWxkcmVuOlByb3BUeXBlcy5ub2RlfTt2YXIgX2RlZmF1bHQ9Q2FwdHVyZXNWaWV3O2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9Q2hlY2tib3g7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF9leHRlbmRzKCl7cmV0dXJuKF9leHRlbmRzPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciByPWFyZ3VtZW50c1t0XTtmb3IodmFyIG4gaW4gcilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixuKSYmKGVbbl09cltuXSl9cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gQ2hlY2tib3goZSl7dmFyIHQ9ZS5pbmRldGVybWluYXRlLHI9X2xvZGFzaC5kZWZhdWx0Lm9taXQoZSxcImluZGV0ZXJtaW5hdGVcIik7cmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLF9leHRlbmRzKHt9LHIse3R5cGU6XCJjaGVja2JveFwiLHJlZjpmdW5jdGlvbihlKXtlJiYoZS5pbmRldGVybWluYXRlPXQpfX0pKX1DaGVja2JveC5wcm9wVHlwZXM9e2luZGV0ZXJtaW5hdGU6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmJvb2x9OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX0NvbmZpZz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9qcy9Db25maWdcIikpLF9DaHJvbWU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanMvQ2hyb21lXCIpKSxfVmlkZW9Db250YWluZXI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9WaWRlb0NvbnRhaW5lclwiKSksX3dpdGhDaHJvbWU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9ob2NzL3dpdGhDaHJvbWVcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGE9dFtyXTthLmVudW1lcmFibGU9YS5lbnVtZXJhYmxlfHwhMSxhLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBhJiYoYS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsYS5rZXksYSl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgQ2hyb21lUGx1Z2luUHJvbXB0PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gX2NsYXNzQ2FsbENoZWNrKHRoaXMsdCksX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcyxfZ2V0UHJvdG90eXBlT2YodCkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gX2luaGVyaXRzKHQsX3JlYWN0LmRlZmF1bHQuUHVyZUNvbXBvbmVudCksX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucHJvcHMsdD1lLmlzQ2hyb21lLHI9ZS5pc0V4dGVuc2lvbkluc3RhbGxlZDtyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJyb3dcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJjb2wtc20tNiBjb2wtbWQtNyBjb2wtbGctOFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaDJcIixudWxsLFwiSW5zdGFsbGluZyB0aGUgV3JhcEFQSSBDaHJvbWUgZXh0ZW5zaW9uXCIpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1ZpZGVvQ29udGFpbmVyLmRlZmF1bHQse3lvdXR1YmVJZDpcIlZlU0RzZnk0VWU4XCIsaW1hZ2VTcmM6XCIvYXNzZXRzL2hvbWVwYWdlL3ZpZGVvMi10aHVtYi5wbmdcIn0pKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImNvbC1zbS02IGNvbC1tZC01IGNvbC1sZy00XCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwicGFuZWwgcGFuZWwtcHJpbWFyeSB3YS10b3AyMFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInBhbmVsLWJvZHlcIn0sX0NvbmZpZy5kZWZhdWx0LnBsdWdpblVSTD9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInRleHQtY2VudGVyIHdhLWJvdHRvbTIwXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwid2EtYm90dG9tMTBcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLHtjbGFzc05hbWU6XCJidG4gYnRuLWxnIGJ0bi1wcmltYXJ5XCIsdHlwZTpcImJ1dHRvblwiLG9uQ2xpY2s6X0Nocm9tZS5kZWZhdWx0Lmluc3RhbGxFeHRlbnNpb24sZGlzYWJsZWQ6ITE9PT10fHxyfSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaVwiLHtjbGFzc05hbWU6XCJmYSBmYS1jaHJvbWVcIn0pLFwiIEluc3RhbGwgV3JhcEFQSSBDaHJvbWUgZXh0ZW5zaW9uXCIpKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYVwiLHtocmVmOl9Db25maWcuZGVmYXVsdC5wbHVnaW5VUkwsdGFyZ2V0OlwiX2JsYW5rXCJ9LFwiU2VlIGl0IGluIHRoZSBDaHJvbWUgd2ViIHN0b3JlXCIpKSk6X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJ3YS1ib3R0b20yMFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInRleHQtY2VudGVyIHdhLWJvdHRvbTEwXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJhXCIse2NsYXNzTmFtZTpcImJ0biBidG4tbGcgYnRuLXByaW1hcnlcIixkb3dubG9hZDohMCxocmVmOlwiL2V4dGVuc2lvbi56aXBcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlcIix7Y2xhc3NOYW1lOlwiZmEgZmEtY2hyb21lXCJ9KSxcIiBEb3dubG9hZCBXcmFwQVBJIENocm9tZSBleHRlbnNpb25cIikpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiYWxlcnQgYWxlcnQtaW5mb1wifSxcIlRvIGluc3RhbGwgaXQ6XCIsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcIm9sXCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwibGlcIixudWxsLFwiRXh0cmFjdCB0aGUgY29udGVudHMgb2YgdGhlIGRvd25sb2FkZWQgZXh0ZW5zaW9ucy56aXAgZmlsZSB0byBhIGZvbGRlci5cIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxpXCIsbnVsbCxcIk9wZW4gYSBuZXcgdGFiLCBhbmQgdHlwZVwiLFwiIFwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLFwiY2hyb21lOi8vZXh0ZW5zaW9uc1wiKSxcIiBpbnRvIHRoZSBhZGRyZXNzIGJhciB0byBtYW5hZ2UgeW91ciBDaHJvbWUgZXh0ZW5zaW9ucy5cIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxpXCIsbnVsbCxcIkNoZWNrIHRoZSBcIixfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsbnVsbCxcIkRldmVsb3BlciBtb2RlXCIpLFwiIGNoZWNrYm94IGluIHRoZSByaWdodCB0b3AgY29ybmVyLlwiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwibGlcIixudWxsLFwiQ2xpY2sgdGhlIFwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLFwiTG9hZCB1bnBhY2tlZCBleHRlbnNpb24uLi5cIiksXCIgXCIsXCJidXR0b24gYW5kIHNlbGVjdCB0aGUgZm9sZGVyIHlvdSBleHRyYWN0ZWQgZXh0ZW5zaW9ucy56aXAgdG8uXCIpKSkpLCExPT09dCYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJhbGVydCBhbGVydC1kYW5nZXJcIn0sXCJXcmFwQVBJJ3MgcmVxdWVzdCBjYXB0dXJlIHBsdWdpbiBpcyBjdXJyZW50bHkgb25seSBjb21wYXRpYmxlIHdpdGggQ2hyb21lLCB0aG91Z2ggdGhlIHJlc3Qgb2YgdGhlIHNpdGUgd2lsbCB3b3JrIHdpdGggYW55IGJyb3dzZXIuXCIsXCIgXCIsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImFcIix7aHJlZjpcImh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vY2hyb21lL2Jyb3dzZXIvXCJ9LFwiR2V0IENocm9tZSB0byBzdGFydCB1c2luZyBjYXB0dXJpbmcgcmVxdWVzdHMuXCIpKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwicFwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInN0cm9uZ1wiLG51bGwsXCJJbnN0YWxsaW5nIHRoZSBXcmFwQVBJIENocm9tZSBleHRlbnNpb24gbGV0cyB5b3UgY2FwdHVyZSByZXF1ZXN0cyB5b3UgbWFrZSBpbiBDaHJvbWVcIiksXCIgXCIsXCJhbmQgcXVpY2tseSB0dXJuIHRoZW0gaW50byBBUEkgZW5kcG9pbnRzLlwiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwicFwiLG51bGwsXCJGb3IgZXhhbXBsZSwgaXQncyBlc3BlY2lhbGx5IHVzZWZ1bCBmb3I6XCIpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxpXCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsbnVsbCxcIlNpdGVzIHRoYXQgdXNlIEFKQVggcmVxdWVzdHNcIiksXCIgdG8gbG9hZCBkYXRhIGluIHRoZSBiYWNrZ3JvdW5kO1wiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwibGlcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLFwiTXVsdGktc3RlcCBmb3Jtc1wiKSxcIiwgd2hlcmUgZWFjaCBzdGVwIGRlcGVuZHMgb24gdGhlIHByZXZpb3VzOyBhbmRcIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxpXCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsbnVsbCxcIlBhZ2VzIGJlaGluZCBsb2dpbnNcIiksXCI7IHRoZSBDaHJvbWUgZXh0ZW5zaW9uIGxldHMgeW91IHN0YXJ0IGJ1aWxkaW5nIGFuIEFQSSB3aXRoIHRoZSBjb29raWVzIG9mIGEgbG9nZ2VkLWluIHNlc3Npb24uXCIpKSkpKSl9fV0pLHR9KCksX2RlZmF1bHQ9KDAsX3dpdGhDaHJvbWUuZGVmYXVsdCkoQ2hyb21lUGx1Z2luUHJvbXB0KTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9leHRlbmRzKCl7cmV0dXJuKF9leHRlbmRzPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XTtmb3IodmFyIG8gaW4gbilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobixvKSYmKGVbb109bltvXSl9cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgbz10W25dO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG8mJihvLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLmtleSxvKX19ZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsdCxuKXtyZXR1cm4gdCYmX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsdCksbiYmX2RlZmluZVByb3BlcnRpZXMoZSxuKSxlfWZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKGUsdCl7cmV0dXJuIXR8fFwib2JqZWN0XCIhPT1fdHlwZW9mKHQpJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0P19hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSk6dH1mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpe2lmKHZvaWQgMD09PWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiBlfWZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihlKXtyZXR1cm4oX2dldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9KShlKX1mdW5jdGlvbiBfaW5oZXJpdHMoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJl9zZXRQcm90b3R5cGVPZihlLHQpfWZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihlLHQpe3JldHVybihfc2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlLHQpe3JldHVybiBlLl9fcHJvdG9fXz10LGV9KShlLHQpfXZhciBEZWJvdW5jZWRJbnB1dD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIGU7cmV0dXJuIF9jbGFzc0NhbGxDaGVjayh0aGlzLHQpLChlPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsX2dldFByb3RvdHlwZU9mKHQpLmNhbGwodGhpcykpKS5wcm9wcz12b2lkIDAsZS5zdGF0ZT12b2lkIDAsZS5oYW5kbGVDaGFuZ2VEZWJvdW5jZWQ9dm9pZCAwLGUuaGFuZGxlQ2hhbmdlPWZ1bmN0aW9uKHQpe3ZhciBuPXQudGFyZ2V0LnZhbHVlO2Uuc2V0U3RhdGUoe3ZhbHVlOm4sbG9hZGluZzohMH0pLGUuaGFuZGxlQ2hhbmdlRGVib3VuY2VkKG4pfSxlLnN0YXRlPXt2YWx1ZTpcIlwiLGxvYWRpbmc6ITF9LGUuaGFuZGxlQ2hhbmdlRGVib3VuY2VkPWZ1bmN0aW9uKCl7fSxlfXJldHVybiBfaW5oZXJpdHModCxfcmVhY3QuZGVmYXVsdC5QdXJlQ29tcG9uZW50KSxfY3JlYXRlQ2xhc3ModCxbe2tleTpcImxvYWREYXRhXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5zZXRTdGF0ZSh7dmFsdWU6ZS52YWx1ZX0pfX0se2tleTpcInVwZGF0ZURlYm91bmNlZEZ1bmN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLmhhbmRsZUNoYW5nZURlYm91bmNlZD1fbG9kYXNoLmRlZmF1bHQuZGVib3VuY2UoZnVuY3Rpb24oZSl7dC5zZXRTdGF0ZSh7bG9hZGluZzohMX0pLHQucHJvcHMub25DaGFuZ2UoZSl9LGUud2FpdCl9fSx7a2V5OlwiY29tcG9uZW50V2lsbE1vdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmxvYWREYXRhKHRoaXMucHJvcHMpLHRoaXMudXBkYXRlRGVib3VuY2VkRnVuY3Rpb24odGhpcy5wcm9wcyl9fSx7a2V5OlwiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2UudmFsdWUhPT10aGlzLnByb3BzLnZhbHVlJiZ0aGlzLmxvYWREYXRhKGUpLGUud2FpdCE9PXRoaXMucHJvcHMud2FpdCYmdGhpcy51cGRhdGVEZWJvdW5jZWRGdW5jdGlvbihlKX19LHtrZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3RhdGUsdD1lLnZhbHVlLG49ZS5sb2FkaW5nLG89X2xvZGFzaC5kZWZhdWx0Lm9taXQodGhpcy5wcm9wcyxbXCJ3YWl0XCJdKTtyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInNwYW5cIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLF9leHRlbmRzKHt9LG8se3ZhbHVlOnQsb25DaGFuZ2U6dGhpcy5oYW5kbGVDaGFuZ2V9KSksXCIgXCIsbiYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlcIix7Y2xhc3NOYW1lOlwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBmYS1md1wifSkpfX1dKSx0fSgpO21vZHVsZS5leHBvcnRzPURlYm91bmNlZElucHV0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpLF9OYXZEcm9wZG93bj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdC1ib290c3RyYXAvbGliL05hdkRyb3Bkb3duXCIpKSxfRHJvcGRvd25CdXR0b249X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3QtYm9vdHN0cmFwL2xpYi9Ecm9wZG93bkJ1dHRvblwiKSksX0Ryb3Bkb3duPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0LWJvb3RzdHJhcC9saWIvRHJvcGRvd25cIikpLF9NZW51SXRlbT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdC1ib290c3RyYXAvbGliL01lbnVJdGVtXCIpKSxfVXRpbGl0eT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9qcy9VdGlsaXR5XCIpKSxfTmV3VXRpbHM9cmVxdWlyZShcIi4vTmV3VXRpbHNcIik7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gX2V4dGVuZHMoKXtyZXR1cm4oX2V4dGVuZHM9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIHI9YXJndW1lbnRzW3RdO2Zvcih2YXIgbyBpbiByKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLG8pJiYoZVtvXT1yW29dKX1yZXR1cm4gZX0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBfdHlwZW9mKGUpe3JldHVybihfdHlwZW9mPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07by5lbnVtZXJhYmxlPW8uZW51bWVyYWJsZXx8ITEsby5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG8ua2V5LG8pfX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSx0LHIpe3JldHVybiB0JiZfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxyJiZfZGVmaW5lUHJvcGVydGllcyhlLHIpLGV9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PV90eXBlb2YodCkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/X2Fzc2VydFRoaXNJbml0aWFsaXplZChlKTp0fWZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKGUpe3JldHVybihfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIF9pbmhlcml0cyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmX3NldFByb3RvdHlwZU9mKGUsdCl9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKGUsdCl7cmV0dXJuKF9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0pKGUsdCl9ZnVuY3Rpb24gZGVmYXVsdFRleHRSZW5kZXJlcihlKXtyZXR1cm4gZS5sYWJlbH12YXIgVW5zZWxlY3RhYmxlTWVudUl0ZW09ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBfY2xhc3NDYWxsQ2hlY2sodGhpcyx0KSxfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLF9nZXRQcm90b3R5cGVPZih0KS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBfaW5oZXJpdHModCxfcmVhY3QuZGVmYXVsdC5QdXJlQ29tcG9uZW50KSxfY3JlYXRlQ2xhc3ModCxbe2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLHtvbkNsaWNrOl9OZXdVdGlscy5wcmV2ZW50RGVmYXVsdH0sdGhpcy5wcm9wcy5jaGlsZHJlbil9fV0pLHR9KCkscHJvcFR5cGVzPXt2YWx1ZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMub25lT2ZUeXBlKFtfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuc3RyaW5nLF9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5udW1iZXJdKSxvcHRpb25zOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5vbmVPZlR5cGUoW19yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5hcnJheSxfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMub2JqZWN0XSksZ2V0T3B0aW9uczpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYyxvbkNoYW5nZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLG5hdjpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYm9vbCxidXR0b246X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmJvb2wsc2VhcmNoYWJsZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYm9vbCxvblRvZ2dsZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYyxpZDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuc3RyaW5nLHNlbGVjdGVkVGV4dFJlbmRlcmVyOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5mdW5jLGRlZmF1bHRMYWJlbDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMubm9kZSxwdWxsUmlnaHQ6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmJvb2x9LERyb3Bkb3duU2VsZWN0PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgZSxyO19jbGFzc0NhbGxDaGVjayh0aGlzLHQpO2Zvcih2YXIgbz1hcmd1bWVudHMubGVuZ3RoLG49bmV3IEFycmF5KG8pLGE9MDthPG87YSsrKW5bYV09YXJndW1lbnRzW2FdO3JldHVybihyPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsKGU9X2dldFByb3RvdHlwZU9mKHQpKS5jYWxsLmFwcGx5KGUsW3RoaXNdLmNvbmNhdChuKSkpKS5zdGF0ZT17ZHJvcGRvd25JZDpcImRyb3Bkb3duXCIuY29uY2F0KE1hdGguZmxvb3IoMWU5Kk1hdGgucmFuZG9tKCkpKSxvcHRpb25zOltdLG9wZW46ITEsdGV4dEZpbHRlcjpcIlwiLHNlbGVjdGVkTWF0Y2hJbmRleDowfSxyLl9zZWFyY2hCb3g9bnVsbCxyLmhhbmRsZVRvZ2dsZT1mdW5jdGlvbihlKXt2YXIgdD1yLnByb3BzLmdldE9wdGlvbnM7ci5zZXRTdGF0ZSh7b3BlbjplfSksZT8odCYmci5zZXRTdGF0ZSh7b3B0aW9uczp0KCl9KSxyLl9zZWFyY2hCb3gmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gci5fc2VhcmNoQm94LmZvY3VzKCl9LDEpKTpyLnNldFN0YXRlKHt0ZXh0RmlsdGVyOlwiXCIsc2VsZWN0ZWRNYXRjaEluZGV4OjB9KX0sci5oYW5kbGVUZXh0RmlsdGVyQ2hhbmdlPWZ1bmN0aW9uKGUpe3Iuc2V0U3RhdGUoe3RleHRGaWx0ZXI6ZS50YXJnZXQudmFsdWUsc2VsZWN0ZWRNYXRjaEluZGV4OjB9KX0sci5oYW5kbGVTZWFyY2hCb3hLZXlEb3duPWZ1bmN0aW9uKGUpe3ZhciB0PXIuc3RhdGUuc2VsZWN0ZWRNYXRjaEluZGV4LG89ci5nZXREaXNwbGF5ZWRPcHRpb25zKCk7aWYoMCE9PW8ubGVuZ3RoKXt2YXIgbj1udWxsOzM4PT09ZS5rZXlDb2RlP249dC0xOjQwPT09ZS5rZXlDb2RlJiYobj10KzEpLG51bGwhPW4mJihuPShuK28ubGVuZ3RoKSVvLmxlbmd0aCxyLnNldFN0YXRlKHtzZWxlY3RlZE1hdGNoSW5kZXg6bn0pKX19LHIuaGFuZGxlU2VhcmNoU2VsZWN0PWZ1bmN0aW9uKCl7dmFyIGU9ci5nZXREaXNwbGF5ZWRPcHRpb25zKClbci5zdGF0ZS5zZWxlY3RlZE1hdGNoSW5kZXhdO3Iuc2V0U3RhdGUoe29wZW46ITF9KSxyLnByb3BzLm9uQ2hhbmdlJiZyLnByb3BzLm9uQ2hhbmdlKGUmJmUudmFsdWUpfSxyfXJldHVybiBfaW5oZXJpdHModCxfcmVhY3QuZGVmYXVsdC5Db21wb25lbnQpLF9jcmVhdGVDbGFzcyh0LFt7a2V5OlwiZ2V0RGlzcGxheWVkT3B0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zdGF0ZS50ZXh0RmlsdGVyO3JldHVybiBfVXRpbGl0eS5kZWZhdWx0Lm5vcm1hbGl6ZU9wdGlvbnModGhpcy5wcm9wcy5vcHRpb25zfHx0aGlzLnN0YXRlLm9wdGlvbnMpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4hZXx8LTEhPT0odC50ZXh0TGFiZWx8fHQubGFiZWwpLmluZGV4T2YoZSl9KX19LHtrZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucHJvcHMsdD1lLnZhbHVlLHI9ZS5vbkNoYW5nZSxvPWUubmF2LG49ZS5idXR0b24sYT1lLnB1bGxSaWdodCxsPWUuc2VhcmNoYWJsZSxpPXRoaXMucHJvcHMuc2VsZWN0ZWRUZXh0UmVuZGVyZXJ8fGRlZmF1bHRUZXh0UmVuZGVyZXIscz10aGlzLnByb3BzLmRlZmF1bHRMYWJlbHx8XCIoU2VsZWN0IG9uZSlcIix1PV9sb2Rhc2guZGVmYXVsdC5vbWl0KHRoaXMucHJvcHMsT2JqZWN0LmtleXMocHJvcFR5cGVzKSkscD10aGlzLnN0YXRlLGM9cC5kcm9wZG93bklkLGY9cC5vcGVuLGQ9cC50ZXh0RmlsdGVyLF89cC5zZWxlY3RlZE1hdGNoSW5kZXgsaD1fVXRpbGl0eS5kZWZhdWx0Lm5vcm1hbGl6ZU9wdGlvbnModGhpcy5wcm9wcy5vcHRpb25zfHx0aGlzLnN0YXRlLm9wdGlvbnMpLHk9dGhpcy5nZXREaXNwbGF5ZWRPcHRpb25zKCksYj1udWxsO2lmKG51bGwhPXQpe3ZhciBnPWguZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnZhbHVlPT09dH0pO2I9MCE9PWcubGVuZ3RoP2dbMF06e2xhYmVsOm51bGwsdmFsdWU6dH19dmFyIHY9Yj9pKGIpOnMsbT15Lm1hcChmdW5jdGlvbihlLHIpe2lmKGUuZGl2aWRlcilyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTWVudUl0ZW0uZGVmYXVsdCx7a2V5OlwiZGl2aWRlclwiLmNvbmNhdChyKSxkaXZpZGVyOiEwfSk7dmFyIG89ZS52YWx1ZTtyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTWVudUl0ZW0uZGVmYXVsdCx7a2V5OkpTT04uc3RyaW5naWZ5KG8pLGV2ZW50S2V5Om8sYWN0aXZlOiEhbCYmcj09PV99LGUubGFiZWwsXCIgXCIsbz09PXQmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImZhIGZhLWNoZWNrXCJ9KSl9KTtpZihsJiZtLnVuc2hpZnQoX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChVbnNlbGVjdGFibGVNZW51SXRlbSxudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIse2NsYXNzTmFtZTpcIndhLWJzLXNlYXJjaGJveFwiLG9uU3VibWl0OigwLF9OZXdVdGlscy5jYWxsKSh0aGlzLFwiaGFuZGxlU2VhcmNoU2VsZWN0XCIsW10sITApfSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIix7dHlwZTpcInRleHRcIixjbGFzc05hbWU6XCJmb3JtLWNvbnRyb2xcIix2YWx1ZTpkLG9uQ2hhbmdlOnRoaXMuaGFuZGxlVGV4dEZpbHRlckNoYW5nZSxyZWY6KDAsX05ld1V0aWxzLnJlZ2lzdGVyUmVmKSh0aGlzLFwiX3NlYXJjaEJveFwiKSxvbktleURvd246dGhpcy5oYW5kbGVTZWFyY2hCb3hLZXlEb3dufSkpKSksb3x8bil7dmFyIFQ9bz9fTmF2RHJvcGRvd24uZGVmYXVsdDpfRHJvcGRvd25CdXR0b24uZGVmYXVsdDtyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChULF9leHRlbmRzKHt9LHUse29wZW46Zix0aXRsZTp2fHxcIlwiLG9uU2VsZWN0OnIsaWQ6dGhpcy5wcm9wcy5pZHx8YyxwdWxsUmlnaHQ6YSxvblRvZ2dsZTp0aGlzLmhhbmRsZVRvZ2dsZX0pLG0pfXJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Ecm9wZG93bi5kZWZhdWx0LF9leHRlbmRzKHtvblNlbGVjdDpyLGlkOnRoaXMucHJvcHMuaWR8fGMsb25Ub2dnbGU6dGhpcy5oYW5kbGVUb2dnbGUsb3BlbjpmfSx1KSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Ecm9wZG93bi5kZWZhdWx0LlRvZ2dsZSx7dXNlQW5jaG9yOiEwLGNsYXNzTmFtZTpcImJ0bi1saW5rXCJ9LHYpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0Ryb3Bkb3duLmRlZmF1bHQuTWVudSxudWxsLG0pKX19XSksdH0oKTtEcm9wZG93blNlbGVjdC5wcm9wVHlwZXM9cHJvcFR5cGVzO3ZhciBfZGVmYXVsdD1Ecm9wZG93blNlbGVjdDtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5kZWZhdWx0PXZvaWQgMDt2YXIgX3JlYWN0PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKSxfbG9kYXNoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaFwiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gX3R5cGVvZihlKXtyZXR1cm4oX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG8mJihvLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLmtleSxvKX19ZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsdCxyKXtyZXR1cm4gdCYmX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsdCksciYmX2RlZmluZVByb3BlcnRpZXMoZSxyKSxlfWZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKGUsdCl7cmV0dXJuIXR8fFwib2JqZWN0XCIhPT1fdHlwZW9mKHQpJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0P19hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSk6dH1mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpe2lmKHZvaWQgMD09PWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiBlfWZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihlKXtyZXR1cm4oX2dldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9KShlKX1mdW5jdGlvbiBfaW5oZXJpdHMoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJl9zZXRQcm90b3R5cGVPZihlLHQpfWZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihlLHQpe3JldHVybihfc2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlLHQpe3JldHVybiBlLl9fcHJvdG9fXz10LGV9KShlLHQpfXZhciBJZnJhbWU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciBlLHI7X2NsYXNzQ2FsbENoZWNrKHRoaXMsdCk7Zm9yKHZhciBvPWFyZ3VtZW50cy5sZW5ndGgsbj1uZXcgQXJyYXkobyksYT0wO2E8bzthKyspblthXT1hcmd1bWVudHNbYV07cmV0dXJuKHI9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoZT1fZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwuYXBwbHkoZSxbdGhpc10uY29uY2F0KG4pKSkpLnNldElmcmFtZUh0bWw9ZnVuY3Rpb24oZSx0KXtpZihyLl9pZnJhbWVFbGVtZW50JiZyLl9pZnJhbWVEb2N1bWVudCl7dmFyIG89ci5faWZyYW1lRG9jdW1lbnQsbj1vO1widW5kZWZpbmVkXCIhPXR5cGVvZiBjaHJvbWUmJihuPXIuX2lmcmFtZURvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgpKTt2YXIgYT1yLl9nZXRBZGp1c3RlZEh0bWxGb3JJZnJhbWUobixlLHQpO28ub3BlbigpLG8ud3JpdGUoYSksby5jbG9zZSgpLG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiZmlyZWZveFwiKT4tMSYmci5faWZyYW1lRWxlbWVudC5jb250ZW50V2luZG93LmxvY2F0aW9uLnJlbG9hZCghMCl9fSxyLl9pZnJhbWVFbGVtZW50PW51bGwsci5faWZyYW1lV2luZG93PW51bGwsci5faWZyYW1lRG9jdW1lbnQ9bnVsbCxyLl9pZnJhbWVNb3VudGVkPWZ1bmN0aW9uKGUpe2UmJmUuY29udGVudERvY3VtZW50JiYoci5faWZyYW1lRWxlbWVudD1lLHIuX2lmcmFtZURvY3VtZW50PWUuY29udGVudERvY3VtZW50LHIuX2lmcmFtZVdpbmRvdz1lLmNvbnRlbnRXaW5kb3csci5wcm9wcy51c2VVcmx8fHIuc2V0SWZyYW1lSHRtbChyLnByb3BzLmlmcmFtZUh0bWwsci5wcm9wcy5yZXF1ZXN0VXJsKSl9LHIuX2dldEFkanVzdGVkSHRtbEZvcklmcmFtZT1mdW5jdGlvbihlLHQscil7aWYoIXIpcmV0dXJuIHQ7ZS5vcGVuKCksZS53cml0ZSh0KSxlLmNsb3NlKCk7dmFyIG89ZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJhc2VcIiksbj1cIlwiO28ubGVuZ3RoPjAmJihuPShvPW9bMF0pLmdldEF0dHJpYnV0ZShcImhyZWZcIiksby5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG8pKTt2YXIgYT1yO24mJihhPW5ldyBVUkwobixyKS5ocmVmKTt2YXIgaT1lLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKTtpZihpLmxlbmd0aD49MSl7aT1pWzBdO3ZhciBsPWUuY3JlYXRlRWxlbWVudChcImJhc2VcIik7bC5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsYSksaS5hcHBlbmRDaGlsZChsKTt2YXIgcz1lLmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtzLnR5cGU9XCJ0ZXh0L2Nzc1wiO3ZhciBmPVwiYm9keSB7IG9wYWNpdHk6IDEgIWltcG9ydGFudDsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgfVwiO3Muc3R5bGVTaGVldD9zLnN0eWxlU2hlZXQuY3NzVGV4dD1mOnMuYXBwZW5kQ2hpbGQoZS5jcmVhdGVUZXh0Tm9kZShmKSksaS5hcHBlbmRDaGlsZChzKX1yZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImxpbmtcIikpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpO2lmKHQpe3ZhciBvPW5ldyBVUkwodCxyKS5ocmVmO2Uuc2V0QXR0cmlidXRlKFwiaHJlZlwiLG8pfX0pLGUuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTH0sci5fcmVtb3ZlV2hvbGVQYWdlT3ZlcmxheXM9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmJvZHkuc3R5bGUuY3NzVGV4dDtlLmJvZHkuc3R5bGUuY3NzVGV4dCs9XCI7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudFwiLF9sb2Rhc2guZGVmYXVsdC5mb3JFYWNoKGUuYm9keS5jaGlsZHJlbixmdW5jdGlvbihlKXt2YXIgcj10LmdldENvbXB1dGVkU3R5bGUoZSk7aWYoXCJmaXhlZFwiPT09ci5nZXRQcm9wZXJ0eVZhbHVlKFwicG9zaXRpb25cIikpe3ZhciBvPXIuZ2V0UHJvcGVydHlWYWx1ZShcIndpZHRoXCIpLG49ci5nZXRQcm9wZXJ0eVZhbHVlKFwiaGVpZ2h0XCIpO1wiMTAwJVwiPT09byYmXCIxMDAlXCI9PT1uJiYoZS5zdHlsZS5jc3NUZXh0Kz1cIjsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50XCIpfX0pLGUuYm9keS5zdHlsZS5jc3NUZXh0PXJ9LHIuX29uTG9hZD1mdW5jdGlvbihlKXt2YXIgdD1yLl9pZnJhbWVFbGVtZW50O3IuX2lmcmFtZURvY3VtZW50PXQuY29udGVudERvY3VtZW50LHIuX2lmcmFtZVdpbmRvdz10LmNvbnRlbnRXaW5kb3csci5fcmVtb3ZlV2hvbGVQYWdlT3ZlcmxheXMoci5faWZyYW1lRG9jdW1lbnQsci5faWZyYW1lV2luZG93KSxyLnByb3BzLm9uTG9hZCYmci5wcm9wcy5vbkxvYWQoZSxyLl9pZnJhbWVEb2N1bWVudCxyLl9pZnJhbWVXaW5kb3cpfSxyfXJldHVybiBfaW5oZXJpdHModCxfcmVhY3QuZGVmYXVsdC5Db21wb25lbnQpLF9jcmVhdGVDbGFzcyh0LFt7a2V5OlwiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2UuaWZyYW1lSHRtbCE9PXRoaXMucHJvcHMuaWZyYW1lSHRtbCYmdGhpcy5zZXRJZnJhbWVIdG1sKGUuaWZyYW1lSHRtbCxlLnJlcXVlc3RVcmwpfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix3aWR0aDpcIjEwMCVcIixoZWlnaHQ6XCIxMDAlXCIsYm9yZGVyOjB9O3JldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse3N0eWxlOmV9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIix7dGl0bGU6XCJXZWJzaXRlIGNvbnRlbnRzXCIsa2V5OlwiaWZyYW1lXCIsc3JjOnRoaXMucHJvcHMudXNlVXJsP3RoaXMucHJvcHMuaWZyYW1lVXJsOm51bGwsc3R5bGU6ZSxzYW5kYm94OlwiYWxsb3ctc2FtZS1vcmlnaW5cIixyZWY6dGhpcy5faWZyYW1lTW91bnRlZCxvbkxvYWQ6dGhpcy5fb25Mb2FkfSkpfX1dKSx0fSgpO0lmcmFtZS5wcm9wVHlwZXM9e3VzZVVybDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLGlmcmFtZVVybDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuc3RyaW5nLGlmcmFtZUh0bWw6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLnN0cmluZyxyZXF1ZXN0VXJsOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5zdHJpbmcsb25Mb2FkOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5mdW5jfTt2YXIgX2RlZmF1bHQ9SWZyYW1lO2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9sb2Rhc2g9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoXCIpKSxfUmVhY3RVdGlscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL1JlYWN0VXRpbHNcIikpLF9OZXdVdGlscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL05ld1V0aWxzXCIpKSxfVGFicz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL1RhYnNcIikpLF9BdXRoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL3JlZHV4L0F1dGhcIikpLF9BdXRoMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9qcy9BdXRoXCIpKSxfVmFsaWRhdGU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanMvVmFsaWRhdGVcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIGE9MDthPHQubGVuZ3RoO2ErKyl7dmFyIHI9dFthXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQsYSl7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLGEmJl9kZWZpbmVQcm9wZXJ0aWVzKGUsYSksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKGUpe3JldHVybihfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgdGFiT3B0aW9ucz17bG9naW46XCJTaWduIGluXCIscmVnaXN0ZXI6XCJSZWdpc3RlclwifSxMb2dpbkZvcm09ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciBlLGE7X2NsYXNzQ2FsbENoZWNrKHRoaXMsdCk7Zm9yKHZhciByPWFyZ3VtZW50cy5sZW5ndGgsbD1uZXcgQXJyYXkociksbz0wO288cjtvKyspbFtvXT1hcmd1bWVudHNbb107cmV0dXJuKGE9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoZT1fZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwuYXBwbHkoZSxbdGhpc10uY29uY2F0KGwpKSkpLnByb3BzPXZvaWQgMCxhLnN0YXRlPXtmb3JtOntlbWFpbDpcIlwiLHVzZXJuYW1lOlwiXCIscGFzc3dvcmQ6XCJcIixuYW1lOlwiXCIsdGl0bGU6XCJcIixjb21wYW55OlwiXCIsaW50ZW5kZWRVc2U6XCJcIixzaG91bGRDb250YWN0Om51bGx9LGJsdXJyZWQ6e30saGFzU3VibWl0RXJyb3JzOiExLGxvYWRpbmc6ITEscmVzcG9uc2U6bnVsbH0sYS5sb2dpbj1mdW5jdGlvbigpe2Euc2V0U3RhdGUoe2xvYWRpbmc6ITEscmVzcG9uc2U6bnVsbH0pLGEucHJvcHMubG9naW4oYS5zdGF0ZS5mb3JtLmVtYWlsLGEuc3RhdGUuZm9ybS5wYXNzd29yZCkudGhlbihmdW5jdGlvbihlKXtlLmlzTG9nZ2VkSW4mJmEucHJvcHMub25Mb2dpbigpfSl9LGEucmVnaXN0ZXI9ZnVuY3Rpb24oKXt2YXIgZT1fVmFsaWRhdGUuZGVmYXVsdC51c2VyKGEuc3RhdGUuZm9ybSk7X2xvZGFzaC5kZWZhdWx0LmlzRW1wdHkoZSk/KGEuc2V0U3RhdGUoe2hhc1N1Ym1pdEVycm9yczohMSxsb2FkaW5nOiExLHJlc3BvbnNlOm51bGx9KSxhLnByb3BzLnJlZ2lzdGVyVXNlcihhLnN0YXRlLmZvcm0sYS5wcm9wcy5pbnZpdGVLZXkpLnRoZW4oZnVuY3Rpb24oZSl7ZS5pc0xvZ2dlZEluJiZhLnByb3BzLm9uUmVnaXN0ZXIoKX0pKTphLnNldFN0YXRlKHtoYXNTdWJtaXRFcnJvcnM6ITAsbG9hZGluZzohMX0pfSxhLnJlc2V0UGFzc3dvcmQ9ZnVuY3Rpb24oKXtfQXV0aDIuZGVmYXVsdC5zdGFydFJlc2V0UGFzc3dvcmQoYS5zdGF0ZS5mb3JtLnVzZXJuYW1lLGEuc3RhdGUuZm9ybS5lbWFpbCkudGhlbihfTmV3VXRpbHMuZGVmYXVsdC5nZXRUaGVuKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoYSkpKS5jYXRjaChfTmV3VXRpbHMuZGVmYXVsdC5nZXRDYXRjaChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKGEpKSl9LGEuc3VibWl0PWZ1bmN0aW9uKGUpe2UmJmUucHJldmVudERlZmF1bHQoKSxhLnNldFN0YXRlKHtsb2FkaW5nOiEwLHJlc3BvbnNlOm51bGx9KTt2YXIgdD1hLnByb3BzLnRhYjtcImxvZ2luXCI9PT10P2EubG9naW4oKTpcInJlZ2lzdGVyXCI9PT10P2EucmVnaXN0ZXIoKTpcInJlc2V0UGFzc3dvcmRcIj09PXQmJmEucmVzZXRQYXNzd29yZCgpfSxhfXJldHVybiBfaW5oZXJpdHModCxfcmVhY3QuZGVmYXVsdC5Db21wb25lbnQpLF9jcmVhdGVDbGFzcyh0LFt7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnByb3BzLnRhYix0PXRoaXMuc3RhdGUubG9hZGluZ3x8dGhpcy5wcm9wcy5hdXRoTG9hZGluZyxhPXRoaXMuc3RhdGUucmVzcG9uc2V8fHRoaXMucHJvcHMuYXV0aEVycm9yLHI9dGhpcy5zdGF0ZS5mb3JtLGw9dGhpcy5zdGF0ZS5ibHVycmVkLG89dGhpcy5zdGF0ZS5oYXNTdWJtaXRFcnJvcnMscz1udWxsO3N3aXRjaChlKXtjYXNlXCJsb2dpblwiOnM9XCJTaWduIGluXCI7YnJlYWs7Y2FzZVwicmVnaXN0ZXJcIjpzPVwiUmVnaXN0ZXJcIjticmVhaztjYXNlXCJyZXNldFBhc3N3b3JkXCI6cz1cIlJlc2V0IHBhc3N3b3JkXCJ9dmFyIG49X1ZhbGlkYXRlLmRlZmF1bHQudXNlcihyKSxpPXt9O3JldHVyblwicmVnaXN0ZXJcIj09PWUmJihpPV9sb2Rhc2guZGVmYXVsdC5jbG9uZShuKSxvfHxfbG9kYXNoLmRlZmF1bHQuZm9yRWFjaChuLGZ1bmN0aW9uKGUsdCl7bFt0XXx8ZGVsZXRlIGlbdF19KSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLG51bGwsdGhpcy5wcm9wcy5zaG93TG9nbyYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJ0ZXh0LWNlbnRlciB3YS10b3AyMCB3YS1ib3R0b20yMFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaW1nXCIse3NyYzpcIi9hc3NldHMvbG9nby1sYXJnZS5wbmdcIixhbHQ6XCJXcmFwQVBJIGxvZ29cIixzdHlsZTp7bWF4V2lkdGg6XCIxMDAlXCIsbWF4SGVpZ2h0OlwiNzVweFwifX0pKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaDFcIix7Y2xhc3NOYW1lOlwid2EtdG9wMFwifSxzKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcIndhLWJvdHRvbTIwXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1RhYnMuZGVmYXVsdCx7dGFiczp0YWJPcHRpb25zLHZhbHVlOmUsb25DaGFuZ2U6X05ld1V0aWxzLmRlZmF1bHQuY2FsbFByb3AodGhpcyxcIm9uVGFiQ2hhbmdlXCIpfSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwicm93XCJ9LFwicmVnaXN0ZXJcIj09PWUmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiY29sLXNtLTYgY29sLXNtLXB1c2gtNlwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInBhbmVsIHBhbmVsLXByaW1hcnlcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJwYW5lbC1ib2R5XCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJwXCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsbnVsbCxcIldyYXBBUEkgaXMgZnJlZSB0byB1c2UhXCIpLFwiIEJ5IHJlZ2lzdGVyaW5nLCB5b3VcIixcIiBcIixfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYVwiLHtocmVmOlwiL3Rlcm1zXCIsdGFyZ2V0OlwiX2JsYW5rXCJ9LFwiYWdyZWUgdG8gb3VyIFRlcm1zIG9mIFNlcnZpY2VcIiksXCIsIGFuZCBjYW46XCIpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxpXCIsbnVsbCxcIkJ1aWxkIGFuZCB1c2UgcHVibGljIEFQSXMsIHJ1bm5pbmcgb24gb3VyIHNlcnZlcnNcIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxpXCIsbnVsbCxcIk1ha2UgMzAsMDAwIHJlcXVlc3RzIHBlciBtb250aFwiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwibGlcIixudWxsLFwiRW5qb3kgdGhlIGZ1bGwgcmFuZ2Ugb2YgV3JhcEFQSSBmdW5jdGlvbmFsaXR5XCIpKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaDNcIixudWxsLFwiTmVlZCBtb3JlP1wiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTppLnNob3VsZENvbnRhY3Q/XCJoYXMtZXJyb3JcIjpcIlwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImNoZWNrYm94XCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLHtodG1sRm9yOlwic2hvdWxkQ29udGFjdFRydWVcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlucHV0XCIse3R5cGU6XCJyYWRpb1wiLGlkOlwic2hvdWxkQ29udGFjdFRydWVcIixvbkNsaWNrOl9OZXdVdGlscy5kZWZhdWx0LnNldFN0YXRlKHRoaXMsXCJmb3JtLnNob3VsZENvbnRhY3RcIiwhMCksY2hlY2tlZDohMD09PXIuc2hvdWxkQ29udGFjdH0pLFwiIFwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLFwiWWVzOyBJJ20gaW50ZXJlc3RlZFwiKSxcIiBpbiBtb3JlIEFQSSByZXF1ZXN0cywgYSBzZWxmLWhvc3RlZCBzb2x1dGlvbiwgb3IgcHJpdmF0ZSBBUEkgZW5kcG9pbnRzLlwiKSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJjaGVja2JveFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIix7aHRtbEZvcjpcInNob3VsZENvbnRhY3RGYWxzZVwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIix7dHlwZTpcInJhZGlvXCIsaWQ6XCJzaG91bGRDb250YWN0RmFsc2VcIixvbkNsaWNrOl9OZXdVdGlscy5kZWZhdWx0LnNldFN0YXRlKHRoaXMsXCJmb3JtLnNob3VsZENvbnRhY3RcIiwhMSksY2hlY2tlZDohMT09PXIuc2hvdWxkQ29udGFjdH0pLFwiIFwiLFwiTm87IHRoZSBhYm92ZSBzaG91bGQgYmUgZW5vdWdoLlwiKSksaS5zaG91bGRDb250YWN0JiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwicFwiLHtjbGFzc05hbWU6XCJoZWxwLWJsb2NrXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLGkuc2hvdWxkQ29udGFjdCkpKSkpKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInJlZ2lzdGVyXCI9PT1lP1wiY29sLXNtLTYgY29sLXNtLXB1bGwtNlwiOlwiY29sLXNtLTEyXCJ9LF9OZXdVdGlscy5kZWZhdWx0LnJlbmRlclJlc3BvbnNlKGEpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIse29uU3VibWl0OnRoaXMuc3VibWl0fSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImZvcm0tZ3JvdXAgXCIuY29uY2F0KGkuZW1haWw/XCJoYXMtZXJyb3JcIjpcIlwiKX0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIse2h0bWxGb3I6XCJlbWFpbFwifSxcIkVtYWlsXCIsXCJsb2dpblwiPT09ZSYmXCIgb3IgdXNlcm5hbWVcIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlucHV0XCIse3R5cGU6XCJ0ZXh0XCIsaWQ6XCJlbWFpbFwiLGNsYXNzTmFtZTpcImZvcm0tY29udHJvbFwiLG1heExlbmd0aDpcIjEyOFwiLHZhbHVlOnIuZW1haWwsb25DaGFuZ2U6X05ld1V0aWxzLmRlZmF1bHQudXBkYXRlKHRoaXMsXCJmb3JtLmVtYWlsXCIpLG9uQmx1cjpfTmV3VXRpbHMuZGVmYXVsdC5zZXRTdGF0ZSh0aGlzLFwiYmx1cnJlZC5lbWFpbFwiLCEwKX0pLFwicmVnaXN0ZXJcIj09PWUmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJwXCIse2NsYXNzTmFtZTpcImhlbHAtYmxvY2tcIn0saS5lbWFpbHx8XCJXZSB3aWxsIHNlbmQgYW4gZW1haWwgaGVyZSB3aXRoIGFuIGFjdGl2YXRpb24gbGluay5cIikpLChcInJlZ2lzdGVyXCI9PT1lfHxcInJlc2V0UGFzc3dvcmRcIj09PWUpJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImZvcm0tZ3JvdXAgXCIuY29uY2F0KGkudXNlcm5hbWU/XCJoYXMtZXJyb3JcIjpcIlwiKX0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIse2h0bWxGb3I6XCJ1c2VybmFtZVwifSxcIlVzZXJuYW1lXCIpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLHt0eXBlOlwidXNlcm5hbWVcIixpZDpcInVzZXJuYW1lXCIsY2xhc3NOYW1lOlwiZm9ybS1jb250cm9sXCIsdmFsdWU6ci51c2VybmFtZSxvbkNoYW5nZTpfTmV3VXRpbHMuZGVmYXVsdC51cGRhdGUodGhpcyxcImZvcm0udXNlcm5hbWVcIiksb25CbHVyOl9OZXdVdGlscy5kZWZhdWx0LnNldFN0YXRlKHRoaXMsXCJibHVycmVkLnVzZXJuYW1lXCIsITApfSksXCJyZWdpc3RlclwiPT09ZSYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInBcIix7Y2xhc3NOYW1lOlwiaGVscC1ibG9ja1wifSxpLnVzZXJuYW1lfHxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLG51bGwsXCJBUElzIHlvdSBwdWJsaXNoIHdpbGwgYmUgYWNjZXNzaWJsZSBhdFwiLFwiIFwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJjb2RlXCIsbnVsbCxcIih5b3VyIHVzZXJuYW1lKS8ocmVwb3NpdG9yeSkvKEFQSSBuYW1lKVwiKSkpKSwoXCJyZWdpc3RlclwiPT09ZXx8XCJsb2dpblwiPT09ZSkmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiZm9ybS1ncm91cCBcIi5jb25jYXQoaS5wYXNzd29yZD9cImhhcy1lcnJvclwiOlwiXCIpfSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIix7aHRtbEZvcjpcInBhc3N3b3JkXCJ9LFwiUGFzc3dvcmRcIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlucHV0XCIse3R5cGU6XCJwYXNzd29yZFwiLGlkOlwicGFzc3dvcmRcIixjbGFzc05hbWU6XCJmb3JtLWNvbnRyb2xcIix2YWx1ZTpyLnBhc3N3b3JkLG9uQ2hhbmdlOl9OZXdVdGlscy5kZWZhdWx0LnVwZGF0ZSh0aGlzLFwiZm9ybS5wYXNzd29yZFwiKSxvbkJsdXI6X05ld1V0aWxzLmRlZmF1bHQuc2V0U3RhdGUodGhpcyxcImJsdXJyZWQucGFzc3dvcmRcIiwhMCl9KSxcInJlZ2lzdGVyXCI9PT1lJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwicFwiLHtjbGFzc05hbWU6XCJoZWxwLWJsb2NrXCJ9LGkucGFzc3dvcmR8fFwiQ2hvb3NlIGEgbG9uZywgaGFyZC10by1ndWVzcyBwYXNzd29yZCB0aGF0IHlvdSBkb24ndCB1c2UgYW55d2hlcmUgZWxzZS5cIikpLFwicmVnaXN0ZXJcIj09PWUmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiZm9ybS1ncm91cCBcIi5jb25jYXQoaS5uYW1lP1wiaGFzLWVycm9yXCI6XCJcIil9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLHtodG1sRm9yOlwibmFtZVwifSxcIk5hbWVcIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlucHV0XCIse3R5cGU6XCJ0ZXh0XCIsaWQ6XCJuYW1lXCIsY2xhc3NOYW1lOlwiZm9ybS1jb250cm9sXCIsdmFsdWU6ci5uYW1lLG9uQ2hhbmdlOl9OZXdVdGlscy5kZWZhdWx0LnVwZGF0ZSh0aGlzLFwiZm9ybS5uYW1lXCIpLG9uQmx1cjpfTmV3VXRpbHMuZGVmYXVsdC5zZXRTdGF0ZSh0aGlzLFwiYmx1cnJlZC5uYW1lXCIsITApfSksaS5uYW1lJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwicFwiLHtjbGFzc05hbWU6XCJoZWxwLWJsb2NrXCJ9LGkubmFtZSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiZm9ybS1ncm91cFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIix7aHRtbEZvcjpcImNvbXBhbnlcIn0sXCJDb21wYW55IChpZiBhcHBsaWNhYmxlKVwiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIix7dHlwZTpcInRleHRcIixpZDpcImNvbXBhbnlcIixjbGFzc05hbWU6XCJmb3JtLWNvbnRyb2xcIix2YWx1ZTpyLmNvbXBhbnksb25DaGFuZ2U6X05ld1V0aWxzLmRlZmF1bHQudXBkYXRlKHRoaXMsXCJmb3JtLmNvbXBhbnlcIil9KSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJmb3JtLWdyb3VwXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLHtodG1sRm9yOlwiaW50ZW5kZWRVc2VcIn0sXCJIb3cgYXJlIHlvdSB0aGlua2luZyBvZiB1c2luZyBXcmFwQVBJPyAob3B0aW9uYWwpXCIpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiLHtpZDpcImludGVuZGVkVXNlXCIsY2xhc3NOYW1lOlwiZm9ybS1jb250cm9sXCIsdmFsdWU6ci5pbnRlbmRlZFVzZSxvbkNoYW5nZTpfTmV3VXRpbHMuZGVmYXVsdC51cGRhdGUodGhpcyxcImZvcm0uaW50ZW5kZWRVc2VcIiksc3R5bGU6e2hlaWdodDpcIjEwMHB4XCJ9fSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJoZWxwLWJsb2NrXCJ9LFwiTm8gd29ycmllcyBpZiB5b3UgZG9uJ3Qga25vdyB5ZXQsIGJ1dCBpZiB5b3UgZG8sIHdlIG1pZ2h0IGJlIGFibGUgdG8gaGVscCB3aXRoIHNvbWUgZXh0cmEgdGlwcyFcIikpKSxvJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImFsZXJ0IGFsZXJ0LWRhbmdlclwifSxcIlNvbWUgZmllbGRzIGRvbid0IHNlZW0gdG8gYmUgZmlsbGVkIGluIGNvcnJlY3RseSEgVGFrZSBhIGxvb2sgYXQgdGhlIGVycm9yIG1lc3NhZ2VzIGFib3ZlLlwiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIse2NsYXNzTmFtZTpcImJ0biBidG4tcHJpbWFyeVwiLHR5cGU6XCJzdWJtaXRcIixkaXNhYmxlZDp0fSxzKSxcImxvZ2luXCI9PT1lJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYVwiLHtocmVmOlwiI1wiLGNsYXNzTmFtZTpcInB1bGwtcmlnaHRcIixvbkNsaWNrOl9OZXdVdGlscy5kZWZhdWx0LmNhbGxQcm9wKHRoaXMsXCJvblRhYkNoYW5nZVwiLFtcInJlc2V0UGFzc3dvcmRcIl0sITApfSxcIkZvcmdvdCBwYXNzd29yZFwiKSkpKSl9fV0pLHR9KCksX2RlZmF1bHQ9X0F1dGguZGVmYXVsdC5jb25uZWN0KCkoX1JlYWN0VXRpbHMuZGVmYXVsdC5jb25uZWN0TG9jYWxUdXRvcmlhbFN0ZXAoKShMb2dpbkZvcm0pKTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5kZWZhdWx0PXZvaWQgMDt2YXIgX3JlYWN0PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKSxfRmFkZT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdC1ib290c3RyYXAvbGliL0ZhZGVcIikpLF9BdXRoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL3JlZHV4L0F1dGhcIikpLF9SZWFjdFV0aWxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vUmVhY3RVdGlsc1wiKSksX0xvZ2luUGFnZT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0xvZ2luUGFnZVwiKSksX05ld1V0aWxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vTmV3VXRpbHNcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgTG9naW5HYXRlPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgZSxyO19jbGFzc0NhbGxDaGVjayh0aGlzLHQpO2Zvcih2YXIgbz1hcmd1bWVudHMubGVuZ3RoLGE9bmV3IEFycmF5KG8pLG49MDtuPG87bisrKWFbbl09YXJndW1lbnRzW25dO3JldHVybihyPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsKGU9X2dldFByb3RvdHlwZU9mKHQpKS5jYWxsLmFwcGx5KGUsW3RoaXNdLmNvbmNhdChhKSkpKS5zdGF0ZT17aXNFeGl0aW5nOiExfSxyfXJldHVybiBfaW5oZXJpdHModCxfcmVhY3QuZGVmYXVsdC5Db21wb25lbnQpLF9jcmVhdGVDbGFzcyh0LFt7a2V5OlwiY29tcG9uZW50V2lsbE1vdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtfQXV0aC5kZWZhdWx0LmdldE9yRmV0Y2hMb2dpblN0YXRlKHRoaXMucHJvcHMpfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMucHJvcHMuY29tcG9uZW50T25jZUxvZ2dlZEluLHI9dGhpcy5wcm9wcy5sb2dvdXQsbz10aGlzLnByb3BzLnVzZXJuYW1lLGE9dGhpcy5wcm9wcy5hdXRoU3RhdGVMb2FkZWQsbj10aGlzLnByb3BzLmlzTG9nZ2VkSW4saT1mdW5jdGlvbih0LHIpe3ZhciBvPWUuc3RhdGUuaXNFeGl0aW5nO3JldHVybntpbjpyJiYoIW98fG89PT10KSxvbkV4aXQ6X05ld1V0aWxzLmRlZmF1bHQuc2V0U3RhdGUoZSxcImlzRXhpdGluZ1wiLHQpLG9uRXhpdGVkOl9OZXdVdGlscy5kZWZhdWx0LnNldFN0YXRlKGUsXCJpc0V4aXRpbmdcIiwhMSksdW5tb3VudE9uRXhpdDohMH19O3JldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9GYWRlLmRlZmF1bHQsaShcIm5vdExvYWRlZFwiLCFhKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2tleTpcIm5vdExvYWRlZFwiLGNsYXNzTmFtZTpcInRleHQtY2VudGVyIHdhLXBhZDIwIHdhLW5vdC1sb2FkZWRcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlcIix7Y2xhc3NOYW1lOlwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBmYS1mdyBmYS0zeFwifSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJ3YS10b3AxMFwifSxcIlBsZWFzZSB3YWl0Li4uIGxvYWRpbmcgeW91ciBhY2NvdW50XCIpKSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0ZhZGUuZGVmYXVsdCxpKFwibG9naW5QYWdlXCIsYSYmIW4pLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7a2V5OlwibG9naW5QYWdlXCIsY2xhc3NOYW1lOlwid2EtbG9naW4tcGFnZVwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Mb2dpblBhZ2UuZGVmYXVsdCx7b3BlblJlZ2lzdGVySW5OZXdXaW5kb3c6ITAsc2hvd0xvZ286dGhpcy5wcm9wcy5zaG93TG9nb30pKSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRmFkZS5kZWZhdWx0LGkoXCJsb2dnZWRJblwiLGEmJm4pLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixudWxsLGEmJm4mJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQodCx7a2V5OlwiY29tcG9uZW50XCIsdXNlcm5hbWU6byxsb2dvdXQ6cn0pKSkpfX1dKSx0fSgpO0xvZ2luR2F0ZS5wcm9wVHlwZXM9e3VwZGF0ZUxvY2FsVHV0b3JpYWxTdGVwOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsY29tcG9uZW50T25jZUxvZ2dlZEluOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5hbnkuaXNSZXF1aXJlZCxzaG93TG9nbzpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYm9vbCxsb2dvdXQ6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCx1c2VybmFtZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuc3RyaW5nLGF1dGhTdGF0ZUxvYWRlZDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLGlzTG9nZ2VkSW46X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZH07dmFyIF9kZWZhdWx0PV9BdXRoLmRlZmF1bHQuY29ubmVjdCgpKF9SZWFjdFV0aWxzLmRlZmF1bHQuY29ubmVjdExvY2FsVHV0b3JpYWxTdGVwKCkoTG9naW5HYXRlKSk7ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpLF9yZWFjdFJvdXRlcj1yZXF1aXJlKFwicmVhY3Qtcm91dGVyXCIpLF9Db25maWc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanMvQ29uZmlnXCIpKSxfTmV3VXRpbHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9OZXdVdGlsc1wiKSksX0Nocm9tZVBsdWdpblByb21wdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0Nocm9tZVBsdWdpblByb21wdFwiKSksX0xvZ2luRm9ybT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0xvZ2luRm9ybVwiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gX3R5cGVvZihlKXtyZXR1cm4oX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG8mJihvLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLmtleSxvKX19ZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsdCxyKXtyZXR1cm4gdCYmX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsdCksciYmX2RlZmluZVByb3BlcnRpZXMoZSxyKSxlfWZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKGUsdCl7cmV0dXJuIXR8fFwib2JqZWN0XCIhPT1fdHlwZW9mKHQpJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0P19hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSk6dH1mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpe2lmKHZvaWQgMD09PWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiBlfWZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihlKXtyZXR1cm4oX2dldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9KShlKX1mdW5jdGlvbiBfaW5oZXJpdHMoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJl9zZXRQcm90b3R5cGVPZihlLHQpfWZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihlLHQpe3JldHVybihfc2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlLHQpe3JldHVybiBlLl9fcHJvdG9fXz10LGV9KShlLHQpfXZhciBMb2dpblBhZ2U9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciBlLHI7X2NsYXNzQ2FsbENoZWNrKHRoaXMsdCk7Zm9yKHZhciBvPWFyZ3VtZW50cy5sZW5ndGgsbj1uZXcgQXJyYXkobyksaT0wO2k8bztpKyspbltpXT1hcmd1bWVudHNbaV07cmV0dXJuKHI9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoZT1fZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwuYXBwbHkoZSxbdGhpc10uY29uY2F0KG4pKSkpLnByb3BzPXZvaWQgMCxyLnN0YXRlPXt0YWI6XCJsb2dpblwiLHJlZ2lzdHJhdGlvblJlc3BvbnNlOm51bGx9LHIuc2V0VGFiRnJvbVVybD1mdW5jdGlvbihlKXtcIi9yZWdpc3RlclwiPT09X2xvZGFzaC5kZWZhdWx0LmdldChlLFwibG9jYXRpb24ucGF0aG5hbWVcIik/ci5zZXRTdGF0ZSh7dGFiOlwicmVnaXN0ZXJcIn0pOnIuc2V0U3RhdGUoe3RhYjpcImxvZ2luXCJ9KX0sci5vbkxvZ2luPWZ1bmN0aW9uKCl7dmFyIGU9X2xvZGFzaC5kZWZhdWx0LmdldChyLnByb3BzLFwibG9jYXRpb24ucXVlcnkucmVkaXJlY3RcIik7ZSYmci5wcm9wcy5yb3V0ZXIucHVzaChlKX0sci5vblJlZ2lzdGVyPWZ1bmN0aW9uKGUpe3Iuc2V0U3RhdGUoe3JlZ2lzdHJhdGlvblJlc3BvbnNlOmV9KX0sci5oYW5kbGVUYWJDaGFuZ2U9ZnVuY3Rpb24oZSl7ci5wcm9wcy5vcGVuUmVnaXN0ZXJJbk5ld1dpbmRvdyYmXCJyZWdpc3RlclwiPT09ZT93aW5kb3cub3BlbihcIlwiLmNvbmNhdChfQ29uZmlnLmRlZmF1bHQuaG9zdCxcIi9yZWdpc3RlclwiKSk6ci5zZXRTdGF0ZSh7dGFiOmV9KX0scn1yZXR1cm4gX2luaGVyaXRzKHQsX3JlYWN0LmRlZmF1bHQuQ29tcG9uZW50KSxfY3JlYXRlQ2xhc3ModCxbe2tleTpcImNvbXBvbmVudFdpbGxNb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zZXRUYWJGcm9tVXJsKHRoaXMucHJvcHMpfX0se2tleTpcImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHNcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnNldFRhYkZyb21VcmwoZSl9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnByb3BzLnNob3dMb2dvLHQ9dGhpcy5wcm9wcy5sb2NhdGlvbiYmdGhpcy5wcm9wcy5sb2NhdGlvbi5xdWVyeXx8e30scj10aGlzLnN0YXRlLnJlZ2lzdHJhdGlvblJlc3BvbnNlLG89dGhpcy5zdGF0ZS50YWI7cmV0dXJuIHImJnIuc3VjY2Vzcz9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImNvbnRhaW5lclwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaDFcIixudWxsLFwiUmVnaXN0ZXJcIiksX05ld1V0aWxzLmRlZmF1bHQucmVuZGVyUmVzcG9uc2UociksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQ2hyb21lUGx1Z2luUHJvbXB0LmRlZmF1bHQsbnVsbCkpOl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiY29udGFpbmVyXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwicm93XCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwicmVnaXN0ZXJcIj09PW8/XCJjb2wtc20tMTJcIjpcImNvbC1zbS02IGNvbC1zbS1vZmZzZXQtM1wifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcIndhLXRvcDIwIHdhLWJvdHRvbTIwXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0xvZ2luRm9ybS5kZWZhdWx0LHtvbkxvZ2luOnRoaXMub25Mb2dpbixvblJlZ2lzdGVyOnRoaXMub25SZWdpc3RlcixpbnZpdGVLZXk6dC5rZXksc2hvd0xvZ286ZSx0YWI6byxvblRhYkNoYW5nZTp0aGlzLmhhbmRsZVRhYkNoYW5nZX0pKSkpKX19XSksdH0oKSxfZGVmYXVsdD0oMCxfcmVhY3RSb3V0ZXIud2l0aFJvdXRlcikoTG9naW5QYWdlKTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5kZWZhdWx0PXZvaWQgMDt2YXIgX3JlYWN0PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKSxfcmVhY3RSb3V0ZXJCb290c3RyYXA9cmVxdWlyZShcInJlYWN0LXJvdXRlci1ib290c3RyYXBcIiksX3JlYWN0Um91dGVyPXJlcXVpcmUoXCJyZWFjdC1yb3V0ZXJcIiksX05hdmJhcj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdC1ib290c3RyYXAvbGliL05hdmJhclwiKSksX05hdj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdC1ib290c3RyYXAvbGliL05hdlwiKSksX05hdkl0ZW09X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3QtYm9vdHN0cmFwL2xpYi9OYXZJdGVtXCIpKSxfQXV0aD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9qcy9yZWR1eC9BdXRoXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBfdHlwZW9mKGUpe3JldHVybihfdHlwZW9mPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07by5lbnVtZXJhYmxlPW8uZW51bWVyYWJsZXx8ITEsby5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG8ua2V5LG8pfX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSx0LHIpe3JldHVybiB0JiZfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxyJiZfZGVmaW5lUHJvcGVydGllcyhlLHIpLGV9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PV90eXBlb2YodCkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/X2Fzc2VydFRoaXNJbml0aWFsaXplZChlKTp0fWZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKGUpe3JldHVybihfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIF9pbmhlcml0cyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmX3NldFByb3RvdHlwZU9mKGUsdCl9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKGUsdCl7cmV0dXJuKF9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0pKGUsdCl9dmFyIE5hdmJhclVzZXI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciBlLHI7X2NsYXNzQ2FsbENoZWNrKHRoaXMsdCk7Zm9yKHZhciBvPWFyZ3VtZW50cy5sZW5ndGgsYT1uZXcgQXJyYXkobyksbj0wO248bztuKyspYVtuXT1hcmd1bWVudHNbbl07cmV0dXJuKHI9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoZT1fZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwuYXBwbHkoZSxbdGhpc10uY29uY2F0KGEpKSkpLmxvZ291dD1mdW5jdGlvbigpe3IucHJvcHMubG9nb3V0KCkudGhlbihmdW5jdGlvbigpe3IucHJvcHMucm91dGVyLnB1c2goXCIvXCIpfSl9LHJ9cmV0dXJuIF9pbmhlcml0cyh0LF9yZWFjdC5kZWZhdWx0LlB1cmVDb21wb25lbnQpLF9jcmVhdGVDbGFzcyh0LFt7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnByb3BzLHQ9ZS5pc0xvZ2dlZEluLHI9ZS51c2VybmFtZSxvPWUubG9nb3V0TG9hZGluZyxhPWUuaGlkZVVzZXJuYW1lLG49XCIvXCI7cmV0dXJuIHRoaXMucHJvcHMubG9jYXRpb24mJnRoaXMucHJvcHMubG9jYXRpb24ucGF0aG5hbWUmJihuPXRoaXMucHJvcHMubG9jYXRpb24ucGF0aG5hbWUpLHQ/X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTmF2LmRlZmF1bHQse3B1bGxSaWdodDohMH0sIWEmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX05hdmJhci5kZWZhdWx0LlRleHQsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsbnVsbCxyKSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTmF2SXRlbS5kZWZhdWx0LHtocmVmOlwiI1wiLG9uQ2xpY2s6dGhpcy5sb2dvdXQsZGlzYWJsZWQ6b30sbz9cIkxvYWRpbmdcIjpcIlNpZ24gb3V0XCIpKTpfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9OYXYuZGVmYXVsdCx7cHVsbFJpZ2h0OiEwfSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFJvdXRlckJvb3RzdHJhcC5MaW5rQ29udGFpbmVyLHt0bzp7cGF0aG5hbWU6XCIvbG9naW5cIixxdWVyeTp7cmVkaXJlY3Q6bn19fSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9OYXZJdGVtLmRlZmF1bHQsbnVsbCxcIlJlZ2lzdGVyIG9yIHNpZ24gaW5cIikpKX19XSksdH0oKTtOYXZiYXJVc2VyLnByb3BUeXBlcz17cm91dGVyOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5vYmplY3QsaGlkZVVzZXJuYW1lOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5ib29sLGlzTG9nZ2VkSW46X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmJvb2wsdXNlcm5hbWU6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLnN0cmluZyxhdXRoTG9hZGluZzpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLGxvZ291dDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuY307dmFyIF9kZWZhdWx0PV9BdXRoLmRlZmF1bHQuY29ubmVjdCgpKCgwLF9yZWFjdFJvdXRlci53aXRoUm91dGVyKShOYXZiYXJVc2VyKSk7ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMucHJldmVudERlZmF1bHQ9cHJldmVudERlZmF1bHQsZXhwb3J0cy5zdG9wUHJvcGFnYXRpb249c3RvcFByb3BhZ2F0aW9uLGV4cG9ydHMudG9nZ2xlPXRvZ2dsZSxleHBvcnRzLnRvZ2dsZVByb3A9dG9nZ2xlUHJvcCxleHBvcnRzLnRvZ2dsZVZhbHVlPXRvZ2dsZVZhbHVlLGV4cG9ydHMudG9nZ2xlUHJvcFZhbHVlPXRvZ2dsZVByb3BWYWx1ZSxleHBvcnRzLnRvZ2dsZUZyb21FdmVudD10b2dnbGVGcm9tRXZlbnQsZXhwb3J0cy50b2dnbGVQcm9wRnJvbUV2ZW50PXRvZ2dsZVByb3BGcm9tRXZlbnQsZXhwb3J0cy5zZXRQcm9wPXNldFByb3AsZXhwb3J0cy5zZXRQcm9wTnVtYmVyPXNldFByb3BOdW1iZXIsZXhwb3J0cy5zZXRQcm9wVmFsdWU9c2V0UHJvcFZhbHVlLGV4cG9ydHMuZGVsZXRlUHJvcD1kZWxldGVQcm9wLGV4cG9ydHMudXBkYXRlPXVwZGF0ZSxleHBvcnRzLnVwZGF0ZU51bWJlcj11cGRhdGVOdW1iZXIsZXhwb3J0cy5zZXRTdGF0ZT1zZXRTdGF0ZSxleHBvcnRzLmRlbGV0ZVN0YXRlPWRlbGV0ZVN0YXRlLGV4cG9ydHMuZ2V0VGhlbj1nZXRUaGVuLGV4cG9ydHMuZ2V0Q2F0Y2g9Z2V0Q2F0Y2gsZXhwb3J0cy5yZW5kZXJSZXNwb25zZT1yZW5kZXJSZXNwb25zZSxleHBvcnRzLm1lbW9pemVMb2NhbD1tZW1vaXplTG9jYWwsZXhwb3J0cy5hbGw9YWxsLGV4cG9ydHMuZnJvbUV2ZW50PWZyb21FdmVudCxleHBvcnRzLm51bWJlckZyb21FdmVudD1udW1iZXJGcm9tRXZlbnQsZXhwb3J0cy5jb25zdGFudD1jb25zdGFudCxleHBvcnRzLm5lZ2F0ZT1uZWdhdGUsZXhwb3J0cy50b2dnbGVDb25zdGFudD10b2dnbGVDb25zdGFudCxleHBvcnRzLmNoYW5nZVByb3A9Y2hhbmdlUHJvcCxleHBvcnRzLmNoYW5nZVN0YXRlPWNoYW5nZVN0YXRlLGV4cG9ydHMuY2FsbD1jYWxsLGV4cG9ydHMuY2FsbFByb3A9Y2FsbFByb3AsZXhwb3J0cy5yZWdpc3RlclJlZj1yZWdpc3RlclJlZixleHBvcnRzLmRlYm91bmNlPWRlYm91bmNlLGV4cG9ydHMuZGVmYXVsdD1leHBvcnRzLmRlbGV0ZU1peGVkPWV4cG9ydHMuZ2V0TWl4ZWQ9ZXhwb3J0cy5zZXRNaXhlZD12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpLF9JbW11dGFibGU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanMvSW1tdXRhYmxlXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX12YXIgc2V0TWl4ZWQ9X0ltbXV0YWJsZS5kZWZhdWx0LnNldE1peGVkO2V4cG9ydHMuc2V0TWl4ZWQ9c2V0TWl4ZWQ7dmFyIGdldE1peGVkPV9JbW11dGFibGUuZGVmYXVsdC5nZXRNaXhlZDtleHBvcnRzLmdldE1peGVkPWdldE1peGVkO3ZhciBkZWxldGVNaXhlZD1fSW1tdXRhYmxlLmRlZmF1bHQuZGVsZXRlTWl4ZWQ7ZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZSl7ZSYmZS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbihlKXtlJiZlLnN0b3BQcm9wYWdhdGlvbigpfWZ1bmN0aW9uIHByZXZlbnREZWZhdWx0QW5kQmx1cihlKXtlJiZlLnByZXZlbnREZWZhdWx0JiYoZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksZS50YXJnZXQmJmUudGFyZ2V0LmJsdXIoKSl9ZnVuY3Rpb24gdG9nZ2xlKGUsdCxyKXtyZXR1cm4gY2hhbmdlU3RhdGUoZSx0LG5lZ2F0ZSxyLFwibmVnYXRlXCIpfWZ1bmN0aW9uIHRvZ2dsZVByb3AoZSx0LHIsbixhKXtyZXR1cm4gY2hhbmdlUHJvcChlLHQscixuLG5lZ2F0ZSxhLFwibmVnYXRlXCIpfWZ1bmN0aW9uIHRvZ2dsZVZhbHVlKGUsdCxyLG4pe3JldHVybiBjaGFuZ2VTdGF0ZShlLHQsdG9nZ2xlQ29uc3RhbnQociksbixbXCJ0b2dnbGVDb25zdGFudFwiLHJdKX1mdW5jdGlvbiB0b2dnbGVQcm9wVmFsdWUoZSx0LHIsbixhLG8pe3JldHVybiBjaGFuZ2VQcm9wKGUsdCxyLG4sdG9nZ2xlQ29uc3RhbnQoYSksbyxbXCJ0b2dnbGVDb25zdGFudFwiLGFdKX1mdW5jdGlvbiB0b2dnbGVGcm9tRXZlbnQoZSx0LHIpe3JldHVybiBjaGFuZ2VTdGF0ZShlLHQsc2V0T3JOdWxsLHIsXCJzZXRPck51bGxcIil9ZnVuY3Rpb24gdG9nZ2xlUHJvcEZyb21FdmVudChlLHQscixuLGEsbyl7cmV0dXJuIGNoYW5nZVByb3AoZSx0LHIsbixzZXRPck51bGwsbyxcInNldE9yTnVsbFwiKX1mdW5jdGlvbiBzZXRQcm9wKGUsdCxyLG4sYSl7cmV0dXJuIGNoYW5nZVByb3AoZSx0LHIsbixmcm9tRXZlbnQsYSxcImZyb21FdmVudFwiKX1mdW5jdGlvbiBzZXRQcm9wTnVtYmVyKGUsdCxyLG4sYSl7cmV0dXJuIGNoYW5nZVByb3AoZSx0LHIsbixudW1iZXJGcm9tRXZlbnQsYSxcIm51bWJlckZyb21FdmVudFwiKX1mdW5jdGlvbiBzZXRQcm9wVmFsdWUoZSx0LHIsbixhLG8pe3JldHVybiBjaGFuZ2VQcm9wKGUsdCxyLG4sY29uc3RhbnQoYSksbyxbXCJjb25zdGFudFwiLGFdKX1mdW5jdGlvbiBkZWxldGVQcm9wKGUsdCxyLG4sYSl7cmV0dXJuIGNoYW5nZVByb3AoZSx0LHIsbnVsbCxyZW1vdmUobiksYSxbXCJyZW1vdmVcIixuXSl9ZnVuY3Rpb24gdXBkYXRlKGUsdCxyKXtyZXR1cm4gY2hhbmdlU3RhdGUoZSx0LGZyb21FdmVudCxyLFwiZnJvbUV2ZW50XCIpfWZ1bmN0aW9uIHVwZGF0ZU51bWJlcihlLHQscil7cmV0dXJuIGNoYW5nZVN0YXRlKGUsdCxudW1iZXJGcm9tRXZlbnQscixcIm51bWJlckZyb21FdmVudFwiKX1mdW5jdGlvbiBzZXRTdGF0ZShlLHQscixuKXtyZXR1cm4gY2hhbmdlU3RhdGUoZSx0LGNvbnN0YW50KHIpLG4sW1wiY29uc3RhbnRcIixyXSl9ZnVuY3Rpb24gZGVsZXRlU3RhdGUoZSx0LHIpe3JldHVybiBjaGFuZ2VTdGF0ZShlLHRbMF0scmVtb3ZlKHQuc2xpY2UoMSkpLHIsW1wicmVtb3ZlXCIsdF0pfWZ1bmN0aW9uIGdldENoYW5nZWQoZSx0KXt2YXIgcj17fTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmZvckVhY2godCxmdW5jdGlvbihuLGEpe2VbYV0hPT10W2FdJiYoclthXT1uKX0pLHJ9ZnVuY3Rpb24gZ2V0VGhlbihlLHQscixuKXt2YXIgYT1bXCJfX2NhY2hlXCIsSlNPTi5zdHJpbmdpZnkoW1wiZ2V0VGhlblwiLHQscl0pXTt0PXR8fFwicmVzcG9uc2VcIixyPXJ8fFwibG9hZGluZ1wiLG49bnx8XCJkYXRhXCI7dmFyIG89X2xvZGFzaC5kZWZhdWx0LmdldChlLGEpO2lmKG8pcmV0dXJuIG87dmFyIGw9ZnVuY3Rpb24oYSl7dmFyIG89e307b1tyXT0hMSxvW3RdPWEsYS5zdWNjZXNzJiZuJiZhLmRhdGEmJihvW25dPWEuZGF0YSksZS5zZXRTdGF0ZShvKX07cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5zZXRXaXRoKGUsYSxsLE9iamVjdCksbH1mdW5jdGlvbiBnZXRDYXRjaChlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06XCJyZXNwb25zZVwiLHI9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOlwibG9hZGluZ1wiLG49W1wiX19jYWNoZVwiLEpTT04uc3RyaW5naWZ5KFtcImdldENhdGNoXCIsdCxyXSldLGE9X2xvZGFzaC5kZWZhdWx0LmdldChlLG4pO2lmKGEpcmV0dXJuIGE7dmFyIG89ZnVuY3Rpb24obil7Y29uc29sZS5lcnJvcihuLnN0YWNrKTt2YXIgYT17fTtyJiYoYVtyXT0hMSksdCYmKGFbdF09e3N1Y2Nlc3M6ITEsbWVzc2FnZXM6W1wiQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCJdLGVycm9yOm59KSxlLnNldFN0YXRlKGEpfTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnNldFdpdGgoZSxuLG8sT2JqZWN0KSxvfWZ1bmN0aW9uIHJlbmRlclJlc3BvbnNlKGUsdCl7dmFyIHI9KHQ9dHx8e30pLnR5cGV8fFwiYWxlcnRcIixuPXQuYWRkaXRpb25hbENsYXNzZXN8fFwiXCIsYT10Lm9uQ2xpY2ssbz0hIXQuZXJyb3JzT25seTtyZXR1cm4gZT9lLnN1Y2Nlc3MmJm8/bnVsbDplJiZlLm1lc3NhZ2VzJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcIlwiLmNvbmNhdChyLFwiIFwiKS5jb25jYXQocixcIi1cIikrKGUuc3VjY2Vzcz9cInN1Y2Nlc3NcIjpcImRhbmdlclwiKSsobj9cIiBcIi5jb25jYXQobik6XCJcIikrKGE/XCIgd2EtbGlua1wiOlwiXCIpLG9uQ2xpY2s6YX0sZS5tZXNzYWdlcy5tYXAoZnVuY3Rpb24oZSx0KXtyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInBcIix7a2V5OnR9LGUpfSkpOm51bGx9ZnVuY3Rpb24gbWVtb2l6ZUxvY2FsKGUsdCxyLG4pe3ZhciBhPVtcIl9fY2FjaGVcIixcIm1lbW9pemVMb2NhbFwiLHRdLG89X2xvZGFzaC5kZWZhdWx0LmdldChlLGEpfHxbXSxsPW8uZmluZChmdW5jdGlvbihlKXtyZXR1cm4gZVswXT09PXJ9KTtyZXR1cm4gbD9sWzFdOihvLnB1c2goW3Isbl0pLF9sb2Rhc2guZGVmYXVsdC5zZXQoZSxhLG8pLG4pfWZ1bmN0aW9uIGFsbChlLHQscil7dmFyIG49W1wiX19jYWNoZVwiLFwiYWxsXCJdLGE9X2xvZGFzaC5kZWZhdWx0LmdldChlLG4pfHxbXSxvPW51bGwsbD0hMCx1PSExLHM9dm9pZCAwO3RyeXtmb3IodmFyIGcsYz1hW1N5bWJvbC5pdGVyYXRvcl0oKTshKGw9KGc9Yy5uZXh0KCkpLmRvbmUpO2w9ITApe2Zvcih2YXIgaT1nLnZhbHVlLHA9aS5hcmdzWzBdLGQ9MCE9PXAubGVuZ3RoLGY9MDtmIT09cC5sZW5ndGg7ZisrKWlmKHBbZl0hPT10W2ZdKXtkPSExO2JyZWFrfWlmKGkuYXJnc1sxXSE9PXImJihkPSExKSxkKXtvPWk7YnJlYWt9fX1jYXRjaChlKXt1PSEwLHM9ZX1maW5hbGx5e3RyeXtsfHxudWxsPT1jLnJldHVybnx8Yy5yZXR1cm4oKX1maW5hbGx5e2lmKHUpdGhyb3cgc319aWYobylyZXR1cm4gby5mdW5jO3ZhciBoPWZ1bmN0aW9uKG4pe3ImJnByZXZlbnREZWZhdWx0QW5kQmx1cihuKTtmb3IodmFyIGE9ZS5zdGF0ZSxvPTA7byE9PXQubGVuZ3RoO28rKyllLnN0YXRlPXRbb10obik7ZS5zdGF0ZT1hfTtyZXR1cm4gbz17YXJnczpbdCxyXSxmdW5jOmh9LGEucHVzaChvKSxfbG9kYXNoLmRlZmF1bHQuc2V0KGUsbixhKSxofWZ1bmN0aW9uIGZyb21FdmVudChlLHQpe3JldHVybiB0JiZ0LnRhcmdldD90LnRhcmdldC52YWx1ZTp0fWZ1bmN0aW9uIG51bWJlckZyb21FdmVudChlLHQpe3ZhciByPXBhcnNlRmxvYXQodCYmdC50YXJnZXQ/dC50YXJnZXQudmFsdWU6dCk7cmV0dXJuIGlzTmFOKHIpP251bGw6cn1mdW5jdGlvbiBjb25zdGFudChlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZX19ZnVuY3Rpb24gcmVtb3ZlKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZGVsZXRlTWl4ZWQodCxlKX19ZnVuY3Rpb24gbmVnYXRlKGUpe3JldHVybiFlfWZ1bmN0aW9uIHRvZ2dsZUNvbnN0YW50KGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gdD09PWU/bnVsbDplfX1mdW5jdGlvbiBzZXRPck51bGwoZSx0KXt2YXIgcj10JiZ0LnRhcmdldD90LnRhcmdldC52YWx1ZTp0O3JldHVybiBlPT09cj9udWxsOnJ9ZnVuY3Rpb24gY2hhbmdlUHJvcChlLHQscixuLGEsbyxsKXt2YXIgdT1bXCJfX2NhY2hlXCIsSlNPTi5zdHJpbmdpZnkoW1wiY2hhbmdlUHJvcFwiLHQscixuLG8sbF0pXSxzPV9sb2Rhc2guZGVmYXVsdC5nZXQoZSx1KTtpZihzKXJldHVybiBzO3ZhciBnPWZ1bmN0aW9uKGwpe28mJnByZXZlbnREZWZhdWx0QW5kQmx1cihsKTt2YXIgdT1udWxsO2lmKHIpe3ZhciBzPWdldE1peGVkKGUucHJvcHMscik7aWYobil7dmFyIGc9Z2V0TWl4ZWQocyxuKSxjPWEoZyxsKTt1PXNldE1peGVkKHMsbixjKX1lbHNlIHU9YShzLGwpfWVsc2UgdT1hKG51bGwsbCk7cmV0dXJuIGUucHJvcHNbdF0odSksdX07cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5zZXRXaXRoKGUsdSxnLE9iamVjdCksZ31mdW5jdGlvbiBjaGFuZ2VTdGF0ZShlLHQscixuLGEpe3ZhciBvPVtcIl9fY2FjaGVcIixKU09OLnN0cmluZ2lmeShbXCJjaGFuZ2VTdGF0ZVwiLHQsbixhXSldLGw9X2xvZGFzaC5kZWZhdWx0LmdldChlLG8pO2lmKGwpcmV0dXJuIGw7dmFyIHU9ZnVuY3Rpb24oYSl7biYmcHJldmVudERlZmF1bHRBbmRCbHVyKGEpO3ZhciBvPWdldE1peGVkKGUuc3RhdGUsdCksbD1yKG8sYSksdT1zZXRNaXhlZChlLnN0YXRlLHQsbCk7cmV0dXJuIGUuc2V0U3RhdGUoZ2V0Q2hhbmdlZChlLnN0YXRlLHUpKSx1fTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnNldFdpdGgoZSxvLHUsT2JqZWN0KSx1fWZ1bmN0aW9uIGNhbGwoZSx0LHIsbixhKXt2YXIgbz1bXCJfX2NhY2hlXCIsSlNPTi5zdHJpbmdpZnkoW1wiY2FsbFwiLHQscixuLGFdKV0sbD1fbG9kYXNoLmRlZmF1bHQuZ2V0KGUsbyk7aWYobClyZXR1cm4gbDt2YXIgdT1mdW5jdGlvbigpe2Zvcih2YXIgYT1hcmd1bWVudHMubGVuZ3RoLG89bmV3IEFycmF5KGEpLGw9MDtsPGE7bCsrKW9bbF09YXJndW1lbnRzW2xdO24mJm9bMF0mJnByZXZlbnREZWZhdWx0QW5kQmx1cihvWzBdKTt2YXIgdT1bXS5jb25jYXQocikuY29uY2F0KG8pLHM9X2xvZGFzaC5kZWZhdWx0LmdldChlLHQpO3JldHVybiBzP3MuYXBwbHkoZSx1KTpudWxsfTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnNldFdpdGgoZSxvLHUsT2JqZWN0KSx1fWZ1bmN0aW9uIGNhbGxQcm9wKGUsdCxyLG4sYSl7dmFyIG89W1wiX19jYWNoZVwiLEpTT04uc3RyaW5naWZ5KFtcImNhbGxQcm9wXCIsdCxyLG4sYV0pXSxsPV9sb2Rhc2guZGVmYXVsdC5nZXQoZSxvKTtpZihsKXJldHVybiBsO3ZhciB1PWZ1bmN0aW9uKCl7Zm9yKHZhciBhPWFyZ3VtZW50cy5sZW5ndGgsbz1uZXcgQXJyYXkoYSksbD0wO2w8YTtsKyspb1tsXT1hcmd1bWVudHNbbF07biYmb1swXSYmcHJldmVudERlZmF1bHRBbmRCbHVyKG9bMF0pO3ZhciB1PVtdLmNvbmNhdChyfHxbXSkuY29uY2F0KG8pLHM9X2xvZGFzaC5kZWZhdWx0LmdldChlLnByb3BzLHQpO3JldHVybiBzP3MuYXBwbHkoZSx1KTpudWxsfTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnNldFdpdGgoZSxvLHUsT2JqZWN0KSx1fWZ1bmN0aW9uIHJlZ2lzdGVyUmVmKGUsdCl7dmFyIHI9W1wiX19jYWNoZVwiLEpTT04uc3RyaW5naWZ5KFtcInJlZ2lzdGVyUmVmXCIsdF0pXSxuPV9sb2Rhc2guZGVmYXVsdC5nZXQoZSxyKTtpZihuKXJldHVybiBuO3ZhciBhPWZ1bmN0aW9uKHIpe19sb2Rhc2guZGVmYXVsdC5zZXRXaXRoKGUsdCxyLE9iamVjdCl9O3JldHVybiBfbG9kYXNoLmRlZmF1bHQuc2V0V2l0aChlLHIsYSxPYmplY3QpLGF9ZnVuY3Rpb24gZGVib3VuY2UoZSx0LHIsbil7dmFyIGE9W1wiX19jYWNoZVwiLEpTT04uc3RyaW5naWZ5KFtcImRlYm91bmNlXCIsbl0pXTtpZighX2xvZGFzaC5kZWZhdWx0LmdldChlLGEpKXt2YXIgbz1fbG9kYXNoLmRlZmF1bHQuZGVib3VuY2UodCxyKTtfbG9kYXNoLmRlZmF1bHQuc2V0V2l0aChlLGEsbyl9cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5nZXQoZSxhKX1leHBvcnRzLmRlbGV0ZU1peGVkPWRlbGV0ZU1peGVkO3ZhciBfZGVmYXVsdD17cHJldmVudERlZmF1bHQ6cHJldmVudERlZmF1bHQsc3RvcFByb3BhZ2F0aW9uOnN0b3BQcm9wYWdhdGlvbix0b2dnbGU6dG9nZ2xlLHRvZ2dsZVZhbHVlOnRvZ2dsZVZhbHVlLHRvZ2dsZUZyb21FdmVudDp0b2dnbGVGcm9tRXZlbnQsdG9nZ2xlUHJvcDp0b2dnbGVQcm9wLHRvZ2dsZVByb3BWYWx1ZTp0b2dnbGVQcm9wVmFsdWUsdG9nZ2xlUHJvcEZyb21FdmVudDp0b2dnbGVQcm9wRnJvbUV2ZW50LHNldFByb3A6c2V0UHJvcCxzZXRQcm9wTnVtYmVyOnNldFByb3BOdW1iZXIsc2V0UHJvcFZhbHVlOnNldFByb3BWYWx1ZSxkZWxldGVQcm9wOmRlbGV0ZVByb3AsY2FsbFByb3A6Y2FsbFByb3AsY2FsbDpjYWxsLHVwZGF0ZTp1cGRhdGUsdXBkYXRlTnVtYmVyOnVwZGF0ZU51bWJlcixzZXRTdGF0ZTpzZXRTdGF0ZSxkZWxldGVTdGF0ZTpkZWxldGVTdGF0ZSxyZWdpc3RlclJlZjpyZWdpc3RlclJlZixnZXRUaGVuOmdldFRoZW4sZ2V0Q2F0Y2g6Z2V0Q2F0Y2gscmVuZGVyUmVzcG9uc2U6cmVuZGVyUmVzcG9uc2UsZnJvbUV2ZW50OmZyb21FdmVudCxudW1iZXJGcm9tRXZlbnQ6bnVtYmVyRnJvbUV2ZW50LGNvbnN0YW50OmNvbnN0YW50LG5lZ2F0ZTpuZWdhdGUsdG9nZ2xlQ29uc3RhbnQ6dG9nZ2xlQ29uc3RhbnQsbWVtb2l6ZUxvY2FsOm1lbW9pemVMb2NhbCxhbGw6YWxsLGNoYW5nZVN0YXRlOmNoYW5nZVN0YXRlLGNoYW5nZVByb3A6Y2hhbmdlUHJvcCxkZWJvdW5jZTpkZWJvdW5jZSxzZXRNaXhlZDpzZXRNaXhlZCxnZXRNaXhlZDpnZXRNaXhlZCxkZWxldGVNaXhlZDpkZWxldGVNaXhlZH07ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX1Rvb2x0aXA9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3QtYm9vdHN0cmFwL2xpYi9Ub29sdGlwXCIpKSxfT3ZlcmxheVdyYXBwZXI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9PdmVybGF5V3JhcHBlclwiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gX3R5cGVvZihlKXtyZXR1cm4oX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gX2V4dGVuZHMoKXtyZXR1cm4oX2V4dGVuZHM9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIHI9YXJndW1lbnRzW3RdO2Zvcih2YXIgbyBpbiByKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLG8pJiYoZVtvXT1yW29dKX1yZXR1cm4gZX0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07by5lbnVtZXJhYmxlPW8uZW51bWVyYWJsZXx8ITEsby5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG8ua2V5LG8pfX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSx0LHIpe3JldHVybiB0JiZfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxyJiZfZGVmaW5lUHJvcGVydGllcyhlLHIpLGV9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PV90eXBlb2YodCkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/X2Fzc2VydFRoaXNJbml0aWFsaXplZChlKTp0fWZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKGUpe3JldHVybihfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIF9pbmhlcml0cyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmX3NldFByb3RvdHlwZU9mKGUsdCl9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKGUsdCl7cmV0dXJuKF9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0pKGUsdCl9dmFyIE92ZXJsYXlUb29sdGlwPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgZSxyO19jbGFzc0NhbGxDaGVjayh0aGlzLHQpO2Zvcih2YXIgbz1hcmd1bWVudHMubGVuZ3RoLG49bmV3IEFycmF5KG8pLGE9MDthPG87YSsrKW5bYV09YXJndW1lbnRzW2FdO3JldHVybihyPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsKGU9X2dldFByb3RvdHlwZU9mKHQpKS5jYWxsLmFwcGx5KGUsW3RoaXNdLmNvbmNhdChuKSkpKS5zdGF0ZT17aWQ6bnVsbH0scn1yZXR1cm4gX2luaGVyaXRzKHQsX3JlYWN0LmRlZmF1bHQuUHVyZUNvbXBvbmVudCksX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJjb21wb25lbnRXaWxsTW91bnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc2V0U3RhdGUoe2lkOk1hdGguZmxvb3IoMWU2Kk1hdGgucmFuZG9tKCkpfSl9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Ub29sdGlwLmRlZmF1bHQse2lkOnRoaXMuc3RhdGUuaWQsY2xhc3NOYW1lOlwid2EtdHV0b3JpYWwtdG9vbHRpcFwiLHN0eWxlOnttYXhXaWR0aDozMDB9fSx0aGlzLnByb3BzLm9uWENsaWNrJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse3N0eWxlOntmbG9hdDpcInJpZ2h0XCIsbWFyZ2luTGVmdDo1fX0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImFcIix7c3R5bGU6e2NvbG9yOlwiI2ZmZlwifSxvbkNsaWNrOnRoaXMucHJvcHMub25YQ2xpY2t9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImZhIGZhLXRpbWVzXCJ9KSkpLHRoaXMucHJvcHMuY29udGVudHMpO3JldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9PdmVybGF5V3JhcHBlci5kZWZhdWx0LF9leHRlbmRzKHt9LHRoaXMucHJvcHMse292ZXJsYXk6ZX0pLHRoaXMucHJvcHMuY2hpbGRyZW4pfX1dKSx0fSgpO092ZXJsYXlUb29sdGlwLnByb3BUeXBlcz17Y29udGVudHM6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLm5vZGUuaXNSZXF1aXJlZCxwbGFjZW1lbnQ6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLm9uZU9mKFtcImJvdHRvbVwiLFwidG9wXCIsXCJsZWZ0XCIsXCJyaWdodFwiXSksc2hvdzpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYm9vbCxvblhDbGljazpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYyxjaGlsZHJlbjpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMubm9kZX07dmFyIF9kZWZhdWx0PU92ZXJsYXlUb29sdGlwO2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9yZWFjdERvbT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdC1kb21cIikpLF9sb2Rhc2g9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoXCIpKSxfT3ZlcmxheT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdC1ib290c3RyYXAvbGliL092ZXJsYXlcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKGUpe3JldHVybihfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgT3ZlcmxheVdyYXBwZXI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciBlLHI7X2NsYXNzQ2FsbENoZWNrKHRoaXMsdCk7Zm9yKHZhciBvPWFyZ3VtZW50cy5sZW5ndGgsbj1uZXcgQXJyYXkobyksYT0wO2E8bzthKyspblthXT1hcmd1bWVudHNbYV07cmV0dXJuKHI9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoZT1fZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwuYXBwbHkoZSxbdGhpc10uY29uY2F0KG4pKSkpLmdldE92ZXJsYXlUYXJnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gX3JlYWN0RG9tLmRlZmF1bHQuZmluZERPTU5vZGUoX2Fzc2VydFRoaXNJbml0aWFsaXplZChyKSl9LHIuZ2V0T3ZlcmxheT1mdW5jdGlvbigpe3ZhciBlPV9sb2Rhc2guZGVmYXVsdC5jbG9uZShyLnByb3BzKTtlLnRhcmdldD1yLmdldE92ZXJsYXlUYXJnZXQ7dmFyIHQ9X3JlYWN0LmRlZmF1bHQuY2xvbmVFbGVtZW50KHIucHJvcHMub3ZlcmxheSx7cGxhY2VtZW50OmUucGxhY2VtZW50LGNvbnRhaW5lcjplLmNvbnRhaW5lcn0pO3JldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9PdmVybGF5LmRlZmF1bHQsZSx0KX0sci5yZW5kZXJPdmVybGF5PWZ1bmN0aW9uKCl7X3JlYWN0RG9tLmRlZmF1bHQudW5zdGFibGVfcmVuZGVyU3VidHJlZUludG9Db250YWluZXIoX2Fzc2VydFRoaXNJbml0aWFsaXplZChyKSxyLl9vdmVybGF5LHIuX21vdW50Tm9kZSl9LHJ9cmV0dXJuIF9pbmhlcml0cyh0LF9yZWFjdC5kZWZhdWx0LkNvbXBvbmVudCksX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJjb21wb25lbnREaWRNb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fbW91bnROb2RlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMucmVuZGVyT3ZlcmxheSgpfX0se2tleTpcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtfcmVhY3REb20uZGVmYXVsdC51bm1vdW50Q29tcG9uZW50QXROb2RlKHRoaXMuX21vdW50Tm9kZSksdGhpcy5fbW91bnROb2RlPW51bGx9fSx7a2V5OlwiY29tcG9uZW50RGlkVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9tb3VudE5vZGUmJnRoaXMucmVuZGVyT3ZlcmxheSgpfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9X3JlYWN0LmRlZmF1bHQuQ2hpbGRyZW4ub25seSh0aGlzLnByb3BzLmNoaWxkcmVuKTtyZXR1cm4gdGhpcy5fb3ZlcmxheT10aGlzLmdldE92ZXJsYXkoKSxfcmVhY3QuZGVmYXVsdC5jbG9uZUVsZW1lbnQoZSx7fSl9fV0pLHR9KCk7T3ZlcmxheVdyYXBwZXIucHJvcFR5cGVzPXtvdmVybGF5Ol9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5ub2RlLmlzUmVxdWlyZWQscGxhY2VtZW50Ol9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5vbmVPZihbXCJib3R0b21cIixcInRvcFwiLFwibGVmdFwiLFwicmlnaHRcIl0pLHNob3c6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmJvb2wsY2hpbGRyZW46X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLm5vZGV9O3ZhciBfZGVmYXVsdD1PdmVybGF5V3JhcHBlcjtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5kZWZhdWx0PXZvaWQgMDt2YXIgX3JlYWN0PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKSxfbG9kYXNoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaFwiKSksX2NsYXNzbmFtZXM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiY2xhc3NuYW1lc1wiKSksX092ZXJsYXlUcmlnZ2VyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0LWJvb3RzdHJhcC9saWIvT3ZlcmxheVRyaWdnZXJcIikpLF9Ub29sdGlwPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0LWJvb3RzdHJhcC9saWIvVG9vbHRpcFwiKSksX05ld1V0aWxzPXJlcXVpcmUoXCIuL05ld1V0aWxzXCIpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGE9dFtyXTthLmVudW1lcmFibGU9YS5lbnVtZXJhYmxlfHwhMSxhLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBhJiYoYS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsYS5rZXksYSl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgUGFyYW1zVGFibGU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciBlLHI7X2NsYXNzQ2FsbENoZWNrKHRoaXMsdCk7Zm9yKHZhciBhPWFyZ3VtZW50cy5sZW5ndGgsbD1uZXcgQXJyYXkoYSksbj0wO248YTtuKyspbFtuXT1hcmd1bWVudHNbbl07cmV0dXJuKHI9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoZT1fZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwuYXBwbHkoZSxbdGhpc10uY29uY2F0KGwpKSkpLm9uU2VsZWN0PWZ1bmN0aW9uKGUsdCxhKXthLnByZXZlbnREZWZhdWx0KCksci5wcm9wcy5vblNlbGVjdCYmci5wcm9wcy5vblNlbGVjdChlLHQpfSxyLm9uVmFsdWVDbGljaz1mdW5jdGlvbihlLHQpe3QucHJldmVudERlZmF1bHQoKSxyLnByb3BzLm9uVmFsdWVDbGljayYmci5wcm9wcy5vblZhbHVlQ2xpY2soZSl9LHJ9cmV0dXJuIF9pbmhlcml0cyh0LF9yZWFjdC5kZWZhdWx0LkNvbXBvbmVudCksX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLnByb3BzLmZpZWxkcyxyPXRoaXMucHJvcHMuZW1wdHlUZXh0LGE9dGhpcy5wcm9wcy5vblNlbGVjdCxsPXRoaXMucHJvcHMuc2VsZWN0ZWQsbj10aGlzLnByb3BzLm9uVmFsdWVDbGljayxvPXRoaXMucHJvcHMudmFsdWVUb29sdGlwLHU9dGhpcy5wcm9wcy5maWVsZENvbHVtbkxhYmVsfHxcIktleVwiLGM9X2xvZGFzaC5kZWZhdWx0LmlzQXJyYXkodCk/dDpfbG9kYXNoLmRlZmF1bHQubWFwKHQsZnVuY3Rpb24oZSx0KXtyZXR1cm57bmFtZTp0LHZhbHVlOmV9fSk7cmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiLHtjbGFzc05hbWU6XCJ0YWJsZSB3YS1icmVhay1hbGxcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRoZWFkXCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidHJcIixudWxsLGE/X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRoXCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaVwiLHtjbGFzc05hbWU6XCJmYSBmYS1jaGVja1wifSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInNwYW5cIix7Y2xhc3NOYW1lOlwic3Itb25seVwifSxcIlNlbGVjdGVkP1wiKSk6bnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidGhcIix7c3R5bGU6e21pbldpZHRoOjEwMH19LHUpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiLG51bGwsXCJWYWx1ZVwiKSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiLG51bGwsciYmMD09PWMubGVuZ3RoP19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0clwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRkXCIse2NvbFNwYW46YT8zOjIsY2xhc3NOYW1lOlwidGV4dC1jZW50ZXJcIn0scikpOm51bGwsYy5tYXAoZnVuY3Rpb24odCxyKXt2YXIgdT1cInN0cmluZ1wiPT10eXBlb2YgdC52YWx1ZT90LnZhbHVlOnQudmFsdWUuZGF0YSxjPXQudmFsdWUmJlwiZmlsZVwiPT09dC52YWx1ZS50eXBlLHM9X2xvZGFzaC5kZWZhdWx0LmlzTnVtYmVyKGwpJiZsPT09cnx8bD09PXQubmFtZXx8bD09PXQsaT1fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLG51bGwsYz9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLG51bGwsdS5maWxlTmFtZSxcIiBcIixfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLHtjbGFzc05hbWU6XCJsYWJlbCBsYWJlbC1wcmltYXJ5XCJ9LFwiRmlsZVwiKSk6dSk7cmV0dXJuIG4mJihpPV9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJhXCIse2hyZWY6XCIjXCIsb25DbGljazooMCxfTmV3VXRpbHMuY2FsbCkoZSxcIm9uVmFsdWVDbGlja1wiLFt1XSl9LGkpKSxvJiYoaT1fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9PdmVybGF5VHJpZ2dlci5kZWZhdWx0LHtvdmVybGF5Ol9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1Rvb2x0aXAuZGVmYXVsdCx7aWQ6XCJ2YWx1ZVwiLmNvbmNhdChyKX0sbykscGxhY2VtZW50OlwiYm90dG9tXCJ9LGkpKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidHJcIix7a2V5OnIsY2xhc3NOYW1lOigwLF9jbGFzc25hbWVzLmRlZmF1bHQpKHtcIndhLWhvdmVyLXJvdyB3YS1saW5rXCI6YSxpbmZvOnN9KSxvbkNsaWNrOigwLF9OZXdVdGlscy5jYWxsKShlLFwib25TZWxlY3RcIixbdCxyXSl9LGE/X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRkXCIsbnVsbCxzP19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIse2NsYXNzTmFtZTpcInRleHQtc3VjY2Vzc1wifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaVwiLHtjbGFzc05hbWU6XCJmYSBmYS1jaGVjay1zcXVhcmUtb1wifSkpOl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImZhIGZhLXNxdWFyZS1vXCJ9KSk6bnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidGRcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLHQubmFtZSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiLG51bGwsaSkpfSx0aGlzKSkpfX1dKSx0fSgpO1BhcmFtc1RhYmxlLnByb3BUeXBlcz17ZmllbGRzOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5vbmVPZlR5cGUoW19yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5hcnJheSxfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMub2JqZWN0XSkuaXNSZXF1aXJlZCxlbXB0eVRleHQ6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLnN0cmluZyxvblNlbGVjdDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYyxzZWxlY3RlZDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMub25lT2ZUeXBlKFtfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMubnVtYmVyLF9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5zdHJpbmddKSxvblZhbHVlQ2xpY2s6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmZ1bmMsdmFsdWVUb29sdGlwOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5ub2RlLGZpZWxkQ29sdW1uTGFiZWw6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLnN0cmluZ307dmFyIF9kZWZhdWx0PVBhcmFtc1RhYmxlO2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9sb2Rhc2g9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoXCIpKSxfSW1tdXRhYmxlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL0ltbXV0YWJsZVwiKSksX1V0aWxpdHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanMvVXRpbGl0eVwiKSksX1R1dG9yaWFsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL3JlZHV4L1R1dG9yaWFsXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoZSl7cmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhlKXx8X2l0ZXJhYmxlVG9BcnJheShlKXx8X25vbkl0ZXJhYmxlU3ByZWFkKCl9ZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpfWZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoZSl7aWYoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChlKXx8XCJbb2JqZWN0IEFyZ3VtZW50c11cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSlyZXR1cm4gQXJyYXkuZnJvbShlKX1mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoZSl7aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciB0PTAsYT1uZXcgQXJyYXkoZS5sZW5ndGgpO3Q8ZS5sZW5ndGg7dCsrKWFbdF09ZVt0XTtyZXR1cm4gYX19ZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZSl7ZSYmZS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbihlKXtlJiZlLnN0b3BQcm9wYWdhdGlvbigpfWZ1bmN0aW9uIGpvaW5QYXRoKGUsdCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/KGU9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplLmpvaW4oXCIuXCIpLFwiXCIuY29uY2F0KGUsXCIuXCIpLmNvbmNhdCh0KSk6dCBpbnN0YW5jZW9mIEFycmF5PyhlPWUgaW5zdGFuY2VvZiBBcnJheT9lOmUuc3BsaXQoXCIuXCIpKS5jb25jYXQodCk6bnVsbH1mdW5jdGlvbiB1cGRhdGVGb3JtRmllbGRXaXRoUHJlZml4KGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGEsbCxyKXtyZXR1cm4gYT1qb2luUGF0aCh0LGEpLHVwZGF0ZUZvcm1GaWVsZChlLGEsbCxyKX19ZnVuY3Rpb24gdXBkYXRlRm9ybUZpZWxkKGUsdCxhLGwpe3ZhciByPWUuX3VwZGF0ZUZvcm1GaWVsZENhY2hlO3J8fChlLl91cGRhdGVGb3JtRmllbGRDYWNoZT17fSxyPWUuX3VwZGF0ZUZvcm1GaWVsZENhY2hlKTt2YXIgbj1KU09OLnN0cmluZ2lmeShbdCxhLGxdKTtpZihyW25dKXJldHVybiByW25dO3ZhciBvPWZ1bmN0aW9uKHIpe3ZhciBuPXImJnIudGFyZ2V0P3IudGFyZ2V0LnZhbHVlOnI7dHJ5e1wiaW50XCI9PT1hP249cGFyc2VJbnQobiwxMCk6XCJmbG9hdFwiPT09YSYmKG49cGFyc2VGbG9hdChuKSl9Y2F0Y2goZSl7cmV0dXJuIHIucHJldmVudERlZmF1bHQmJnIucHJldmVudERlZmF1bHQoKSxlfXZhciBvPWUuc3RhdGU7cmV0dXJuIG89c2V0TWl4ZWQobyx0LG4pLGwmJihvPXNldE1peGVkKG8sbCwhMCkpLGUuc2V0U3RhdGUobyksbnVsbH07cmV0dXJuIHJbbl09byxvfWZ1bmN0aW9uIHRvZ2dsZShlLHQsYSl7YSYmYS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBsPV9sb2Rhc2guZGVmYXVsdC5nZXQodGhpcy5zdGF0ZSxlKT09PXQ/bnVsbDp0LHI9X2xvZGFzaC5kZWZhdWx0LmNsb25lRGVlcCh0aGlzLnN0YXRlKTtfbG9kYXNoLmRlZmF1bHQuc2V0KHIsZSxsKSx0aGlzLnNldFN0YXRlKHIpfWZ1bmN0aW9uIHRvZ2dsZUNoZWNrYm94KGUsdCl7cmV0dXJuIHRvZ2dsZUJvb2xUcmFja2luZ0NoYW5nZXMuY2FsbCh0aGlzLGUsdCxudWxsKX1mdW5jdGlvbiB0b2dnbGVDaGVja2JveFdpdGhQcmVmaXgoZSx0LGEpe3JldHVybiB0b2dnbGVDaGVja2JveC5jYWxsKHRoaXMsam9pblBhdGgoZSx0KSxhKX1mdW5jdGlvbiB0b2dnbGVCb29sKGUsdCl7cmV0dXJuIHRvZ2dsZUJvb2xUcmFja2luZ0NoYW5nZXMuY2FsbCh0aGlzLGUsbnVsbCx0KX1mdW5jdGlvbiBzcGxpdE11dGFibGVJbW11dGFibGUoZSx0KXtcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9dC5zcGxpdChcIi5cIikpO2Zvcih2YXIgYT1lLGw9W10scj1bXSxuPTA7biE9PXQubGVuZ3RoO24rKyl7dmFyIG89dFtuXTtpZihyLnB1c2gobyksX0ltbXV0YWJsZS5kZWZhdWx0Lkl0ZXJhYmxlLmlzSXRlcmFibGUoYVtvXSkpe2w9dC5zbGljZShuKzEpO2JyZWFrfX1yZXR1cm57bXV0YWJsZTpyLGltbXV0YWJsZTpsfX1mdW5jdGlvbiBzZXRNaXhlZChlLHQsYSxsKXt2YXIgcj1zcGxpdE11dGFibGVJbW11dGFibGUoZSx0KSxuPSEhci5tdXRhYmxlLmxlbmd0aCxvPSEhci5pbW11dGFibGUubGVuZ3RoLGk9bj9fbG9kYXNoLmRlZmF1bHQuZ2V0KGUsci5tdXRhYmxlKTplLHU9bz9pLnNldEluKHIuaW1tdXRhYmxlLGEpOmE7aWYobil7dmFyIHM9W107ZT1fbG9kYXNoLmRlZmF1bHQuY2xvbmUoZSk7Zm9yKHZhciBkPTA7ZCE9PXIubXV0YWJsZS5sZW5ndGgtMTtkKyspe3ZhciBmPXIubXV0YWJsZVtkXTtzLnB1c2goZiksX2xvZGFzaC5kZWZhdWx0LnNldChlLHMsX2xvZGFzaC5kZWZhdWx0LmNsb25lKF9sb2Rhc2guZGVmYXVsdC5nZXQoZSxzKSkpfXJldHVybiBsP19sb2Rhc2guZGVmYXVsdC5zZXQoZSxyLm11dGFibGUsdSk6X2xvZGFzaC5kZWZhdWx0LnNldFdpdGgoZSxyLm11dGFibGUsdSxsKSxlfXJldHVybiB1fWZ1bmN0aW9uIGdldE1peGVkKGUsdCl7dmFyIGE9c3BsaXRNdXRhYmxlSW1tdXRhYmxlKGUsdCksbD0hIWEubXV0YWJsZS5sZW5ndGgscj0hIWEuaW1tdXRhYmxlLmxlbmd0aCxuPWw/X2xvZGFzaC5kZWZhdWx0LmdldChlLGEubXV0YWJsZSk6ZTtyZXR1cm4gcj9uLmdldEluKGEuaW1tdXRhYmxlKTpufWZ1bmN0aW9uIHRvZ2dsZUJvb2xUcmFja2luZ0NoYW5nZXMoZSx0LGEpe2EmJmEucHJldmVudERlZmF1bHQmJmEucHJldmVudERlZmF1bHQoKTt2YXIgbD10aGlzLnN0YXRlO2w9c2V0TWl4ZWQobCxlLCFnZXRNaXhlZChsLGUpKSx0JiYodCBpbnN0YW5jZW9mIEFycmF5fHxcInN0cmluZ1wiPT10eXBlb2YgdCkmJihsPXNldE1peGVkKGwsdCwhMCkpLHRoaXMuc2V0U3RhdGUobCl9ZnVuY3Rpb24gc2V0U3RhdGUoZSx0LGEpe2EmJmEucHJldmVudERlZmF1bHQmJmEucHJldmVudERlZmF1bHQoKTt2YXIgbD1zZXRNaXhlZCh0aGlzLnN0YXRlLGUsdCk7dGhpcy5zZXRTdGF0ZShsKX1mdW5jdGlvbiBzZXRTdGF0ZVJhZGlvKGUsdCl7cmV0dXJuIHNldFN0YXRlLmNhbGwodGhpcyxlLHQudGFyZ2V0LnZhbHVlKX1mdW5jdGlvbiBzZXRTdGF0ZUNoZWNrYm94KGUsdCl7cmV0dXJuIHNldFN0YXRlLmNhbGwodGhpcyxlLHQudGFyZ2V0LmNoZWNrZWQpfWZ1bmN0aW9uIGFkZEJyZWFrcyhlLHQpe3Q9dHx8L1svJl0vO3ZhciBhPWUuc3BsaXQodCksbD1hLm1hcChmdW5jdGlvbihlLHQpe3JldHVybiB0PT09YS5sZW5ndGgtMT9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLHtrZXk6dH0sZSk6X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInNwYW5cIix7a2V5OnR9LGUsXCIvXCIsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcIndiclwiLG51bGwpKX0pO3JldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLG51bGwsbCl9ZnVuY3Rpb24gZGVmYXVsdERvbmVUb1ZhcmlhYmxlKGUsdCl7dmFyIGE9e2xvYWRpbmc6X2xvZGFzaC5kZWZhdWx0LmdldChlLFwibG9hZGluZ1wiKXx8XCJsb2FkaW5nXCIscmVzcG9uc2U6X2xvZGFzaC5kZWZhdWx0LmdldChlLFwicmVzcG9uc2VcIil8fFwicmVzcG9uc2VcIn0sbD17fTtfbG9kYXNoLmRlZmF1bHQuc2V0KGwsYS5sb2FkaW5nLCExKSxfbG9kYXNoLmRlZmF1bHQuc2V0KGwsYS5yZXNwb25zZSx0KSx0aGlzLnNldFN0YXRlKGwpfWZ1bmN0aW9uIGRlZmF1bHREb25lKGUpe2RlZmF1bHREb25lVG9WYXJpYWJsZS5jYWxsKHRoaXMsbnVsbCxlKX1mdW5jdGlvbiBkZWZhdWx0RmFpbFRvVmFyaWFibGUoZSx0KXt2YXIgYT1fVXRpbGl0eS5kZWZhdWx0LmdldERlZmF1bHRFcnJvcih0KSxsPXtsb2FkaW5nOl9sb2Rhc2guZGVmYXVsdC5nZXQoZSxcImxvYWRpbmdcIil8fFwibG9hZGluZ1wiLHJlc3BvbnNlOl9sb2Rhc2guZGVmYXVsdC5nZXQoZSxcInJlc3BvbnNlXCIpfHxcInJlc3BvbnNlXCJ9LHI9e307X2xvZGFzaC5kZWZhdWx0LnNldChyLGwubG9hZGluZywhMSksX2xvZGFzaC5kZWZhdWx0LnNldChyLGwucmVzcG9uc2UsX2xvZGFzaC5kZWZhdWx0LmlzRW1wdHkodCk/YTp0KSx0aGlzLnNldFN0YXRlKHIpfWZ1bmN0aW9uIGRlZmF1bHRGYWlsKGUpe2RlZmF1bHRGYWlsVG9WYXJpYWJsZS5jYWxsKHRoaXMsbnVsbCxlKX1mdW5jdGlvbiBkZWZhdWx0UmVuZGVyTWVzc2FnZXMoZSx0KXtyZXR1cm4gZSYmZS5tZXNzYWdlcyYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJhbGVydCBhbGVydC1cIi5jb25jYXQoZS5zdWNjZXNzP1wic3VjY2Vzc1wiOlwiZGFuZ2VyXCIpLmNvbmNhdCh0P1wiIFwiLmNvbmNhdCh0KTpcIlwiKX0sZS5tZXNzYWdlcy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJwXCIse2tleTplfSxlKX0pKX1mdW5jdGlvbiBtZW1vaXplKGUpe3JldHVybiBlLl9tZW1vaXplZENhY2hlPXt9LGZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsYT1uZXcgQXJyYXkodCksbD0wO2w8dDtsKyspYVtsXT1hcmd1bWVudHNbbF07dmFyIHI9SlNPTi5zdHJpbmdpZnkoYSksbj1lLl9tZW1vaXplZENhY2hlO3JldHVybiBuW3JdfHwobltyXT1lLmFwcGx5KHRoaXMsYSkpLG5bcl19fUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kTWVtb2l6ZWQ9ZnVuY3Rpb24oZSl7dGhpcy5fYmluZE1lbW9pemVkQ2FjaGV8fCh0aGlzLl9iaW5kTWVtb2l6ZWRDYWNoZT17fSk7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsYT1uZXcgQXJyYXkodD4xP3QtMTowKSxsPTE7bDx0O2wrKylhW2wtMV09YXJndW1lbnRzW2xdO3ZhciByPUpTT04uc3RyaW5naWZ5KGEpO3JldHVybiB0aGlzLl9iaW5kTWVtb2l6ZWRDYWNoZVtyXXx8KHRoaXMuX2JpbmRNZW1vaXplZENhY2hlW3JdPXRoaXMuYmluZC5hcHBseSh0aGlzLF90b0NvbnN1bWFibGVBcnJheShbZV0uY29uY2F0KGF8fFtdKSkpKSx0aGlzLl9iaW5kTWVtb2l6ZWRDYWNoZVtyXX07dmFyIFJlYWN0VXRpbHM9e3ByZXZlbnREZWZhdWx0OnByZXZlbnREZWZhdWx0LHN0b3BQcm9wYWdhdGlvbjpzdG9wUHJvcGFnYXRpb24sdXBkYXRlRm9ybUZpZWxkOnVwZGF0ZUZvcm1GaWVsZCx1cGRhdGVGb3JtRmllbGRXaXRoUHJlZml4OnVwZGF0ZUZvcm1GaWVsZFdpdGhQcmVmaXgsYWRkQnJlYWtzOmFkZEJyZWFrcyx0b2dnbGU6dG9nZ2xlLHNldE1peGVkOnNldE1peGVkLHNldFN0YXRlOnNldFN0YXRlLHNldFN0YXRlUmFkaW86c2V0U3RhdGVSYWRpbyxzZXRTdGF0ZUNoZWNrYm94OnNldFN0YXRlQ2hlY2tib3gsdG9nZ2xlQ2hlY2tib3g6dG9nZ2xlQ2hlY2tib3gsdG9nZ2xlQ2hlY2tib3hXaXRoUHJlZml4OnRvZ2dsZUNoZWNrYm94V2l0aFByZWZpeCx0b2dnbGVCb29sOnRvZ2dsZUJvb2wsZGVmYXVsdERvbmVUb1ZhcmlhYmxlOmRlZmF1bHREb25lVG9WYXJpYWJsZSxkZWZhdWx0RmFpbFRvVmFyaWFibGU6ZGVmYXVsdEZhaWxUb1ZhcmlhYmxlLGRlZmF1bHREb25lOmRlZmF1bHREb25lLGRlZmF1bHRGYWlsOmRlZmF1bHRGYWlsLGRlZmF1bHRSZW5kZXJNZXNzYWdlczpkZWZhdWx0UmVuZGVyTWVzc2FnZXMsY29ubmVjdFR1dG9yaWFsU3RlcDpfVHV0b3JpYWwuZGVmYXVsdC5jb25uZWN0VHV0b3JpYWxTdGVwLGNvbm5lY3RMb2NhbFR1dG9yaWFsU3RlcDpfVHV0b3JpYWwuZGVmYXVsdC5jb25uZWN0TG9jYWxUdXRvcmlhbFN0ZXAsbWVtb2l6ZTptZW1vaXplfSxfZGVmYXVsdD1SZWFjdFV0aWxzO2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9OZXdVdGlscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL05ld1V0aWxzXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBfdHlwZW9mKGUpe3JldHVybihfdHlwZW9mPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07by5lbnVtZXJhYmxlPW8uZW51bWVyYWJsZXx8ITEsby5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG8ua2V5LG8pfX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSx0LHIpe3JldHVybiB0JiZfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxyJiZfZGVmaW5lUHJvcGVydGllcyhlLHIpLGV9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PV90eXBlb2YodCkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/X2Fzc2VydFRoaXNJbml0aWFsaXplZChlKTp0fWZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKGUpe3JldHVybihfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIF9pbmhlcml0cyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmX3NldFByb3RvdHlwZU9mKGUsdCl9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKGUsdCl7cmV0dXJuKF9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0pKGUsdCl9dmFyIFJlY29yZGluZ0J1dHRvbj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIF9jbGFzc0NhbGxDaGVjayh0aGlzLHQpLF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsX2dldFByb3RvdHlwZU9mKHQpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIF9pbmhlcml0cyh0LF9yZWFjdC5kZWZhdWx0LlB1cmVDb21wb25lbnQpLF9jcmVhdGVDbGFzcyh0LFt7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnByb3BzLmlzUmVjb3JkaW5nLHQ9dGhpcy5wcm9wcy5sb2FkaW5nO3JldHVybiBlP19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIix7Y2xhc3NOYW1lOlwiYnRuIGJ0bi1kYW5nZXJcIix0eXBlOlwiYnV0dG9uXCIsb25DbGljazpfTmV3VXRpbHMuZGVmYXVsdC5jYWxsUHJvcCh0aGlzLFwib25SZWNvcmRpbmdDaGFuZ2VcIixbITFdKSxkaXNhYmxlZDp0fSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaVwiLHtjbGFzc05hbWU6XCJmYSBmYS1jaXJjbGVcIn0pLFwiIFJlY29yZGluZ1wiLFwiIFwiLHQmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gZmEtZndcIn0pKTpfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIse2NsYXNzTmFtZTpcImJ0biBidG4td2FybmluZ1wiLHR5cGU6XCJidXR0b25cIixvbkNsaWNrOl9OZXdVdGlscy5kZWZhdWx0LmNhbGxQcm9wKHRoaXMsXCJvblJlY29yZGluZ0NoYW5nZVwiLFshMF0pLGRpc2FibGVkOnR9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImZhIGZhLWNpcmNsZVwifSksXCIgU3RhcnQgY2FwdHVyaW5nIHJlcXVlc3RzXCIsXCIgXCIsdCYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlcIix7Y2xhc3NOYW1lOlwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBmYS1md1wifSkpfX1dKSx0fSgpO1JlY29yZGluZ0J1dHRvbi5wcm9wVHlwZXM9e2lzUmVjb3JkaW5nOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsb25SZWNvcmRpbmdDaGFuZ2U6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxsb2FkaW5nOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5ib29sfTt2YXIgX2RlZmF1bHQ9UmVjb3JkaW5nQnV0dG9uO2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9yZWFjdFJlZHV4PXJlcXVpcmUoXCJyZWFjdC1yZWR1eFwiKSxfcmVkdXg9cmVxdWlyZShcInJlZHV4XCIpLF9NYWluUmVkdWNlcj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9qcy9yZWR1eC9NYWluUmVkdWNlclwiKSksX0xvZ2luR2F0ZT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0xvZ2luR2F0ZVwiKSksX1JlcXVlc3RDYXB0dXJlUGFnZT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL1JlcXVlc3RDYXB0dXJlUGFnZVwiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gX3R5cGVvZihlKXtyZXR1cm4oX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19ZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsdCxyKXtyZXR1cm4gdCYmX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsdCksciYmX2RlZmluZVByb3BlcnRpZXMoZSxyKSxlfWZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKGUsdCl7cmV0dXJuIXR8fFwib2JqZWN0XCIhPT1fdHlwZW9mKHQpJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0P19hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSk6dH1mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpe2lmKHZvaWQgMD09PWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiBlfWZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihlKXtyZXR1cm4oX2dldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9KShlKX1mdW5jdGlvbiBfaW5oZXJpdHMoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJl9zZXRQcm90b3R5cGVPZihlLHQpfWZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihlLHQpe3JldHVybihfc2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlLHQpe3JldHVybiBlLl9fcHJvdG9fXz10LGV9KShlLHQpfXZhciBzdG9yZT0oMCxfcmVkdXguY3JlYXRlU3RvcmUpKF9NYWluUmVkdWNlci5kZWZhdWx0KSxSZXF1ZXN0Q2FwdHVyZU1haW5QYWdlPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgZSxyO19jbGFzc0NhbGxDaGVjayh0aGlzLHQpO2Zvcih2YXIgbj1hcmd1bWVudHMubGVuZ3RoLG89bmV3IEFycmF5KG4pLGE9MDthPG47YSsrKW9bYV09YXJndW1lbnRzW2FdO3JldHVybihyPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsKGU9X2dldFByb3RvdHlwZU9mKHQpKS5jYWxsLmFwcGx5KGUsW3RoaXNdLmNvbmNhdChvKSkpKS5zdGF0ZT17c2hvd0V4cGFuZERpYWxvZzohMX0sci51cGRhdGVTaXplPWZ1bmN0aW9uKCl7dmFyIGU9d2luZG93LmlubmVyV2lkdGgsdD13aW5kb3cuaW5uZXJIZWlnaHQ7ZSYmdCYmKGU8NTYwfHx0PDQwMCk/ci5zZXRTdGF0ZSh7c2hvd0V4cGFuZERpYWxvZzohMH0pOnIuc2V0U3RhdGUoe3Nob3dFeHBhbmREaWFsb2c6ITF9KX0scn1yZXR1cm4gX2luaGVyaXRzKHQsX3JlYWN0LmRlZmF1bHQuUHVyZUNvbXBvbmVudCksX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJjb21wb25lbnRXaWxsTW91bnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudXBkYXRlU2l6ZSgpLHRoaXMuX29uUmVzaXplPXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy51cGRhdGVTaXplKX19LHtrZXk6XCJjb21wb25lbnRXaWxsVW5tb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5fb25SZXNpemUpfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zdGF0ZS5zaG93RXhwYW5kRGlhbG9nO3JldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsbnVsbCxlJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImNvbnRhaW5lclwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImFsZXJ0IGFsZXJ0LWluZm8gd2EtdG9wMTBcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInBcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLFwiVG8gdXNlIFdyYXBBUEksIHVuZG9jayB0aGUgQ2hyb21lIERldlRvb2xzIGludG8gYSBzZXBhcmF0ZSB3aW5kb3csIGFuZCBtYWtlIHN1cmUgaXQncyBhdCBsZWFzdCBzb21ld2hhdCBiaWcuXCIpKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwib2xcIix7Y2xhc3NOYW1lOlwid2EtdG9wMTBcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxpXCIsbnVsbCxcIkNsaWNrIHRoZVwiLFwiIFwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImZhIGZhLWVsbGlwc2lzLXZcIn0pLFwiIHRocmVlIGRvdHNcIiksXCIgXCIsXCJhdCB0aGUgdG9wIHJpZ2h0IG9mIHRoZSBEZXZUb29scyBwYW5lbC5cIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxpXCIsbnVsbCxcIlNlbGVjdFwiLFwiIFwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImZhIGZhLXdpbmRvdy1yZXN0b3JlXCJ9KSxcIiBVbmRvY2sgaW50byBzZXBhcmF0ZSB3aW5kb3cuXCIpKSkpKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse3N0eWxlOntkaXNwbGF5OmU/XCJub25lXCI6XCJibG9ja1wifX0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSZWR1eC5Qcm92aWRlcix7c3RvcmU6c3RvcmV9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0xvZ2luR2F0ZS5kZWZhdWx0LHtjb21wb25lbnRPbmNlTG9nZ2VkSW46X1JlcXVlc3RDYXB0dXJlUGFnZS5kZWZhdWx0LHNob3dMb2dvOiEwfSkpKSl9fV0pLHR9KCksX2RlZmF1bHQ9UmVxdWVzdENhcHR1cmVNYWluUGFnZTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5kZWZhdWx0PXZvaWQgMDt2YXIgX3JlYWN0PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKSxfcmVhY3RSb3V0ZXI9cmVxdWlyZShcInJlYWN0LXJvdXRlclwiKSxfbG9kYXNoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaFwiKSksX3VyaWpzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInVyaWpzXCIpKSxfTmF2YmFyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0LWJvb3RzdHJhcC9saWIvTmF2YmFyXCIpKSxfT3ZlcmxheVRyaWdnZXI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3QtYm9vdHN0cmFwL2xpYi9PdmVybGF5VHJpZ2dlclwiKSksX1Rvb2x0aXA9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3QtYm9vdHN0cmFwL2xpYi9Ub29sdGlwXCIpKSxfUmVxdWVzdENhcHR1cmU9cmVxdWlyZShcIi4uL2pzL1JlcXVlc3RDYXB0dXJlXCIpLF9BamF4PXJlcXVpcmUoXCIuLi9qcy9BamF4XCIpLF9DYXB0dXJlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL0NhcHR1cmVcIikpLF9Db25maWc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanMvQ29uZmlnXCIpKSxfQXV0aD1yZXF1aXJlKFwiLi4vanMvcmVkdXgvQXV0aFwiKSxfQVBJRWxlbWVudHM9cmVxdWlyZShcIi4uL2pzL3JlZHV4L0FQSUVsZW1lbnRzXCIpLF9OZXdVdGlscz1yZXF1aXJlKFwiLi9OZXdVdGlsc1wiKSxfUmVhY3RVdGlscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL1JlYWN0VXRpbHNcIikpLF9PdmVybGF5VG9vbHRpcD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL092ZXJsYXlUb29sdGlwXCIpKSxfTmF2YmFyVXNlcj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL05hdmJhclVzZXJcIikpLF9SZWNvcmRpbmdCdXR0b249X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9SZWNvcmRpbmdCdXR0b25cIikpLF9DYXB0dXJlc1ZpZXc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9DYXB0dXJlc1ZpZXdcIikpLF9SZXF1ZXN0Q2FwdHVyZVNhdmVNb2RhbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL1JlcXVlc3RDYXB0dXJlU2F2ZU1vZGFsXCIpKSxfRHJvcGRvd25TZWxlY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9Ecm9wZG93blNlbGVjdFwiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gX3R5cGVvZihlKXtyZXR1cm4oX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGUsdCxyLGEsbixzLG8pe3RyeXt2YXIgdT1lW3NdKG8pLGk9dS52YWx1ZX1jYXRjaChlKXtyZXR1cm4gdm9pZCByKGUpfXUuZG9uZT90KGkpOlByb21pc2UucmVzb2x2ZShpKS50aGVuKGEsbil9ZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxyPWFyZ3VtZW50cztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oYSxuKXt2YXIgcz1lLmFwcGx5KHQscik7ZnVuY3Rpb24gbyhlKXthc3luY0dlbmVyYXRvclN0ZXAocyxhLG4sbyx1LFwibmV4dFwiLGUpfWZ1bmN0aW9uIHUoZSl7YXN5bmNHZW5lcmF0b3JTdGVwKHMsYSxuLG8sdSxcInRocm93XCIsZSl9byh2b2lkIDApfSl9fWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGE9dFtyXTthLmVudW1lcmFibGU9YS5lbnVtZXJhYmxlfHwhMSxhLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBhJiYoYS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsYS5rZXksYSl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKGUpe3JldHVybihfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX1mdW5jdGlvbiByZW1vdmVIYXNoKGUpe3ZhciB0PSgwLF91cmlqcy5kZWZhdWx0KShlKS5ub3JtYWxpemUoKS50b1N0cmluZygpLHI9dC5pbmRleE9mKFwiI1wiKTtyZXR1cm4tMSE9PXI/dC5zdWJzdHIoMCxyKTp0fXZhciBSZXF1ZXN0Q2FwdHVyZVBhZ2U9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciBlLHI7X2NsYXNzQ2FsbENoZWNrKHRoaXMsdCk7Zm9yKHZhciBhPWFyZ3VtZW50cy5sZW5ndGgsbj1uZXcgQXJyYXkoYSkscz0wO3M8YTtzKyspbltzXT1hcmd1bWVudHNbc107cmV0dXJuKHI9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoZT1fZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwuYXBwbHkoZSxbdGhpc10uY29uY2F0KG4pKSkpLnByb3BzPXZvaWQgMCxyLnN0YXRlPXtpc1JlY29yZGluZzohMSxyZXF1ZXN0czpbXSxwYWdlVVJMOlwiXCIsc2hvd1NhdmVNb2RhbDohMSxzYXZlZENhcHR1cmVzOltdLGlzU2F2aW5nOiExLHNhdmVSZXNwb25zZTpudWxsLGlzQ2FwdHVyZUxvYWRpbmc6ITEsZ2V0Q2FwdHVyZXNSZXNwb25zZTpudWxsfSxyLnJlcXVlc3RzQXdhaXRpbmdSZWRpcmVjdD17fSxyLnNlcU51bT0wLHIuYWxsUmVxdWVzdHM9W10sci5yZXF1ZXN0TGlzdGVuZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9X0NhcHR1cmUuZGVmYXVsdC5wYXJzZVVSTChlLnJlcXVlc3QudXJsKTtpZihlLmN1c3RvbT17fSxlLmN1c3RvbS5wYWdlVVJMPXIuc3RhdGUucGFnZVVSTCxcImh0dHA6XCI9PT10LnByb3RvY29sfHxcImh0dHBzOlwiPT09dC5wcm90b2NvbCl7ZS5jdXN0b20ueGhyPWUucmVxdWVzdC51cmwhPT1lLmN1c3RvbS5wYWdlVVJMO3ZhciBhPWUucmVzcG9uc2UucmVkaXJlY3RVUkwsbj1cIlwiIT09YSYmZS5yZXNwb25zZS5zdGF0dXM+PTMwMCYmZS5yZXNwb25zZS5zdGF0dXM8NDAwO2EmJihhPSgwLF91cmlqcy5kZWZhdWx0KShhKS5hYnNvbHV0ZVRvKGUucmVxdWVzdC51cmwpLm5vcm1hbGl6ZSgpLnRvU3RyaW5nKCkpLGUuY3VzdG9tLmlzUmVkaXJlY3Q9bjt2YXIgcz10LnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5wb3AoKSxvPXMuaW5kZXhPZihcIi5cIiksdT0tMT09PW8/XCJcIjpzLnN1YnN0cmluZyhvKzEpLGk9X0NhcHR1cmUuZGVmYXVsdC5nZXRTaG9ydE1pbWUoZS5yZXNwb25zZS5jb250ZW50Lm1pbWVUeXBlLHUpO2UuY3VzdG9tLnNob3J0TWltZT1pLGUucmVxdWVzdC5wb3N0RGF0YSYmKGUuY3VzdG9tLnBvc3REYXRhPV9DYXB0dXJlLmRlZmF1bHQucGFyc2VQb3N0RGF0YShlLnJlcXVlc3QucG9zdERhdGEpKSxlLnJlcXVlc3QucXVlcnlTdHJpbmcmJihlLmN1c3RvbS5xdWVyeVN0cmluZz1fbG9kYXNoLmRlZmF1bHQuY2xvbmVEZWVwKGUucmVxdWVzdC5xdWVyeVN0cmluZykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnZhbHVlPWRlY29kZVVSSUNvbXBvbmVudChlLnZhbHVlKS5yZXBsYWNlKC9cXCsvZyxcIiBcIiksZX0pKTt2YXIgbD1mdW5jdGlvbihlKXtyLmFsbFJlcXVlc3RzPXIuYWxsUmVxdWVzdHMuY29uY2F0KFtlXSksZS5jdXN0b20uYmFzZTY0PV9DYXB0dXJlLmRlZmF1bHQuZXh0cmFjdEJhc2U2NChlKSxfQ29uZmlnLmRlZmF1bHQuZGVidWcoZSksci51cGRhdGVSZXF1ZXN0c1Rocm90dGxlZCgpfTtpZihlLmN1c3RvbS5zZXFOdW09ci5zZXFOdW0rKyxuKXt2YXIgYz1yZW1vdmVIYXNoKGEpO3IucmVxdWVzdHNBd2FpdGluZ1JlZGlyZWN0W2NdPWUsZS5jdXN0b20uZmluYWxEYXRhPW51bGwsbChlKX1lbHNlIGUuZ2V0Q29udGVudChmdW5jdGlvbih0LGEpe2UucmVzcG9uc2VCb2R5PXtjb250ZW50OnQsZW5jb2Rpbmc6YX07dmFyIG49X2xvZGFzaC5kZWZhdWx0LmNsb25lKGUpO24uY3VzdG9tPV9sb2Rhc2guZGVmYXVsdC5jbG9uZShlLmN1c3RvbSksZGVsZXRlIG4uY3VzdG9tLmZpbmFsRGF0YSxlLmN1c3RvbS5maW5hbERhdGE9bjtmb3IodmFyIHM9cmVtb3ZlSGFzaChlLnJlcXVlc3QudXJsKSxvPShzIGluIHIucmVxdWVzdHNBd2FpdGluZ1JlZGlyZWN0KSx1PWU7bzspe3ZhciBpPXIucmVxdWVzdHNBd2FpdGluZ1JlZGlyZWN0W3NdO2RlbGV0ZSByLnJlcXVlc3RzQXdhaXRpbmdSZWRpcmVjdFtzXSxpLmN1c3RvbS5maW5hbERhdGE9ZS5jdXN0b20uZmluYWxEYXRhLGkuY3VzdG9tLmJhc2U2ND1fQ2FwdHVyZS5kZWZhdWx0LmV4dHJhY3RCYXNlNjQoaSksaS5jdXN0b20ucmVkaXJlY3RSZXFOdW09ZS5jdXN0b20uc2VxTnVtLGkuY3VzdG9tLnJlZGlyZWN0UmVxPWUsaS5jdXN0b20ubmV4dFJlcT11LG89KHM9KDAsX3VyaWpzLmRlZmF1bHQpKGkucmVxdWVzdC51cmwpLm5vcm1hbGl6ZSgpLnRvU3RyaW5nKCkpaW4gci5yZXF1ZXN0c0F3YWl0aW5nUmVkaXJlY3QsdT1pfWwoZSl9KX19LHIudXBkYXRlUmVxdWVzdHNUaHJvdHRsZWQ9dm9pZCAwLHIudXBkYXRlUmVxdWVzdHM9ZnVuY3Rpb24oKXtyLnNldFN0YXRlKHtyZXF1ZXN0czpyLmFsbFJlcXVlc3RzfSl9LHIubmF2aWdhdGVkTGlzdGVuZXI9ZnVuY3Rpb24oZSl7ci5zZXRTdGF0ZSh7cGFnZVVSTDplfSl9LHIuY2xlYXI9ZnVuY3Rpb24oKXtyLmFsbFJlcXVlc3RzPVtdLHIuc2V0U3RhdGUoe3JlcXVlc3RzOltdfSksci5zZXFOdW09MH0sci5oYW5kbGVSZWNvcmRpbmdDaGFuZ2U9ZnVuY3Rpb24oZSl7ci5zZXRTdGF0ZSh7aXNSZWNvcmRpbmc6ZX0pLGU/KGNocm9tZS5kZXZ0b29scy5uZXR3b3JrLm9uUmVxdWVzdEZpbmlzaGVkLmFkZExpc3RlbmVyKHIucmVxdWVzdExpc3RlbmVyKSxjaHJvbWUuZGV2dG9vbHMubmV0d29yay5vbk5hdmlnYXRlZC5hZGRMaXN0ZW5lcihyLm5hdmlnYXRlZExpc3RlbmVyKSxyLnByb3BzLmFkdmFuY2VUdXRvcmlhbFN0ZXAoXCJwcmVzc1RvUmVjb3JkXCIpKTooY2hyb21lLmRldnRvb2xzLm5ldHdvcmsub25SZXF1ZXN0RmluaXNoZWQucmVtb3ZlTGlzdGVuZXIoci5yZXF1ZXN0TGlzdGVuZXIpLGNocm9tZS5kZXZ0b29scy5uZXR3b3JrLm9uTmF2aWdhdGVkLnJlbW92ZUxpc3RlbmVyKHIubmF2aWdhdGVkTGlzdGVuZXIpKX0sci5oYW5kbGVTYXZlPWZ1bmN0aW9uKCl7dmFyIGU9X2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gZSh0KXt2YXIgYSxuLHM7cmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiByLnNldFN0YXRlKHtpc1NhdmluZzohMCxzYXZlUmVzcG9uc2U6bnVsbH0pLGE9ci5zdGF0ZS5yZXF1ZXN0cyxlLnByZXY9MixlLm5leHQ9NSwoMCxfUmVxdWVzdENhcHR1cmUuc2V0Q2FwdHVyZSkodCxhKTtjYXNlIDU6bj1lLnNlbnQscz1yLnN0YXRlLnNhdmVkQ2FwdHVyZXMsci5zZXRTdGF0ZSh7aXNTYXZpbmc6ITEsc2hvd1NhdmVNb2RhbDohMSxzYXZlZENhcHR1cmVzOnMuY29uY2F0KG4pfSksZS5uZXh0PTEzO2JyZWFrO2Nhc2UgMTA6ZS5wcmV2PTEwLGUudDA9ZS5jYXRjaCgyKSwoMCxfQWpheC5nZXRDYXRjaCkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChyKSxcInNhdmVSZXNwb25zZVwiLFwiaXNTYXZpbmdcIik7Y2FzZSAxMzpjYXNlXCJlbmRcIjpyZXR1cm4gZS5zdG9wKCl9fSxlLG51bGwsW1syLDEwXV0pfSkpO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSgpLHIuaGFuZGxlTG9hZENhcHR1cmU9ZnVuY3Rpb24oKXt2YXIgZT1fYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBlKHQpe3ZhciBhLG47cmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiByLnNldFN0YXRlKHtpc0NhcHR1cmVMb2FkaW5nOiEwfSksZS5wcmV2PTEsZS5uZXh0PTQsKDAsX1JlcXVlc3RDYXB0dXJlLmdldENhcHR1cmUpKHQpO2Nhc2UgNDphPWUuc2VudCxuPWEuZGF0YSxyLmFsbFJlcXVlc3RzPW4sci5zZXRTdGF0ZSh7cmVxdWVzdHM6bixpc0NhcHR1cmVMb2FkaW5nOiExfSksZS5uZXh0PTEzO2JyZWFrO2Nhc2UgMTA6ZS5wcmV2PTEwLGUudDA9ZS5jYXRjaCgxKSwoMCxfQWpheC5nZXRDYXRjaCkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChyKSxcImdldENhcHR1cmVzUmVzcG9uc2VcIixcImlzQ2FwdHVyZUxvYWRpbmdcIik7Y2FzZSAxMzpjYXNlXCJlbmRcIjpyZXR1cm4gZS5zdG9wKCl9fSxlLG51bGwsW1sxLDEwXV0pfSkpO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSgpLHJ9cmV0dXJuIF9pbmhlcml0cyh0LF9yZWFjdC5kZWZhdWx0LkNvbXBvbmVudCksX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJjb21wb25lbnRXaWxsTW91bnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7Y2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe3R5cGU6XCJjaHJvbWUudGFicy5nZXRcIixhcmdzOmNocm9tZS5kZXZ0b29scy5pbnNwZWN0ZWRXaW5kb3cudGFiSWR9LGZ1bmN0aW9uKHQpe2Uuc2V0U3RhdGUoe3BhZ2VVUkw6dC51cmx9KX0pLHRoaXMudXBkYXRlUmVxdWVzdHNUaHJvdHRsZWQ9X2xvZGFzaC5kZWZhdWx0LnRocm90dGxlKHRoaXMudXBkYXRlUmVxdWVzdHMsMjAwKSx0aGlzLnByb3BzLnJlZnJlc2hBUElFbGVtZW50cygpLHRoaXMubG9hZENhcHR1cmVzKCl9fSx7a2V5OlwibG9hZENhcHR1cmVzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1fYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBlKCl7dmFyIHQ7cmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOmlmKCF0aGlzLnByb3BzLmZlYXR1cmVGbGFncy5zYXZlQ2FwdHVyZXMpe2UubmV4dD0xMjticmVha31yZXR1cm4gZS5wcmV2PTIsZS5uZXh0PTUsKDAsX1JlcXVlc3RDYXB0dXJlLmdldENhcHR1cmVzKSgpO2Nhc2UgNTp0PWUuc2VudCx0aGlzLnNldFN0YXRlKHtzYXZlZENhcHR1cmVzOnR9KSxlLm5leHQ9MTI7YnJlYWs7Y2FzZSA5OmUucHJldj05LGUudDA9ZS5jYXRjaCgyKSwoMCxfQWpheC5nZXRDYXRjaCkodGhpcyxcImdldENhcHR1cmVzUmVzcG9uc2VcIikoZS50MCk7Y2FzZSAxMjpjYXNlXCJlbmRcIjpyZXR1cm4gZS5zdG9wKCl9fSxlLHRoaXMsW1syLDldXSl9KSk7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0oKX0se2tleTpcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZVJlY29yZGluZ0NoYW5nZSghMSl9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnN0YXRlLHQ9ZS5pc1JlY29yZGluZyxyPWUucmVxdWVzdHMsYT1lLnNob3dTYXZlTW9kYWwsbj1lLmlzU2F2aW5nLHM9ZS5zYXZlZENhcHR1cmVzLG89ZS5zYXZlUmVzcG9uc2UsdT1lLmdldENhcHR1cmVzUmVzcG9uc2UsaT1lLmlzQ2FwdHVyZUxvYWRpbmcsbD10aGlzLnByb3BzLGM9bC5hcGlFbGVtZW50cyxwPWwuZmVhdHVyZUZsYWdzO3JldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9OYXZiYXIuZGVmYXVsdCx7Zmx1aWQ6ITAsZml4ZWQ6ITAsY2xhc3NOYW1lOlwid2EtbmF2YmFyLW5vLWNvbGxhcHNlXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX05hdmJhci5kZWZhdWx0LkhlYWRlcixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX05hdmJhci5kZWZhdWx0LkJyYW5kLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXIuTGluayx7dG86XCIvXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIix7c3JjOlwiL2Fzc2V0cy9sb2dvLXYyLnBuZ1wiLGFsdDpcIldyYXBBUEkgdjJcIixjbGFzc05hbWU6XCJ3YS1leHRlbnNpb24tbG9nb1wifSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImltZ1wiLHtzcmM6XCIvYXNzZXRzL2xvZ28taWNvbi5wbmdcIixhbHQ6XCJXcmFwQVBJXCIsY2xhc3NOYW1lOlwid2EtZXh0ZW5zaW9uLWljb25cIn0pKSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX05hdmJhci5kZWZhdWx0LkNvbGxhcHNlLHtzdHlsZTp7ZmxleEdyb3c6MX19LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX05hdmJhci5kZWZhdWx0LkZvcm0se3B1bGxMZWZ0OiEwfSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9PdmVybGF5VG9vbHRpcC5kZWZhdWx0LHtwbGFjZW1lbnQ6XCJib3R0b21cIixzaG93OlwicHJlc3NUb1JlY29yZFwiPT09dGhpcy5wcm9wcy50dXRvcmlhbFN0ZXAsY29udGVudHM6X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInNwYW5cIixudWxsLFwiQ2xpY2sgaGVyZSB0byBzdGFydCBjYXB0dXJpbmcgdGhlIEhUVFAgcmVxdWVzdHNcIixfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYnJcIixudWxsKSxcInlvdSdsbCB1c2UgdG8gYnVpbGQgeW91ciBBUElcIiksb25YQ2xpY2s6KDAsX05ld1V0aWxzLmNhbGxQcm9wKSh0aGlzLFwiYWR2YW5jZVR1dG9yaWFsU3RlcFwiLFtcInByZXNzVG9SZWNvcmRcIl0pfSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9SZWNvcmRpbmdCdXR0b24uZGVmYXVsdCx7aXNSZWNvcmRpbmc6dCxvblJlY29yZGluZ0NoYW5nZTp0aGlzLmhhbmRsZVJlY29yZGluZ0NoYW5nZX0pKSxcIiBcIixfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIse2NsYXNzTmFtZTpcImJ0biBidG4tZGVmYXVsdFwiLG9uQ2xpY2s6dGhpcy5jbGVhcixkaXNhYmxlZDowPT09dGhpcy5zZXFOdW0sdHlwZTpcImJ1dHRvblwifSxcIkNsZWFyXCIpLFwiIFwiLHAuc2F2ZUNhcHR1cmVzJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImJ0bi1ncm91cFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9PdmVybGF5VHJpZ2dlci5kZWZhdWx0LHtvdmVybGF5Ol9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1Rvb2x0aXAuZGVmYXVsdCx7aWQ6XCJzYXZlUmVjb3JkaW5nXCJ9LFwiU2F2ZSByZWNvcmRpbmc6IHNhdmUgdGhlIGN1cnJlbnRseS1yZWNvcmRlZCByZXF1ZXN0IHRvIHJlZmVyZW5jZSBsYXRlclwiKSxwbGFjZW1lbnQ6XCJib3R0b21cIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLHtjbGFzc05hbWU6XCJidG4gYnRuLWRlZmF1bHRcIix0eXBlOlwiYnV0dG9uXCIsb25DbGljazooMCxfTmV3VXRpbHMuc2V0U3RhdGUpKHRoaXMsXCJzaG93U2F2ZU1vZGFsXCIsITApLGRpc2FibGVkOjA9PT1yLmxlbmd0aH0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlcIix7Y2xhc3NOYW1lOlwiZmEgZmEtZmxvcHB5LW9cIn0pKSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfT3ZlcmxheVRyaWdnZXIuZGVmYXVsdCx7b3ZlcmxheTpfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Ub29sdGlwLmRlZmF1bHQse2lkOlwic2F2ZVJlY29yZGluZ1wifSxcIkxvYWQgcmVjb3JkaW5nOiBsb2FkIGEgcHJldmlvdXNseS1zYXZlZCBsaXN0IG9mIHJlY29yZGluZ3NcIikscGxhY2VtZW50OlwicmlnaHRcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRHJvcGRvd25TZWxlY3QuZGVmYXVsdCx7YnV0dG9uOiEwLG9wdGlvbnM6cy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue2xhYmVsOmUubmFtZSx2YWx1ZTplLmlkfX0pLGRpc2FibGVkOjA9PT1zLmxlbmd0aCxvbkNoYW5nZTp0aGlzLmhhbmRsZUxvYWRDYXB0dXJlLGRlZmF1bHRMYWJlbDpfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlcIix7Y2xhc3NOYW1lOlwiZmEgZmEtZm9sZGVyLW9wZW4tb1wifSksXCIgXCIsaSYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlcIix7Y2xhc3NOYW1lOlwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBmYS1md1wifSkpfSkpKSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTmF2YmFyVXNlci5kZWZhdWx0LHtoaWRlVXNlcm5hbWU6ITB9KSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0NhcHR1cmVzVmlldy5kZWZhdWx0LHtzaG93VHV0b3JpYWw6ITAscmVxdWVzdHM6cixleGlzdGluZ0FQSUVsZW1lbnRzOmMsb25FeGlzdGluZ0FQSUVsZW1lbnRzQ2hhbmdlOigwLF9OZXdVdGlscy5jYWxsUHJvcCkodGhpcyxcInJlZnJlc2hBUElFbGVtZW50c1wiKSxpc1JlY29yZGluZzp0fSwoMCxfTmV3VXRpbHMucmVuZGVyUmVzcG9uc2UpKHUpKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9SZXF1ZXN0Q2FwdHVyZVNhdmVNb2RhbC5kZWZhdWx0LHtzaG93OmEsb25IaWRlOigwLF9OZXdVdGlscy5zZXRTdGF0ZSkodGhpcyxcInNob3dTYXZlTW9kYWxcIiwhMSksb25TYXZlOnRoaXMuaGFuZGxlU2F2ZSxpc1NhdmluZzpuLHNhdmVSZXNwb25zZTpvfSkpfX1dKSx0fSgpLF9kZWZhdWx0PV9SZWFjdFV0aWxzLmRlZmF1bHQuY29ubmVjdFR1dG9yaWFsU3RlcCgpKCgwLF9BdXRoLmNvbm5lY3QpKCkoKDAsX0FQSUVsZW1lbnRzLmNvbm5lY3QpKCkoUmVxdWVzdENhcHR1cmVQYWdlKSkpO2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9tb21lbnQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibW9tZW50XCIpKSxfTW9kYWw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3QtYm9vdHN0cmFwL2xpYi9Nb2RhbFwiKSksX05ld1V0aWxzPXJlcXVpcmUoXCIuL05ld1V0aWxzXCIpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGE9dFtyXTthLmVudW1lcmFibGU9YS5lbnVtZXJhYmxlfHwhMSxhLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBhJiYoYS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsYS5rZXksYSl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgUmVxdWVzdENhcHR1cmVTYXZlTW9kYWw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciBlLHI7X2NsYXNzQ2FsbENoZWNrKHRoaXMsdCk7Zm9yKHZhciBhPWFyZ3VtZW50cy5sZW5ndGgsbz1uZXcgQXJyYXkoYSksbj0wO248YTtuKyspb1tuXT1hcmd1bWVudHNbbl07cmV0dXJuKHI9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoZT1fZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwuYXBwbHkoZSxbdGhpc10uY29uY2F0KG8pKSkpLnByb3BzPXZvaWQgMCxyLnN0YXRlPXtuYW1lOlwiXCJ9LHIuaGFuZGxlSGlkZT1mdW5jdGlvbigpe3Iuc2V0U3RhdGUoe25hbWU6XCJcIn0pLHIucHJvcHMub25IaWRlKCl9LHIuaGFuZGxlU3VibWl0PWZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKTt2YXIgdD1yLnN0YXRlLm5hbWU7ci5wcm9wcy5vblNhdmUodCl9LHJ9cmV0dXJuIF9pbmhlcml0cyh0LF9yZWFjdC5kZWZhdWx0LlB1cmVDb21wb25lbnQpLF9jcmVhdGVDbGFzcyh0LFt7a2V5OlwiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2Uuc2hvdyYmIXRoaXMucHJvcHMuc2hvdyYmdGhpcy5zZXRTdGF0ZSh7bmFtZTpcIlJlYzogXCIuY29uY2F0KCgwLF9tb21lbnQuZGVmYXVsdCkoKS5mb3JtYXQoXCJNL0QgaDptbWFcIikpfSl9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnByb3BzLHQ9ZS5zaG93LHI9ZS5pc1NhdmluZyxhPWUuc2F2ZVJlc3BvbnNlLG89dGhpcy5zdGF0ZS5uYW1lO3JldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Nb2RhbC5kZWZhdWx0LHtzaG93OnQsb25IaWRlOnRoaXMuaGFuZGxlSGlkZX0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImZvcm1cIix7b25TdWJtaXQ6dGhpcy5oYW5kbGVTdWJtaXR9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX01vZGFsLmRlZmF1bHQuSGVhZGVyLHtjbG9zZUJ1dHRvbjohMH0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTW9kYWwuZGVmYXVsdC5UaXRsZSxudWxsLFwiU2F2ZSByZXF1ZXN0IGxvZyB0byBXcmFwQVBJXCIpKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Nb2RhbC5kZWZhdWx0LkJvZHksbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwicFwiLG51bGwsXCJEbyB5b3UgbmVlZCB0byByZWZlcmVuY2UgdGhlc2Ugc2FtZSByZXF1ZXN0cyBpbiB0aGUgZnV0dXJlPyBTYXZlIHRoZXNlIHJlY29yZGVkIHJlcXVlc3RzIHRvIFdyYXBBUEksIGFuZCBsb2FkIHRoZW0gYWdhaW4gZm9yIHJlZmVyZW5jZSBhbnkgdGltZSBpbiB0aGUgZnV0dXJlLlwiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImZvcm0tZ3JvdXBcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIse2h0bWxGb3I6XCJuYW1lXCJ9LFwiTmFtZSBvZiByZWNvcmRlZCBjYXB0dXJlc1wiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIix7dHlwZTpcInRleHRcIixjbGFzc05hbWU6XCJmb3JtLWNvbnRyb2xcIixwbGFjZWhvbGRlcjpcIk15IHJlY29yZGluZ1wiLG9uQ2hhbmdlOigwLF9OZXdVdGlscy51cGRhdGUpKHRoaXMsXCJuYW1lXCIpLHZhbHVlOm99KSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwicFwiLHtjbGFzc05hbWU6XCJoZWxwLWJsb2NrXCJ9LFwiQSBuYW1lIGZvciB0aGUgY2FwdHVyZSwganVzdCBzbyBpdOKAmXMgZWFzaWVyIHRvIGZpbmQgaW4gdGhlIGZ1dHVyZS5cIikpLCgwLF9OZXdVdGlscy5yZW5kZXJSZXNwb25zZSkoYSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX01vZGFsLmRlZmF1bHQuRm9vdGVyLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLHtjbGFzc05hbWU6XCJidG4gYnRuLWRlZmF1bHRcIix0eXBlOlwiYnV0dG9uXCIsb25DbGljazp0aGlzLmhhbmRsZUhpZGV9LFwiQ2FuY2VsXCIpLFwiIFwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIix7Y2xhc3NOYW1lOlwiYnRuIGJ0bi1wcmltYXJ5XCIsdHlwZTpcInN1Ym1pdFwiLGRpc2FibGVkOnJ8fCFvfSxyP19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsbnVsbCxcIlNhdmluZyBcIixfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaVwiLHtjbGFzc05hbWU6XCJmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluIGZhLWZ3XCJ9KSk6XCJTYXZlXCIpKSkpfX1dKSx0fSgpO2V4cG9ydHMuZGVmYXVsdD1SZXF1ZXN0Q2FwdHVyZVNhdmVNb2RhbDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9Ub29sdGlwPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0LWJvb3RzdHJhcC9saWIvVG9vbHRpcFwiKSksX092ZXJsYXlUcmlnZ2VyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0LWJvb3RzdHJhcC9saWIvT3ZlcmxheVRyaWdnZXJcIikpLF9DYXB0dXJlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL0NhcHR1cmVcIikpLF9VdGlsaXR5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL1V0aWxpdHlcIikpLF9SZWFjdFV0aWxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vUmVhY3RVdGlsc1wiKSksX05ld1V0aWxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vTmV3VXRpbHNcIikpLF9PdmVybGF5VG9vbHRpcD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL092ZXJsYXlUb29sdGlwXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBfdHlwZW9mKGUpe3JldHVybihfdHlwZW9mPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBhPXRbcl07YS5lbnVtZXJhYmxlPWEuZW51bWVyYWJsZXx8ITEsYS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gYSYmKGEud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGEua2V5LGEpfX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSx0LHIpe3JldHVybiB0JiZfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxyJiZfZGVmaW5lUHJvcGVydGllcyhlLHIpLGV9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PV90eXBlb2YodCkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/X2Fzc2VydFRoaXNJbml0aWFsaXplZChlKTp0fWZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKGUpe3JldHVybihfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIF9pbmhlcml0cyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmX3NldFByb3RvdHlwZU9mKGUsdCl9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKGUsdCl7cmV0dXJuKF9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0pKGUsdCl9dmFyIFJlcXVlc3RMaXN0PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgZSxyO19jbGFzc0NhbGxDaGVjayh0aGlzLHQpO2Zvcih2YXIgYT1hcmd1bWVudHMubGVuZ3RoLGw9bmV3IEFycmF5KGEpLG89MDtvPGE7bysrKWxbb109YXJndW1lbnRzW29dO3JldHVybihyPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsKGU9X2dldFByb3RvdHlwZU9mKHQpKS5jYWxsLmFwcGx5KGUsW3RoaXNdLmNvbmNhdChsKSkpKS50b2dnbGVSZXE9ZnVuY3Rpb24oZSl7dmFyIHQ9ci5wcm9wcy5zZWxlY3RlZEluZGV4O3IucHJvcHMub25TZWxlY3QmJih0IT09ZT9yLnByb3BzLm9uU2VsZWN0KGUpOnIucHJvcHMub25TZWxlY3QobnVsbCkpLHIucHJvcHMuc2hvd1R1dG9yaWFsJiZyLnByb3BzLmFkdmFuY2VUdXRvcmlhbFN0ZXAoXCJjaG9vc2VDYXB0dXJlXCIpfSxyfXJldHVybiBfaW5oZXJpdHModCxfcmVhY3QuZGVmYXVsdC5QdXJlQ29tcG9uZW50KSxfY3JlYXRlQ2xhc3ModCxbe2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMucHJvcHMucmVxdWVzdHMscj10aGlzLnByb3BzLmlzUmVjb3JkaW5nLGE9dGhpcy5wcm9wcy5maWx0ZXJzLGw9dGhpcy5wcm9wcy5zaG93VHV0b3JpYWwsbz10aGlzLnByb3BzLnNlbGVjdGVkSW5kZXgsbj10aGlzLnByb3BzLnR1dG9yaWFsU3RlcCx1PW51bGwhPW87ZnVuY3Rpb24gYyhlKXtyZXR1cm4hYS50ZXh0fHwhIV9DYXB0dXJlLmRlZmF1bHQuc2VhcmNoSW5DYXB0dXJlKGUsYS50ZXh0LGEudGV4dFNlYXJjaFBsYWNlcyl9ZnVuY3Rpb24gcyhlKXtyZXR1cm4hKCFlLmN1c3RvbS5maW5hbERhdGF8fCFhLnNob3J0TWltZXNbZS5jdXN0b20uZmluYWxEYXRhLmN1c3RvbS5zaG9ydE1pbWVdKX12YXIgaT1hLnRleHQ/dC5maWx0ZXIoYyk6dCxwPWkuZmlsdGVyKHMpO3JldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidGFibGVcIix7Y2xhc3NOYW1lOlwidGFibGUgdGFibGUtc3RyaXBlZCB3YS1yZXF1ZXN0LWxpc3Qgd2EtdGFibGUtZml4ZWRcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImNvbGdyb3VwXCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiY29sXCIse3N0eWxlOnt3aWR0aDpcIjMwcHhcIn19KSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiY29sXCIse3N0eWxlOnt3aWR0aDp1P1wiMTAwJVwiOlwiNjAlXCJ9fSksIXUmJltfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiY29sXCIse2tleTowLHN0eWxlOnt3aWR0aDpcIjQ1cHhcIn19KSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiY29sXCIse2tleToxLHN0eWxlOnt3aWR0aDpcIjYwcHhcIn19KSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiY29sXCIse2tleToyLHN0eWxlOnt3aWR0aDpcIjQ1cHhcIn19KSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiY29sXCIse2tleTozfSldKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidGhlYWRcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0clwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRoXCIsbnVsbCxcIiNcIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRoXCIsbnVsbCxcIlVSTFwiKSwhdSYmW19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiLHtrZXk6MH0sXCJNZXRob2RcIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRoXCIse2tleToxfSxcIlNpemVcIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRoXCIse2tleToyfSxcIlN0YXR1c1wiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidGhcIix7a2V5OjN9LFwiVHlwZVwiKV0pKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidGJvZHlcIixudWxsLDA9PT10Lmxlbmd0aD9yP19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0clwiLHtjbGFzc05hbWU6XCJzdWNjZXNzXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiLHtjb2xTcGFuOlwiNlwiLGNsYXNzTmFtZTpcInRleHQtY2VudGVyXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLFwiSW50ZXJhY3Qgd2l0aCB5b3VyIG1haW4gdGFiIVwiKSxcIiBSZXF1ZXN0cyB3aWxsIGFwcGVhciBoZXJlXCIpKTpfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidHJcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiLHtjb2xTcGFuOlwiNlwiLGNsYXNzTmFtZTpcInRleHQtY2VudGVyXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLFwiTm8gcmVxdWVzdHMgY2FwdHVyZWQuXCIpLFwiIFN0YXJ0IGNhcHR1cmluZyB0byBzZWUgc29tZXRoaW5nIGhlcmVcIikpOm51bGwsMCE9PXQubGVuZ3RoJiYwPT09cC5sZW5ndGg/X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRyXCIse2NsYXNzTmFtZTpcIndhcm5pbmdcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRkXCIse2NvbFNwYW46XCI2XCIsY2xhc3NOYW1lOlwidGV4dC1jZW50ZXJcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInN0cm9uZ1wiLG51bGwsXCJObyByZXF1ZXN0cyBtYXRjaCB5b3VyIGZpbHRlcnMuXCIpLFwiIFwiLDAhPT1pLmxlbmd0aCYmYS50ZXh0P19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsbnVsbCxcIkhvd2V2ZXIsIHdlIGZvdW5kIG1hdGNoaW5nIHJlcXVlc3RzIG9mIG90aGVyIHJlc3BvbnNlIHR5cGVzOlwiLFwiIFwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJhXCIse2hyZWY6XCIjYnJvYWRlblR5cGVzXCIsb25DbGljazpfTmV3VXRpbHMuZGVmYXVsdC5zZXRQcm9wVmFsdWUodGhpcyxcIm9uRmlsdGVyc0NoYW5nZVwiLFwiZmlsdGVyc1wiLFwic2hvcnRNaW1lc1wiLF9DYXB0dXJlLmRlZmF1bHQuYWxsU2hvcnRNaW1lc0ZpbHRlciwhMCl9LFwidHJ5IHNlYXJjaGluZyBhbW9uZyBhbGwgcmVzcG9uc2UgdHlwZXMuXCIpKTpcIkNvbnNpZGVyIGJyb2FkZW5pbmcgeW91ciBzZWFyY2ggdGVybXMgb3IgcmVxdWVzdCB0eXBlc1wiKSk6bnVsbCx0Lm1hcChmdW5jdGlvbih0LHIpe2lmKCFjKGE9dCl8fCFzKGEpKXJldHVybiBudWxsO3ZhciBhLGkscD1fQ2FwdHVyZS5kZWZhdWx0LnBhcnNlVVJMKHQucmVxdWVzdC51cmwpLGY9X0NhcHR1cmUuZGVmYXVsdC5wYXJzZVVSTCh0LmN1c3RvbS5wYWdlVVJMfHxcIlwiKSxkPV9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1Rvb2x0aXAuZGVmYXVsdCx7aWQ6XCJ1cmwtdG9vbHRpcFwifSx0LnJlcXVlc3QudXJsKTtpPXQuY3VzdG9tLmlzUmVkaXJlY3Q/XCJyZWRpclwiLmNvbmNhdCh0LmN1c3RvbS5maW5hbERhdGE/XCIgKFwiLmNvbmNhdCh0LmN1c3RvbS5maW5hbERhdGEuY3VzdG9tLnNob3J0TWltZSxcIikg4oaSIFwiKS5jb25jYXQodC5jdXN0b20ucmVkaXJlY3RSZXFOdW0pOlwiXCIpOnQuY3VzdG9tLnhocj9cInhociAoXCIuY29uY2F0KHQuY3VzdG9tLmZpbmFsRGF0YS5jdXN0b20uc2hvcnRNaW1lLFwiKVwiKTp0LmN1c3RvbS5maW5hbERhdGEuY3VzdG9tLnNob3J0TWltZTt2YXIgXz1bX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRkXCIse2tleTpcIjFcIn0sdC5yZXF1ZXN0Lm1ldGhvZCksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRkXCIse2tleTpcIjJcIn0sX1V0aWxpdHkuZGVmYXVsdC5zaXplVG9UZXh0KHQucmVzcG9uc2UuY29udGVudC5zaXplKSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRkXCIse2tleTpcIjNcIn0sdC5yZXNwb25zZS5zdGF0dXMpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiLHtrZXk6XCI0XCJ9LGkpXSxtPV9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0clwiLHtrZXk6cixjbGFzc05hbWU6XCJ3YS1ob3Zlci1yb3cgd2EtbGluayBcIi5jb25jYXQobz09PXI/XCJpbmZvXCI6XCJcIiksb25DbGljazpfTmV3VXRpbHMuZGVmYXVsdC5jYWxsKGUsXCJ0b2dnbGVSZXFcIixbcl0sITApfSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidGRcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLHQuY3VzdG9tLnNlcU51bSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiLHtjbGFzc05hbWU6XCJ3YS11cmwtY29sdW1uIFwiLmNvbmNhdChwLmhvc3Q9PT1mLmhvc3Q/XCJ0ZXh0LXByaW1hcnlcIjpcIlwiKX0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfT3ZlcmxheVRyaWdnZXIuZGVmYXVsdCx7b3ZlcmxheTpkLHBsYWNlbWVudDpcImJvdHRvbVwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYVwiLHtocmVmOlwiI1wifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsbnVsbCxwLnBhdGhuYW1lLHAuc2VhcmNoKSkpKSwhdSYmXyk7cmV0dXJuIDA9PT1yJiZsP19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX092ZXJsYXlUb29sdGlwLmRlZmF1bHQse2tleTp0LmN1c3RvbS5zZXFOdW0scGxhY2VtZW50OlwidG9wXCIsc2hvdzpcImNob29zZUNhcHR1cmVcIj09PW4sY29udGVudHM6XCJGaW5kIHRoZSByZXF1ZXN0IHlvdSB3YW50IHRvIG1ha2UgaW50byBhbiBBUEksIGFuZCBjbGljayB0byBpbnNwZWN0IGl0XCIsb25YQ2xpY2s6X05ld1V0aWxzLmRlZmF1bHQuY2FsbFByb3AoZSxcImFkdmFuY2VUdXRvcmlhbFN0ZXBcIixbXCJjaG9vc2VDYXB0dXJlXCJdKX0sbSk6bX0pKSkpfX1dKSx0fSgpO1JlcXVlc3RMaXN0LnByb3BUeXBlcz17cmVxdWVzdHM6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmFycmF5LmlzUmVxdWlyZWQsaXNSZWNvcmRpbmc6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmJvb2wsc2VsZWN0ZWRJbmRleDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMubnVtYmVyLG9uU2VsZWN0Ol9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5mdW5jLHNob3dUdXRvcmlhbDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYm9vbCx0dXRvcmlhbFN0ZXA6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLnN0cmluZyxhZHZhbmNlVHV0b3JpYWxTdGVwOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsZmlsdGVyczpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsb25GaWx0ZXJzQ2hhbmdlOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWR9O3ZhciBfZGVmYXVsdD1fUmVhY3RVdGlscy5kZWZhdWx0LmNvbm5lY3RUdXRvcmlhbFN0ZXAoe3B1cmU6ITF9KShSZXF1ZXN0TGlzdCk7ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpLF9hcnJheUpvaW5Db25qdW5jdGlvbj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJhcnJheS1qb2luLWNvbmp1bmN0aW9uXCIpKSxfQ29sbGFwc2U9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3QtYm9vdHN0cmFwL2xpYi9Db2xsYXBzZVwiKSksX0NvbmZpZz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9qcy9Db25maWdcIikpLF9BUElTdG9yYWdlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL0FQSVN0b3JhZ2VcIikpLF9DYXB0dXJlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL0NhcHR1cmVcIikpLF9DaHJvbWU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanMvQ2hyb21lXCIpKSxBdXRoPV9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCIuLi9qcy9yZWR1eC9BdXRoXCIpKSxfTmV3VXRpbHM9cmVxdWlyZShcIi4vTmV3VXRpbHNcIiksX1JlYWN0VXRpbHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9SZWFjdFV0aWxzXCIpKSxfUGFyYW1zVGFibGU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9QYXJhbXNUYWJsZVwiKSksX1Jlc3BvbnNlVmlld2VyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vUmVzcG9uc2VWaWV3ZXJcIikpLF9PdmVybGF5VG9vbHRpcD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL092ZXJsYXlUb29sdGlwXCIpKSxfU2ltcGxlQWNlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vU2ltcGxlQWNlXCIpKSxfUmVxdWVzdFBhbmVsU2F2ZU1vZGFsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vUmVxdWVzdFBhbmVsU2F2ZU1vZGFsXCIpKSxfQVBJRWxlbWVudFNlbGVjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0FQSUVsZW1lbnRTZWxlY3RcIikpO2Z1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIGU9bmV3IFdlYWtNYXA7cmV0dXJuIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZT1mdW5jdGlvbigpe3JldHVybiBlfSxlfWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTtpZihudWxsPT09ZXx8XCJvYmplY3RcIiE9PV90eXBlb2YoZSkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJue2RlZmF1bHQ6ZX07dmFyIHQ9X2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKCk7aWYodCYmdC5oYXMoZSkpcmV0dXJuIHQuZ2V0KGUpO3ZhciBhPXt9LHI9T2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2Zvcih2YXIgbCBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGwpKXt2YXIgbj1yP09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxsKTpudWxsO24mJihuLmdldHx8bi5zZXQpP09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGwsbik6YVtsXT1lW2xdfXJldHVybiBhLmRlZmF1bHQ9ZSx0JiZ0LnNldChlLGEpLGF9ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gX3R5cGVvZihlKXtyZXR1cm4oX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gX2V4dGVuZHMoKXtyZXR1cm4oX2V4dGVuZHM9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIGE9YXJndW1lbnRzW3RdO2Zvcih2YXIgciBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLHIpJiYoZVtyXT1hW3JdKX1yZXR1cm4gZX0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBvd25LZXlzKGUsdCl7dmFyIGE9T2JqZWN0LmtleXMoZSk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTt0JiYocj1yLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpLmVudW1lcmFibGV9KSksYS5wdXNoLmFwcGx5KGEscil9cmV0dXJuIGF9ZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgYT1udWxsIT1hcmd1bWVudHNbdF0/YXJndW1lbnRzW3RdOnt9O3QlMj9vd25LZXlzKE9iamVjdChhKSwhMCkuZm9yRWFjaChmdW5jdGlvbih0KXtfZGVmaW5lUHJvcGVydHkoZSx0LGFbdF0pfSk6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM/T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhhKSk6b3duS2V5cyhPYmplY3QoYSkpLmZvckVhY2goZnVuY3Rpb24odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsdCkpfSl9cmV0dXJuIGV9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KGUsdCxhKXtyZXR1cm4gdCBpbiBlP09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3ZhbHVlOmEsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTplW3RdPWEsZX1mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsdCl7Zm9yKHZhciBhPTA7YTx0Lmxlbmd0aDthKyspe3ZhciByPXRbYV07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSx0LGEpe3JldHVybiB0JiZfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxhJiZfZGVmaW5lUHJvcGVydGllcyhlLGEpLGV9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PV90eXBlb2YodCkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/X2Fzc2VydFRoaXNJbml0aWFsaXplZChlKTp0fWZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihlKXtyZXR1cm4oX2dldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9KShlKX1mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpe2lmKHZvaWQgMD09PWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiBlfWZ1bmN0aW9uIF9pbmhlcml0cyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmX3NldFByb3RvdHlwZU9mKGUsdCl9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKGUsdCl7cmV0dXJuKF9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0pKGUsdCl9ZnVuY3Rpb24gZ2V0RGVmYXVsdFN0YXRlKCl7cmV0dXJue2xvYWRpbmc6ITEsc2hvd01vZGFsOiExLHNlbGVjdGVkQVBJRWxlbWVudDpudWxsLHJlc3BvbnNlOm51bGwsc2hvdzp7cG9zdERhdGE6ITAscXVlcnlTdHJpbmc6ITAscmVxdWVzdENvb2tpZXM6ITEscmVxdWVzdEhlYWRlcnM6ITEscmVzcG9uc2VDb29raWVzOiExLHJlc3BvbnNlSGVhZGVyczohMX19fXZhciBSZXF1ZXN0UGFuZWw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciBlLGE7X2NsYXNzQ2FsbENoZWNrKHRoaXMsdCk7Zm9yKHZhciByPWFyZ3VtZW50cy5sZW5ndGgsbD1uZXcgQXJyYXkociksbj0wO248cjtuKyspbFtuXT1hcmd1bWVudHNbbl07cmV0dXJuKGE9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoZT1fZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwuYXBwbHkoZSxbdGhpc10uY29uY2F0KGwpKSkpLnByb3BzPXZvaWQgMCxhLnN0YXRlPXZvaWQgMCxhLnN0YXRlPWdldERlZmF1bHRTdGF0ZSgpLGEudXBkYXRlU2VsZWN0ZWRSZXF1ZXN0PWZ1bmN0aW9uKGUpe2EucHJvcHMudXBkYXRlU2VsZWN0ZWRSZXF1ZXN0JiZhLnByb3BzLnVwZGF0ZVNlbGVjdGVkUmVxdWVzdChlKX0sYS5vcGVuQVBJRWxlbWVudD1mdW5jdGlvbihlKXt2YXIgdD1lLnRhcmdldDtyZXR1cm4gX0Nocm9tZS5kZWZhdWx0Lm9wZW5MaW5rKHQuaHJlZikudGhlbihmdW5jdGlvbigpe2Euc2V0U3RhdGUoe3Jlc3BvbnNlOl9vYmplY3RTcHJlYWQoe30sYS5zdGF0ZS5yZXNwb25zZSx7bWVzc2FnZXM6W19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIse2tleTowfSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsbnVsbCxcIldlIGhhdmUgb3BlbmVkIHRoZSBBUEkgZW5kcG9pbnQgaW4gYSBuZXcgdGFiLlwiKSxcIiBcIixcIkNsb3NlIG9yIHN3aXRjaCBhd2F5IGZyb20gQ2hyb21lIERldmVsb3BlciBUb29scyB0byBzdGFydCBlZGl0aW5nIGl0LlwiKV19KX0pfSl9LGEuYWRkTmV3VG9BUElFbGVtZW50PWZ1bmN0aW9uKGUpe3ZhciB0PWEucHJvcHMudXNlcm5hbWU7YS5hZGRUb0FQSUVsZW1lbnQoX29iamVjdFNwcmVhZCh7dXNlcm5hbWU6dH0sZSkpfSxhLmFkZFRvQVBJRWxlbWVudD1mdW5jdGlvbihlKXt2YXIgdD1fbG9kYXNoLmRlZmF1bHQuY2xvbmUoYS5wcm9wcy5kYXRhKSxyPWUudXNlcm5hbWUsbD1lLnJlcG9zaXRvcnksbj1lLm5hbWU7cmV0dXJuIHQubGFiZWw9ZS5sYWJlbCxhLnNldFN0YXRlKHtzaG93TW9kYWw6ITEsbG9hZGluZzohMCxyZXNwb25zZTpudWxsfSksX0FQSVN0b3JhZ2UuZGVmYXVsdC5hZGRDYXB0dXJlKHIsbCxuLHQpLnRoZW4oZnVuY3Rpb24oZSl7aWYoZS5zdWNjZXNzKXt2YXIgdD17dXNlcm5hbWU6cixyZXBvc2l0b3J5OmwsbmFtZTpuLG1haW46ITB9O2Euc2V0U3RhdGUoe2xvYWRpbmc6ITEscmVzcG9uc2U6e3N1Y2Nlc3M6ITAsbWVzc2FnZXM6W19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIse2tleTowfSxcIlRoaXMgY2FwdHVyZWQgcmVxdWVzdCBoYXMgYmVlbiBzYXZlZCB0byB0aGUgQVBJIGVuZHBvaW50XCIsXCIgXCIsbCxcIi9cIixuLFwiLlwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJiclwiLG51bGwpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJhXCIse2hyZWY6XCJcIi5jb25jYXQoX0NvbmZpZy5kZWZhdWx0Lmhvc3QsXCIvYXBpL1wiKS5jb25jYXQocixcIi9cIikuY29uY2F0KGwsXCIvXCIpLmNvbmNhdChuLFwiLzAuMC4wXCIpLG9uQ2xpY2s6YS5vcGVuQVBJRWxlbWVudCx0YXJnZXQ6XCJfYmxhbmtcIn0sXCJDbGljayBoZXJlIHRvIHVzZSBpdCB0byBkZWZpbmUgdGhpcyBBUEkgZW5kcG9pbnQncyBpbnB1dHMgYW5kIG91dHB1dHMsXCIpLFwiIFwiLFwib3Igc2VsZWN0IGFub3RoZXIgY2FwdHVyZWQgcmVxdWVzdCB5b3Ugd291bGQgbGlrZSB0byBzYXZlLlwiKV19fSksZS5pc05ldyYmYS5wcm9wcy5vbk5ld0FQSUVsZW1lbnQmJmEucHJvcHMub25OZXdBUElFbGVtZW50KHQpfWVsc2UoMCxfTmV3VXRpbHMuZ2V0VGhlbikoX2Fzc2VydFRoaXNJbml0aWFsaXplZChhKSkoZSl9KS5jYXRjaCgoMCxfTmV3VXRpbHMuZ2V0Q2F0Y2gpKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoYSkpKX0sYS5hZGRUb1NlbGVjdGVkQVBJRWxlbWVudD1mdW5jdGlvbihlKXthLnNldFN0YXRlKHtzaG93TW9kYWw6ITAsc2VsZWN0ZWRBUElFbGVtZW50OmV8fG51bGx9KX0sYX1yZXR1cm4gX2luaGVyaXRzKHQsX3JlYWN0LmRlZmF1bHQuQ29tcG9uZW50KSxfY3JlYXRlQ2xhc3ModCxbe2tleTpcImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHNcIix2YWx1ZTpmdW5jdGlvbihlKXtlLmRhdGEhPT10aGlzLnByb3BzLmRhdGEmJihfQ29uZmlnLmRlZmF1bHQuZGVidWcoZS5kYXRhKSx0aGlzLnNldFN0YXRlKGdldERlZmF1bHRTdGF0ZSgpKSl9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5wcm9wcyxhPXQuZGF0YSxyPXQuZXhpc3RpbmdBUElFbGVtZW50cyxsPXQuYWxsb3dTYXZlLG49dC5oaWRlSGVhZGVyLG89dC50dXRvcmlhbFN0ZXAscz10LnNlYXJjaEZvdW5kSW4sdT10LnVzZXJuYW1lLGM9dGhpcy5zdGF0ZSxpPWMuc2hvdyxkPWMubG9hZGluZyxmPWMucmVzcG9uc2UscD1cInNhdmVDYXB0dXJlXCI9PT1vLF89X1JlYWN0VXRpbHMuZGVmYXVsdC5kZWZhdWx0UmVuZGVyTWVzc2FnZXMoZixcIndhLWJvdHRvbTBcIiksbT1fQ2FwdHVyZS5kZWZhdWx0LnBhcnNlVVJMKGEucmVxdWVzdC51cmwpLGg9X1JlYWN0VXRpbHMuZGVmYXVsdC5hZGRCcmVha3MobS5wYXRobmFtZSkseT1hLmN1c3RvbS5wb3N0RGF0YSxiPWEuY3VzdG9tLmZpbmFsRGF0YSxFPV9DYXB0dXJlLmRlZmF1bHQub21pdFBhcmFtKGEucmVxdWVzdC5oZWFkZXJzLFwiY29va2llXCIpLFA9YS5yZXF1ZXN0LmNvb2tpZXMsZz1fQ2FwdHVyZS5kZWZhdWx0Lm9taXRQYXJhbShhLnJlc3BvbnNlLmhlYWRlcnMsXCJzZXQtY29va2llXCIpLHE9YS5yZXNwb25zZS5jb29raWVzLHY9dGhpcy5wcm9wcy5zZXRTZWFyY2g/e29uVmFsdWVDbGljazp0aGlzLnByb3BzLnNldFNlYXJjaCx2YWx1ZVRvb2x0aXA6XCJDbGljayB0byBzZWFyY2ggZm9yIHRoaXMgdmFsdWUgaW4gb3RoZXIgcmVxdWVzdHNcIn06bnVsbCx3PWZ1bmN0aW9uKGUpe3ZhciB0PWEuY3VzdG9tLmJhc2U2NFtlXTtyZXR1cm4gdD9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwicFwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInN0cm9uZ1wiLG51bGwsXCJCYXNlNjQtZW5jb2RlZCB2YWx1ZXNcIikpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1BhcmFtc1RhYmxlLmRlZmF1bHQsX2V4dGVuZHMoe2ZpZWxkczp0fSx2LHtmaWVsZENvbHVtbkxhYmVsOlwiQmFzZTY0LWVuY29kZWRcIn0pKSk6bnVsbH0sUj1mdW5jdGlvbih0LGEscixsKXtyZXR1cm4gciYmMCE9PXIubGVuZ3RoP19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0clwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRkXCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYVwiLHtocmVmOlwiI1wiLG9uQ2xpY2s6KDAsX05ld1V0aWxzLnRvZ2dsZSkoZSxbXCJzaG93XCIsdF0sITApfSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaVwiLHtjbGFzc05hbWU6XCJmYSBcIi5jb25jYXQoaVt0XT9cImZhLW1pbnVzLXNxdWFyZS1vXCI6XCJmYS1wbHVzLXNxdWFyZS1vXCIpfSksXCIgXCIsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInN0cm9uZ1wiLG51bGwsYSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0NvbGxhcHNlLmRlZmF1bHQse2luOmlbdF19LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1BhcmFtc1RhYmxlLmRlZmF1bHQsX2V4dGVuZHMoe2ZpZWxkczpyfSx2LHtmaWVsZENvbHVtbkxhYmVsOmx9KSksdyh0KSkpKSk6bnVsbH07cmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwicGFuZWwgcGFuZWwtZGVmYXVsdFwifSxsJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9SZXF1ZXN0UGFuZWxTYXZlTW9kYWwuZGVmYXVsdCx7c2hvdzp0aGlzLnN0YXRlLnNob3dNb2RhbCxvbkhpZGU6KDAsX05ld1V0aWxzLnNldFN0YXRlKSh0aGlzLFwic2hvd01vZGFsXCIsITEpLG9uU3VibWl0OnRoaXMuYWRkTmV3VG9BUElFbGVtZW50LGV4aXN0aW5nQVBJRWxlbWVudHM6cixhcGlFbGVtZW50OnRoaXMuc3RhdGUuc2VsZWN0ZWRBUElFbGVtZW50fSksIW4mJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwicGFuZWwtaGVhZGluZyB3YS1oZWFkZXItdmFsaWduLW1pZFwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaDRcIix7Y2xhc3NOYW1lOlwibGVmdFwifSxcIlJlcXVlc3QgZGV0YWlsc1wiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInJpZ2h0XCJ9LGwmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX092ZXJsYXlUb29sdGlwLmRlZmF1bHQse3BsYWNlbWVudDpcImJvdHRvbVwiLHNob3c6cCxjb250ZW50czpcIklmIHRoaXMgaXMgdGhlIEhUVFAgcmVxdWVzdCB5b3UncmUgbG9va2luZyBmb3IsIGNsaWNrIHRvIHNhdmUgaXQgYXMgdGhlIHRlbXBsYXRlIGZvciBhbiBBUEkgZW5kcG9pbnRcIixvblhDbGljazooMCxfTmV3VXRpbHMuY2FsbFByb3ApKHRoaXMsXCJhZHZhbmNlVHV0b3JpYWxTdGVwXCIsW1wic2F2ZUNhcHR1cmVcIl0pfSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJ3YS1idG4tY29udGFpbmVyXCJ9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIix7Y2xhc3NOYW1lOlwiYnRuIGJ0bi1wcmltYXJ5XCIsdHlwZTpcImJ1dHRvblwiLGRpc2FibGVkOmQsb25DbGljazooMCxfTmV3VXRpbHMuY2FsbCkodGhpcyxcImFkZFRvU2VsZWN0ZWRBUElFbGVtZW50XCIsW251bGxdKX0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlcIix7Y2xhc3NOYW1lOlwiZmEgZmEtcGx1c1wifSksXCIgQ3JlYXRlIG5ldyBBUElcIiksXCIgXCIsciYmMCE9PU9iamVjdC5rZXlzKHIpLmxlbmd0aCYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQVBJRWxlbWVudFNlbGVjdC5kZWZhdWx0LHtidXR0b246ITAsc2VhcmNoYWJsZTohMCxwdWxsUmlnaHQ6ITAsYnNTdHlsZTpcInByaW1hcnlcIixkZWZhdWx0TGFiZWw6XCJBZGQgdG8gZXhpc3RpbmcuLi5cIix1c2VybmFtZTp1LGFwaUVsZW1lbnRzOl9sb2Rhc2guZGVmYXVsdC52YWx1ZXMocikuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLm1haW4mJlwibm9ybWFsXCI9PT1lLnR5cGV9KSxvbkNoYW5nZTp0aGlzLmFkZFRvU2VsZWN0ZWRBUElFbGVtZW50LGRpc2FibGVkOmR9KSkpKSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiLHtjbGFzc05hbWU6XCJ0YWJsZVwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiY29sZ3JvdXBcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJjb2xcIix7c3R5bGU6e21pbldpZHRoOjEwMH19KSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRib2R5XCIsbnVsbCxkJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidHJcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJhbGVydCBhbGVydC1pbmZvIHdhLWJvdHRvbTBcIn0sXCJTYXZpbmcgeW91ciBzYW1wbGUgcmVxdWVzdC4uLiB0aGlzIG1heSB0YWtlIHVwIHRvIDEwIHNlY29uZHNcIikpKSxfJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidHJcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiLG51bGwsXykpLHMmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0clwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRkXCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImFsZXJ0IGFsZXJ0LWluZm8gd2EtYm90dG9tMFwifSxcIllvdXIgc2VhcmNoIHRlcm1zIHdlcmUgZm91bmQgaW4gdGhlXCIsXCIgXCIsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInN0cm9uZ1wiLG51bGwsKDAsX2FycmF5Sm9pbkNvbmp1bmN0aW9uLmRlZmF1bHQpKHMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBfQ2FwdHVyZS5kZWZhdWx0LnRleHRTZWFyY2hQbGFjZXNbZV19KSkpLFwiLlwiKSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0clwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRkXCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsbnVsbCxcIkhUVFAgbWV0aG9kOlwiKSxcIiBcIixhLnJlcXVlc3QubWV0aG9kKSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRyXCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidGRcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLFwiVVJMOlwiKSxcIiBcIixtLnByb3RvY29sLFwiLy9cIixtLmhvc3QsaCkpLGEuY3VzdG9tLmZpbmFsRGF0YT9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidHJcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInN0cm9uZ1wiLG51bGwsXCJSZXNwb25zZSBNSU1FIHR5cGU6XCIpLFwiIFwiLGEuY3VzdG9tLmZpbmFsRGF0YS5yZXNwb25zZS5jb250ZW50Lm1pbWVUeXBlKSk6bnVsbCxhLnJlc3BvbnNlLnJlZGlyZWN0VVJMP19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0clwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRkXCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsbnVsbCxcIlJlZGlyZWN0ZWQgdG86IFwiKSx0aGlzLnByb3BzLnVwZGF0ZVNlbGVjdGVkUmVxdWVzdD9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYVwiLHtocmVmOlwiI1wiLG9uQ2xpY2s6dGhpcy51cGRhdGVTZWxlY3RlZFJlcXVlc3QuYmluZE1lbW9pemVkKHRoaXMsYS5jdXN0b20ucmVkaXJlY3RSZXFOdW0pfSxfUmVhY3RVdGlscy5kZWZhdWx0LmFkZEJyZWFrcyhhLnJlc3BvbnNlLnJlZGlyZWN0VVJMKSk6X1JlYWN0VXRpbHMuZGVmYXVsdC5hZGRCcmVha3MoYS5yZXNwb25zZS5yZWRpcmVjdFVSTCkpKTpudWxsLFIoXCJxdWVyeVN0cmluZ1wiLFwiUXVlcnkgc3RyaW5nXCIsYS5jdXN0b20ucXVlcnlTdHJpbmcpLHk/X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRyXCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidGRcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJhXCIse2hyZWY6XCIjXCIsb25DbGljazooMCxfTmV3VXRpbHMudG9nZ2xlKSh0aGlzLFwic2hvdy5wb3N0RGF0YVwiLCEwKX0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlcIix7Y2xhc3NOYW1lOlwiZmEgXCIuY29uY2F0KGkucG9zdERhdGE/XCJmYS1taW51cy1zcXVhcmUtb1wiOlwiZmEtcGx1cy1zcXVhcmUtb1wiKX0pLFwiIFwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLFwiUG9zdCBkYXRhXCIpKSxcIiBcIixcIihcIix5Lm1pbWVUeXBlLFwiKVwiLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0NvbGxhcHNlLmRlZmF1bHQse2luOmkucG9zdERhdGF9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixudWxsLFwicGFyYW1zXCI9PT15LnR5cGUmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1BhcmFtc1RhYmxlLmRlZmF1bHQsX2V4dGVuZHMoe2ZpZWxkczp5LmRhdGF9LHYpKSxcImpzb25cIj09PXkudHlwZSYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfU2ltcGxlQWNlLmRlZmF1bHQse21vZGU6XCJqYXZhc2NyaXB0XCIsdmFsdWU6SlNPTi5zdHJpbmdpZnkoeS5kYXRhLG51bGwsMiksY2xhc3NOYW1lOlwid2EtZnVsbC13aWR0aC1mb3JjZWRcIixyZWFkT25seTohMH0pLFwidGV4dFwiPT09eS50eXBlJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9TaW1wbGVBY2UuZGVmYXVsdCx7dmFsdWU6eS5kYXRhLGNsYXNzTmFtZTpcIndhLWZ1bGwtd2lkdGgtZm9yY2VkXCIscmVhZE9ubHk6ITB9KSx3KFwicG9zdERhdGFcIikpKSkpOm51bGwsUihcInJlcXVlc3RIZWFkZXJzXCIsXCJSZXF1ZXN0IGhlYWRlcnNcIixFLFwiSGVhZGVyXCIpLFIoXCJyZXF1ZXN0Q29va2llc1wiLFwiUmVxdWVzdCBjb29raWVzXCIsUCxcIkNvb2tpZVwiKSxSKFwicmVzcG9uc2VIZWFkZXJzXCIsXCJSZXNwb25zZSBoZWFkZXJzXCIsZyxcIkhlYWRlclwiKSxSKFwicmVzcG9uc2VDb29raWVzXCIsXCJSZXNwb25zZSBjb29raWVzXCIscSxcIkNvb2tpZVwiKSxiJiZiLnJlc3BvbnNlQm9keT9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidHJcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInBcIixudWxsLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIixudWxsLFwiUmVzcG9uc2U6XCIpKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9SZXNwb25zZVZpZXdlci5kZWZhdWx0LHttaW1lVHlwZTpiLnJlc3BvbnNlLmNvbnRlbnQubWltZVR5cGUsYm9keTpiLnJlc3BvbnNlQm9keS5jb250ZW50LGJhc2VVcmw6YS5yZXF1ZXN0LnVybH0pLF9sb2Rhc2guZGVmYXVsdC5nZXQoYSxcImN1c3RvbS5iYXNlNjQucmVzcG9uc2VCb2R5XCIpJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInBhbmVsIHBhbmVsLWRlZmF1bHQgd2EtdG9wMTBcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJwYW5lbC1oZWFkaW5nXCJ9LFwiQmFzZTY0LWVuY29kZWQgdmFsdWVzXCIpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwicGFuZWwtYm9keVwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9QYXJhbXNUYWJsZS5kZWZhdWx0LF9leHRlbmRzKHtmaWVsZHM6YS5jdXN0b20uYmFzZTY0LnJlc3BvbnNlQm9keX0sdix7ZmllbGRDb2x1bW5MYWJlbDpcIkJhc2U2NC1lbmNvZGVkXCJ9KSkpKSkpOm51bGwpKSl9fV0pLHR9KCk7UmVxdWVzdFBhbmVsLnByb3BUeXBlcz17YWxsb3dTYXZlOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5ib29sLG9uTmV3QVBJRWxlbWVudDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYyxkYXRhOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCx1cGRhdGVTZWxlY3RlZFJlcXVlc3Q6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmZ1bmMsZXhpc3RpbmdBUElFbGVtZW50czpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMub2JqZWN0LGhpZGVIZWFkZXI6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmJvb2wsc2V0U2VhcmNoOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5mdW5jLHNlYXJjaEZvdW5kSW46X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmFycmF5T2YoX3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLnN0cmluZyksdHV0b3JpYWxTdGVwOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5zdHJpbmcsYWR2YW5jZVR1dG9yaWFsU3RlcDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYyx1c2VybmFtZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuc3RyaW5nfTt2YXIgX2RlZmF1bHQ9QXV0aC5jb25uZWN0KCkoX1JlYWN0VXRpbHMuZGVmYXVsdC5jb25uZWN0VHV0b3JpYWxTdGVwKCkoUmVxdWVzdFBhbmVsKSk7ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX2xvZGFzaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2hcIikpLF9tb21lbnQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibW9tZW50XCIpKSxfTW9kYWw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3QtYm9vdHN0cmFwL2xpYi9Nb2RhbFwiKSksX1V0aWxpdHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanMvVXRpbGl0eVwiKSksX0F1dGg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanMvcmVkdXgvQXV0aFwiKSksX1JlYWN0VXRpbHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9SZWFjdFV0aWxzXCIpKSxfU2VsZWN0V2l0aEFkZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL1NlbGVjdFdpdGhBZGRcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIG93bktleXMoZSx0KXt2YXIgcj1PYmplY3Qua2V5cyhlKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgYT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3QmJihhPWEuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCkuZW51bWVyYWJsZX0pKSxyLnB1c2guYXBwbHkocixhKX1yZXR1cm4gcn1mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciByPW51bGwhPWFyZ3VtZW50c1t0XT9hcmd1bWVudHNbdF06e307dCUyP293bktleXMoT2JqZWN0KHIpLCEwKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe19kZWZpbmVQcm9wZXJ0eShlLHQsclt0XSl9KTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHIpKTpvd25LZXlzKE9iamVjdChyKSkuZm9yRWFjaChmdW5jdGlvbih0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iocix0KSl9KX1yZXR1cm4gZX1mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkoZSx0LHIpe3JldHVybiB0IGluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6cixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09cixlfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGE9dFtyXTthLmVudW1lcmFibGU9YS5lbnVtZXJhYmxlfHwhMSxhLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBhJiYoYS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsYS5rZXksYSl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX1mdW5jdGlvbiBnZXREZWZhdWx0U3RhdGUoKXtyZXR1cm57Zm9ybTp7cmVwb3NpdG9yeTpcIlwiLG5hbWU6XCJcIixsYWJlbDpcIlwifSxlcnJvcnM6e319fXZhciBSZXF1ZXN0UGFuZWxTYXZlTW9kYWw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciBlLHI7X2NsYXNzQ2FsbENoZWNrKHRoaXMsdCk7Zm9yKHZhciBhPWFyZ3VtZW50cy5sZW5ndGgsbz1uZXcgQXJyYXkoYSksbj0wO248YTtuKyspb1tuXT1hcmd1bWVudHNbbl07cmV0dXJuKHI9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoZT1fZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwuYXBwbHkoZSxbdGhpc10uY29uY2F0KG8pKSkpLnN0YXRlPWdldERlZmF1bHRTdGF0ZSgpLHIuaW5pdGlhbGl6ZT1mdW5jdGlvbigpe3Iuc2V0U3RhdGUoe2Zvcm06X29iamVjdFNwcmVhZCh7fSxyLnN0YXRlLmZvcm0se2xhYmVsOlwiUmVjOiBcIi5jb25jYXQoKDAsX21vbWVudC5kZWZhdWx0KSgpLmZvcm1hdChcIk0vRCBoOm1tYVwiKSl9KX0pfSxyLmNyZWF0ZUFuZEFkZFRvQVBJRWxlbWVudD1mdW5jdGlvbihlKXtlJiZlLnByZXZlbnREZWZhdWx0KCk7dmFyIHQ9X2xvZGFzaC5kZWZhdWx0LmFzc2lnbih7fSxyLnN0YXRlLmZvcm0sci5wcm9wcy5hcGlFbGVtZW50KSxhPXt9O2lmKHQucmVwb3NpdG9yeT8tMT09PXQucmVwb3NpdG9yeS5zZWFyY2goL15bLVxcd117MSw2NH0kLykmJihhLnJlcG9zaXRvcnk9XCJUaGUgcmVwb3NpdG9yeSBuYW1lIG11c3QgY29uc2lzdCBvZiBvbmx5IGxldHRlcnMgYW5kIGh5cGhlbnMgKC0pIGFuZCBiZSB1cCB0byA2NCBjaGFyYWN0ZXJzIGluIGxlbmd0aFwiKTphLnJlcG9zaXRvcnk9XCJQbGVhc2UgZW50ZXIgdGhlIHJlcG9zaXRvcnkgZm9yIHRoZSBBUEkgZW5kcG9pbnRcIix0Lm5hbWU/LTE9PT10Lm5hbWUuc2VhcmNoKC9eWy1cXHddezEsNjR9JC8pJiYoYS5uYW1lPVwiVGhlIGVuZHBvaW50IG5hbWUgbXVzdCBjb25zaXN0IG9mIG9ubHkgbGV0dGVycyBhbmQgaHlwaGVucyAoLSlcIik6YS5uYW1lPVwiUGxlYXNlIGVudGVyIGEgbmFtZSBmb3IgdGhlIEFQSSBlbmRwb2ludFwiLHQubGFiZWx8fChhLmxhYmVsPVwiUGxlYXNlIGVudGVyIGEgbGFiZWwgZm9yIHRoaXMgY2FwdHVyZWQgcmVxdWVzdFwiKSxfbG9kYXNoLmRlZmF1bHQuaXNFbXB0eShhKSl7dmFyIG89ci5wcm9wcy5vblN1Ym1pdCh0KTtvJiZvLnRoZW4mJm8udGhlbihmdW5jdGlvbigpe3Iuc2V0U3RhdGUoZ2V0RGVmYXVsdFN0YXRlKCkpfSl9ZWxzZSByLnNldFN0YXRlKHtlcnJvcnM6YX0pfSxyLm9uUmVwb3NpdG9yeUNoYW5nZT1mdW5jdGlvbihlKXt2YXIgdD1fbG9kYXNoLmRlZmF1bHQuY2xvbmUoci5zdGF0ZS5mb3JtKTt0LnJlcG9zaXRvcnk9ZT9lLnZhbHVlOm51bGwsci5zZXRTdGF0ZSh7Zm9ybTp0fSl9LHJ9cmV0dXJuIF9pbmhlcml0cyh0LF9yZWFjdC5kZWZhdWx0LkNvbXBvbmVudCksX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJjb21wb25lbnRXaWxsTW91bnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaW5pdGlhbGl6ZSgpfX0se2tleTpcImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHNcIix2YWx1ZTpmdW5jdGlvbihlKXshdGhpcy5wcm9wcy5zaG93JiZlLnNob3cmJnRoaXMuaW5pdGlhbGl6ZSgpfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcm9wcy51c2VybmFtZSx0PXRoaXMuc3RhdGUuZm9ybSxyPXRoaXMuc3RhdGUuZXJyb3JzLGE9IXRoaXMucHJvcHMuYXBpRWxlbWVudCxvPV9VdGlsaXR5LmRlZmF1bHQuZ2V0RnVsbE5hbWUodCksbj1hJiZ0aGlzLnByb3BzLmV4aXN0aW5nQVBJRWxlbWVudHMmJm8gaW4gdGhpcy5wcm9wcy5leGlzdGluZ0FQSUVsZW1lbnRzLGw9dGhpcy5wcm9wcy5leGlzdGluZ0FQSUVsZW1lbnRzfHx7fSxpPV9sb2Rhc2guZGVmYXVsdC5jaGFpbihsKS5maWx0ZXIoXCJtYWluXCIpLm1hcChcInJlcG9zaXRvcnlcIikudW5pcSgpLnZhbHVlKCk7dC5yZXBvc2l0b3J5JiYtMT09PWkuaW5kZXhPZih0LnJlcG9zaXRvcnkpJiZpLnB1c2godC5yZXBvc2l0b3J5KTt2YXIgcz1pLm1hcChmdW5jdGlvbihlKXtyZXR1cm57bGFiZWw6ZSx2YWx1ZTplfX0pO3JldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Nb2RhbC5kZWZhdWx0LHtzaG93OnRoaXMucHJvcHMuc2hvdyxvbkhpZGU6dGhpcy5wcm9wcy5vbkhpZGV9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX01vZGFsLmRlZmF1bHQuSGVhZGVyLHtjbG9zZUJ1dHRvbjohMH0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTW9kYWwuZGVmYXVsdC5UaXRsZSxudWxsLGE/XCJDcmVhdGUgYSBuZXcgQVBJIGVuZHBvaW50XCI6XCJBZGQgdG8gZXhpc3RpbmcgQVBJIGVuZHBvaW50XCIpKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiLHtvblN1Ym1pdDp0aGlzLmNyZWF0ZUFuZEFkZFRvQVBJRWxlbWVudH0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTW9kYWwuZGVmYXVsdC5Cb2R5LG51bGwsYSYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJmb3JtLWdyb3VwXCIuY29uY2F0KHIucmVwb3NpdG9yeT9cIiBoYXMtZXJyb3JcIjpcIlwiKX0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIse2h0bWxGb3I6XCJyZXBvc2l0b3J5XCJ9LFwiUmVwb3NpdG9yeVwiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9TZWxlY3RXaXRoQWRkLmRlZmF1bHQse29wdGlvbnM6cyxvbkNoYW5nZTp0aGlzLm9uUmVwb3NpdG9yeUNoYW5nZSx2YWx1ZTp0LnJlcG9zaXRvcnkscGxhY2Vob2xkZXI6XCJTZWxlY3Qgb3IgYWRkIGEgcmVwb3NpdG9yeVwifSksci5yZXBvc2l0b3J5JiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwicFwiLHtjbGFzc05hbWU6XCJoZWxwLWJsb2NrXCJ9LHIucmVwb3NpdG9yeSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiZm9ybS1ncm91cFwiLmNvbmNhdChyLm5hbWU/XCIgaGFzLWVycm9yXCI6XCJcIil9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLHtodG1sRm9yOlwibmFtZVwifSxcIkVuZHBvaW50IG5hbWVcIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlucHV0XCIse3R5cGU6XCJ0ZXh0XCIsaWQ6XCJuYW1lXCIsY2xhc3NOYW1lOlwiZm9ybS1jb250cm9sXCIsdmFsdWU6dC5uYW1lLG1heExlbmd0aDpcIjY0XCIsb25DaGFuZ2U6X1JlYWN0VXRpbHMuZGVmYXVsdC51cGRhdGVGb3JtRmllbGQodGhpcyxcImZvcm0ubmFtZVwiKX0pLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJwXCIse2NsYXNzTmFtZTpcImhlbHAtYmxvY2tcIn0sci5uYW1lfHxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLG51bGwsXCJZb3VyIEFQSSBlbmRwb2ludCB3aWxsIGJlIGFjY2Vzc2libGUgYXRcIixfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiY29kZVwiLG51bGwsZSxcIi9cIix0LnJlcG9zaXRvcnl8fFwiKHJlcG9zaXRvcnkpXCIsXCIvXCIsdC5uYW1lfHxcIihuYW1lKVwiKSkpKSksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJmb3JtLWdyb3VwXCIuY29uY2F0KHIubGFiZWw/XCIgaGFzLWVycm9yXCI6XCJcIil9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLHtodG1sRm9yOlwibGFiZWxcIn0sXCJMYWJlbCBmb3IgY2FwdHVyZWQgcmVxdWVzdFwiKSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIix7dHlwZTpcInRleHRcIixpZDpcImxhYmVsXCIsY2xhc3NOYW1lOlwiZm9ybS1jb250cm9sXCIsdmFsdWU6dC5sYWJlbCxvbkNoYW5nZTpfUmVhY3RVdGlscy5kZWZhdWx0LnVwZGF0ZUZvcm1GaWVsZCh0aGlzLFwiZm9ybS5sYWJlbFwiKX0pLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJwXCIse2NsYXNzTmFtZTpcImhlbHAtYmxvY2tcIn0sci5sYWJlbHx8J0dpdmUgdGhpcyBjYXB0dXJlZCByZXF1ZXN0IGEgc2hvcnQgZGVzY3JpcHRpdmUgbGFiZWwgc28gdGhhdCB5b3UgY2FuIGVhc2lseSByZWZlcmVuY2UgaXQgbGF0ZXIgKGUuZy4sIFwic3VjY2Vzc2Z1bCBsb2dpblwiIG9yIFwic2VhcmNoVG9kYXlcIiknKSkpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX01vZGFsLmRlZmF1bHQuRm9vdGVyLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJidG4tZ3JvdXBcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLHtjbGFzc05hbWU6XCJidG4gYnRuLWRlZmF1bHRcIix0eXBlOlwiYnV0dG9uXCIsb25DbGljazp0aGlzLnByb3BzLm9uSGlkZX0sXCJDYW5jZWxcIiksX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLHt0eXBlOlwic3VibWl0XCIsY2xhc3NOYW1lOlwiYnRuIGJ0bi1wcmltYXJ5XCIsZGlzYWJsZWQ6bn0sbj9cIk5hbWUgYWxyZWFkeSB0YWtlblwiOlwiU2F2ZVwiKSkpKSl9fV0pLHR9KCk7UmVxdWVzdFBhbmVsU2F2ZU1vZGFsLnByb3BUeXBlcz17c2hvdzpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYm9vbCxvbkhpZGU6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxvblN1Ym1pdDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLGV4aXN0aW5nQVBJRWxlbWVudHM6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLGFwaUVsZW1lbnQ6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLm9iamVjdCx1c2VybmFtZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuc3RyaW5nfTt2YXIgX2RlZmF1bHQ9X0F1dGguZGVmYXVsdC5jb25uZWN0KCkoUmVxdWVzdFBhbmVsU2F2ZU1vZGFsKTtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5kZWZhdWx0PXZvaWQgMDt2YXIgX3JlYWN0PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKSxfcHJvcFR5cGVzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInByb3AtdHlwZXNcIikpLF9SZXF1ZXN0PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL1JlcXVlc3RcIikpLF9TaW1wbGVBY2U9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9TaW1wbGVBY2VcIikpLF9JZnJhbWU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9JZnJhbWVcIikpLF9UYWJzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vVGFic1wiKSksX1RvZ2dsZUJ1dHRvbj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL1RvZ2dsZUJ1dHRvblwiKSksX05ld1V0aWxzPXJlcXVpcmUoXCIuL05ld1V0aWxzXCIpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgUmVzcG9uc2VWaWV3ZXI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciBlO3JldHVybiBfY2xhc3NDYWxsQ2hlY2sodGhpcyx0KSwoZT1fcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLF9nZXRQcm90b3R5cGVPZih0KS5jYWxsKHRoaXMpKSkub25JZnJhbWVMb2FkPWZ1bmN0aW9uKHQscil7dmFyIG89ci5kb2N1bWVudEVsZW1lbnQ7ZS5zZXRTdGF0ZSh7ZnVsbEhlaWdodDpvLnNjcm9sbEhlaWdodCszMH0pfSxlLnN0YXRlPXtvcGVuVGFiOm51bGwsd3JhcDohMX0sZX1yZXR1cm4gX2luaGVyaXRzKHQsX3JlYWN0LmRlZmF1bHQuUHVyZUNvbXBvbmVudCksX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJnZXRUYWJzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9W107cmV0dXJuXCJodG1sXCI9PT1lJiZ0LnB1c2goXCJQcmV2aWV3XCIpLFwiaHRtbFwiIT09ZSYmXCJ4bWxcIiE9PWUmJlwianNvblwiIT09ZSYmXCJqc29ucFwiIT09ZXx8dC5wdXNoKFwiUHJldHR5XCIpLHQucHVzaChcIlJhd1wiKSx0fX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcm9wcyx0PWUubWltZVR5cGUscj1lLmJvZHksbz1lLmJhc2VVcmwsYT10aGlzLnN0YXRlLndyYXAsbj1fUmVxdWVzdC5kZWZhdWx0LmdldENvbnRlbnRUeXBlKHQsciksaT10aGlzLmdldFRhYnMobiksdT1fU2ltcGxlQWNlLmRlZmF1bHQuZ2V0SGlnaGxpZ2h0TW9kZShuKSxsPXRoaXMuc3RhdGUub3BlblRhYnx8dGhpcy5wcm9wcy5kZWZhdWx0VGFifHxpWzBdO3JldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsbnVsbCxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInB1bGwtcmlnaHRcIn0sKFwiUHJldHR5XCI9PT1sfHxcIlJhd1wiPT09bCkmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1RvZ2dsZUJ1dHRvbi5kZWZhdWx0LHt2YWx1ZTphLG9uQ2hhbmdlOigwLF9OZXdVdGlscy51cGRhdGUpKHRoaXMsXCJ3cmFwXCIpfSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaVwiLHtjbGFzc05hbWU6XCJmYSBmYS1hbGlnbi1sZWZ0XCJ9KSxcIiBXcmFwIHRleHRcIikpLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1RhYnMuZGVmYXVsdCx7dGFiczppLHZhbHVlOmwsb25DaGFuZ2U6KDAsX05ld1V0aWxzLnVwZGF0ZSkodGhpcyxcIm9wZW5UYWJcIil9KSxcIlJhd1wiPT09bCYmX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLG51bGwsX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfU2ltcGxlQWNlLmRlZmF1bHQse29uQ2hhbmdlOnRoaXMub25Cb2R5Q2hhbmdlLG1vZGU6dSx2YWx1ZTpyLHJlYWRPbmx5OiEwLHdyYXBFbmFibGVkOmF9KSksXCJQcmV0dHlcIj09PWwmJl9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1NpbXBsZUFjZS5kZWZhdWx0LHttb2RlOnUsdmFsdWU6X1JlcXVlc3QuZGVmYXVsdC5nZXRQcmV0dHkobixyKSxyZWFkT25seTohMCx3cmFwRW5hYmxlZDphfSksXCJQcmV2aWV3XCI9PT1sJiZfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse3N0eWxlOntwb3NpdGlvbjpcInJlbGF0aXZlXCIsd2lkdGg6XCIxMDAlXCIsaGVpZ2h0OnRoaXMuc3RhdGUuZnVsbEhlaWdodH19LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0lmcmFtZS5kZWZhdWx0LHtrZXk6XCJpZnJhbWVcIix1c2VVcmw6ITEsaWZyYW1lSHRtbDpyLHJlcXVlc3RVcmw6byxvbkxvYWQ6dGhpcy5vbklmcmFtZUxvYWR9KSkpfX1dKSx0fSgpO2V4cG9ydHMuZGVmYXVsdD1SZXNwb25zZVZpZXdlcixSZXNwb25zZVZpZXdlci5wcm9wVHlwZXM9e2JvZHk6X3Byb3BUeXBlcy5kZWZhdWx0LnN0cmluZy5pc1JlcXVpcmVkLG1pbWVUeXBlOl9wcm9wVHlwZXMuZGVmYXVsdC5zdHJpbmcuaXNSZXF1aXJlZCxiYXNlVXJsOl9wcm9wVHlwZXMuZGVmYXVsdC5zdHJpbmcsZGVmYXVsdFRhYjpfcHJvcFR5cGVzLmRlZmF1bHQuc3RyaW5nfTsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9yZWFjdFNlbGVjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdC1zZWxlY3RcIikpLF9sb2Rhc2g9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoXCIpKSxfVXRpbGl0eT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9qcy9VdGlsaXR5XCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBfdHlwZW9mKGUpe3JldHVybihfdHlwZW9mPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBfZXh0ZW5kcygpe3JldHVybihfZXh0ZW5kcz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgcj1hcmd1bWVudHNbdF07Zm9yKHZhciBvIGluIHIpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIsbykmJihlW29dPXJbb10pfXJldHVybiBlfSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgUmVhY3RTZWxlY3RXaXRoQWRkPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgZSxyO19jbGFzc0NhbGxDaGVjayh0aGlzLHQpO2Zvcih2YXIgbz1hcmd1bWVudHMubGVuZ3RoLG49bmV3IEFycmF5KG8pLGE9MDthPG87YSsrKW5bYV09YXJndW1lbnRzW2FdO3JldHVybihyPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsKGU9X2dldFByb3RvdHlwZU9mKHQpKS5jYWxsLmFwcGx5KGUsW3RoaXNdLmNvbmNhdChuKSkpKS5zdGF0ZT17YWRkYWJsZVZhbHVlOm51bGx9LHIuX29uSW5wdXRDaGFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50cmltKCkudG9Mb3dlckNhc2UoKTshX1V0aWxpdHkuZGVmYXVsdC5ub3JtYWxpemVPcHRpb25zKHIucHJvcHMub3B0aW9ucykuc29tZShmdW5jdGlvbihlKXtyZXR1cm4gZS52YWx1ZT09PXR9KSYmdD9yLnNldFN0YXRlKHthZGRhYmxlVmFsdWU6dH0pOnIuc2V0U3RhdGUoe2FkZGFibGVWYWx1ZTpudWxsfSksci5wcm9wcy5vbklucHV0Q2hhbmdlJiZyLnByb3BzLm9uSW5wdXRDaGFuZ2UoZSl9LHIub25DaGFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9ci5wcm9wcy5vbkNoYW5nZTt0JiZ0KHtsYWJlbDplJiZlLmxhYmVsLHZhbHVlOmUmJmUudmFsdWV9KTt2YXIgbz1yLnByb3BzLm9uVmFsdWVDaGFuZ2U7byYmbyhlIGluc3RhbmNlb2YgQXJyYXk/X2xvZGFzaC5kZWZhdWx0Lm1hcChlLFwidmFsdWVcIik6ZS52YWx1ZSl9LHJ9cmV0dXJuIF9pbmhlcml0cyh0LF9yZWFjdC5kZWZhdWx0LkNvbXBvbmVudCksX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPV9sb2Rhc2guZGVmYXVsdC5jbG9uZSh0aGlzLnByb3BzKTtkZWxldGUgZS5vcHRpb25zLGRlbGV0ZSBlLm9uSW5wdXRDaGFuZ2U7dmFyIHQ9X2xvZGFzaC5kZWZhdWx0LmNsb25lRGVlcChfVXRpbGl0eS5kZWZhdWx0Lm5vcm1hbGl6ZU9wdGlvbnModGhpcy5wcm9wcy5vcHRpb25zKSkscj10aGlzLnN0YXRlLmFkZGFibGVWYWx1ZTtpZihudWxsIT09cil7dmFyIG89dGhpcy5wcm9wcy5tdWx0aT9cIkFkZFwiOlwiVXNlXCI7bys9JyBcIicuY29uY2F0KHIsJ1wiJyksdC5wdXNoKHtsYWJlbDpvLHZhbHVlOnJ9KX1yZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RTZWxlY3QuZGVmYXVsdCxfZXh0ZW5kcyh7fSxlLHtvcHRpb25zOnQsb25JbnB1dENoYW5nZTp0aGlzLl9vbklucHV0Q2hhbmdlLG9uQ2hhbmdlOnRoaXMub25DaGFuZ2V9KSl9fV0pLHR9KCk7UmVhY3RTZWxlY3RXaXRoQWRkLnByb3BUeXBlcz17b3B0aW9uczpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMub25lT2ZUeXBlKFtfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYXJyYXksX3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLm9iamVjdF0pLmlzUmVxdWlyZWQsb25JbnB1dENoYW5nZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYyxvbkNoYW5nZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYyxvblZhbHVlQ2hhbmdlOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5mdW5jLG11bHRpOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5ib29sfTt2YXIgX2RlZmF1bHQ9UmVhY3RTZWxlY3RXaXRoQWRkO2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBBY2VFZGl0b3IsX3JlYWN0PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKSxfcmVhY3RNZWFzdXJlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0LW1lYXN1cmVcIikpLF9sb2Rhc2g9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibG9kYXNoXCIpKSxfTmV3VXRpbHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9OZXdVdGlsc1wiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gX3R5cGVvZihlKXtyZXR1cm4oX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gX2V4dGVuZHMoKXtyZXR1cm4oX2V4dGVuZHM9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIHI9YXJndW1lbnRzW3RdO2Zvcih2YXIgbyBpbiByKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLG8pJiYoZVtvXT1yW29dKX1yZXR1cm4gZX0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07by5lbnVtZXJhYmxlPW8uZW51bWVyYWJsZXx8ITEsby5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG8ua2V5LG8pfX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSx0LHIpe3JldHVybiB0JiZfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxyJiZfZGVmaW5lUHJvcGVydGllcyhlLHIpLGV9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PV90eXBlb2YodCkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/X2Fzc2VydFRoaXNJbml0aWFsaXplZChlKTp0fWZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKGUpe3JldHVybihfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIF9pbmhlcml0cyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmX3NldFByb3RvdHlwZU9mKGUsdCl9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKGUsdCl7cmV0dXJuKF9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0pKGUsdCl9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmKEFjZUVkaXRvcj1yZXF1aXJlKFwicmVhY3QtYWNlXCIpLmRlZmF1bHQscmVxdWlyZShcImJyYWNlL21vZGUvcGhwXCIpLHJlcXVpcmUoXCJicmFjZS9tb2RlL2pzb25cIikscmVxdWlyZShcImJyYWNlL21vZGUvamF2YXNjcmlwdFwiKSxyZXF1aXJlKFwiYnJhY2UvbW9kZS9odG1sXCIpLHJlcXVpcmUoXCJicmFjZS9tb2RlL3htbFwiKSxyZXF1aXJlKFwiYnJhY2UvbW9kZS9tYXJrZG93blwiKSxyZXF1aXJlKFwiYnJhY2UvbW9kZS90ZXh0XCIpLHJlcXVpcmUoXCJicmFjZS9tb2RlL3NoXCIpLHJlcXVpcmUoXCJicmFjZS9tb2RlL3J1YnlcIikscmVxdWlyZShcImJyYWNlL21vZGUvcHl0aG9uXCIpLHJlcXVpcmUoXCJicmFjZS9tb2RlL2phdmFcIikscmVxdWlyZShcImJyYWNlL3RoZW1lL2Nocm9tZVwiKSxyZXF1aXJlKFwiYnJhY2UvZXh0L3NlYXJjaGJveFwiKSk7dmFyIFNpbXBsZUFjZT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIGUscjtfY2xhc3NDYWxsQ2hlY2sodGhpcyx0KTtmb3IodmFyIG89YXJndW1lbnRzLmxlbmd0aCxuPW5ldyBBcnJheShvKSxhPTA7YTxvO2ErKyluW2FdPWFyZ3VtZW50c1thXTtyZXR1cm4ocj1fcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLChlPV9nZXRQcm90b3R5cGVPZih0KSkuY2FsbC5hcHBseShlLFt0aGlzXS5jb25jYXQobikpKSkuc3RhdGU9e25hbWU6bnVsbH0sci5vbkNoYW5nZT1mdW5jdGlvbihlKXtyLnByb3BzLm9uQ2hhbmdlJiZyLnByb3BzLm9uQ2hhbmdlKHt0YXJnZXQ6e3ZhbHVlOmV9fSksci5wcm9wcy5vblZhbHVlQ2hhbmdlJiZyLnByb3BzLm9uVmFsdWVDaGFuZ2UoZSl9LHIuZ2V0QWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHIuX2VkaXRvci5lZGl0b3J9LHIub25NZWFzdXJlPWZ1bmN0aW9uKGUpe3ZhciB0PXIuX3ByZXZEaW1lbnNpb25zO3QmJnQud2lkdGg9PT1lLndpZHRoJiZ0LmhlaWdodD09PWUuaGVpZ2h0fHxyLl9lZGl0b3ImJnIuX2VkaXRvci5lZGl0b3IucmVzaXplKCEwKSxyLl9wcmV2RGltZW5zaW9ucz1lfSxyfXJldHVybiBfaW5oZXJpdHModCxfcmVhY3QuZGVmYXVsdC5QdXJlQ29tcG9uZW50KSxfY3JlYXRlQ2xhc3ModCxbe2tleTpcImNvbXBvbmVudFdpbGxNb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zZXRTdGF0ZSh7bmFtZTpcInNpbXBsZUFjZVwiLmNvbmNhdChNYXRoLmZsb29yKDFlNipNYXRoLnJhbmRvbSgpKSl9KSx0aGlzLmRlYm91bmNlZE9uTWVhc3VyZT1fbG9kYXNoLmRlZmF1bHQuZGVib3VuY2UodGhpcy5vbk1lYXN1cmUsMjAwKX19LHtrZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucHJvcHMubmFtZXx8dGhpcy5zdGF0ZS5uYW1lLHQ9dGhpcy5wcm9wcy5jbGFzc05hbWV8fFwiXCIscj1fbG9kYXNoLmRlZmF1bHQuY2xvbmUodGhpcy5wcm9wcyk7cmV0dXJuIHIuY29udGVudFR5cGUmJihyLm1vZGU9Z2V0SGlnaGxpZ2h0TW9kZShyLmNvbnRlbnRUeXBlKSxkZWxldGUgci5jb250ZW50VHlwZSksQWNlRWRpdG9yP19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0TWVhc3VyZS5kZWZhdWx0LHtvbk1lYXN1cmU6dGhpcy5kZWJvdW5jZWRPbk1lYXN1cmV9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQWNlRWRpdG9yLF9leHRlbmRzKHtyZWY6X05ld1V0aWxzLmRlZmF1bHQucmVnaXN0ZXJSZWYodGhpcyxcIl9lZGl0b3JcIiksd2lkdGg6XCJhdXRvXCIsZm9udFNpemU6MTR9LHIse25hbWU6ZSx0aGVtZTpcImNocm9tZVwiLGNsYXNzTmFtZTpcIndhLWZ1bGwtd2lkdGgtZm9yY2VkIFwiLmNvbmNhdCh0KSxlZGl0b3JQcm9wczp7JGJsb2NrU2Nyb2xsaW5nOiEwfSxzaG93UHJpbnRNYXJnaW46ITEsdGFiU2l6ZToyLHVzZVNvZnRUYWJzOiEwLG9uQ2hhbmdlOnRoaXMub25DaGFuZ2V9KSkpOm51bGx9fV0pLHR9KCk7ZnVuY3Rpb24gZ2V0SGlnaGxpZ2h0TW9kZShlKXtyZXR1cm5cImpzb25cIj09PWV8fFwianNvbnBcIj09PWU/XCJqYXZhc2NyaXB0XCI6XCJodG1sXCI9PT1lP1wiaHRtbFwiOlwieG1sXCI9PT1lP1wieG1sXCI6XCJ0ZXh0XCJ9U2ltcGxlQWNlLnByb3BUeXBlcz17bW9kZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuc3RyaW5nLGNvbnRlbnRUeXBlOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5zdHJpbmcsbmFtZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuc3RyaW5nLHZhbHVlOl9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5zdHJpbmcscmVhZE9ubHk6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmJvb2wsb25DaGFuZ2U6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmZ1bmMsb25WYWx1ZUNoYW5nZTpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuZnVuYyx3cmFwRW5hYmxlZDpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMuYm9vbCxjbGFzc05hbWU6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLnN0cmluZ30sU2ltcGxlQWNlLmdldEhpZ2hsaWdodE1vZGU9Z2V0SGlnaGxpZ2h0TW9kZTt2YXIgX2RlZmF1bHQ9U2ltcGxlQWNlO2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9VdGlsaXR5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2pzL1V0aWxpdHlcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgVGFicz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIGUscjtfY2xhc3NDYWxsQ2hlY2sodGhpcyx0KTtmb3IodmFyIG89YXJndW1lbnRzLmxlbmd0aCxuPW5ldyBBcnJheShvKSxhPTA7YTxvO2ErKyluW2FdPWFyZ3VtZW50c1thXTtyZXR1cm4ocj1fcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLChlPV9nZXRQcm90b3R5cGVPZih0KSkuY2FsbC5hcHBseShlLFt0aGlzXS5jb25jYXQobikpKSkub25DaGFuZ2U9ZnVuY3Rpb24oZSx0KXt0LnByZXZlbnREZWZhdWx0KCksci5wcm9wcy5vbkNoYW5nZShlKX0sci5kb05vdGhpbmdDYWxsYmFjaz1mdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKX0scn1yZXR1cm4gX2luaGVyaXRzKHQsX3JlYWN0LmRlZmF1bHQuQ29tcG9uZW50KSxfY3JlYXRlQ2xhc3ModCxbe2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PV9VdGlsaXR5LmRlZmF1bHQubm9ybWFsaXplT3B0aW9ucyh0aGlzLnByb3BzLnRhYnMpLHI9dGhpcy5wcm9wcy52YWx1ZSxvPXRoaXMucHJvcHMuY2xhc3NOYW1lfHxcIm5hdiBuYXYtdGFic1wiLG49dGhpcy5wcm9wcy5kaXNhYmxlZFRhYnM7cmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLHtjbGFzc05hbWU6byxyb2xlOlwibmF2aWdhdGlvblwifSx0Lm1hcChmdW5jdGlvbih0KXt2YXIgbz10LnZhbHVlLGE9dC5sYWJlbCxpPW51bGwscz1lLm9uQ2hhbmdlLmJpbmRNZW1vaXplZChlLG8pO3JldHVybiByPT09bz9pPVwiYWN0aXZlXCI6biYmLTEhPT1uLmluZGV4T2YobykmJihpPVwiZGlzYWJsZWRcIixzPWUuZG9Ob3RoaW5nQ2FsbGJhY2spLF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLHtrZXk6byxjbGFzc05hbWU6aSxcImRhdGEtdGFiXCI6b30sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImFcIix7aHJlZjpcIiNcIixvbkNsaWNrOnN9LGEpKX0pKX19XSksdH0oKTtUYWJzLnByb3BUeXBlcz17dGFiczpfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMub25lT2ZUeXBlKFtfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMub2JqZWN0LF9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5hcnJheV0pLmlzUmVxdWlyZWQsdmFsdWU6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLm9uZU9mVHlwZShbX3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLnN0cmluZyxfcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMubnVtYmVyLF9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5ib29sXSksb25DaGFuZ2U6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxkaXNhYmxlZFRhYnM6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLm9uZU9mVHlwZShbX3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLmFycmF5LF9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcy5vYmplY3RdKSxjbGFzc05hbWU6X3JlYWN0LmRlZmF1bHQuUHJvcFR5cGVzLnN0cmluZ307dmFyIF9kZWZhdWx0PVRhYnM7ZXhwb3J0cy5kZWZhdWx0PV9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksX05ld1V0aWxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vTmV3VXRpbHNcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIF90eXBlb2YoZSl7cmV0dXJuKF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLHQscil7cmV0dXJuIHQmJl9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJl9kZWZpbmVQcm9wZXJ0aWVzKGUsciksZX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9fYXNzZXJ0VGhpc0luaXRpYWxpemVkKGUpOnR9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YoZSl7cmV0dXJuKF9nZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gX2luaGVyaXRzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZfc2V0UHJvdG90eXBlT2YoZSx0KX1mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YoZSx0KXtyZXR1cm4oX3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX12YXIgUHJvcFR5cGVzPV9yZWFjdC5kZWZhdWx0LlByb3BUeXBlcyxUb2dnbGVCdXR0b249ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBfY2xhc3NDYWxsQ2hlY2sodGhpcyx0KSxfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLF9nZXRQcm90b3R5cGVPZih0KS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBfaW5oZXJpdHModCxfcmVhY3QuZGVmYXVsdC5QdXJlQ29tcG9uZW50KSxfY3JlYXRlQ2xhc3ModCxbe2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcm9wcy52YWx1ZSx0PXRoaXMucHJvcHMuY2xhc3NOYW1lLHI9dGhpcy5wcm9wcy5jaGlsZHJlbjtyZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLHtvbkNsaWNrOl9OZXdVdGlscy5kZWZhdWx0LnRvZ2dsZVByb3AodGhpcyxcIm9uQ2hhbmdlXCIsXCJ2YWx1ZVwiLG51bGwsITApLGNsYXNzTmFtZToodHx8XCJidG4gYnRuLWRlZmF1bHRcIikrKGU/XCIgYWN0aXZlXCI6XCJcIiksdHlwZTpcImJ1dHRvblwifSxyKX19XSksdH0oKTtUb2dnbGVCdXR0b24ucHJvcFR5cGVzPXt2YWx1ZTpQcm9wVHlwZXMuYm9vbCxvbkNoYW5nZTpQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLGNsYXNzTmFtZTpQcm9wVHlwZXMuc3RyaW5nLGNoaWxkcmVuOlByb3BUeXBlcy5ub2RlfTt2YXIgX2RlZmF1bHQ9VG9nZ2xlQnV0dG9uO2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpLF9OZXdVdGlscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL05ld1V0aWxzXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBfdHlwZW9mKGUpe3JldHVybihfdHlwZW9mPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07by5lbnVtZXJhYmxlPW8uZW51bWVyYWJsZXx8ITEsby5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG8ua2V5LG8pfX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSx0LHIpe3JldHVybiB0JiZfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxyJiZfZGVmaW5lUHJvcGVydGllcyhlLHIpLGV9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PV90eXBlb2YodCkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/X2Fzc2VydFRoaXNJbml0aWFsaXplZChlKTp0fWZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKGUpe3JldHVybihfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIF9pbmhlcml0cyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmX3NldFByb3RvdHlwZU9mKGUsdCl9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKGUsdCl7cmV0dXJuKF9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0pKGUsdCl9dmFyIFByb3BUeXBlcz1fcmVhY3QuZGVmYXVsdC5Qcm9wVHlwZXMsVmlkZW9Db250YWluZXI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciBlLHI7X2NsYXNzQ2FsbENoZWNrKHRoaXMsdCk7Zm9yKHZhciBvPWFyZ3VtZW50cy5sZW5ndGgsbj1uZXcgQXJyYXkobyksaT0wO2k8bztpKyspbltpXT1hcmd1bWVudHNbaV07cmV0dXJuKHI9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoZT1fZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwuYXBwbHkoZSxbdGhpc10uY29uY2F0KG4pKSkpLnN0YXRlPXtzaG93VmlkZW86ITF9LHIucGxheT1mdW5jdGlvbigpe3Iuc2V0U3RhdGUoe3Nob3dWaWRlbzohMH0pfSxyfXJldHVybiBfaW5oZXJpdHModCxfcmVhY3QuZGVmYXVsdC5QdXJlQ29tcG9uZW50KSxfY3JlYXRlQ2xhc3ModCxbe2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcm9wcy55b3V0dWJlSWQsdD10aGlzLnByb3BzLmltYWdlU3JjLHI9dGhpcy5zdGF0ZS5zaG93VmlkZW87cmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwid2EtcGFkMjBcIn0sX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJ3YS1ib3gtc2hhZG93MjBcIn0scj9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcIndhLXZpZGVvLWNvbnRhaW5lclwifSxfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIse3RpdGxlOlwiWW91dHViZSB2aWRlb1wiLHdpZHRoOlwiNTYwXCIsaGVpZ2h0OlwiMzE1XCIsc3JjOlwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvXCIuY29uY2F0KGUsXCI/cmVsPTAmYXV0b3BsYXk9MVwiKSxmcmFtZUJvcmRlcjpcIjBcIixhbGxvd0Z1bGxTY3JlZW46ITB9KSk6X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImFcIix7aHJlZjpcIiNwbGF5VmlkZW9cIixvbkNsaWNrOl9OZXdVdGlscy5kZWZhdWx0LnNldFN0YXRlKHRoaXMsXCJzaG93VmlkZW9cIiwhMCwhMCl9LF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIix7c3JjOnQsYWx0OlwiQ2xpY2sgdG8gcGxheSBXcmFwQVBJICsgUmVkZGl0IHZpZGVvXCIsY2xhc3NOYW1lOlwid2EtZnVsbC13aWR0aFwifSkpKSl9fV0pLHR9KCk7VmlkZW9Db250YWluZXIucHJvcFR5cGVzPXt5b3V0dWJlSWQ6UHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLGltYWdlU3JjOlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZH07dmFyIF9kZWZhdWx0PVZpZGVvQ29udGFpbmVyO2V4cG9ydHMuZGVmYXVsdD1fZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9d2l0aENocm9tZTt2YXIgX3JlYWN0PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKSxfQ2hyb21lPXJlcXVpcmUoXCIuLi8uLi9qcy9DaHJvbWVcIik7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gX3R5cGVvZihlKXtyZXR1cm4oX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gX2V4dGVuZHMoKXtyZXR1cm4oX2V4dGVuZHM9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIHI9YXJndW1lbnRzW3RdO2Zvcih2YXIgbiBpbiByKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLG4pJiYoZVtuXT1yW25dKX1yZXR1cm4gZX0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4ua2V5LG4pfX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSx0LHIpe3JldHVybiB0JiZfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxyJiZfZGVmaW5lUHJvcGVydGllcyhlLHIpLGV9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PV90eXBlb2YodCkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/X2Fzc2VydFRoaXNJbml0aWFsaXplZChlKTp0fWZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKGUpe3JldHVybihfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIF9pbmhlcml0cyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmX3NldFByb3RvdHlwZU9mKGUsdCl9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKGUsdCl7cmV0dXJuKF9zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0pKGUsdCl9ZnVuY3Rpb24gd2l0aENocm9tZShlKXtyZXR1cm4gZnVuY3Rpb24odCl7ZnVuY3Rpb24gcigpe3ZhciBlLHQ7X2NsYXNzQ2FsbENoZWNrKHRoaXMscik7Zm9yKHZhciBuPWFyZ3VtZW50cy5sZW5ndGgsbz1uZXcgQXJyYXkobiksaT0wO2k8bjtpKyspb1tpXT1hcmd1bWVudHNbaV07cmV0dXJuKHQ9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoZT1fZ2V0UHJvdG90eXBlT2YocikpLmNhbGwuYXBwbHkoZSxbdGhpc10uY29uY2F0KG8pKSkpLnN0YXRlPXtpc0Nocm9tZTohMSxpc0V4dGVuc2lvbkluc3RhbGxlZDohMX0sdH1yZXR1cm4gX2luaGVyaXRzKHIsX3JlYWN0LmRlZmF1bHQuUHVyZUNvbXBvbmVudCksX2NyZWF0ZUNsYXNzKHIsW3trZXk6XCJjb21wb25lbnREaWRNb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zZXRTdGF0ZSh7aXNDaHJvbWU6KDAsX0Nocm9tZS5pc0Nocm9tZSkoKSxpc0V4dGVuc2lvbkluc3RhbGxlZDooMCxfQ2hyb21lLmlzRXh0ZW5zaW9uSW5zdGFsbGVkKSgpfSl9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnN0YXRlLHI9dC5pc0Nocm9tZSxuPXQuaXNFeHRlbnNpb25JbnN0YWxsZWQ7cmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoZSxfZXh0ZW5kcyh7fSx0aGlzLnByb3BzLHtpc0Nocm9tZTpyLGlzRXh0ZW5zaW9uSW5zdGFsbGVkOm59KSl9fV0pLHJ9KCl9IiwiXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYmFzZTY0RW5jb2RlKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGJ0b2E/YnRvYShlKTpCdWZmZXIuZnJvbShlLFwidXRmOFwiKS50b1N0cmluZyhcImJhc2U2NFwiKX1mdW5jdGlvbiBiYXNlNjREZWNvZGUoZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgYXRvYj9hdG9iKGUpOkJ1ZmZlci5mcm9tKGUsXCJiYXNlNjRcIikudG9TdHJpbmcoXCJ1dGY4XCIpfW1vZHVsZS5leHBvcnRzPXtlbmNvZGU6YmFzZTY0RW5jb2RlLGRlY29kZTpiYXNlNjREZWNvZGV9OyIsIlwidXNlIHN0cmljdFwiO3ZhciBfbG9kYXNoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImxvZGFzaFwiKSksX2pzQmVhdXRpZnk9cmVxdWlyZShcImpzLWJlYXV0aWZ5XCIpLF9qc29uUG9pbnRlcj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJqc29uLXBvaW50ZXJcIikpLF9qc29ucGF0aD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJqc29ucGF0aFwiKSksX2pzZXA9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwianNlcFwiKSksX3VyaWpzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInVyaWpzXCIpKSxfY2hlZXJpbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJjaGVlcmlvXCIpKSxfbW9tZW50PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIm1vbWVudFwiKSksX250bG09X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwibnRsbVwiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gb3duS2V5cyhlLHQpe3ZhciByPU9iamVjdC5rZXlzKGUpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7dCYmKG49bi5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KS5lbnVtZXJhYmxlfSkpLHIucHVzaC5hcHBseShyLG4pfXJldHVybiByfWZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIHI9bnVsbCE9YXJndW1lbnRzW3RdP2FyZ3VtZW50c1t0XTp7fTt0JTI/b3duS2V5cyhPYmplY3QociksITApLmZvckVhY2goZnVuY3Rpb24odCl7X2RlZmluZVByb3BlcnR5KGUsdCxyW3RdKX0pOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMocikpOm93bktleXMoT2JqZWN0KHIpKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyLHQpKX0pfXJldHVybiBlfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShlLHQscil7cmV0dXJuIHQgaW4gZT9PYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTpyLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVt0XT1yLGV9ZnVuY3Rpb24gX3R5cGVvZihlKXtyZXR1cm4oX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gbWVtb2l6ZU1SVShlLHQpe3Q9dHx8MTt2YXIgcj1bXTtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIG49YXJndW1lbnRzLmxlbmd0aCxhPW5ldyBBcnJheShuKSxvPTA7bzxuO28rKylhW29dPWFyZ3VtZW50c1tvXTtmb3IodmFyIHU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSksaT0wO2khPT1yLmxlbmd0aDtpKyspe3ZhciBzPXJbaV07aWYoX2xvZGFzaC5kZWZhdWx0LmlzRXF1YWwocy5hcmdzLHUpKXJldHVybiBzLnJlc3VsdH12YXIgbD1lLmFwcGx5KHZvaWQgMCxhKTtyZXR1cm4gci5sZW5ndGg+PXQmJnIuc2hpZnQoKSxyLnB1c2goe2FyZ3M6dSxyZXN1bHQ6bH0pLGx9fW1vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c7ZnVuY3Rpb24gcihlLHQpe3ZhciByO2lmKCEoZSBpbnN0YW5jZW9mIFJlZ0V4cCkmJlwib2JqZWN0XCI9PT1fdHlwZW9mKGUpKXtpZighZS5wYXR0ZXJuKXJldHVybltdO3RyeXtlPW5ldyBSZWdFeHAoZS5wYXR0ZXJuLGUubW9kaWZpZXJzKX1jYXRjaChlKXtyZXR1cm5bXX19aWYoZS5nbG9iYWwpe2Zvcih2YXIgbj1bXSxhPTA7bnVsbCE9PShyPWUuZXhlYyh0KSkmJmErKzwxZTQ7KW4ucHVzaChyKTtyZXR1cm4gbn1yZXR1cm4gbnVsbCE9KHI9ZS5leGVjKHQpKT9bcl06W119dmFyIG49e2JvZHk6XCJcIixjaGVlcmlvOm51bGx9LGE9e307ZnVuY3Rpb24gbyhlLHIpe3ZhciBvPWFbZV07b3x8KG89X2NoZWVyaW8uZGVmYXVsdC5sb2FkKGUpLHQmJihhW2VdPW8pKSxuLmJvZHk9ZSxuLmNoZWVyaW89bzt2YXIgdT1bXTtyZXR1cm4gbyhyKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGUsdD1vKHRoaXMpO3UucHVzaCh7aHRtbDpvLmh0bWwodCksdGV4dDp0LnRleHQoKSxhdHRyaWJzOnRbMF0uYXR0cmlicyx0YWdOYW1lOnQuZ2V0KDApLnRhZ05hbWUsaW5kZXg6KGU9dFswXSxmdW5jdGlvbiBlKHQpe2lmKCF0KXJldHVybltdO2Zvcih2YXIgcj0wO3QucHJldmlvdXNTaWJsaW5nOyl0PXQucHJldmlvdXNTaWJsaW5nLHIrKzt2YXIgbj1lKHQucGFyZW50KTtyZXR1cm4gbi5wdXNoKHIpLG59KGUpLmpvaW4oXCIuXCIpKX0pfSksdX1mdW5jdGlvbiB1KGUsdCl7dmFyIHI9dC5vdXRwdXRzLG49W107aWYoX2xvZGFzaC5kZWZhdWx0LmZvck93bihyLGZ1bmN0aW9uKHQscil7Zm9yKHZhciBhPXQuZGF0YS5jc3NTZWxlY3Rvcix1PV9vYmplY3RTcHJlYWQoe30sdCx7ZGF0YTpfb2JqZWN0U3ByZWFkKHt9LHQuZGF0YSx7bnVtVG9TZWxlY3Q6XCJhbGxcIn0pfSksaT1oKGUsdSkscz1fbG9kYXNoLmRlZmF1bHQubWFwKG8oZSxhKSxcImluZGV4XCIpLGw9MDtsIT09cy5sZW5ndGg7bCsrKW4ucHVzaCh7bmFtZTpyLHZhbHVlOmlbbF0saW5kZXg6c1tsXX0pfSksMD09PW4ubGVuZ3RoKXJldHVybiBudWxsO24uc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1lLnNwbGl0KFwiLlwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlSW50KGUsMTApfSksbj10LnNwbGl0KFwiLlwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlSW50KGUsMTApfSksYT1NYXRoLm1pbihyLmxlbmd0aCxuLmxlbmd0aCksbz0wO28hPT1hO28rKylpZihyW29dIT09bltvXSlyZXR1cm4gcltvXS1uW29dO3JldHVybiByLmxlbmd0aC1uLmxlbmd0aH0oZS5pbmRleCx0LmluZGV4KX0pO2Zvcih2YXIgYT1bXSx1PXt9LGk9MDtpIT09bi5sZW5ndGg7aSsrKXt2YXIgcz1uW2ldO3Vbcy5uYW1lXSYmKGEucHVzaCh1KSx1PXt9KSx1W3MubmFtZV09cy52YWx1ZX1yZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmlzRW1wdHkodSl8fGEucHVzaCh1KSxhfWZ1bmN0aW9uIGkoZSl7cmV0dXJuKG5ldyBfdXJpanMuZGVmYXVsdCkucXVlcnkoZSkucXVlcnkoKX1mdW5jdGlvbiBzKGUsdCl7dmFyIHI9dC5jc3NTZWxlY3RvcixuPVtdLGE9X2NoZWVyaW8uZGVmYXVsdC5sb2FkKGUpO3RyeXtuPWEocil9Y2F0Y2goZSl7cmV0dXJuIG51bGx9aWYoMD09PW4ubGVuZ3RofHxcImZvcm1cIiE9PW4uZmlyc3QoKS5wcm9wKFwidGFnTmFtZVwiKS50b0xvd2VyQ2FzZSgpKXJldHVybiBudWxsO3ZhciBvPW4uZmlyc3QoKSx1PW8uYXR0cihcIm1ldGhvZFwiKTt1PV9sb2Rhc2guZGVmYXVsdC5pc1N0cmluZyh1KT91LnRvTG93ZXJDYXNlKCkudHJpbSgpOlwiZ2V0XCI7dmFyIGk9by5hdHRyKFwiYWN0aW9uXCIpO19sb2Rhc2guZGVmYXVsdC5pc1N0cmluZyhpKXx8KGk9XCJcIik7dmFyIHM9by5zZXJpYWxpemVBcnJheSgpLGw9X2xvZGFzaC5kZWZhdWx0LnppcE9iamVjdChfbG9kYXNoLmRlZmF1bHQubWFwKHMsXCJuYW1lXCIpLF9sb2Rhc2guZGVmYXVsdC5tYXAocyxcInZhbHVlXCIpKSxjPXt9O3JldHVyblwicG9zdFwiPT09dXx8XCJwdXRcIj09PXV8fFwiZGVsZXRlXCI9PT11fHxcIm9wdGlvbnNcIj09PXU/KGMucG9zdD1sLGMuZ2V0PW5ldyBfdXJpanMuZGVmYXVsdChpKS5xdWVyeSghMCkpOmMuZ2V0PXMsY31mdW5jdGlvbiBsKGUsdCl7dmFyIHI9cyhlLHQpO2lmKCFyKXJldHVybiBudWxsO3ZhciBuLGE9e3Bvc3RQYXJhbXM6ci5wb3N0P2koci5wb3N0KTpcIlwiLGdldFBhcmFtczpyLmdldD9pKHIuZ2V0KTpcIlwifTtyZXR1cm4gbj1KU09OLnN0cmluZ2lmeShhKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBidG9hP2J0b2Eobik6QnVmZmVyLmZyb20obixcInV0ZjhcIikudG9TdHJpbmcoXCJiYXNlNjRcIil9ZnVuY3Rpb24gYyhlLHQpe3JldHVybiBfbG9kYXNoLmRlZmF1bHQuaXNTdHJpbmcoZSl8fChlPUpTT04uc3RyaW5naWZ5KGUpKSxcInJlZ2V4XCI9PT10Lm1hdGNoRW5naW5lP2Z1bmN0aW9uKGUsdCl7dmFyIG49dCxhPW4ucmVnZXgsbz1hLnBhdHRlcm4sdT1hLm1vZGlmaWVycyxpPW5ldyBSZWdFeHAobyx1KSxzPS0xIT09dS5pbmRleE9mKFwiZ1wiKSxsPVtdLGM9ZTtyZXR1cm5cInByZXR0eVwiPT09bi5tYXRjaE9uJiYoYz1JKG51bGwsZSkpLG8mJihsPXIoaSxjKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGVbbi5ncm91cF19KSksMD09PWwubGVuZ3RoP251bGw6cyYmIW4uYWxsTWF0Y2hlcz9sW24ubWF0Y2hdOnM/bDpsWzBdfShlLHQuZGF0YSk6XCJjc3NcIj09PXQubWF0Y2hFbmdpbmU/ZnVuY3Rpb24oZSx0KXt2YXIgcj10LG49ci5jc3NTZWxlY3RvcixhPVtdO3RyeXthPW8oZSxuKX1jYXRjaChlKXtyZXR1cm4gbnVsbH1cImZpcnN0XCI9PT1yLm51bVRvU2VsZWN0JiYoYT1hLnNsaWNlKDAsMSkpO3ZhciB1PWEubWFwKGZ1bmN0aW9uKGUpe2lmKFwidGV4dFwiPT09ci5jYXB0dXJlVHlwZSlyZXR1cm4gZS50ZXh0O2lmKFwiaHRtbFwiPT09ci5jYXB0dXJlVHlwZSlyZXR1cm4gZS5odG1sO2lmKFwiYXR0cmlidXRlXCI9PT1yLmNhcHR1cmVUeXBlKXJldHVybiBlLmF0dHJpYnNbci5hdHRyc1RvU2VsZWN0WzBdXTt2YXIgdD17fTtyZXR1cm4gci5hdHRyc1RvU2VsZWN0LmZvckVhY2goZnVuY3Rpb24ocil7dFtyXT1lLmF0dHJpYnNbcl19KSxyLm9iamVjdEluY2x1ZGVUZXh0JiYodC5pbm5lclRleHQ9ZS50ZXh0KSxyLm9iamVjdEluY2x1ZGVIdG1sJiYodC5pbm5lckhUTUw9ZS5odG1sKSx0fSk7cmV0dXJuIDA9PT11Lmxlbmd0aD9udWxsOlwiZmlyc3RcIj09PXIubnVtVG9TZWxlY3Q/dVswXTp1fShlLHQuZGF0YSk6XCJjb2xsZWN0aW9uXCI9PT10Lm1hdGNoRW5naW5lP3UoZSx0LmRhdGEpOlwianNvblwiPT09dC5tYXRjaEVuZ2luZT9mdW5jdGlvbihlLHQpe3ZhciByO2lmKEwobnVsbCxlKSlyPU0oZSk7ZWxzZXtpZighRChudWxsLGUpKXJldHVybiBudWxsO3I9SlNPTi5wYXJzZShlKX12YXIgbj10LGE9bi5zZWxlY3RvclR5cGUsbz1uLmpzb25TZWxlY3RvcjtpZihcImpzb25Qb2ludGVyXCI9PT1hKXRyeXtyZXR1cm4gX2pzb25Qb2ludGVyLmRlZmF1bHQuZ2V0KHIsbyl9Y2F0Y2goZSl7cmV0dXJuIG51bGx9ZWxzZSBpZihcImpzb25QYXRoXCI9PT1hfHxcImpzb25QYXRoRmlyc3RPbmx5XCI9PT1hKXt2YXIgdT1bXTt0cnl7dT1fanNvbnBhdGguZGVmYXVsdC5xdWVyeShyLG8pfWNhdGNoKGUpe3JldHVybiBudWxsfXJldHVybiAwPT09dS5sZW5ndGg/bnVsbDpcImpzb25QYXRoXCI9PT1hP3U6dVswXX1yZXR1cm4gbnVsbH0oZSx0LmRhdGEpOlwiZm9ybVwiPT09dC5tYXRjaEVuZ2luZT9sKGUsdC5kYXRhKTpudWxsfWZ1bmN0aW9uIGYoZSx0LHIpe3ZhciBuPXt9O3JldHVybiBfbG9kYXNoLmRlZmF1bHQuZm9yRWFjaChlLGZ1bmN0aW9uKGUsYSl7dmFyIG89aChyLGUsdCk7XCJyZXF1aXJlZE1hdGNoXCIhPT1lLnR5cGUmJihuW2FdPW8pfSksbn1mdW5jdGlvbiBwKGUsdCl7aWYobnVsbD09ZSlyZXR1cm4gZTtpZih0JiZ0LnR5cGUpe3ZhciByPWZ1bmN0aW9uKGUpe3ZhciByPXQudHlwZSxuPXQub3B0aW9ucztzd2l0Y2gocil7Y2FzZVwidHJpbVwiOnJldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlP19sb2Rhc2guZGVmYXVsdC50cmltKGUpOmU7Y2FzZVwiZXh0cmFjdE51bWJlclwiOmlmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXt2YXIgYT1lLm1hdGNoKC9cXGQrKFxcLlxcZCspPy8pO3JldHVybiBudWxsPT09YT9udWxsOnBhcnNlRmxvYXQoYVswXSl9cmV0dXJuIGU7Y2FzZVwiZGF0ZVwiOnZhciBvO3JldHVybihvPW4mJm4uZm9ybWF0PygwLF9tb21lbnQuZGVmYXVsdCkoZSxuLmZvcm1hdCk6KDAsX21vbWVudC5kZWZhdWx0KShlKSkuaXNWYWxpZCgpP286bnVsbDtjYXNlXCJib29sXCI6cmV0dXJuISFlfXJldHVybiBlfTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmlzQXJyYXkoZSk/ZS5tYXAocik6cihlKX1yZXR1cm4gZX1mdW5jdGlvbiBkKGUsdCxyKXt2YXIgbjtpZihyJiYoXCJyZXF1aXJlZE91dHB1dFwiPT09KG49dC50eXBlKXx8XCJyZXF1aXJlZE1hdGNoXCI9PT1uKSYmbnVsbD09ZSYmci5wdXNoKFwiVGhlIHJlcXVpcmVkIFwiKyhcInJlcXVpcmVkT3V0cHV0XCI9PT10LnR5cGU/XCJvdXRwdXRcIjpcIm1hdGNoXCIpKycgXCInK3QubmFtZSsnXCIgZGlkIG5vdCBtYXRjaCB3aXRoaW4gdGhlIHJlc3BvbnNlJyksbnVsbCE9ZSYmKGU9cChlLHQuY2xlYW51cCksIV9sb2Rhc2guZGVmYXVsdC5pc0VtcHR5KHQuY2hpbGRyZW4pKSl7dmFyIGE9dC5jaGlsZHJlbjtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmlzQXJyYXkoZSk/ZS5tYXAoZi5iaW5kKHRoaXMsYSxyKSk6ZihhLHIsZSl9cmV0dXJuIGV9ZnVuY3Rpb24gaChlLHQscil7cmV0dXJuIGQoYyhlLHQpLHQscil9ZnVuY3Rpb24gbShlLHQpe3JldHVyblwiaGVhZGVyXCI9PT10Lm1hdGNoRW5naW5lP2Z1bmN0aW9uKGUsdCl7dmFyIHI9dCxuPXIucmVzcG9uc2UsYT1yLmtleS50b0xvd2VyQ2FzZSgpLG89bnVsbCE9bj9lW25dOmVbZS5sZW5ndGgtMV07cmV0dXJuIG8/VihvLmhlYWRlcnMpW2FdOm51bGx9KGUsdC5kYXRhKTpcImNvb2tpZVwiPT09dC5tYXRjaEVuZ2luZT9mdW5jdGlvbihlLHQpe3ZhciByLG49dCxhPW4ucmVzcG9uc2Usbz1uLmFsbFJlc3BvbnNlcyx1PW4ua2V5O2lmKG8pe2Zvcih2YXIgaT1lLmxlbmd0aC0xO2k+PTA7aS0tKWlmKChyPVYoRihfbG9kYXNoLmRlZmF1bHQuZ2V0KGVbaV0sW1wiaGVhZGVyc1wiLFwic2V0LWNvb2tpZVwiXSkpKSlbdV0pcmV0dXJuIHJbdV0uZGF0YX1lbHNlIGlmKChyPVYoRihfbG9kYXNoLmRlZmF1bHQuZ2V0KGVbYV0sW1wiaGVhZGVyc1wiLFwic2V0LWNvb2tpZVwiXSkpKSlbdV0pcmV0dXJuIHJbdV0uZGF0YTtyZXR1cm4gbnVsbH0oZSx0LmRhdGEpOmMoZSYmMCE9PWUubGVuZ3RoJiZlW2UubGVuZ3RoLTFdLmJvZHl8fFwiXCIsdCl9ZnVuY3Rpb24geShlLHQpe3ZhciByPXtzdWNjZXNzOiEwLG1lc3NhZ2VzOltdLGRhdGE6e319LG49dC5vdXRwdXRzO3JldHVybiBfbG9kYXNoLmRlZmF1bHQuZm9yRWFjaChuLGZ1bmN0aW9uKHQpe3ZhciBuPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZChtKGUsdCksdCxyKX0oZSx0LHIubWVzc2FnZXMpO1wicmVxdWlyZWRNYXRjaFwiIT09dC50eXBlJiYoci5kYXRhW3QubmFtZV09bil9KSwwIT09ci5tZXNzYWdlcy5sZW5ndGg/KHIuc3VjY2Vzcz0hMSxyKTpyfWZ1bmN0aW9uIHYoZSx0LHIpe3ZhciBuPXtzdWNjZXNzOiExLG91dHB1dFNjZW5hcmlvOm51bGwsZGF0YTpudWxsfTtpZih0KWZvcih2YXIgYT0wO2EhPT10Lmxlbmd0aDthKyspe3ZhciBvPXRbYV0sdT15KGUucmVzcG9uc2VzLG8pO2lmKHUuc3VjY2VzcyYmKG4uc3VjY2Vzcz0hMCxuLmRhdGE9dS5kYXRhLG4uc3RhdGVUb2tlbj1lLnN0YXRlVG9rZW4sbi5jb29raWVzPWUuY29va2llcyxuLm91dHB1dFNjZW5hcmlvPW8ubmFtZSwhcikpYnJlYWs7ciYmci5wdXNoKHUpfXJldHVybiBuLnN1Y2Nlc3N8fChuLm1lc3NhZ2VzPVtcIk5vbmUgb2YgdGhlIG91dHB1dCBzY2VuYXJpb3MgbWF0Y2hlZC4gU2VlIHRoZSByYXcgZGF0YSByZWNlaXZlZCBpbiByYXdEYXRhXCJdLG4uZXJyVHlwZXM9W1wibm9NYXRjaGVkT3V0cHV0U2NlbmFyaW9cIl0sbi5yYXdEYXRhPWUpLG59ZnVuY3Rpb24gZyhyLG4sYSl7cmV0dXJuIHQ/ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPVtcIlhNTEhUVFBSZXF1ZXN0ID0gbnVsbDtcIix0K1wiO1wiLFwib25tZXNzYWdlID0gZnVuY3Rpb24oZSkge1wiLFwiICB2YXIgZGF0YSA9IGUuZGF0YTtcIixcIiAgdmFyIHByb2Nlc3NlZCA9IFwiK3IrXCI7XCIsXCIgIHBvc3RNZXNzYWdlKHByb2Nlc3NlZCk7XCIsXCJ9O1wiXS5qb2luKFwiXFxuXCIpO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0LHIpe3ZhciBhPW5ldyBXb3JrZXIoVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbbl0se3R5cGU6XCJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0XCJ9KSkpO2Eub25lcnJvcj1mdW5jdGlvbihlKXtyKHttZXNzYWdlOmUubWVzc2FnZSxsaW5lbm86ZS5saW5lbm8sY29sbm86ZS5jb2xubyxzdGFjazpudWxsLG5hbWU6bnVsbH0pfSxhLm9ubWVzc2FnZT1mdW5jdGlvbihlKXt0KGUuZGF0YSl9LGEucG9zdE1lc3NhZ2UoZSl9KX0ocixuLGEpOmUucnVuU2FuZGJveGVkKHIsbixhKX1mdW5jdGlvbiBfKGUsdCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PXtzY3JpcHQ6dCxlbmFibGVkOiEwfSksdCYmdC5lbmFibGVkP2coZSx0LnNjcmlwdCxcInBvc3RQcm9jZXNzKGRhdGEub3V0cHV0LCBkYXRhLmlucHV0KVwiKTpQcm9taXNlLnJlc29sdmUoZS5vdXRwdXQpfWZ1bmN0aW9uIGIoZSx0KXt2YXIgcj1bXCJkYXRhLmV4cHJlc3Npb25zLm1hcChmdW5jdGlvbihleHByKSB7XCIsXCIgIHZhciBpbnB1dCA9IGRhdGEuaW5wdXQ7XCIsXCIgIHJldHVybiBldmFsKGV4cHIpO1wiLFwifSlcIl0uam9pbihcIlxcblwiKTtyZXR1cm4gZyhlLHQscikudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmZyb21QYWlycyh0Lm1hcChmdW5jdGlvbih0LHIpe3JldHVybltlLmV4cHJlc3Npb25zW3JdLHRdfSkpfSl9ZnVuY3Rpb24geChlLHQpe3JldHVybiBlLnBvc3RQcm9jZXNzRXJyb3I9X2xvZGFzaC5kZWZhdWx0Lm9taXQodCxcInN0YWNrXCIpLGUuc3VjY2Vzcz0hMSxlLm1lc3NhZ2U9XCJUaGUgc2NyaXB0IHJldHVybmVkIGFuIGVycm9yOiBcIit0Lm1lc3NhZ2UsZS5vcmlnRGF0YT1lLmRhdGEsZGVsZXRlIGUuZGF0YSxlfWZ1bmN0aW9uIHcoZSl7dmFyIHQ9e307cmV0dXJuIGZ1bmN0aW9uIGUocixuKXtfbG9kYXNoLmRlZmF1bHQuZm9yRWFjaChyLGZ1bmN0aW9uKHIsYSl7dmFyIG89KG4/bitcIi5cIjpcIlwiKSthO1wib2JqZWN0XCI9PT1fdHlwZW9mKHIpP2UocixvKTp0W29dPXJ9KX0oZSxcIlwiKSx0fWZ1bmN0aW9uIEUoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBBcnJheSYmMCE9PWUubGVuZ3RoJiZlLmV2ZXJ5KF9sb2Rhc2guZGVmYXVsdC5pc09iamVjdCl9ZnVuY3Rpb24gaihlLHQpe3JldHVybiBmdW5jdGlvbiBlKHQscil7c3dpdGNoKHQudHlwZSl7Y2FzZVwiTGl0ZXJhbFwiOnJldHVybiB0LnZhbHVlO2Nhc2VcIklkZW50aWZpZXJcIjppZih2b2lkIDA9PT1yW3QubmFtZV0pdGhyb3cgbmV3IEVycm9yKHQubmFtZStcIiBpcyBub3QgZGVmaW5lZFwiKTtyZXR1cm4gclt0Lm5hbWVdO2Nhc2VcIk1lbWJlckV4cHJlc3Npb25cIjp2YXIgbjtuPXQuY29tcHV0ZWQ/ZSh0LnByb3BlcnR5LHIpOnQucHJvcGVydHkubmFtZTt2YXIgYT1lKHQub2JqZWN0LHIpO2lmKG51bGw9PWEpdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHJlYWQgcHJvcGVydHkgXCIrbitcIiBvZiBcIithKTtyZXR1cm4gYVtuXTtjYXNlXCJCaW5hcnlFeHByZXNzaW9uXCI6dmFyIG89ZSh0LmxlZnQsciksdT1lKHQucmlnaHQscik7c3dpdGNoKHQub3BlcmF0b3Ipe2Nhc2VcIitcIjpyZXR1cm4gbyt1O2Nhc2VcIi1cIjpyZXR1cm4gby11O2Nhc2VcIi9cIjpyZXR1cm4gby91O2Nhc2VcIiVcIjpyZXR1cm4gbyV1O2Nhc2VcIipcIjpyZXR1cm4gbyp1O2Nhc2VcIiYmXCI6cmV0dXJuIG8mJnU7Y2FzZVwifHxcIjpyZXR1cm4gb3x8dTtjYXNlXCImXCI6cmV0dXJuIG8mdTtjYXNlXCJ8XCI6cmV0dXJuIG98dTtjYXNlXCJeXCI6cmV0dXJuIG9edTtjYXNlXCI8PFwiOnJldHVybiBvPDx1O2Nhc2VcIj4+XCI6cmV0dXJuIG8+PnU7Y2FzZVwiPj4+XCI6cmV0dXJuIG8+Pj51O2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBvcGVyYXRvciBzeW1ib2w6IFwiK3Qub3BlcmF0b3IpfWRlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBleHByZXNzaW9uIG9mIHR5cGUgXCIrdC50eXBlKX19KCgwLF9qc2VwLmRlZmF1bHQpKGUpLHQpfWZ1bmN0aW9uIFMoZSx0KXt0PXR8fHt9O3RyeXtcIm9iamVjdFwiIT09X3R5cGVvZihlKSYmKGU9KDAsX2pzZXAuZGVmYXVsdCkoZSkpfWNhdGNoKGUpe3JldHVybiBlLm1lc3NhZ2V9c3dpdGNoKGUudHlwZSl7Y2FzZVwiSWRlbnRpZmllclwiOmNhc2VcIkxpdGVyYWxcIjpyZXR1cm4gbnVsbDtjYXNlXCJNZW1iZXJFeHByZXNzaW9uXCI6cmV0dXJuIFMoZS5vYmplY3QsdCl8fFMoZS5wcm9wZXJ0eSx0KTtjYXNlXCJDYWxsRXhwcmVzc2lvblwiOnJldHVybiB0LmFsbG93RnVuY3Rpb25DYWxsP251bGw6XCJZb3UgY2FuJ3QgY2FsbCBmdW5jdGlvbnNcIjtjYXNlXCJCaW5hcnlFeHByZXNzaW9uXCI6cmV0dXJuIHQuYWxsb3dCaW5hcnlFeHByZXNzaW9uP1MoZS5sZWZ0LHQpfHxTKGUucmlnaHQsdCk6XCJZb3UgY2FuJ3QgdXNlIHRoZSBvcGVyYXRvciBcXFwiXCIrZS5vcGVyYXRvcisnXCInO2RlZmF1bHQ6cmV0dXJuXCJVbmV4cGVjdGVkIGV4cHJlc3Npb24gb2YgdHlwZSBcIitlLnR5cGV9fWZ1bmN0aW9uIE8oZSx0KXt2YXIgcj0odD10fHx7fSkuYWxsb3dGdW5jdGlvbkNhbGwsbj10LmFsbG93QmluYXJ5RXhwcmVzc2lvbjtmdW5jdGlvbiBhKGUpe3JldHVybihlLm1haW4/W2UubWFpbl06W10pLmNvbmNhdChlLmFkZGl0aW9uYWwpfXZhciBvPWZ1bmN0aW9uIGUodCxvKXtzd2l0Y2godC50eXBlKXtjYXNlXCJJZGVudGlmaWVyXCI6cmV0dXJue21haW46W3QubmFtZV0sYWRkaXRpb25hbDpbXX07Y2FzZVwiTGl0ZXJhbFwiOnJldHVybnttYWluOm8/bnVsbDpbdC52YWx1ZV0sYWRkaXRpb25hbDpbXX07Y2FzZVwiTWVtYmVyRXhwcmVzc2lvblwiOnZhciB1PWUodC5vYmplY3QpLGk9ZSh0LnByb3BlcnR5KTtpZih0LmNvbXB1dGVkJiZcIkxpdGVyYWxcIiE9PXQucHJvcGVydHkudHlwZSl7dmFyIHM9W3UubWFpbl07cmV0dXJuIGkubWFpbiYmcy5wdXNoKGkubWFpbikse21haW46bnVsbCxhZGRpdGlvbmFsOnM9cy5jb25jYXQoaS5hZGRpdGlvbmFsKX19cmV0dXJue21haW46dS5tYWluP3UubWFpbi5jb25jYXQoaS5tYWluKTpudWxsLGFkZGl0aW9uYWw6dS5hZGRpdGlvbmFsLmNvbmNhdChpLmFkZGl0aW9uYWwpfTtjYXNlXCJDYWxsRXhwcmVzc2lvblwiOmlmKCFyKXRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgZXhwcmVzc2lvbiBvZiB0eXBlIFwiK3QudHlwZSk7dmFyIGw9dC5hcmd1bWVudHM/X2xvZGFzaC5kZWZhdWx0LmZsYXR0ZW4odC5hcmd1bWVudHMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBhKGUodCkpfSkpOltdLGM9YShlKHQuY2FsbGVlKSk7cmV0dXJue21haW46bnVsbCxhZGRpdGlvbmFsOmwuY29uY2F0KGMpfTtjYXNlXCJCaW5hcnlFeHByZXNzaW9uXCI6aWYoIW4pdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBleHByZXNzaW9uIG9mIHR5cGUgXCIrdC50eXBlKTt2YXIgZj1hKGUodC5sZWZ0LCEwKSkscD1hKGUodC5yaWdodCwhMCkpO3JldHVybnttYWluOm51bGwsYWRkaXRpb25hbDpmLmNvbmNhdChwKX07ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIGV4cHJlc3Npb24gb2YgdHlwZSBcIit0LnR5cGUpfX0oKDAsX2pzZXAuZGVmYXVsdCkoZSksITApO3JldHVybiBvLmFkZGl0aW9uYWwuY29uY2F0KG8ubWFpbj9bby5tYWluXTpbXSl9ZnVuY3Rpb24gcShlKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGUpLnJlcGxhY2UoLyUyMC9nLFwiK1wiKX1mdW5jdGlvbiBQKGUpe3ZhciB0PXt9O2Z1bmN0aW9uIHIoZSl7ZSBpbnN0YW5jZW9mIEFycmF5JiZlLmZvckVhY2goZnVuY3Rpb24oZSl7XCJleHByZXNzaW9uXCI9PT1lLnR5cGUmJih0W2UuZXhwcmVzc2lvbl09bnVsbCl9KX1yZXR1cm4gZS5wb3N0RGF0YSYmXCJwYXJhbXNcIj09PWUucG9zdERhdGEudHlwZSYmcihlLnBvc3REYXRhLmRhdGEpLHIoZS5oZWFkZXJzKSxyKGUucXVlcnlTdHJpbmcpLF9sb2Rhc2guZGVmYXVsdC5rZXlzKHQpfWZ1bmN0aW9uIFQoZSl7Zm9yKHZhciB0PS9cXHtcXHsoW159XSs/KVxcfVxcfS9nLHI9W10sbj0wLGE9bnVsbDthPXQuZXhlYyhlKTspYS5pbmRleD5uJiZyLnB1c2goe3R5cGU6XCJzdHJpbmdcIixkYXRhOmUuc3Vic3RyKG4sYS5pbmRleC1uKSxzdGFydDpufSksci5wdXNoKHt0eXBlOlwiZXhwcmVzc2lvblwiLGRhdGE6YVsxXSxzdGFydDphLmluZGV4fSksbj1hLmluZGV4K2FbMF0ubGVuZ3RoO3JldHVybiBuIT09ZS5sZW5ndGgmJnIucHVzaCh7dHlwZTpcInN0cmluZ1wiLGRhdGE6ZS5zdWJzdHIobiksc3RhcnQ6bn0pLHJ9ZnVuY3Rpb24gTihlLHQscil7cmV0dXJuKFwic3RyaW5nXCI9PXR5cGVvZiBlP1QoZSk6ZSkubWFwKGZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCI9PT1lLnR5cGUpcmV0dXJuIGUuZGF0YTt0cnl7dmFyIG49aihlLmRhdGEsdCk7cmV0dXJuIHI/cihuKTpufWNhdGNoKGUpe3JldHVyblwiXCJ9fSkuam9pbihcIlwiKX1mdW5jdGlvbiBDKGUsdCl7KHQ9dHx8e30pLmFsbG93QmluYXJ5RXhwcmVzc2lvbj1udWxsPT10LmFsbG93QmluYXJ5RXhwcmVzc2lvbnx8dC5hbGxvd0JpbmFyeUV4cHJlc3Npb247dmFyIHI9XCJzdHJpbmdcIj09dHlwZW9mIGU/VChlKTplO3JldHVybiBfbG9kYXNoLmRlZmF1bHQudW5pcVdpdGgoX2xvZGFzaC5kZWZhdWx0LmZsYXR0ZW4oci5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuXCJleHByZXNzaW9uXCI9PT1lLnR5cGU/TyhlLmRhdGEsdCk6W119KSksX2xvZGFzaC5kZWZhdWx0LmlzRXF1YWwpfWZ1bmN0aW9uIFIoZSl7cmV0dXJuXCJjb25zdGFudFwiPT09ZS50eXBlfHxcIm5ld1wiPT09ZS50eXBlJiYwPT09VChlLnZhbHVlKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJleHByZXNzaW9uXCI9PT1lLnR5cGV9KS5sZW5ndGh9ZnVuY3Rpb24gayhlKXt2YXIgdCxyPXtwb3N0Ont9LGdldDp7fX07aWYoZSl0cnl7dmFyIG49SlNPTi5wYXJzZSgodD1lLFwiZnVuY3Rpb25cIj09dHlwZW9mIGF0b2I/YXRvYih0KTpCdWZmZXIuZnJvbSh0LFwiYmFzZTY0XCIpLnRvU3RyaW5nKFwidXRmOFwiKSkpO3IucG9zdD0oMCxfdXJpanMuZGVmYXVsdCkoKS5xdWVyeShuLnBvc3RQYXJhbXMpLnF1ZXJ5KCEwKSxyLmdldD0oMCxfdXJpanMuZGVmYXVsdCkoKS5xdWVyeShuLmdldFBhcmFtcykucXVlcnkoITApfWNhdGNoKGUpe31yZXR1cm4gcn1mdW5jdGlvbiBEKGUsdCl7dHJ5e3JldHVybiBKU09OLnBhcnNlKHQpLCEwfWNhdGNoKGUpe3JldHVybiExfX1mdW5jdGlvbiBMKGUsdCl7dmFyIHI9dC5tYXRjaCgvXlxccyooPzpbQS1aYS16XyRdW1xcd18kXSopP1xccypcXCgoW1xcc1xcU10qKVxcKVxccyo7P1xccyokLyk7dHJ5e3JldHVybiBKU09OLnBhcnNlKHJbMV0pLCEwfWNhdGNoKGUpe3JldHVybiExfX1mdW5jdGlvbiBNKGUpe3ZhciB0PWUubWF0Y2goL15cXHMqKD86W0EtWmEtel8kXVtcXHdfJF0qKT9cXHMqXFwoKFtcXHNcXFNdKilcXClcXHMqOz9cXHMqJC8pO3JldHVybiBKU09OLnBhcnNlKHRbMV0pfWZ1bmN0aW9uIEIoZSx0KXtyZXR1cm4gZSYmLTEhPT1lLmluZGV4T2YoXCJodG1sXCIpfHwtMSE9PXQuc2VhcmNoKC88KGJvZHl8YnJ8ZGl2fGVtfGZvcm18aFsxLTZdfGhlYWR8aHRtbHxpZnJhbWV8aW1nfGlucHV0fGxpfGxpbmt8b2x8c2NyaXB0fHNlbGVjdHxzcGFufHN0cm9uZ3xzdHlsZXx0YWJsZXx0ZXh0YXJlYXx1bCkvKX1mdW5jdGlvbiBBKGUsdCl7cmV0dXJuIGUmJi0xIT09ZS5pbmRleE9mKFwieG1sXCIpfHwtMSE9PXQuaW5kZXhPZihcIjw/eG1sXCIpfWZ1bmN0aW9uIEooZSx0KXtyZXR1cm4gRCgwLHQpP1wianNvblwiOkwoMCx0KT9cImpzb25wXCI6QihlLHQpP1wiaHRtbFwiOkEoZSx0KT9cInhtbFwiOm51bGx9dmFyIHo9e30sVT1udWxsLEg9bnVsbDtmdW5jdGlvbiBJKGUscil7dmFyIG49eltyXTtpZihuKXJldHVybiBuO2lmKHI9PT1VKXJldHVybiBIO3ZhciBhPXI7c3dpdGNoKFwianNvblwiPT09ZXx8XCJodG1sXCI9PT1lfHxcInhtbFwiPT09ZXx8XCJqc29ucFwiPT09ZT9lOkooZSxyKSl7Y2FzZVwianNvbnBcIjphPUpTT04uc3RyaW5naWZ5KE0ociksbnVsbCwyKTticmVhaztjYXNlXCJqc29uXCI6YT1KU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKHIpLG51bGwsMik7YnJlYWs7Y2FzZVwiaHRtbFwiOmNhc2VcInhtbFwiOmE9KGE9KDAsX2pzQmVhdXRpZnkuaHRtbCkocix7aW5kZW50X3NpemU6Mn0pKS5yZXBsYWNlKC9cXG5cXHMrXFxuL2csXCJcXG5cIil9cmV0dXJuIHQ/eltyXT1hOihVPXIsSD1hKSxhfWZ1bmN0aW9uICQoZSl7cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5jaGFpbihlLnNwbGl0KFwiO1wiKSkubWFwKF9sb2Rhc2guZGVmYXVsdC50cmltKS5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdChcIj1cIik7cmV0dXJuW3RbMF0sdFsxXV19KS5mcm9tUGFpcnMoKS52YWx1ZSgpfWZ1bmN0aW9uIEYoZSl7cmV0dXJuIGU/X2xvZGFzaC5kZWZhdWx0LmZyb21QYWlycyhlLm1hcChmdW5jdGlvbihlKXt2YXIgdD0kKGUpLHI9X2xvZGFzaC5kZWZhdWx0LmtleXModClbMF07cmV0dXJuW3IsX2xvZGFzaC5kZWZhdWx0LnNldCh0LFwiZGF0YVwiLHRbcl0pXX0pKTp7fX1mdW5jdGlvbiBWKGUpe3JldHVybiBfbG9kYXNoLmRlZmF1bHQuZnJvbVBhaXJzKF9sb2Rhc2guZGVmYXVsdC5tYXAoZSxmdW5jdGlvbihlLHQpe3JldHVyblt0LnRvTG93ZXJDYXNlKCksZV19KSl9cmV0dXJue21hdGNoUmVnZXg6cixtYXRjaEZvcm1PdXRwdXRSYXc6cyxtYXRjaE91dHB1dDpjLG1hdGNoVG9wTGV2ZWxPdXRwdXQ6bSxydW5DbGVhbnVwOnAscnVuT3V0cHV0OmgscnVuT3V0cHV0U2NlbmFyaW86eSxydW5PdXRwdXRTY2VuYXJpb3M6dixydW5PdXRwdXRTY2VuYXJpb3NBbmRQb3N0UHJvY2VzczpmdW5jdGlvbihlLHQscixuLGEpe3ZhciBvPXYoZSx0LGEpO2lmKG8uc3VjY2VzcyYmcil7dmFyIHU9e291dHB1dDpvLGlucHV0Om59O3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXtfKHUscikudGhlbihmdW5jdGlvbih0KXtlKHQpfSkuY2F0Y2goZnVuY3Rpb24odCl7ZSh4KG8sdCkpfSl9KX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG8pfSxhcHBseVBvc3RQcm9jZXNzOl8saXNDb2xsZWN0aW9uOkUsaGFzQ29sbGVjdGlvbjpmdW5jdGlvbihlKXtyZXR1cm4gZSYmX2xvZGFzaC5kZWZhdWx0LnNvbWUoZSxFKX0sY29sbGVjdGlvblRvVGFibGU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1cImRlZmF1bHRcImluKHQ9dHx8e30pP3QuZGVmYXVsdDpcIlwiLG49IShcImluY2x1ZGVIZWFkZXJzXCJpbiB0JiYhdC5pbmNsdWRlSGVhZGVycyksYT1lLm1hcCh3KSxvPV9sb2Rhc2guZGVmYXVsdC5jaGFpbihhKS5tYXAoX2xvZGFzaC5kZWZhdWx0LmtleXMpLmZsYXR0ZW4oKS51bmlxKCkudmFsdWUoKSx1PV9sb2Rhc2guZGVmYXVsdC5mcm9tUGFpcnMoby5tYXAoZnVuY3Rpb24oZSx0KXtyZXR1cm5bZSx0XX0pKSxpPWEubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PV9sb2Rhc2guZGVmYXVsdC5maWxsKEFycmF5KG8ubGVuZ3RoKSxyKTtyZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmZvckVhY2goZSxmdW5jdGlvbihlLHIpe3RbdVtyXV09ZX0pLHR9KTtyZXR1cm4gbj9bb10uY29uY2F0KGkpOml9LHRhYmxlVG9DU1Y6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4nXCInK2UucmVwbGFjZSgvXCIvZywnXCJcIicpKydcIid9KS5qb2luKFwiLFwiKX0pLmpvaW4oXCJcXHJcXG5cIil9LGFwcGx5QnJhbmNoaW5nRnVuY3Rpb246ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZyhlLHQsXCJicmFuY2goZGF0YS5vdXRwdXQsIGRhdGEuaW5wdXQpXCIpfSxhcHBseVZlcnRleFBvc3RQcm9jZXNzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGcoZSx0LFwicG9zdFByb2Nlc3MoZGF0YS5vdXRwdXQsIGRhdGEuaW5wdXQpXCIpfSxhcHBseUlucHV0SGVscGVyU2NyaXB0OmIsYWRkU2FuZGJveGVkU2NyaXB0RXJyb3I6eCxldmFsVmFyaWFibGVFeHByZXNzaW9uOmosZ2V0RXhwcmVzc2lvblRva2VuczpPLGdldEV4cHJlc3Npb25HbG9iYWxzOmZ1bmN0aW9uKGUsdCl7dmFyIHI9TyhlLHQpO3JldHVybiBfbG9kYXNoLmRlZmF1bHQudW5pcShfbG9kYXNoLmRlZmF1bHQubWFwKHIsMCkpfSxnZXRJbnB1dEV4cHJlc3Npb25zOlAscGFyc2VDdXJseUV4cHJlc3Npb246VCxnZXRDdXJseUV4cHJlc3Npb25FcnJvcjpmdW5jdGlvbihlLHQpeyh0PXR8fHt9KS5hbGxvd0JpbmFyeUV4cHJlc3Npb249bnVsbD09dC5hbGxvd0JpbmFyeUV4cHJlc3Npb258fHQuYWxsb3dCaW5hcnlFeHByZXNzaW9uO2Zvcih2YXIgcj1cInN0cmluZ1wiPT10eXBlb2YgZT9UKGUpOmUsbj0wO24hPT1yLmxlbmd0aDtuKyspe3ZhciBhPXJbbl07aWYoXCJleHByZXNzaW9uXCI9PT1hLnR5cGUpe3ZhciBvPVMoYS5kYXRhKTtpZihvKXJldHVyblwie3tcIithLmRhdGErXCJ9fSBpcyBpbnZhbGlkOiBcIitvfX1yZXR1cm4gbnVsbH0sZ2V0Q3VybHlFeHByZXNzaW9uVG9rZW5zOkMsZXZhbEN1cmx5RXhwcmVzc2lvbjpOLG1ha2VSZXFQYXJhbXM6ZnVuY3Rpb24oZSxyLG4sYSl7dmFyIG89YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0/YXJndW1lbnRzWzRdOnt9LHU9ZS51cmwsaT1lLm1ldGhvZCxzPWUucG9zdERhdGEsbD1lLnF1ZXJ5U3RyaW5nLGM9ZS5oZWFkZXJzLGY9ZS5zY3JpcHQscD1lLmF1dGhvcml6YXRpb24sZD17fSxoPVtdLG09e30seT17fTtpZihlLmlucHV0cyYmcil7dmFyIHY9X2xvZGFzaC5kZWZhdWx0LmNoYWluKGUuaW5wdXRzKS5tYXAoZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT1yW3RdKXtpZihcImZpbGVcIj09PWUudHlwZSl7dmFyIG49clt0XTtpZighKG4mJm4uY29udGVudCYmbi5maWxlTmFtZSYmbi5taW1lVHlwZSkpcmV0dXJuIGUucmVxdWlyZWQmJih5W3RdPSEwKSxudWxsO2lmKCEvXltBLVphLXowLTkrLz1dKiQvLnRlc3Qobi5jb250ZW50KSlyZXR1cm4gaC5wdXNoKFwiVGhlIGZpbGUgaW5wdXQgXCIrdCtcIiBoYWQgbm9uLUJhc2U2NC1lbmNvZGVkIGNvbnRlbnRcIiksbnVsbH1yZXR1cm5bdCxyW3RdXX1yZXR1cm4hZS5yZXF1aXJlZCYmZS5kZWZhdWx0RW5hYmxlZD9bdCxlLmRlZmF1bHRdOihlLnJlcXVpcmVkJiYobVt0XT0hMCxcImZpbGVcIj09PWUudHlwZSYmKHlbdF09ITApKSxudWxsKX0pLmZpbHRlcigpLnZhbHVlKCk7ZD1fbG9kYXNoLmRlZmF1bHQuZnJvbVBhaXJzKHYpfXZhciBnPWsoYSk7eT1fbG9kYXNoLmRlZmF1bHQuYXNzaWduKHksZnVuY3Rpb24oZSx0LHIpe2lmKF9sb2Rhc2guZGVmYXVsdC5pc0VtcHR5KGUucG9zdCkmJl9sb2Rhc2guZGVmYXVsdC5pc0VtcHR5KGUuZ2V0KSlyZXR1cm4gdDtmdW5jdGlvbiBuKGUpe3N3aXRjaChlLnR5cGUpe2Nhc2VcInZhcmlhYmxlXCI6cmV0dXJuW2UudmFyTmFtZV07Y2FzZVwibmV3XCI6cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC51bmlxKF9sb2Rhc2guZGVmYXVsdC5tYXAoQyhlLnZhbHVlKSwwKSk7Y2FzZVwiZmlsZVwiOnJldHVybltlLnZhck5hbWVdfXJldHVybltdfXZhciBhPXtwb3N0Ont9LGdldDp7fX07XCJwYXJhbXNcIj09PXIucG9zdERhdGEudHlwZSYmci5wb3N0RGF0YS5kYXRhLmZvckVhY2goZnVuY3Rpb24oZSl7YS5wb3N0W2UubmFtZV09bihlKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19KX0pLHIucXVlcnlTdHJpbmcuZm9yRWFjaChmdW5jdGlvbihlKXthLmdldFtlLm5hbWVdPW4oZSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSl9KSxfbG9kYXNoLmRlZmF1bHQuZm9yRWFjaChlLmdldCxmdW5jdGlvbihlLHQpe2RlbGV0ZSBhLmdldFt0XX0pLF9sb2Rhc2guZGVmYXVsdC5mb3JFYWNoKGUucG9zdCxmdW5jdGlvbihlLHQpe2RlbGV0ZSBhLnBvc3RbdF19KTt2YXIgbz17fTtmdW5jdGlvbiB1KGUpe29bZV09ITB9cmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5mb3JFYWNoKGEuZ2V0LGZ1bmN0aW9uKGUpe2UuZm9yRWFjaCh1KX0pLF9sb2Rhc2guZGVmYXVsdC5mb3JFYWNoKGEucG9zdCxmdW5jdGlvbihlKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7b1tlXT0hMH0pfSksb30oZyxtLGUpKSxfbG9kYXNoLmRlZmF1bHQuZm9yRWFjaCh5LGZ1bmN0aW9uKGUsdCl7aC5wdXNoKCdUaGUgaW5wdXQgXCInK3QrJ1wiIGlzIHJlcXVpcmVkLicpfSk7dmFyIF89e21ldGhvZDppLnRvVXBwZXJDYXNlKCksaGVhZGVyczp7fSxqYXI6bixmb2xsb3dSZWRpcmVjdDohMX0seD1QKGUpLHc9Zj9mLmNvZGU6XCJcIixFPVByb21pc2UucmVzb2x2ZSh7fSk7cmV0dXJuIDAhPT14Lmxlbmd0aCYmKEU9Yih7ZXhwcmVzc2lvbnM6eCxpbnB1dDpfbG9kYXNoLmRlZmF1bHQuY2xvbmVEZWVwKGQpfSx3KSksRS50aGVuKGZ1bmN0aW9uKHIpe2Z1bmN0aW9uIG4oZSl7c3dpdGNoKGUudHlwZSl7Y2FzZVwiY29uc3RhbnRcIjpyZXR1cm4gZS5kYXRhO2Nhc2VcInZhcmlhYmxlXCI6cmV0dXJuIGRbZS52YXJOYW1lXTtjYXNlXCJleHByZXNzaW9uXCI6cmV0dXJuIHJbZS5leHByZXNzaW9uXTtjYXNlXCJuZXdcIjpyZXR1cm4gaShlLnZhbHVlKTtjYXNlXCJmaWxlXCI6dmFyIHQ9ZFtlLnZhck5hbWVdO3JldHVybiB0JiZ0LmNvbnRlbnQmJnQubWltZVR5cGUmJnQuZmlsZU5hbWU/e3ZhbHVlOkJ1ZmZlci5mcm9tKHQuY29udGVudCxcImJhc2U2NFwiKSxvcHRpb25zOntmaWxlbmFtZTp0LmZpbGVOYW1lLGNvbnRlbnRUeXBlOnQubWltZVR5cGV9fTp2b2lkIDB9cmV0dXJuIG51bGx9dmFyIGE9T2JqZWN0LmFzc2lnbihkLHt3cmFwQVBJSW5wdXRzOmR9KTtmdW5jdGlvbiBpKGUsdCl7cmV0dXJuIE4oZSxhLHQpfXU9aSh1KSxfLnVybD11O3ZhciBmPV9sb2Rhc2guZGVmYXVsdC5tYXAoZS5pbnB1dHMsXCJ0eXBlXCIpLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuXCJmaWxlXCI9PT1lfSk7aWYocylpZihcInBhcmFtc1wiIT09cy50eXBlfHxfbG9kYXNoLmRlZmF1bHQuaXNFbXB0eShzLmRhdGEpKXtpZihcImpzb25cIj09PXMudHlwZXx8XCJ0ZXh0XCI9PT1zLnR5cGUpe3ZhciBtPVwianNvblwiPT09cy50eXBlfHxcInRleHRcIj09PXMudHlwZT9zLmRhdGE6XCJcIjtcImpzb25cIj09PXMudHlwZT8oXy5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdPVwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiLG09aShtLEpTT04uc3RyaW5naWZ5KSk6XCJ0ZXh0XCI9PT1zLnR5cGUmJihfLmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl09XCJ0ZXh0L3BsYWluXCIsbT1pKG0pKSxfLmJvZHk9bX19ZWxzZXtfLmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl09Zj9cIm11bHRpcGFydC9mb3JtLWRhdGFcIjpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiO3ZhciB5PXt9O3MuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1IoZSkmJih5W2koZS5uYW1lKV09bihlKSl9KSxfbG9kYXNoLmRlZmF1bHQuZm9yRWFjaChnLnBvc3QsZnVuY3Rpb24oZSx0KXshZSYmeVt0XXx8KHlbdF09ZSl9KSxzLmRhdGEuZm9yRWFjaChmdW5jdGlvbihlKXtSKGUpfHwoeVtpKGUubmFtZSldPW4oZSkpfSksZj8oX2xvZGFzaC5kZWZhdWx0LmZvckVhY2goeSxmdW5jdGlvbihlLHQpe3ZvaWQgMD09PWUmJmRlbGV0ZSB5W3RdfSksXy5mb3JtRGF0YT15KTpfLmZvcm09KDAsX3VyaWpzLmRlZmF1bHQpKCkucXVlcnkoeSkubm9ybWFsaXplUXVlcnkoKS5xdWVyeSgpfXZhciB2PXt9O2lmKHApaWYoXCJudGxtXCI9PT1wLm1vZGUmJnAubnRsbSl7dmFyIGI9cC5udGxtLHg9Yi51c2VybmFtZSx3PWIucGFzc3dvcmQsRT1iLmRvbWFpbjtpZihvLm50bG1SZXNwb25zZSl7aWYoIV8udXJsKXRocm93IG5ldyBFcnJvcihcIldlIGNhbm5vdCBjcmVhdGUgYSBOVExNIHJlc3BvbnNlIHdpdGhvdXQgYSBVUkxcIik7di5BdXRob3JpemF0aW9uPXQ/XCJOVExNIFBsYWNlaG9sZGVyUmVzcG9uc2VIZWFkZXI9PVwiOl9udGxtLmRlZmF1bHQucmVzcG9uc2VIZWFkZXIoby5udGxtUmVzcG9uc2UsXy51cmwsRT9pKEUpOlwid3JhcGFwaS5jb21cIixpKHgpLGkodykpfWVsc2Ugdi5BdXRob3JpemF0aW9uPXQ/XCJOVExNIFBsYWNlaG9sZGVyQ2hhbGxlbmdlSGVhZGVyPT1cIjpfbnRsbS5kZWZhdWx0LmNoYWxsZW5nZUhlYWRlcihcIndyYXBhcGlcIixFP2koRSk6XCJ3cmFwYXBpLmNvbVwiKX1lbHNlIGlmKFwiYmFzaWNcIj09PXAubW9kZSYmcC5iYXNpYyl7dmFyIGo9cC5iYXNpYyxTPWoudXNlcm5hbWUsTz1qLnBhc3N3b3JkO3YuQXV0aG9yaXphdGlvbj1CdWZmZXIuZnJvbShcIlwiLmNvbmNhdChpKFMpLFwiOlwiKS5jb25jYXQoaShPKSksXCJ1dGY4XCIpLnRvU3RyaW5nKFwiYmFzZTY0XCIpfWlmKGMmJmMuZm9yRWFjaChmdW5jdGlvbihlKXtpZihcIjpcIiE9PWUubmFtZVswXSl7dmFyIHQ9aShlLm5hbWUpO1wiY29udGVudC10eXBlXCI9PT10LnRvTG93ZXJDYXNlKCkmJmRlbGV0ZSBfLmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0sXCJhdXRob3JpemF0aW9uXCI9PT10LnRvTG93ZXJDYXNlKCkmJnYuQXV0aG9yaXphdGlvbnx8KHZbdF09bihlKSl9fSksXy5oZWFkZXJzPU9iamVjdC5hc3NpZ24oXy5oZWFkZXJzLHYpLGwpe3ZhciBQPXt9O2wuZm9yRWFjaChmdW5jdGlvbihlKXtSKGUpJiYoUFtxKGkoZS5uYW1lKSldPXEobihlKSkpfSksX2xvZGFzaC5kZWZhdWx0LmZvckVhY2goZy5nZXQsZnVuY3Rpb24oZSx0KXt2YXIgcj1xKHQpOyFlJiZQW3JdfHwoUFtyXT1xKGUpKX0pLGwuZm9yRWFjaChmdW5jdGlvbihlKXtSKGUpfHwoUFtxKGkoZS5uYW1lKSldPXEobihlKSkpfSksXy5xcz1QLF8ucXNTdHJpbmdpZnlPcHRpb25zPXtlbmNvZGU6ITF9fXZhciBUPXtzdWNjZXNzOjA9PT1oLmxlbmd0aCxyZXFQYXJhbXM6X307cmV0dXJuIGgmJihULmVycm9ycz1oKSxUfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoZS5zdGFjaykse3N1Y2Nlc3M6ITEscmVxUGFyYW1zOm51bGwsZXJyb3JzOltcIldlIGVuY291bnRlcmVkIGFuIGVycm9yIHdoZW4gZXZhbHVhdGluZyBpbnB1dCBleHByZXNzaW9uczogXCIrZS5tZXNzYWdlXX19KX0scXVlcnlTZWxlY3RvckFsbE9uU3RyaW5nOm8scGFyc2VIZWFkZXJTdHJpbmc6JCxwYXJzZUNvb2tpZXM6Rixpc0hUTUw6Qixpc1hNTDpBLGlzSlNPTjpELGlzSlNPTlA6TCxnZXRKU09OUDpNLGlzSlNPTmFibGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gRCgwLHQpfHxMKDAsdCl9LGdldEpTT05hYmxlOm1lbW9pemVNUlUoZnVuY3Rpb24oZSl7cmV0dXJuIEwoMCxlKT9NKGUpOkpTT04ucGFyc2UoZSl9KSxnZXRDb250ZW50VHlwZTpKLGdldFByZXR0eTpJfX07IiwiIl19
