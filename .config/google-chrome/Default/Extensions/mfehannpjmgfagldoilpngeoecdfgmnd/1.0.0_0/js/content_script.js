(()=>{"use strict";let e=[];chrome.runtime.onMessage.addListener((function(o,s,n){if("loadComments"===o.type){const o=t();return e=o,n(e),!0}if("scrollTo"===o.type){const t=e[Number(o.index)];if(t){const o=t.comment.getBoundingClientRect().top+window.pageYOffset+-128;return window.scrollTo({top:o,behavior:"smooth"}),e.forEach((e=>{e.comment.style="box-shadow: 0px 0px 0px 0px"})),t.comment.style="box-shadow: 0px 0px 0px 1.5px #2BA44E;",n(t),!0}}return!0}));const t=()=>{const e=[],t=document.getElementsByClassName("timeline-comment comment"),s=["👍","😄","🎉","🚀","❤️"];return Array.from(t).forEach((t=>{const o=t.getElementsByClassName("social-reaction-summary-item");let n=0;Array.from(o).forEach((e=>{let t=e.innerText.split("\n"),o=t[0],m=Number(t[1]);s.includes(o)&&(n+=m)}));const m=Date.parse(t.getElementsByClassName("js-timestamp")[0].children[0].getAttribute("datetime"));e.push({comment:t,upvotes:n,timestamp:m})})),o(e),e},o=e=>{e.sort((function(e,t){var o=e.upvotes-t.upvotes;return 0!==o?o:e.timestamp-t.timestamp})).reverse()}})();