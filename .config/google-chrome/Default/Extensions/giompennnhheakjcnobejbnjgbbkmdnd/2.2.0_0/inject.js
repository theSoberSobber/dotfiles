(()=>{const e="giompennnhheakjcnobejbnjgbbkmdnd";let o="";const t=e=>{let o;if("local"===e)o=window.localStorage;else{if("session"!==e)return[];o=window.sessionStorage}return Object.keys(o).sort().map(t=>({key:t,type:e,value:o.getItem(t)}))};if(!document.getElementById(e)&&(window.addEventListener("message",({data:e})=>{const s=chrome.runtime.connect();"proxy"===e.source&&"syncStorage"===e.event&&s.postMessage({origin:location.origin,hostname:location.hostname,local:t("local"),session:t("session"),timestamp:Date.now()}),s.disconnect(),o=location.origin},!1),chrome.runtime.onMessage.addListener((t,s)=>{if(s.id===e)if("popup"===t.source){if("remove"===t.event)switch(t.type){case"local":localStorage.removeItem(t.key);break;case"session":sessionStorage.removeItem(t.key)}else if("removeAll"===t.event)switch(t.type){case"local":localStorage.clear();break;case"session":sessionStorage.clear()}else if("edit"===t.event)switch(t.type){case"local":localStorage.setItem(t.key,t.value);break;case"session":sessionStorage.setItem(t.key,t.value)}else if("add"===t.event)switch(t.type){case"local":localStorage.setItem(t.key,t.value);break;case"session":sessionStorage.setItem(t.key,t.value)}else if("popup2"===t.event){const s=t.tabId,n=window.open(`/${e}-popup2.html`,e,"toolbar=yes, scrollbars=yes, resizable=yes, width=640, height=600");setTimeout(()=>{n.document.open(),n.document.write(`<style>*{padding:0;margin:0;}</style><iframe id="${e}-popup2" style="position:absolute;top:0;left:0;z-index:99999;height:100%;width:100%;" src="chrome-extension://${e}/popup.html#popup2|${o}|${s}"></iframe>`),n.document.close()},1400)}}else"popup2"===t.source&&"syncStorage"===t.event&&window.postMessage({source:"proxy",event:"syncStorage"},location.origin)}),!document.getElementById(e+"-popup2"))){const o=document.createElement("iframe");o.id=e,o.src=`${location.origin}/${e}-proxy.html`,o.style.display="none",o.onload=()=>{try{const e=o.contentWindow.document,t="<script>const onchange = () => {window.parent.postMessage({source: 'proxy', event: 'syncStorage', origin: location.origin}, location.origin);};window.addEventListener(\"storage\", onchange, false);<\/script>";e.write(t)}catch(e){setInterval(()=>{window.postMessage({source:"proxy",event:"syncStorage",origin:location.origin},location.origin)},1e3)}},document.body.appendChild(o)}window.postMessage({source:"proxy",event:"syncStorage"},location.origin)})();